groups:
  - name: kelmah-basic
    rules:
      - alert: HighGatewayErrorRate
        expr: sum(rate(http_server_errors_total{service="api-gateway"}[5m])) > 5
        for: 10m
        labels:
          severity: warning
        annotations:
          summary: High error rate on API Gateway
          description: API Gateway 5xx error rate is above 5/min for 10m.
      - alert: HighPaymentErrorRate
        expr: sum(rate(http_server_errors_total{service="payment-service"}[5m])) > 3
        for: 10m
        labels:
          severity: warning
        annotations:
          summary: High error rate on Payment Service
          description: Payment service is returning elevated 5xx.

