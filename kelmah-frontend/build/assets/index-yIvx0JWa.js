import{r as l,u as Oe,j as e,h as Zt,i as ot,N as Dl,L as Fe,l as je,R as Rt,H as Fr,k as Jt,m as Cr,n as Il,M as Zi,o as eo,p as Wn,P as Tn,q as Rl,s as Fl,t as ts,v as De,x as Wl,y as Tl,z as El,B as Ml,E as zl}from"./vendor_react-B4krij1a.js";import{at as Xe,au as Se,av as Vt,aw as to,ax as Ll,ay as $l,P as Y,az as ge,aA as Bt,aB as ro,aC as Bl,aD as so,aE as ao,aF as no,aG as io,aH as _l,aI as Hs,aJ as Nl,aK as Ol,aL as Jl,aM as Hn,j as wt,aN as Ul,aO as Hl,q as En,aP as Gl,t as Vl,w as ql,H as Yl,aQ as Kl,aR as Xl}from"./vendor-C9T7PseJ.js";import{S as Wt,A as be,u as ve,B as o,I as ne,a as mt,d as oo,b as Gn,c as we,e as Ql,M as Xt,f as Z,g as P,h as lo,s as he,i as Vn,j as E,k as Te,T as Oa,l as Zl,m as a,n as xe,o as ec,p as tc,q as Ot,N as yr,L as Ze,D as co,r as Ie,t as Ja,v as uo,w as fe,x as rc,C as ye,G as h,y as sc,z as ac,E as nc,F as ic,H as et,J as xo,R as Qe,K as ee,O as ho,P as lr,Q as Ke,U as Be,V as rt,W as gi,X as oc,Y as bi,Z as ji,_ as fi,$ as po,a0 as Ds,a1 as lc,a2 as cc,a3 as dc,a4 as uc,a5 as se,a6 as xc,a7 as js,a8 as Ua,a9 as dt,aa as hc,ab as pc,ac as qn,ad as Yn,ae as Ae,af as me,ag as ba,ah as ce,ai as mc,aj as gc,ak as bc,al as jc,am as fc,an as yc,ao as vc,ap as wc,aq as ra,ar as Cc,as as kc,at as Gs,au as Mn,av as Ee,aw as Me,ax as mo,ay as ze,az as Sc,aA as Ms,aB as Le,aC as Ac,aD as Pc,aE as Dc,aF as Ic,aG as us,aH as xs,aI as hs,aJ as Jr,aK as te,aL as ie,aM as tt,aN as Q,aO as We,aP as Ha,aQ as Kt,aR as or,aS as ls,aT as vr,aU as nt,aV as ct,aW as Kn,aX as zs,aY as cs,aZ as Ve,a_ as cr,a$ as Tt,b0 as Ur,b1 as wr,b2 as Rc,b3 as Fc,b4 as Wc,b5 as ft,b6 as ss,b7 as Tc,b8 as Ec,b9 as Vs,ba as Mc,bb as Lt,bc as yi,bd as Ls,be as $s,bf as qs,bg as nr,bh as zc,bi as dr,bj as Bs,bk as Xn,bl as Et,bm as Lc,bn as $c,bo as $t,bp as Ce,bq as Hr,br as Gr,bs as Vr,bt as It,bu as ae,bv as qr,bw as go,bx as ur,by as Qn,bz as Ct,bA as ja,bB as ws,bC as ps,bD as Cs,bE as Bc,bF as _c,bG as ks,bH as Ss,bI as As,bJ as Ne,bK as Ge,bL as Yr,bM as Gt,bN as Ga,bO as Ys,bP as sa,bQ as bo,bR as Zn,bS as ei,bT as Dt,bU as ir,bV as ti,bW as aa,bX as Va,bY as za,bZ as Nc,b_ as Za,b$ as vi,c0 as Ps,c1 as xr,c2 as Oc,c3 as jo,c4 as wi,c5 as Jc,c6 as La,c7 as sr,c8 as Rr,c9 as fo,ca as ri,cb as zn,cc as _s,cd as na,ce as Uc,cf as Ye,cg as yo,ch as si,ci as Dr,cj as Hc,ck as vo,cl as Nr,cm as Ci,cn as ds,co as Ns,cp as ms,cq as Gc,cr as Vc,cs as qc,ct as Yc,cu as Kc,cv as Xc,cw as as,cx as Qc,cy as Zc,cz as ed,cA as td,cB as rd,cC as sd,cD as ad,cE as nd,cF as Os,cG as id,cH as Ln,cI as od,cJ as ld,cK as cd,cL as $n,cM as wo,cN as Co,cO as ko,cP as ki,cQ as So,cR as dd,cS as Ao,cT as ud,cU as xd,cV as hd,cW as Bn,cX as Po,cY as pd,cZ as md,c_ as gd,c$ as bd,d0 as jd,d1 as fd,d2 as yd,d3 as _n,d4 as vd,d5 as Si,d6 as wd,d7 as ns,d8 as $a,d9 as Ba,da as en,db as Cd,dc as kd,dd as Do,de as Ks,df as ai,dg as _a,dh as Ai,di as Pr,dj as Sd,dk as Ad,dl as Io,dm as Ro,dn as Pd,dp as ia,dq as Dd,dr as Id,ds as Rd,dt as Pi,du as Fd,dv as Wd,dw as Td,dx as Ed,dy as Md,dz as zd,dA as Ld,dB as Fo,dC as Wo}from"./vendor_mui-Dp41HQgd.js";(function(){const r=document.createElement("link").relList;if(r&&r.supports&&r.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))n(i);new MutationObserver(i=>{for(const c of i)if(c.type==="childList")for(const d of c.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&n(d)}).observe(document,{childList:!0,subtree:!0});function s(i){const c={};return i.integrity&&(c.integrity=i.integrity),i.referrerPolicy&&(c.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?c.credentials="include":i.crossOrigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function n(i){if(i.ep)return;i.ep=!0;const c=s(i);fetch(i.href,c)}})();const $d={BASE_URL:"/",DEV:!1,MODE:"production",PROD:!0,SSR:!1,VITE_API_URL:"https://kelmah-auth-service.onrender.com"},Bd={development:{AUTH_SERVICE:"http://localhost:5001",USER_SERVICE:"http://localhost:5002",JOB_SERVICE:"http://localhost:5003",MESSAGING_SERVICE:"http://localhost:5004",PAYMENT_SERVICE:"http://localhost:5005"},production:{AUTH_SERVICE:"https://kelmah-auth-service.onrender.com",USER_SERVICE:"https://kelmah-user-service.onrender.com",JOB_SERVICE:"https://kelmah-job-service.onrender.com",MESSAGING_SERVICE:"https://kelmah-messaging-service.onrender.com",PAYMENT_SERVICE:"https://kelmah-payment-service.onrender.com"}},fs=t=>{const r=`VITE_${t}_URL`,s=$d[r];return s||Bd["production"][t]},yt={AUTH_SERVICE:fs("AUTH_SERVICE"),USER_SERVICE:fs("USER_SERVICE"),JOB_SERVICE:fs("JOB_SERVICE"),MESSAGING_SERVICE:fs("MESSAGING_SERVICE"),PAYMENT_SERVICE:fs("PAYMENT_SERVICE")},To="https://kelmah-auth-service.onrender.com",lt={tokenKey:"kelmah_auth_token",refreshTokenKey:"kelmah_refresh_token",userKey:"kelmah_user",tokenRefreshInterval:parseInt("1800000"),sessionTimeout:parseInt("3600000"),googleClientId:void 0,facebookAppId:void 0,linkedinClientId:void 0},Eo={apiTimeout:parseInt("30000"),socketTimeout:parseInt("60000"),fileUpload:{maxSize:parseInt("10485760"),allowedTypes:"jpg,jpeg,png,pdf,doc,docx".split(",")}},tr=Xe.create({baseURL:yt.AUTH_SERVICE,timeout:3e4,headers:{"Content-Type":"application/json"}});tr.interceptors.request.use(t=>{const r=localStorage.getItem(lt.tokenKey);return r&&!t.url.includes("/login")&&!t.url.includes("/register")&&(t.headers.Authorization=`Bearer ${r}`),t},t=>Promise.reject(t));const st={login:async t=>{try{const r=await tr.post("/api/auth/login",t),{token:s,user:n}=r.data.data||r.data;return s&&localStorage.setItem(lt.tokenKey,s),n&&localStorage.setItem(lt.userKey,JSON.stringify(n)),{token:s,user:n,success:!0}}catch(r){throw console.error("Login error:",r),r}},register:async t=>{try{const r=await tr.post("/api/auth/register",t),{token:s,user:n}=r.data.data||r.data;return s&&localStorage.setItem(lt.tokenKey,s),n&&localStorage.setItem(lt.userKey,JSON.stringify(n)),{token:s,user:n,success:!0}}catch(r){throw console.error("Registration error:",r),r}},verifyAuth:async()=>{try{const t=await tr.get("/api/auth/verify"),{user:r}=t.data.data||t.data;return r&&localStorage.setItem(lt.userKey,JSON.stringify(r)),{user:r,success:!0}}catch(t){return console.warn("Auth verification failed:",t.message),{success:!1,error:t.message}}},logout:async()=>{try{await tr.post("/api/auth/logout")}catch(t){console.warn("Logout API call failed:",t.message)}finally{localStorage.removeItem(lt.tokenKey),localStorage.removeItem(lt.userKey)}},getCurrentUser:()=>{try{const t=localStorage.getItem(lt.userKey);return t?JSON.parse(t):null}catch(t){return console.error("Error parsing user data:",t),null}},isAuthenticated:()=>{const t=localStorage.getItem(lt.tokenKey),r=st.getCurrentUser();return!!(t&&r)},getToken:()=>localStorage.getItem(lt.tokenKey),refreshToken:async()=>{try{const t=await tr.post("/api/auth/refresh"),{token:r}=t.data.data||t.data;return r&&localStorage.setItem(lt.tokenKey,r),{token:r,success:!0}}catch(t){return console.warn("Token refresh failed:",t.message),{success:!1,error:t.message}}},forgotPassword:async t=>{try{return(await tr.post("/api/auth/forgot-password",{email:t})).data}catch(r){throw console.error("Forgot password error:",r),r}},resetPassword:async(t,r)=>{try{return(await tr.post("/api/auth/reset-password",{token:t,password:r})).data}catch(s){throw console.error("Reset password error:",s),s}},updateProfile:async t=>{try{const r=await tr.put("/api/auth/profile",t),{user:s}=r.data.data||r.data;return s&&localStorage.setItem(lt.userKey,JSON.stringify(s)),{user:s,success:!0}}catch(r){throw console.error("Profile update error:",r),r}},changePassword:async(t,r)=>{try{return(await tr.put("/api/auth/change-password",{currentPassword:t,newPassword:r})).data}catch(s){throw console.error("Change password error:",s),s}},getUserRole:()=>{try{const t=localStorage.getItem(lt.userKey);if(t){const r=JSON.parse(t);return r.role||r.userType||r.userRole||null}}catch(t){console.error("Error getting user role:",t)}return null},hasRole:t=>st.getUserRole()===t,getStoredUser:()=>{try{const t=localStorage.getItem(lt.userKey);return t?JSON.parse(t):null}catch(t){return console.error("Error getting stored user:",t),null}}};var ni={ALLUSERSPROFILE:"C:\\ProgramData",APPDATA:"C:\\Users\\aship\\AppData\\Roaming",BUNDLED_DEBUGPY_PATH:"c:\\Users\\aship\\.cursor\\extensions\\ms-python.debugpy-2025.8.0-win32-x64\\bundled\\libs\\debugpy",ChocolateyInstall:"C:\\ProgramData\\chocolatey",ChocolateyLastPathUpdate:"133728000727694051",CHROME_CRASHPAD_PIPE_NAME:"\\\\.\\pipe\\crashpad_20012_IMYVWMFZMLSNSMDJ",COLOR:"1",COLORTERM:"truecolor",CommonProgramFiles:"C:\\Program Files\\Common Files","CommonProgramFiles(x86)":"C:\\Program Files (x86)\\Common Files",CommonProgramW6432:"C:\\Program Files\\Common Files",COMPUTERNAME:"DESKTOP-99Q9MH2",ComSpec:"C:\\windows\\system32\\cmd.exe",CURSOR_TRACE_ID:"482748c06fd743d0b3df8575260f5c6a",DriverData:"C:\\Windows\\System32\\Drivers\\DriverData",EDITOR:"C:\\windows\\notepad.exe",FPS_BROWSER_APP_PROFILE_STRING:"Internet Explorer",FPS_BROWSER_USER_PROFILE_STRING:"Default",GIT_ASKPASS:"c:\\Users\\aship\\AppData\\Local\\Programs\\cursor\\resources\\app\\extensions\\git\\dist\\askpass.sh",GOPATH:"C:\\Users\\aship\\go",HOME:"C:\\Users\\aship",HOMEDRIVE:"C:",HOMEPATH:"\\Users\\aship",INIT_CWD:"C:\\Users\\aship\\Desktop\\Project-Kelmah\\kelmah-frontend",LANG:"en_US.UTF-8",LOCALAPPDATA:"C:\\Users\\aship\\AppData\\Local",LOGONSERVER:"\\\\DESKTOP-99Q9MH2",NODE:"C:\\Program Files\\nodejs\\node.exe",NODE_ENV:"production",NODE_EXE:"C:\\Program Files\\nodejs\\\\node.exe",NPM_CLI_JS:"C:\\Program Files\\nodejs\\\\node_modules\\npm\\bin\\npm-cli.js",npm_command:"run-script",npm_config_cache:"C:\\Users\\aship\\AppData\\Local\\npm-cache",npm_config_globalconfig:"C:\\Users\\aship\\AppData\\Roaming\\npm\\etc\\npmrc",npm_config_global_prefix:"C:\\Users\\aship\\AppData\\Roaming\\npm",npm_config_init_module:"C:\\Users\\aship\\.npm-init.js",npm_config_local_prefix:"C:\\Users\\aship\\Desktop\\Project-Kelmah\\kelmah-frontend",npm_config_node_gyp:"C:\\Program Files\\nodejs\\node_modules\\npm\\node_modules\\node-gyp\\bin\\node-gyp.js",npm_config_noproxy:"",npm_config_npm_version:"10.8.2",npm_config_prefix:"C:\\Users\\aship\\AppData\\Roaming\\npm",npm_config_userconfig:"C:\\Users\\aship\\.npmrc",npm_config_user_agent:"npm/10.8.2 node/v20.18.0 win32 x64 workspaces/false",npm_execpath:"C:\\Program Files\\nodejs\\node_modules\\npm\\bin\\npm-cli.js",npm_lifecycle_event:"build",npm_lifecycle_script:"vite build",npm_node_execpath:"C:\\Program Files\\nodejs\\node.exe",npm_package_json:"C:\\Users\\aship\\Desktop\\Project-Kelmah\\kelmah-frontend\\package.json",npm_package_name:"kelma-frontend",npm_package_version:"1.0.1",NPM_PREFIX_JS:"C:\\Program Files\\nodejs\\\\node_modules\\npm\\bin\\npm-prefix.js",NPM_PREFIX_NPM_CLI_JS:"C:\\Users\\aship\\AppData\\Roaming\\npm\\node_modules\\npm\\bin\\npm-cli.js",NUMBER_OF_PROCESSORS:"4",OneDrive:"C:\\Users\\Administrator\\OneDrive",ORIGINAL_XDG_CURRENT_DESKTOP:"undefined",OS:"Windows_NT",Path:"C:\\Users\\aship\\Desktop\\Project-Kelmah\\kelmah-frontend\\node_modules\\.bin;C:\\Users\\aship\\Desktop\\Project-Kelmah\\node_modules\\.bin;C:\\Users\\aship\\Desktop\\node_modules\\.bin;C:\\Users\\aship\\node_modules\\.bin;C:\\Users\\node_modules\\.bin;C:\\node_modules\\.bin;C:\\Program Files\\nodejs\\node_modules\\npm\\node_modules\\@npmcli\\run-script\\lib\\node-gyp-bin;C:\\Program Files\\PowerShell\\7;c:\\Users\\aship\\AppData\\Local\\Programs\\cursor\\resources\\app\\bin;c:\\Users\\aship\\AppData\\Local\\Programs\\cursor\\resources\\app\\bin;C:\\Program Files (x86)\\Common Files\\Oracle\\Java\\java8path;C:\\Program Files (x86)\\Common Files\\Oracle\\Java\\javapath;C:\\Program Files\\Eclipse Adoptium\\jdk-21.0.5.11-hotspot\\bin;C:\\Python312\\Scripts\\;C:\\Python312\\;c:\\Users\\aship\\AppData\\Local\\Programs\\cursor\\resources\\app\\bin;C:\\Program Files (x86)\\VMware\\VMware Workstation\\bin\\;C:\\windows\\system32;C:\\windows;C:\\windows\\System32\\Wbem;C:\\windows\\System32\\WindowsPowerShell\\v1.0\\;C:\\windows\\System32\\OpenSSH\\;C:\\Users\\aship\\AppData\\Local\\Programs\\Python\\Launcher\\;C:\\Users\\aship\\AppData\\Local\\Microsoft\\WindowsApps;c:\\Users\\aship\\AppData\\Local\\Programs\\cursor\\resources\\app\\bin;c:\\Users\\aship\\AppData\\Local\\Programs\\cursor\\resources\\app\\bin;C:\\Program Files\\nodejs\\;C:\\ProgramData\\chocolatey\\bin;C:\\Program Files\\nodejs\\;C:\\Users\\YourUsername\\AppData\\Roaming\\npm;C:\\Program Files (x86)\\Java\\jre1.8.0_431\\bin;C:\\Program Files\\Git\\cmd;C:\\Program Files\\;C:\\Program Files\\Go\\bin;C:\\msys64\\mingw64\\bin;C:\\Program Files\\GitHub CLI\\;C:\\Program Files\\Docker\\Docker\\resources\\bin;C:\\Program Files\\PowerShell\\7\\;C:\\Users\\aship\\scoop\\apps\\postgresql\\current\\bin;C:\\Users\\aship\\scoop\\shims;C:\\Python312\\Scripts\\;C:\\Python312\\;c:\\Users\\aship\\AppData\\Local\\Programs\\cursor\\resources\\app\\bin;C:\\Program Files (x86)\\VMware\\VMware Workstation\\bin\\;C:\\windows\\system32;C:\\windows;C:\\windows\\System32\\Wbem;C:\\windows\\System32\\WindowsPowerShell\\v1.0\\;C:\\windows\\System32\\OpenSSH\\;C:\\Users\\aship\\AppData\\Local\\Programs\\Python\\Launcher\\;C:\\Users\\aship\\AppData\\Local\\Microsoft\\WindowsApps;c:\\Users\\aship\\AppData\\Local\\Programs\\cursor\\resources\\app\\bin;c:\\Users\\aship\\AppData\\Local\\Programs\\cursor\\resources\\app\\bin;C:\\Program Files\\nodejs\\;C:\\ProgramData\\chocolatey\\bin;C:\\Program Files\\nodejs\\;C:\\Users\\YourUsername\\AppData\\Roaming\\npm;C:\\Users\\aship\\AppData\\Local\\Programs\\Python\\Launcher\\;C:\\Users\\aship\\AppData\\Local\\Microsoft\\WindowsApps;C:\\Users\\aship\\AppData\\Local\\Programs\\Microsoft VS Code\\bin;C:\\Users\\aship\\AppData\\Roaming\\npm;C:\\sqlite;C:\\Users\\aship\\AppData\\Local\\Programs\\Windsurf\\bin;C:\\Program Files\\cursor-id-modifier;C:\\Users\\aship\\AppData\\Local\\Programs\\Ollama;C:\\Users\\aship\\go\\bin;C:\\msys64\\mingw64\\bin;C:\\Users\\aship\\AppData\\Local\\Programs\\cursor\\resources\\app\\bin;c:\\Users\\aship\\.cursor\\extensions\\ms-python.debugpy-2025.8.0-win32-x64\\bundled\\scripts\\noConfigScripts",PATHEXT:".COM;.EXE;.BAT;.CMD;.VBS;.VBE;.JS;.JSE;.WSF;.WSH;.MSC;.PY;.PYW;.CPL",PGDATA:"C:\\Users\\aship\\scoop\\apps\\postgresql\\current\\data",PG_INCLUDE_DIR:"C:\\Users\\aship\\scoop\\apps\\postgresql\\current\\include",PG_LIB_DIR:"C:\\Users\\aship\\scoop\\apps\\postgresql\\current\\lib",POWERSHELL_DISTRIBUTION_CHANNEL:"MSI:Windows 10 Home",PROCESSOR_ARCHITECTURE:"AMD64",PROCESSOR_IDENTIFIER:"Intel64 Family 6 Model 78 Stepping 3, GenuineIntel",PROCESSOR_LEVEL:"6",PROCESSOR_REVISION:"4e03",ProgramData:"C:\\ProgramData",ProgramFiles:"C:\\Program Files","ProgramFiles(x86)":"C:\\Program Files (x86)",ProgramW6432:"C:\\Program Files",PROMPT:"$P$G",PSModulePath:"C:\\Users\\aship\\Documents\\PowerShell\\Modules;C:\\Program Files\\PowerShell\\Modules;c:\\program files\\powershell\\7\\Modules;C:\\Program Files\\WindowsPowerShell\\Modules;C:\\windows\\system32\\WindowsPowerShell\\v1.0\\Modules",PUBLIC:"C:\\Users\\Public",PYDEVD_DISABLE_FILE_VALIDATION:"1",SESSIONNAME:"Console",SystemDrive:"C:",SystemRoot:"C:\\windows",TEMP:"C:\\Users\\aship\\AppData\\Local\\Temp",TERM_PROGRAM:"vscode",TERM_PROGRAM_VERSION:"1.2.4",TMP:"C:\\Users\\aship\\AppData\\Local\\Temp",USERDOMAIN:"DESKTOP-99Q9MH2",USERDOMAIN_ROAMINGPROFILE:"DESKTOP-99Q9MH2",USERNAME:"Bright Texo",USERPROFILE:"C:\\Users\\aship",VBOX_MSI_INSTALL_PATH:"C:\\Program Files\\Oracle\\VirtualBox\\",VSCODE_DEBUGPY_ADAPTER_ENDPOINTS:"c:\\Users\\aship\\.cursor\\extensions\\ms-python.debugpy-2025.8.0-win32-x64\\.noConfigDebugAdapterEndpoints\\endpoint-cf01999d16cf0eee.txt",VSCODE_GIT_ASKPASS_EXTRA_ARGS:"",VSCODE_GIT_ASKPASS_MAIN:"c:\\Users\\aship\\AppData\\Local\\Programs\\cursor\\resources\\app\\extensions\\git\\dist\\askpass-main.js",VSCODE_GIT_ASKPASS_NODE:"C:\\Users\\aship\\AppData\\Local\\Programs\\cursor\\Cursor.exe",VSCODE_GIT_IPC_HANDLE:"\\\\.\\pipe\\vscode-git-84c7326379-sock",VSCODE_INJECTION:"1",windir:"C:\\windows"};const _d="production",Nd={development:"http://localhost:5000",test:"http://localhost:5000",production:ni.VITE_API_URL||"https://api.kelmah.com"},Js=ni.VITE_API_URL||Nd[_d],vt=Js,Od=ni.VITE_MESSAGING_URL||Js,Jd="Kelmah",Nt="kelmah_auth_token",Ud="kelmah_refresh_token",Hd="kelmah_user",Gd="kelmah_token_expiry",Vd={WORKER:"worker",HIRER:"hirer",ADMIN:"admin"},qd="kelmah_theme",Yd="kelmah_language",Kd="kelmah_last_route",Xd={DRAFT:"draft",ACTIVE:"active",ASSIGNED:"assigned",IN_PROGRESS:"in-progress",COMPLETED:"completed",CANCELLED:"cancelled",EXPIRED:"expired"},Qd={PENDING:"pending",PROCESSING:"processing",COMPLETED:"completed",FAILED:"failed",REFUNDED:"refunded"},Zd={PENDING:"pending",UNDER_REVIEW:"under-review",ACCEPTED:"accepted",REJECTED:"rejected",WITHDRAWN:"withdrawn"},eu={TEXT:"text",IMAGE:"image",ATTACHMENT:"attachment",SYSTEM:"system"},tu=5,ru=10*1024*1024,su=["image/jpeg","image/png","image/gif","application/pdf","application/msword","application/vnd.openxmlformats-officedocument.wordprocessingml.document","application/vnd.ms-excel","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet","text/plain"],au=Object.freeze(Object.defineProperty({__proto__:null,ALLOWED_FILE_TYPES:su,API_BASE_URL:Js,API_URL:vt,APPLICATION_STATUS:Zd,APP_NAME:Jd,AUTH_ROLES:Vd,JOB_STATUS:Xd,LANGUAGE_KEY:Yd,LAST_ROUTE_KEY:Kd,MAX_ATTACHMENTS:tu,MAX_FILE_SIZE:ru,MESSAGE_TYPES:eu,PAYMENT_STATUS:Qd,REFRESH_TOKEN_KEY:Ud,SOCKET_URL:Od,THEME_KEY:qd,TOKEN_EXPIRY_KEY:Gd,TOKEN_KEY:Nt,USER_KEY:Hd},Symbol.toStringTag,{value:"Module"}));var nu={ALLUSERSPROFILE:"C:\\ProgramData",APPDATA:"C:\\Users\\aship\\AppData\\Roaming",BUNDLED_DEBUGPY_PATH:"c:\\Users\\aship\\.cursor\\extensions\\ms-python.debugpy-2025.8.0-win32-x64\\bundled\\libs\\debugpy",ChocolateyInstall:"C:\\ProgramData\\chocolatey",ChocolateyLastPathUpdate:"133728000727694051",CHROME_CRASHPAD_PIPE_NAME:"\\\\.\\pipe\\crashpad_20012_IMYVWMFZMLSNSMDJ",COLOR:"1",COLORTERM:"truecolor",CommonProgramFiles:"C:\\Program Files\\Common Files","CommonProgramFiles(x86)":"C:\\Program Files (x86)\\Common Files",CommonProgramW6432:"C:\\Program Files\\Common Files",COMPUTERNAME:"DESKTOP-99Q9MH2",ComSpec:"C:\\windows\\system32\\cmd.exe",CURSOR_TRACE_ID:"482748c06fd743d0b3df8575260f5c6a",DriverData:"C:\\Windows\\System32\\Drivers\\DriverData",EDITOR:"C:\\windows\\notepad.exe",FPS_BROWSER_APP_PROFILE_STRING:"Internet Explorer",FPS_BROWSER_USER_PROFILE_STRING:"Default",GIT_ASKPASS:"c:\\Users\\aship\\AppData\\Local\\Programs\\cursor\\resources\\app\\extensions\\git\\dist\\askpass.sh",GOPATH:"C:\\Users\\aship\\go",HOME:"C:\\Users\\aship",HOMEDRIVE:"C:",HOMEPATH:"\\Users\\aship",INIT_CWD:"C:\\Users\\aship\\Desktop\\Project-Kelmah\\kelmah-frontend",LANG:"en_US.UTF-8",LOCALAPPDATA:"C:\\Users\\aship\\AppData\\Local",LOGONSERVER:"\\\\DESKTOP-99Q9MH2",NODE:"C:\\Program Files\\nodejs\\node.exe",NODE_ENV:"production",NODE_EXE:"C:\\Program Files\\nodejs\\\\node.exe",NPM_CLI_JS:"C:\\Program Files\\nodejs\\\\node_modules\\npm\\bin\\npm-cli.js",npm_command:"run-script",npm_config_cache:"C:\\Users\\aship\\AppData\\Local\\npm-cache",npm_config_globalconfig:"C:\\Users\\aship\\AppData\\Roaming\\npm\\etc\\npmrc",npm_config_global_prefix:"C:\\Users\\aship\\AppData\\Roaming\\npm",npm_config_init_module:"C:\\Users\\aship\\.npm-init.js",npm_config_local_prefix:"C:\\Users\\aship\\Desktop\\Project-Kelmah\\kelmah-frontend",npm_config_node_gyp:"C:\\Program Files\\nodejs\\node_modules\\npm\\node_modules\\node-gyp\\bin\\node-gyp.js",npm_config_noproxy:"",npm_config_npm_version:"10.8.2",npm_config_prefix:"C:\\Users\\aship\\AppData\\Roaming\\npm",npm_config_userconfig:"C:\\Users\\aship\\.npmrc",npm_config_user_agent:"npm/10.8.2 node/v20.18.0 win32 x64 workspaces/false",npm_execpath:"C:\\Program Files\\nodejs\\node_modules\\npm\\bin\\npm-cli.js",npm_lifecycle_event:"build",npm_lifecycle_script:"vite build",npm_node_execpath:"C:\\Program Files\\nodejs\\node.exe",npm_package_json:"C:\\Users\\aship\\Desktop\\Project-Kelmah\\kelmah-frontend\\package.json",npm_package_name:"kelma-frontend",npm_package_version:"1.0.1",NPM_PREFIX_JS:"C:\\Program Files\\nodejs\\\\node_modules\\npm\\bin\\npm-prefix.js",NPM_PREFIX_NPM_CLI_JS:"C:\\Users\\aship\\AppData\\Roaming\\npm\\node_modules\\npm\\bin\\npm-cli.js",NUMBER_OF_PROCESSORS:"4",OneDrive:"C:\\Users\\Administrator\\OneDrive",ORIGINAL_XDG_CURRENT_DESKTOP:"undefined",OS:"Windows_NT",Path:"C:\\Users\\aship\\Desktop\\Project-Kelmah\\kelmah-frontend\\node_modules\\.bin;C:\\Users\\aship\\Desktop\\Project-Kelmah\\node_modules\\.bin;C:\\Users\\aship\\Desktop\\node_modules\\.bin;C:\\Users\\aship\\node_modules\\.bin;C:\\Users\\node_modules\\.bin;C:\\node_modules\\.bin;C:\\Program Files\\nodejs\\node_modules\\npm\\node_modules\\@npmcli\\run-script\\lib\\node-gyp-bin;C:\\Program Files\\PowerShell\\7;c:\\Users\\aship\\AppData\\Local\\Programs\\cursor\\resources\\app\\bin;c:\\Users\\aship\\AppData\\Local\\Programs\\cursor\\resources\\app\\bin;C:\\Program Files (x86)\\Common Files\\Oracle\\Java\\java8path;C:\\Program Files (x86)\\Common Files\\Oracle\\Java\\javapath;C:\\Program Files\\Eclipse Adoptium\\jdk-21.0.5.11-hotspot\\bin;C:\\Python312\\Scripts\\;C:\\Python312\\;c:\\Users\\aship\\AppData\\Local\\Programs\\cursor\\resources\\app\\bin;C:\\Program Files (x86)\\VMware\\VMware Workstation\\bin\\;C:\\windows\\system32;C:\\windows;C:\\windows\\System32\\Wbem;C:\\windows\\System32\\WindowsPowerShell\\v1.0\\;C:\\windows\\System32\\OpenSSH\\;C:\\Users\\aship\\AppData\\Local\\Programs\\Python\\Launcher\\;C:\\Users\\aship\\AppData\\Local\\Microsoft\\WindowsApps;c:\\Users\\aship\\AppData\\Local\\Programs\\cursor\\resources\\app\\bin;c:\\Users\\aship\\AppData\\Local\\Programs\\cursor\\resources\\app\\bin;C:\\Program Files\\nodejs\\;C:\\ProgramData\\chocolatey\\bin;C:\\Program Files\\nodejs\\;C:\\Users\\YourUsername\\AppData\\Roaming\\npm;C:\\Program Files (x86)\\Java\\jre1.8.0_431\\bin;C:\\Program Files\\Git\\cmd;C:\\Program Files\\;C:\\Program Files\\Go\\bin;C:\\msys64\\mingw64\\bin;C:\\Program Files\\GitHub CLI\\;C:\\Program Files\\Docker\\Docker\\resources\\bin;C:\\Program Files\\PowerShell\\7\\;C:\\Users\\aship\\scoop\\apps\\postgresql\\current\\bin;C:\\Users\\aship\\scoop\\shims;C:\\Python312\\Scripts\\;C:\\Python312\\;c:\\Users\\aship\\AppData\\Local\\Programs\\cursor\\resources\\app\\bin;C:\\Program Files (x86)\\VMware\\VMware Workstation\\bin\\;C:\\windows\\system32;C:\\windows;C:\\windows\\System32\\Wbem;C:\\windows\\System32\\WindowsPowerShell\\v1.0\\;C:\\windows\\System32\\OpenSSH\\;C:\\Users\\aship\\AppData\\Local\\Programs\\Python\\Launcher\\;C:\\Users\\aship\\AppData\\Local\\Microsoft\\WindowsApps;c:\\Users\\aship\\AppData\\Local\\Programs\\cursor\\resources\\app\\bin;c:\\Users\\aship\\AppData\\Local\\Programs\\cursor\\resources\\app\\bin;C:\\Program Files\\nodejs\\;C:\\ProgramData\\chocolatey\\bin;C:\\Program Files\\nodejs\\;C:\\Users\\YourUsername\\AppData\\Roaming\\npm;C:\\Users\\aship\\AppData\\Local\\Programs\\Python\\Launcher\\;C:\\Users\\aship\\AppData\\Local\\Microsoft\\WindowsApps;C:\\Users\\aship\\AppData\\Local\\Programs\\Microsoft VS Code\\bin;C:\\Users\\aship\\AppData\\Roaming\\npm;C:\\sqlite;C:\\Users\\aship\\AppData\\Local\\Programs\\Windsurf\\bin;C:\\Program Files\\cursor-id-modifier;C:\\Users\\aship\\AppData\\Local\\Programs\\Ollama;C:\\Users\\aship\\go\\bin;C:\\msys64\\mingw64\\bin;C:\\Users\\aship\\AppData\\Local\\Programs\\cursor\\resources\\app\\bin;c:\\Users\\aship\\.cursor\\extensions\\ms-python.debugpy-2025.8.0-win32-x64\\bundled\\scripts\\noConfigScripts",PATHEXT:".COM;.EXE;.BAT;.CMD;.VBS;.VBE;.JS;.JSE;.WSF;.WSH;.MSC;.PY;.PYW;.CPL",PGDATA:"C:\\Users\\aship\\scoop\\apps\\postgresql\\current\\data",PG_INCLUDE_DIR:"C:\\Users\\aship\\scoop\\apps\\postgresql\\current\\include",PG_LIB_DIR:"C:\\Users\\aship\\scoop\\apps\\postgresql\\current\\lib",POWERSHELL_DISTRIBUTION_CHANNEL:"MSI:Windows 10 Home",PROCESSOR_ARCHITECTURE:"AMD64",PROCESSOR_IDENTIFIER:"Intel64 Family 6 Model 78 Stepping 3, GenuineIntel",PROCESSOR_LEVEL:"6",PROCESSOR_REVISION:"4e03",ProgramData:"C:\\ProgramData",ProgramFiles:"C:\\Program Files","ProgramFiles(x86)":"C:\\Program Files (x86)",ProgramW6432:"C:\\Program Files",PROMPT:"$P$G",PSModulePath:"C:\\Users\\aship\\Documents\\PowerShell\\Modules;C:\\Program Files\\PowerShell\\Modules;c:\\program files\\powershell\\7\\Modules;C:\\Program Files\\WindowsPowerShell\\Modules;C:\\windows\\system32\\WindowsPowerShell\\v1.0\\Modules",PUBLIC:"C:\\Users\\Public",PYDEVD_DISABLE_FILE_VALIDATION:"1",SESSIONNAME:"Console",SystemDrive:"C:",SystemRoot:"C:\\windows",TEMP:"C:\\Users\\aship\\AppData\\Local\\Temp",TERM_PROGRAM:"vscode",TERM_PROGRAM_VERSION:"1.2.4",TMP:"C:\\Users\\aship\\AppData\\Local\\Temp",USERDOMAIN:"DESKTOP-99Q9MH2",USERDOMAIN_ROAMINGPROFILE:"DESKTOP-99Q9MH2",USERNAME:"Bright Texo",USERPROFILE:"C:\\Users\\aship",VBOX_MSI_INSTALL_PATH:"C:\\Program Files\\Oracle\\VirtualBox\\",VSCODE_DEBUGPY_ADAPTER_ENDPOINTS:"c:\\Users\\aship\\.cursor\\extensions\\ms-python.debugpy-2025.8.0-win32-x64\\.noConfigDebugAdapterEndpoints\\endpoint-cf01999d16cf0eee.txt",VSCODE_GIT_ASKPASS_EXTRA_ARGS:"",VSCODE_GIT_ASKPASS_MAIN:"c:\\Users\\aship\\AppData\\Local\\Programs\\cursor\\resources\\app\\extensions\\git\\dist\\askpass-main.js",VSCODE_GIT_ASKPASS_NODE:"C:\\Users\\aship\\AppData\\Local\\Programs\\cursor\\Cursor.exe",VSCODE_GIT_IPC_HANDLE:"\\\\.\\pipe\\vscode-git-84c7326379-sock",VSCODE_INJECTION:"1",windir:"C:\\windows"};const iu=nu,tn=Se("auth/register",async(t,{rejectWithValue:r})=>{var s,n;try{const i=await st.register(t);return i.token&&(localStorage.setItem(Nt,i.token),localStorage.setItem("user",JSON.stringify(i.user))),i}catch(i){const c=((n=(s=i.response)==null?void 0:s.data)==null?void 0:n.message)||i.message||"Registration failed";return r(c)}}),Is=Se("auth/login",async(t,{rejectWithValue:r})=>{var s,n;try{console.log("Login attempt with:",t.email);const i=await st.login(t);console.log("Login response in authSlice:",i);const c=i.data||i,d=c.token,x=c.user||{},m=c.refreshToken;return d?(console.log("Storing user data with role in authSlice:",x),localStorage.setItem(Nt,d),localStorage.setItem("user",JSON.stringify(x)),m&&localStorage.setItem("refreshToken",m),{token:d,user:x,refreshToken:m}):(console.warn("No token received in login response. Response structure:",i),r("No authentication token received"))}catch(i){console.error("Login error in thunk:",i);const c=((n=(s=i.response)==null?void 0:s.data)==null?void 0:n.message)||i.message||"Login failed";return r(c)}}),fa=Se("auth/verify",async(t,{rejectWithValue:r})=>{try{if(console.log("Verifying auth status..."),iu.DEV){console.log("Development mode: Using mock authentication");const i=localStorage.getItem("user");if(i)return console.log("Using stored user data in dev mode"),{user:JSON.parse(i),isAuthenticated:!0};console.log("No stored user, using default dev user");const c=await st.getCurrentUser();return localStorage.setItem("user",JSON.stringify(c)),localStorage.setItem(Nt,"dev-mode-fake-token-12345"),{user:c,isAuthenticated:!0}}if(!localStorage.getItem(Nt))throw console.warn("No token found in localStorage"),new Error("No authentication token found");const n=localStorage.getItem("user");console.log("Currently stored user:",n?JSON.parse(n):"none");try{const i=await st.getCurrentUser();if(console.log("User profile data received:",i),i)return localStorage.setItem("user",JSON.stringify(i)),{user:i,isAuthenticated:!0}}catch(i){if(console.warn("API unreachable, using stored user data:",i),n)return{user:JSON.parse(n),isAuthenticated:!0}}throw new Error("Could not verify authentication")}catch(s){return console.error("Auth verification failed:",s),localStorage.removeItem(Nt),localStorage.removeItem("user"),r(s.message||"Authentication verification failed")}}),Rs=Se("auth/logout",async(t,{rejectWithValue:r})=>{try{return await st.logout(),localStorage.removeItem(Nt),localStorage.removeItem("user"),{success:!0}}catch(s){return localStorage.removeItem(Nt),localStorage.removeItem("user"),r(s.message||"Logout failed")}}),ou={user:(()=>{const t=localStorage.getItem("user");return t?JSON.parse(t):null})(),token:localStorage.getItem(Nt)||null,isAuthenticated:!!localStorage.getItem(Nt),loading:!1,error:null},lu=Vt({name:"auth",initialState:ou,reducers:{logout:t=>{localStorage.removeItem(Nt),localStorage.removeItem("user"),t.user=null,t.token=null,t.isAuthenticated=!1,t.error=null},clearError:t=>{t.error=null},setError:(t,r)=>{t.error=r.payload},setOAuthLogin:(t,r)=>{const{user:s,token:n}=r.payload;t.isAuthenticated=!0,t.user=s,t.token=n,t.loading=!1,t.error=null,localStorage.setItem(Nt,n),localStorage.setItem("user",JSON.stringify(s))}},extraReducers:t=>{t.addCase(tn.pending,r=>{r.loading=!0,r.error=null}).addCase(tn.fulfilled,(r,s)=>{r.isAuthenticated=!0,r.user=s.payload.user,r.token=s.payload.token,r.loading=!1,r.error=null}).addCase(tn.rejected,(r,s)=>{r.loading=!1,r.error=s.payload,r.isAuthenticated=!1,r.user=null,r.token=null}).addCase(Is.pending,r=>{r.loading=!0,r.error=null}).addCase(Is.fulfilled,(r,s)=>{r.isAuthenticated=!0,r.user=s.payload.user,r.token=s.payload.token,r.loading=!1,r.error=null}).addCase(Is.rejected,(r,s)=>{r.loading=!1,r.error=s.payload,r.isAuthenticated=!1,r.user=null,r.token=null}).addCase(fa.pending,r=>{r.loading=!0,r.error=null}).addCase(fa.fulfilled,(r,s)=>{r.isAuthenticated=!0,r.user=s.payload.user,r.loading=!1,r.error=null}).addCase(fa.rejected,(r,s)=>{r.loading=!1,r.error=s.payload,r.isAuthenticated=!1,r.user=null,r.token=null}).addCase(Rs.pending,r=>{r.loading=!0}).addCase(Rs.fulfilled,r=>{r.isAuthenticated=!1,r.user=null,r.token=null,r.loading=!1,r.error=null}).addCase(Rs.rejected,(r,s)=>{r.isAuthenticated=!1,r.user=null,r.token=null,r.loading=!1,r.error=s.payload})}}),cu=t=>t.auth.loading,du=t=>t.auth.error,uu=lu.reducer,Sr=Xe.create({baseURL:yt.AUTH_SERVICE,timeout:3e4,headers:{"Content-Type":"application/json"}});Sr.interceptors.request.use(t=>{const r=localStorage.getItem("kelmah_auth_token");return r&&(t.headers.Authorization=`Bearer ${r}`),t},t=>Promise.reject(t));const ys={jobs:[{id:"job-1",title:"Kitchen Renovation - Custom Cabinets",description:"We need a skilled carpenter to design and install custom kitchen cabinets for a modern home renovation project. The work includes measuring, designing, building, and installing high-quality wooden cabinets.",category:"Carpentry",subcategory:"Cabinet Making",type:"fixed",budget:5500,currency:"GHS",status:"active",location:{city:"Accra",region:"Greater Accra",address:"East Legon",coordinates:{lat:5.6037,lng:-.187}},skills:["Carpentry","Cabinet Making","Wood Finishing","Design"],urgency:"medium",duration:"3 weeks",requirements:["Minimum 3 years carpentry experience","Portfolio of kitchen cabinet work","Own tools and transportation","Available for 3-week project timeline"],benefits:["Competitive fixed rate payment","Potential for future projects","Professional reference provided","Material costs covered separately"],postedBy:{id:"hirer-001",name:"Sarah Mitchell",company:"Mitchell Construction Ltd",avatar:"/api/placeholder/50/50",rating:4.8,verificationStatus:"verified"},applicationsCount:8,viewsCount:24,savedCount:12,createdAt:new Date(Date.now()-1e3*60*60*24*3),updatedAt:new Date(Date.now()-1e3*60*60*24*1),deadline:new Date(Date.now()+1e3*60*60*24*14),featured:!0},{id:"job-2",title:"Office Interior Design & Setup",description:"Looking for an experienced interior designer to completely redesign and set up our new office space. The project includes space planning, furniture selection, lighting design, and complete installation.",category:"Interior Design",subcategory:"Office Design",type:"fixed",budget:15e3,currency:"GHS",status:"active",location:{city:"Accra",region:"Greater Accra",address:"Airport City",coordinates:{lat:5.61,lng:-.1767}},skills:["Interior Design","Space Planning","Project Management","Furniture Selection"],urgency:"high",duration:"4 weeks",requirements:["Interior design certification or equivalent experience","Proven track record with office designs","Ability to manage full project lifecycle","Experience with modern office layouts"],benefits:["High-value project with room for creativity","Milestone-based payments","Portfolio piece for future marketing","Long-term client relationship potential"],postedBy:{id:"hirer-002",name:"James Osei",company:"TechFlow Solutions",avatar:"/api/placeholder/50/50",rating:4.9,verificationStatus:"verified"},applicationsCount:12,viewsCount:45,savedCount:8,createdAt:new Date(Date.now()-1e3*60*60*24*5),updatedAt:new Date(Date.now()-1e3*60*60*24*2),deadline:new Date(Date.now()+1e3*60*60*24*21),featured:!0},{id:"job-3",title:"Residential Electrical System Upgrade",description:"Complete electrical system upgrade for a 4-bedroom house including new wiring, outlets, modern electrical panel, and safety inspections.",category:"Electrical",subcategory:"Residential Wiring",type:"fixed",budget:8500,currency:"GHS",status:"active",location:{city:"Tema",region:"Greater Accra",address:"Community 25",coordinates:{lat:5.6698,lng:-.0167}},skills:["Electrical Installation","Wiring","Safety Certification","Electrical Panel"],urgency:"medium",duration:"2 weeks",requirements:["Licensed electrician certification","Experience with residential electrical systems","Safety protocol compliance","Insurance coverage required"],benefits:["Fair market rate compensation","Materials provided by client","Flexible working hours","Safety equipment provided"],postedBy:{id:"hirer-003",name:"Mary Asante",company:"Asante Family",avatar:"/api/placeholder/50/50",rating:4.6,verificationStatus:"verified"},applicationsCount:6,viewsCount:18,savedCount:4,createdAt:new Date(Date.now()-1e3*60*60*24*2),updatedAt:new Date(Date.now()-1e3*60*60*24*1),deadline:new Date(Date.now()+1e3*60*60*24*10),featured:!1},{id:"job-4",title:"Bathroom Renovation - Modern Design",description:"Complete bathroom renovation with modern fixtures, tiling, plumbing updates, and stylish finishing touches.",category:"Plumbing",subcategory:"Bathroom Renovation",type:"fixed",budget:7800,currency:"GHS",status:"active",location:{city:"Kumasi",region:"Ashanti",address:"Adum",coordinates:{lat:6.6885,lng:-1.6244}},skills:["Plumbing","Tiling","Bathroom Design","Fixture Installation"],urgency:"low",duration:"2.5 weeks",requirements:["Licensed plumber certification","Experience with bathroom renovations","Tiling and fixture installation skills","Portfolio of previous bathroom work"],benefits:["Creative project with modern design","All materials provided","Competitive compensation","Potential for additional home projects"],postedBy:{id:"hirer-004",name:"Kwame Boateng",company:"Boateng Residence",avatar:"/api/placeholder/50/50",rating:4.7,verificationStatus:"verified"},applicationsCount:9,viewsCount:22,savedCount:6,createdAt:new Date(Date.now()-1e3*60*60*24*4),updatedAt:new Date(Date.now()-1e3*60*60*24*3),deadline:new Date(Date.now()+1e3*60*60*24*18),featured:!1},{id:"job-5",title:"Commercial Painting - Office Building",description:"Professional painting services for a 3-story office building including interior and exterior work.",category:"Painting",subcategory:"Commercial Painting",type:"fixed",budget:12e3,currency:"GHS",status:"active",location:{city:"Takoradi",region:"Western",address:"Takoradi Market Circle",coordinates:{lat:4.8845,lng:-1.7554}},skills:["Commercial Painting","Surface Preparation","Color Consultation","Safety Protocols"],urgency:"medium",duration:"3 weeks",requirements:["Commercial painting experience","Safety certification required","Own equipment and supplies","Insurance coverage necessary"],benefits:["Large scale project","Professional reference","Competitive market rate","Potential for ongoing maintenance work"],postedBy:{id:"hirer-005",name:"Rebecca Mensah",company:"Coastal Properties Ltd",avatar:"/api/placeholder/50/50",rating:4.5,verificationStatus:"verified"},applicationsCount:11,viewsCount:33,savedCount:7,createdAt:new Date(Date.now()-1e3*60*60*24*6),updatedAt:new Date(Date.now()-1e3*60*60*24*4),deadline:new Date(Date.now()+1e3*60*60*24*25),featured:!1}],totalPages:2,totalJobs:8},Di=t=>{var r;return t?{id:t.id,title:t.title,description:((r=t.description)==null?void 0:r.substring(0,150))+"...",category:t.category,subcategory:t.subcategory,type:t.type,budget:t.budget,currency:t.currency,status:t.status,location:t.location,skills:t.skills||[],urgency:t.urgency,duration:t.duration,postedBy:t.postedBy,applicationsCount:t.applicationsCount||0,viewsCount:t.viewsCount||0,savedCount:t.savedCount||0,createdAt:t.createdAt,updatedAt:t.updatedAt,deadline:t.deadline,featured:t.featured||!1}:null},Wr=t=>{var r;return t?{...t,requirements:t.requirements||[],benefits:t.benefits||[],location:{...t.location,coordinates:((r=t.location)==null?void 0:r.coordinates)||{lat:5.6037,lng:-.187}}}:null},Qt={getJobs:async(t={})=>{var r,s;try{const i=(await Sr.get("/api/jobs",{params:t})).data,c=((s=(r=i.meta)==null?void 0:r.pagination)==null?void 0:s.totalPages)||1;return{jobs:(i.data||[]).map(Di),totalPages:c}}catch(n){console.warn("Job service unavailable, using comprehensive mock data:",n.message);let i=ys.jobs;if(t.search){const d=t.search.toLowerCase();i=i.filter(x=>x.title.toLowerCase().includes(d)||x.description.toLowerCase().includes(d)||x.skills.some(m=>m.toLowerCase().includes(d)))}t.category&&(i=i.filter(d=>d.category===t.category)),t.location&&(i=i.filter(d=>d.location.city.toLowerCase().includes(t.location.toLowerCase())||d.location.region.toLowerCase().includes(t.location.toLowerCase()))),t.minBudget&&(i=i.filter(d=>d.budget>=parseInt(t.minBudget))),t.maxBudget&&(i=i.filter(d=>d.budget<=parseInt(t.maxBudget)));const c=i.map(Di);return{jobs:c,totalPages:Math.ceil(c.length/10),totalJobs:c.length}}},getJobById:async t=>{try{const s=(await Sr.get(`/api/jobs/${t}`)).data;return Wr(s.data)}catch(r){console.warn(`Job service unavailable for job ${t}, using mock data:`,r.message);const s=ys.jobs.find(n=>n.id===t);return Wr(s||ys.jobs[0])}},createJob:async t=>{try{const s=(await Sr.post("/api/jobs",t)).data;return Wr(s.data)}catch(r){console.warn("Job service unavailable for job creation, simulating success:",r.message);const s={id:`job-${Date.now()}`,...t,status:"draft",applicationsCount:0,viewsCount:0,savedCount:0,createdAt:new Date,updatedAt:new Date,postedBy:{id:"current-user",name:"Current User",company:"Your Company",avatar:"/api/placeholder/50/50",rating:4.8,verificationStatus:"verified"}};return Wr(s)}},updateJob:async(t,r)=>{try{const n=(await Sr.put(`/api/jobs/${t}`,r)).data;return Wr(n.data)}catch(s){console.warn(`Job service unavailable for job ${t} update, simulating success:`,s.message);const i={...ys.jobs.find(c=>c.id===t)||ys.jobs[0],...r,updatedAt:new Date};return Wr(i)}},deleteJob:async t=>{try{await Sr.delete(`/api/jobs/${t}`)}catch(r){console.warn(`Job service unavailable for job ${t} deletion, simulating success:`,r.message)}},applyToJob:async(t,r)=>{try{return(await Sr.post(`/api/jobs/${t}/apply`,r)).data}catch(s){return console.warn(`Job service unavailable for job ${t} application, simulating success:`,s.message),{success:!0,message:"Application submitted successfully (mock)",data:{id:`app-${Date.now()}`,jobId:t,status:"pending",submittedAt:new Date,...r}}}},getJobApplications:async t=>{try{return(await Sr.get(`/api/jobs/${t}/applications`)).data}catch(r){return console.warn(`Job service unavailable for job ${t} applications, using mock data:`,r.message),[{id:`app-${t}-1`,jobId:t,applicant:{id:"worker-1",name:"Tony Gate",avatar:"/api/placeholder/50/50",rating:4.8,completedJobs:23},status:"pending",submittedAt:new Date(Date.now()-1e3*60*60*24*2),coverLetter:"I am very interested in this position and have relevant experience."}]}}},Fs=Se("jobs/fetchJobs",async(t,{rejectWithValue:r})=>{try{return await Qt.getJobs(t)}catch(s){return r(s.message)}}),ya=Se("jobs/fetchJobById",async(t,{rejectWithValue:r})=>{try{return await Qt.getJobById(t)}catch(s){return r(s.message)}}),rn=Se("jobs/createJob",async(t,{rejectWithValue:r})=>{try{return await Qt.createJob(t)}catch(s){return r(s.message)}}),sn=Se("jobs/applyForJob",async({jobId:t,applicationData:r},{rejectWithValue:s})=>{try{return await Qt.applyForJob(t,r)}catch(n){return s(n.message)}}),an=Se("jobs/fetchSavedJobs",async(t,{rejectWithValue:r})=>{try{return await Qt.getSavedJobs(t)}catch(s){return r(s.message)}}),va=Se("jobs/saveJob",async(t,{rejectWithValue:r})=>{try{return await Qt.saveJob(t)}catch(s){return r(s.message)}}),wa=Se("jobs/unsaveJob",async(t,{rejectWithValue:r})=>{try{return await Qt.unsaveJob(t),t}catch(s){return r(s.message)}}),Mo=Vt({name:"jobs",initialState:{jobs:[],currentJob:null,applications:[],loading:!1,error:null,totalPages:0,currentPage:1,savedJobs:[],savedLoading:!1,savedError:null,savedTotalPages:0,savedCurrentPage:1,filters:{search:"",profession:"",job_type:"",min_budget:"",max_budget:"",status:"open",sort:""}},reducers:{setFilters:(t,r)=>{t.filters={...t.filters,...r.payload},Object.prototype.hasOwnProperty.call(r.payload,"page")?t.currentPage=r.payload.page:t.currentPage=1},clearJobError:t=>{t.error=null},setCurrentPage:(t,r)=>{t.currentPage=r.payload},setJobs:(t,r)=>{t.jobs=r.payload},setLoading:(t,r)=>{t.loading=r.payload},setError:(t,r)=>{t.error=r.payload},setSavedFilters:(t,r)=>{t.savedFilters={...t.savedFilters,...r.payload},Object.prototype.hasOwnProperty.call(r.payload,"page")?t.savedCurrentPage=r.payload.page:t.savedCurrentPage=1},clearSavedError:t=>{t.savedError=null}},extraReducers:t=>{t.addCase(Fs.pending,r=>{r.loading=!0,r.error=null}).addCase(Fs.fulfilled,(r,s)=>{r.loading=!1,Array.isArray(s.payload)?(r.jobs=s.payload,r.totalPages=1):(r.jobs=s.payload.jobs||[],r.totalPages=s.payload.totalPages||1)}).addCase(Fs.rejected,(r,s)=>{r.loading=!1,r.error=s.payload}).addCase(ya.pending,r=>{r.loading=!0,r.error=null}).addCase(ya.fulfilled,(r,s)=>{r.loading=!1,r.currentJob=s.payload}).addCase(ya.rejected,(r,s)=>{r.loading=!1,r.error=s.payload}).addCase(rn.pending,r=>{r.loading=!0,r.error=null}).addCase(rn.fulfilled,(r,s)=>{r.loading=!1,r.jobs.unshift(s.payload)}).addCase(rn.rejected,(r,s)=>{r.loading=!1,r.error=s.payload}).addCase(sn.pending,r=>{r.loading=!0,r.error=null}).addCase(sn.fulfilled,r=>{r.loading=!1}).addCase(sn.rejected,(r,s)=>{r.loading=!1,r.error=s.payload}).addCase(an.pending,r=>{r.savedLoading=!0,r.savedError=null}).addCase(an.fulfilled,(r,s)=>{r.savedLoading=!1,r.savedJobs=s.payload.jobs||[],r.savedTotalPages=s.payload.totalPages||1}).addCase(an.rejected,(r,s)=>{r.savedLoading=!1,r.savedError=s.payload}).addCase(va.pending,r=>{r.savedLoading=!0,r.savedError=null}).addCase(va.fulfilled,r=>{r.savedLoading=!1}).addCase(va.rejected,(r,s)=>{r.savedLoading=!1,r.savedError=s.payload}).addCase(wa.pending,r=>{r.savedLoading=!0,r.savedError=null}).addCase(wa.fulfilled,(r,s)=>{r.savedLoading=!1,r.savedJobs=r.savedJobs.filter(n=>n.id!==s.payload)}).addCase(wa.rejected,(r,s)=>{r.savedLoading=!1,r.savedError=s.payload})}}),xu=t=>t.jobs.jobs,hu=t=>t.jobs.currentJob,zo=t=>t.jobs.loading,Lo=t=>t.jobs.error,pu=t=>t.jobs.filters,mu=to([t=>t.jobs.currentPage,t=>t.jobs.totalPages],(t,r)=>({currentPage:t,totalPages:r})),gu=t=>t.jobs.savedJobs;to([t=>t.jobs.savedCurrentPage,t=>t.jobs.savedTotalPages],(t,r)=>({currentPage:t,totalPages:r}));const{setFilters:Ii,clearJobError:cm,setCurrentPage:dm,setJobs:um,setLoading:xm,setError:hm,setSavedFilters:pm,clearSavedError:mm}=Mo.actions,bu=Mo.reducer,Ca=Xe.create({baseURL:yt.USER_SERVICE,timeout:3e4,headers:{"Content-Type":"application/json"}}),ii=Xe.create({baseURL:yt.JOB_SERVICE,timeout:3e4,headers:{"Content-Type":"application/json"}});[Ca,ii].forEach(t=>{t.interceptors.request.use(r=>{const s=localStorage.getItem("kelmah_auth_token");return s&&(r.headers.Authorization=`Bearer ${s}`),r},r=>Promise.reject(r))});const vs={metrics:{totalJobs:45,activeJobs:12,completedJobs:28,totalApplications:156,acceptedApplications:23,pendingApplications:18,totalEarnings:15420,monthlyEarnings:3200,averageRating:4.7,profileCompletion:85},recentJobs:[{id:"job-recent-1",title:"Kitchen Cabinet Installation",company:"Mitchell Residence",location:"Accra, Greater Accra",budget:5500,currency:"GH₵",status:"active",deadline:new Date(Date.now()+1e3*60*60*24*7),applicationsCount:8,postedAt:new Date(Date.now()-1e3*60*60*24*2)},{id:"job-recent-2",title:"Bathroom Plumbing Repair",company:"Chen Family Home",location:"Kumasi, Ashanti Region",budget:800,currency:"GH₵",status:"pending",deadline:new Date(Date.now()+1e3*60*60*48),applicationsCount:12,postedAt:new Date(Date.now()-1e3*60*60*6)},{id:"job-recent-3",title:"House Electrical Rewiring",company:"Thompson Residence",location:"Takoradi, Western Region",budget:3200,currency:"GH₵",status:"completed",deadline:new Date(Date.now()-1e3*60*60*24*3),applicationsCount:6,postedAt:new Date(Date.now()-1e3*60*60*24*10)}],activeWorkers:[{id:"worker-1",name:"Tony Gate",skills:["Carpentry","Furniture Making"],rating:4.8,completedJobs:15,location:"Accra, Greater Accra",status:"available",lastActive:new Date(Date.now()-1e3*60*30)},{id:"worker-2",name:"Emmanuel Asante",skills:["Plumbing","Pipe Installation"],rating:4.6,completedJobs:12,location:"Kumasi, Ashanti Region",status:"busy",lastActive:new Date(Date.now()-1e3*60*60*2)},{id:"worker-3",name:"Kwame Osei",skills:["Electrical","Wiring"],rating:4.9,completedJobs:20,location:"Takoradi, Western Region",status:"available",lastActive:new Date(Date.now()-1e3*60*15)}],analytics:{jobsThisMonth:8,applicationsThisMonth:25,earningsThisMonth:3200,averageResponseTime:"2.5 hours",completionRate:94,clientSatisfaction:4.7,monthlyGrowth:{jobs:15,earnings:12,applications:8},topSkills:[{skill:"Carpentry",demand:85,jobs:12},{skill:"Plumbing",demand:78,jobs:9},{skill:"Electrical",demand:72,jobs:8},{skill:"Painting",demand:65,jobs:6}]}},is=Se("dashboard/fetchData",async(t,{rejectWithValue:r})=>{try{const[s,n,i,c]=await Promise.allSettled([Ca.get("/api/users/dashboard/metrics"),ii.get("/api/jobs/dashboard"),Ca.get("/api/users/dashboard/workers"),Ca.get("/api/users/dashboard/analytics")]),d=s.status==="fulfilled"?s.value.data:vs.metrics,x=n.status==="fulfilled"?n.value.data:vs.recentJobs,m=i.status==="fulfilled"?i.value.data:vs.activeWorkers,u=c.status==="fulfilled"?c.value.data:vs.analytics;return s.status==="rejected"&&console.warn("User service unavailable for metrics, using mock data"),n.status==="rejected"&&console.warn("Job service unavailable for dashboard jobs, using mock data"),i.status==="rejected"&&console.warn("User service unavailable for workers data, using mock data"),c.status==="rejected"&&console.warn("User service unavailable for analytics, using mock data"),{metrics:d,recentJobs:x,activeWorkers:m,analytics:u}}catch{return console.warn("All dashboard services unavailable, using complete mock data"),vs}}),ju=Se("dashboard/updateJobStatus",async({jobId:t,status:r},{rejectWithValue:s})=>{try{const n=await ii.patch(`/api/jobs/${t}/status`,{status:r});return{jobId:t,...n.data}}catch{return console.warn("Job service unavailable for status update, simulating success"),{jobId:t,status:r,updatedAt:new Date,message:"Job status updated (mock)"}}}),fu=Vt({name:"dashboard",initialState:{data:{metrics:{},recentJobs:[],activeWorkers:[],analytics:{}},loading:!1,error:null,selectedJob:null,selectedWorker:null},reducers:{setSelectedJob:(t,r)=>{t.selectedJob=r.payload},setSelectedWorker:(t,r)=>{t.selectedWorker=r.payload},clearDashboardError:t=>{t.error=null}},extraReducers:t=>{t.addCase(is.pending,r=>{r.loading=!0,r.error=null}).addCase(is.fulfilled,(r,s)=>{r.loading=!1,r.data=s.payload}).addCase(is.rejected,(r,s)=>{r.loading=!1,r.error=s.payload}).addCase(ju.fulfilled,(r,s)=>{const n=r.data.recentJobs.findIndex(i=>i.id===s.payload.jobId);n!==-1&&(r.data.recentJobs[n]={...r.data.recentJobs[n],...s.payload})})}}),yu=fu.reducer,vu={notifications:[],unreadCount:0,loading:!1,error:null},wu=Vt({name:"notification",initialState:vu,reducers:{setNotifications:(t,r)=>{t.notifications=r.payload,t.unreadCount=r.payload.filter(s=>!s.read).length},addNotification:(t,r)=>{t.notifications.unshift(r.payload),r.payload.read||(t.unreadCount+=1)},removeNotification:(t,r)=>{const s=t.notifications.find(n=>n.id===r.payload);t.notifications=t.notifications.filter(n=>n.id!==r.payload),s&&!s.read&&(t.unreadCount=Math.max(0,t.unreadCount-1))},markAsRead:(t,r)=>{const s=t.notifications.findIndex(n=>n.id===r.payload);s!==-1&&!t.notifications[s].read&&(t.notifications[s].read=!0,t.unreadCount=Math.max(0,t.unreadCount-1))},setUnreadCount:(t,r)=>{t.unreadCount=r.payload},setLoading:(t,r)=>{t.loading=r.payload},setError:(t,r)=>{t.error=r.payload},clearError:t=>{t.error=null}}}),Cu=t=>t.notification.unreadCount,ku=wu.reducer,pe=Xe.create({baseURL:To,timeout:Eo.apiTimeout,headers:{"Content-Type":"application/json",Accept:"application/json"},withCredentials:!0});pe.interceptors.request.use(t=>{const r=localStorage.getItem(lt.tokenKey);return r&&(t.headers.Authorization=`Bearer ${r}`),t.metadata={startTime:new Date},t},t=>(console.error("❌ Request Error:",t),Promise.reject(t)));pe.interceptors.response.use(t=>(new Date-t.config.metadata.startTime,t),async t=>{var s,n,i,c,d,x;const r=t.config;if((s=r==null?void 0:r.metadata)!=null&&s.startTime&&new Date-r.metadata.startTime,((n=t.response)==null?void 0:n.status)===401&&!r._retry){r._retry=!0;const m=localStorage.getItem(lt.refreshTokenKey);if(m)try{const u=await Xe.post(`${To}/api/auth/refresh-token`,{refreshToken:m},{headers:{"Content-Type":"application/json"},timeout:Eo.apiTimeout}),v=((i=u.data.data)==null?void 0:i.token)||u.data.token;if(v)return localStorage.setItem(lt.tokenKey,v),r.headers.Authorization=`Bearer ${v}`,pe(r)}catch(u){return console.error("Token refresh failed:",u),localStorage.removeItem(lt.tokenKey),localStorage.removeItem(lt.refreshTokenKey),localStorage.removeItem(lt.userKey),typeof window<"u"&&(window.location.href="/login?reason=session_expired"),Promise.reject(u)}else typeof window<"u"&&(window.location.href="/login?reason=no_token")}return((c=t.response)==null?void 0:c.status)===403&&(console.warn("Access forbidden - insufficient permissions"),typeof window<"u"&&window.location.pathname!=="/unauthorized"&&(window.location.href="/unauthorized")),((d=t.response)==null?void 0:d.status)===404&&console.warn("Resource not found:",r==null?void 0:r.url),((x=t.response)==null?void 0:x.status)>=500&&console.error("Server error occurred"),t.response||console.error("Network error - check your internet connection"),Promise.reject(t)});const Ir=Xe.create({baseURL:yt.AUTH_SERVICE,timeout:5e3,headers:{"Content-Type":"application/json"}});Xe.create({baseURL:yt.USER_SERVICE,timeout:5e3,headers:{"Content-Type":"application/json"}});Xe.create({baseURL:yt.JOB_SERVICE,timeout:5e3,headers:{"Content-Type":"application/json"}});Xe.create({baseURL:yt.USER_SERVICE,timeout:5e3,headers:{"Content-Type":"application/json"}});const $o={getEvents:async()=>{try{return(await pe.get("/api/events")).data}catch(t){throw console.error("Error fetching events:",t),t}},createEvent:async t=>{try{return(await pe.post("/events",t)).data}catch(r){throw console.error("Error creating event:",r),r}},updateEvent:async(t,r)=>{try{return(await pe.put(`/api/events/${t}`,r)).data}catch(s){throw console.error("Error updating event:",s),s}},deleteEvent:async t=>{try{await pe.delete(`/api/events/${t}`)}catch(r){throw console.error("Error deleting event:",r),r}}},Su={events:[],loading:!1,error:null,selectedDate:new Date},nn=Se("calendar/fetchEvents",async(t,{rejectWithValue:r})=>{try{const s=await $o.getEvents();return console.log("Fetched events:",s),s}catch(s){return console.error("Error in fetchEvents thunk:",s),r(s.message||"Failed to fetch events")}}),on=Se("calendar/addEvent",async(t,{rejectWithValue:r})=>{try{return await $o.createEvent(t)}catch(s){return r(s.message)}}),Au=Vt({name:"calendar",initialState:Su,reducers:{setSelectedDate:(t,r)=>{t.selectedDate=r.payload},clearError:t=>{t.error=null}},extraReducers:t=>{t.addCase(nn.pending,r=>{r.loading=!0,r.error=null}).addCase(nn.fulfilled,(r,s)=>{r.loading=!1,r.events=s.payload}).addCase(nn.rejected,(r,s)=>{r.loading=!1,r.error=s.payload}).addCase(on.pending,r=>{r.loading=!0,r.error=null}).addCase(on.fulfilled,(r,s)=>{r.loading=!1,r.events.push(s.payload)}).addCase(on.rejected,(r,s)=>{r.loading=!1,r.error=s.payload})}}),Pu=Au.reducer,ka=Se("worker/fetchProfile",async(t,{rejectWithValue:r})=>{var s,n;try{return(await pe.get("/api/worker/profile")).data}catch(i){return r(((n=(s=i.response)==null?void 0:s.data)==null?void 0:n.message)||"Failed to fetch worker profile")}}),Sa=Se("worker/updateProfile",async(t,{rejectWithValue:r})=>{var s,n;try{return(await pe.put("/api/worker/profile",t)).data}catch(i){return r(((n=(s=i.response)==null?void 0:s.data)==null?void 0:n.message)||"Failed to update worker profile")}}),ln=Se("worker/fetchSkills",async(t,{rejectWithValue:r})=>{var s,n;try{return(await pe.get("/api/worker/skills")).data}catch(i){return r(((n=(s=i.response)==null?void 0:s.data)==null?void 0:n.message)||"Failed to fetch worker skills")}}),Du=Se("worker/updateSkills",async(t,{rejectWithValue:r})=>{var s,n;try{return(await pe.put("/api/worker/skills",{skills:t})).data}catch(i){return r(((n=(s=i.response)==null?void 0:s.data)==null?void 0:n.message)||"Failed to update worker skills")}}),cn=Se("worker/fetchJobs",async(t="active",{rejectWithValue:r})=>{var s,n;try{return(await pe.get(`/api/worker/jobs?status=${t}`)).data}catch(i){return r(((n=(s=i.response)==null?void 0:s.data)==null?void 0:n.message)||"Failed to fetch worker jobs")}}),dn=Se("worker/fetchApplications",async(t="pending",{rejectWithValue:r})=>{var s,n;try{return(await pe.get(`/api/worker/applications?status=${t}`)).data}catch(i){return r(((n=(s=i.response)==null?void 0:s.data)==null?void 0:n.message)||"Failed to fetch worker applications")}}),Iu=Se("worker/submitApplication",async({jobId:t,applicationData:r},{rejectWithValue:s})=>{var n,i;try{return(await pe.post(`/api/jobs/${t}/apply`,r)).data}catch(c){return s(((i=(n=c.response)==null?void 0:n.data)==null?void 0:i.message)||"Failed to submit application")}}),un=Se("worker/fetchEarnings",async(t="month",{rejectWithValue:r})=>{var s,n;try{return(await pe.get(`/api/worker/earnings?period=${t}`)).data}catch(i){return r(((n=(s=i.response)==null?void 0:s.data)==null?void 0:n.message)||"Failed to fetch worker earnings")}}),xn=Se("worker/updateAvailability",async(t,{rejectWithValue:r})=>{var s,n;try{return(await pe.put("/api/worker/availability",t)).data}catch(i){return r(((n=(s=i.response)==null?void 0:s.data)==null?void 0:n.message)||"Failed to update availability")}}),Ru=Vt({name:"worker",initialState:{profile:null,skills:[],jobs:{active:[],completed:[],available:[]},applications:{pending:[],accepted:[],rejected:[]},portfolio:[],earnings:{totalEarned:0,pendingPayments:0,recentTransactions:[],monthlyData:[]},availability:{schedule:{},preferences:{}},loading:{profile:!1,skills:!1,jobs:!1,applications:!1,earnings:!1,availability:!1},error:{profile:null,skills:null,jobs:null,applications:null,earnings:null,availability:null}},reducers:{clearWorkerErrors:t=>{t.error={profile:null,skills:null,jobs:null,applications:null,earnings:null,availability:null}},addPortfolioItem:(t,r)=>{t.portfolio.push(r.payload)},removePortfolioItem:(t,r)=>{t.portfolio=t.portfolio.filter(s=>s.id!==r.payload)},updatePortfolioItem:(t,r)=>{const s=t.portfolio.findIndex(n=>n.id===r.payload.id);s!==-1&&(t.portfolio[s]=r.payload)}},extraReducers:t=>{t.addCase(ka.pending,r=>{r.loading.profile=!0,r.error.profile=null}).addCase(ka.fulfilled,(r,s)=>{r.loading.profile=!1,r.profile=s.payload}).addCase(ka.rejected,(r,s)=>{r.loading.profile=!1,r.error.profile=s.payload}).addCase(Sa.pending,r=>{r.loading.profile=!0,r.error.profile=null}).addCase(Sa.fulfilled,(r,s)=>{r.loading.profile=!1,r.profile=s.payload}).addCase(Sa.rejected,(r,s)=>{r.loading.profile=!1,r.error.profile=s.payload}).addCase(ln.pending,r=>{r.loading.skills=!0,r.error.skills=null}).addCase(ln.fulfilled,(r,s)=>{r.loading.skills=!1,r.skills=s.payload}).addCase(ln.rejected,(r,s)=>{r.loading.skills=!1,r.error.skills=s.payload}).addCase(Du.fulfilled,(r,s)=>{r.skills=s.payload}).addCase(cn.pending,r=>{r.loading.jobs=!0,r.error.jobs=null}).addCase(cn.fulfilled,(r,s)=>{r.loading.jobs=!1;const{jobs:n,status:i}=s.payload;r.jobs[i]=n}).addCase(cn.rejected,(r,s)=>{r.loading.jobs=!1,r.error.jobs=s.payload}).addCase(dn.pending,r=>{r.loading.applications=!0,r.error.applications=null}).addCase(dn.fulfilled,(r,s)=>{r.loading.applications=!1;const{applications:n,status:i}=s.payload;r.applications[i]=n}).addCase(dn.rejected,(r,s)=>{r.loading.applications=!1,r.error.applications=s.payload}).addCase(Iu.fulfilled,(r,s)=>{r.applications.pending.push(s.payload)}).addCase(un.pending,r=>{r.loading.earnings=!0,r.error.earnings=null}).addCase(un.fulfilled,(r,s)=>{r.loading.earnings=!1,r.earnings=s.payload}).addCase(un.rejected,(r,s)=>{r.loading.earnings=!1,r.error.earnings=s.payload}).addCase(xn.pending,r=>{r.loading.availability=!0,r.error.availability=null}).addCase(xn.fulfilled,(r,s)=>{r.loading.availability=!1,r.availability=s.payload}).addCase(xn.rejected,(r,s)=>{r.loading.availability=!1,r.error.availability=s.payload})}}),Fu=Ru.reducer,oi=Xe.create({baseURL:yt.AUTH_SERVICE,timeout:5e3,headers:{"Content-Type":"application/json"}}),qa=oi,Xs=oi;oi.interceptors.request.use(t=>{const r=localStorage.getItem("kelmah_auth_token");return r&&(t.headers.Authorization=`Bearer ${r}`),t},t=>Promise.reject(t));const Wu=()=>{try{const t=localStorage.getItem("user");return t?JSON.parse(t):null}catch(t){return console.error("Error parsing stored user data:",t),null}},Tu=()=>{const t=Wu();return t?{id:t.id||t._id,firstName:t.firstName||t.first_name||"User",lastName:t.lastName||t.last_name||"",email:t.email||"user@example.com",phone:t.phone||t.phoneNumber||"",company:t.company||t.companyName||"",location:t.location||t.address||"",bio:t.bio||t.description||"",avatar:t.avatar||t.profilePicture||"/api/placeholder/150/150",role:t.role||t.userType||"hirer",rating:t.rating||0,reviewsCount:t.reviewsCount||0,totalJobsPosted:t.totalJobsPosted||0,totalAmountSpent:t.totalAmountSpent||0,currency:t.currency||"GH₵",verified:t.verified||!1,joinedAt:t.createdAt?new Date(t.createdAt):new Date,completionRate:t.completionRate||0,responseTime:t.responseTime||"N/A",preferences:t.preferences||{communicationMethod:"email",jobNotifications:!0,marketingEmails:!1,currency:"GHS"},businessDetails:t.businessDetails||{registrationNumber:"",industry:"",employees:"",website:""}}:{id:"hirer-001",firstName:"Sarah",lastName:"Mitchell",email:"sarah.mitchell@example.com",phone:"+233 24 567 8901",company:"Mitchell Construction Ltd",location:"Accra, Greater Accra",bio:"We are a leading construction company specializing in residential and commercial projects. We value quality workmanship and reliable partnerships with skilled professionals.",avatar:"/api/placeholder/150/150",rating:4.8,reviewsCount:28,totalJobsPosted:45,totalAmountSpent:125e3,currency:"GH₵",verified:!0,joinedAt:new Date("2021-08-15"),completionRate:95,responseTime:"2 hours",preferences:{communicationMethod:"email",jobNotifications:!0,marketingEmails:!1,currency:"GHS"},businessDetails:{registrationNumber:"BN/2021/08/12345",industry:"Construction & Real Estate",employees:"10-50",website:"https://mitchellconstruction.com.gh"}}},ar={profile:{id:"hirer-001",firstName:"Sarah",lastName:"Mitchell",email:"sarah.mitchell@example.com",phone:"+233 24 567 8901",company:"Mitchell Construction Ltd",location:"Accra, Greater Accra",bio:"We are a leading construction company specializing in residential and commercial projects. We value quality workmanship and reliable partnerships with skilled professionals.",avatar:"/api/placeholder/150/150",rating:4.8,reviewsCount:28,totalJobsPosted:45,totalAmountSpent:125e3,currency:"GH₵",verified:!0,joinedAt:new Date("2021-08-15"),completionRate:95,responseTime:"2 hours",preferences:{communicationMethod:"email",jobNotifications:!0,marketingEmails:!1,currency:"GHS"},businessDetails:{registrationNumber:"BN/2021/08/12345",industry:"Construction & Real Estate",employees:"10-50",website:"https://mitchellconstruction.com.gh"}},jobs:{active:[{id:"job-h1",title:"Kitchen Renovation - Custom Cabinets",description:"We need a skilled carpenter to design and install custom kitchen cabinets for a modern home renovation project.",category:"Carpentry",type:"fixed",budget:5500,currency:"GHS",status:"active",location:"East Legon, Accra",skills:["Carpentry","Cabinet Making","Wood Finishing"],urgency:"medium",duration:"3 weeks",applicationsCount:8,viewsCount:24,createdAt:new Date(Date.now()-1e3*60*60*24*3),deadline:new Date(Date.now()+1e3*60*60*24*14),requirements:["Minimum 3 years carpentry experience","Portfolio of kitchen cabinet work","Own tools and transportation","Available for 3-week project timeline"],benefits:["Competitive fixed rate payment","Potential for future projects","Professional reference provided","Material costs covered separately"]},{id:"job-h2",title:"Office Interior Design & Setup",description:"Looking for an experienced interior designer to completely redesign and set up our new office space.",category:"Interior Design",type:"fixed",budget:15e3,currency:"GHS",status:"active",location:"Airport City, Accra",skills:["Interior Design","Space Planning","Project Management"],urgency:"high",duration:"4 weeks",applicationsCount:12,viewsCount:45,createdAt:new Date(Date.now()-1e3*60*60*24*5),deadline:new Date(Date.now()+1e3*60*60*24*21),requirements:["Interior design certification or equivalent experience","Proven track record with office designs","Ability to manage full project lifecycle","Experience with modern office layouts"],benefits:["High-value project with room for creativity","Milestone-based payments","Portfolio piece for future marketing","Long-term client relationship potential"]},{id:"job-h3",title:"Residential Electrical System Upgrade",description:"Complete electrical system upgrade for a 4-bedroom house including new wiring, outlets, and modern electrical panel.",category:"Electrical",type:"fixed",budget:8500,currency:"GHS",status:"active",location:"Tema, Greater Accra",skills:["Electrical Installation","Wiring","Safety Certification"],urgency:"medium",duration:"2 weeks",applicationsCount:6,viewsCount:18,createdAt:new Date(Date.now()-1e3*60*60*24*2),deadline:new Date(Date.now()+1e3*60*60*24*10),requirements:["Licensed electrician certification","Experience with residential electrical systems","Safety protocol compliance","Insurance coverage required"],benefits:["Fair market rate compensation","Materials provided by client","Flexible working hours","Safety equipment provided"]}],completed:[{id:"job-c1",title:"Bathroom Renovation - Modern Design",description:"Complete bathroom renovation with modern fixtures and tiling.",category:"Plumbing",type:"fixed",budget:7800,currency:"GHS",status:"completed",location:"Spintex, Accra",skills:["Plumbing","Tiling","Bathroom Design"],duration:"2.5 weeks",applicationsCount:9,completedAt:new Date(Date.now()-1e3*60*60*24*15),createdAt:new Date(Date.now()-1e3*60*60*24*45),workerName:"Michael Asante",workerRating:4.7,finalAmount:7800,clientRating:5,clientReview:"Excellent work! The bathroom looks amazing and everything was completed on schedule."},{id:"job-c2",title:"Living Room Painting & Decoration",description:"Professional painting and decorative finishing for large living room.",category:"Painting",type:"fixed",budget:3200,currency:"GHS",status:"completed",location:"Achimota, Accra",skills:["Interior Painting","Color Consultation","Surface Preparation"],duration:"1 week",applicationsCount:15,completedAt:new Date(Date.now()-1e3*60*60*24*30),createdAt:new Date(Date.now()-1e3*60*60*24*50),workerName:"David Mensah",workerRating:4.5,finalAmount:3200,clientRating:4,clientReview:"Good quality work. David was professional and completed the job as agreed."}],draft:[{id:"job-d1",title:"Garden Landscaping Project",description:"Design and implement landscaping for front and back garden areas.",category:"Landscaping",type:"fixed",budget:12e3,currency:"GHS",status:"draft",location:"Labone, Accra",skills:["Landscaping","Garden Design","Plant Selection"],urgency:"low",duration:"3 weeks",createdAt:new Date(Date.now()-1e3*60*60*24*1),requirements:["Landscaping certification preferred","Knowledge of local plants and climate","Creative design portfolio","Equipment and tools included"],benefits:["Creative freedom in design","Long-term maintenance contract potential","High-visibility project","Premium rate for quality work"]},{id:"job-d2",title:"Commercial Kitchen Equipment Installation",description:"Installation of professional kitchen equipment for new restaurant.",category:"Installation",type:"fixed",budget:18e3,currency:"GHS",status:"draft",location:"Osu, Accra",skills:["Equipment Installation","Plumbing","Electrical"],urgency:"high",duration:"2 weeks",createdAt:new Date(Date.now()-1e3*60*60*24*2),requirements:["Commercial kitchen experience","Multi-trade capabilities (plumbing/electrical)","Equipment manufacturer certifications","Health and safety compliance"],benefits:["High-value commercial project","Opportunity for ongoing maintenance contracts","Professional kitchen environment","Potential restaurant chain expansion work"]}]},analytics:{overview:{totalJobsPosted:45,activeJobs:3,completedJobs:32,draftJobs:2,cancelledJobs:8,totalSpent:125e3,averageJobValue:3289,successRate:84,averageCompletionTime:18},monthlyStats:[{month:"Jan",jobsPosted:6,totalSpent:18500,avgRating:4.7},{month:"Feb",jobsPosted:4,totalSpent:12e3,avgRating:4.8},{month:"Mar",jobsPosted:7,totalSpent:21500,avgRating:4.6},{month:"Apr",jobsPosted:5,totalSpent:15e3,avgRating:4.9},{month:"May",jobsPosted:8,totalSpent:23500,avgRating:4.8},{month:"Jun",jobsPosted:6,totalSpent:18200,avgRating:4.7}],topCategories:[{category:"Carpentry",jobsPosted:12,totalSpent:35e3,avgRating:4.8},{category:"Plumbing",jobsPosted:8,totalSpent:28e3,avgRating:4.7},{category:"Electrical",jobsPosted:6,totalSpent:22e3,avgRating:4.9},{category:"Painting",jobsPosted:5,totalSpent:15e3,avgRating:4.6},{category:"Interior Design",jobsPosted:4,totalSpent:25e3,avgRating:4.8}],workerInteractions:{totalApplicationsReceived:284,uniqueWorkersInteracted:67,averageApplicationsPerJob:8.4,topWorkers:[{name:"Tony Gate",jobsCompleted:5,rating:4.8,totalEarned:18500},{name:"Sarah Williams",jobsCompleted:3,rating:4.9,totalEarned:22e3},{name:"Michael Asante",jobsCompleted:4,rating:4.7,totalEarned:15800}]}},applications:[{id:"app-1",jobId:"job-h1",jobTitle:"Kitchen Renovation - Custom Cabinets",applicant:{id:"worker-1",name:"Tony Gate",avatar:"/api/placeholder/50/50",rating:4.8,completedJobs:23,skills:["Carpentry","Cabinet Making","Wood Finishing"]},appliedAt:new Date(Date.now()-1e3*60*60*24*2),status:"pending",proposedRate:5200,estimatedDuration:"3 weeks",coverLetter:"I have extensive experience in custom cabinet making and would love to work on your kitchen renovation project.",portfolio:["cabinet1.jpg","cabinet2.jpg","kitchen_work.jpg"]},{id:"app-2",jobId:"job-h2",jobTitle:"Office Interior Design & Setup",applicant:{id:"worker-2",name:"Sarah Williams",avatar:"/api/placeholder/50/50",rating:4.9,completedJobs:31,skills:["Interior Design","Space Planning","Project Management"]},appliedAt:new Date(Date.now()-1e3*60*60*24*1),status:"pending",proposedRate:14500,estimatedDuration:"4 weeks",coverLetter:"I specialize in modern office design and can transform your space into a productive and inspiring environment.",portfolio:["office1.jpg","office2.jpg","design_portfolio.pdf"]}],payments:{summary:{totalPaid:87500,pendingPayments:23500,escrowBalance:45e3,totalEscrowCreated:156e3,averagePaymentTime:2.3,paymentMethods:{mobileMoney:65,bankTransfer:30,cardPayment:5}},recentTransactions:[{id:"pay-1",type:"payment_released",jobTitle:"Bathroom Renovation",workerName:"Michael Asante",amount:7800,date:new Date(Date.now()-1e3*60*60*24*15),status:"completed",method:"Mobile Money"},{id:"pay-2",type:"escrow_created",jobTitle:"Kitchen Renovation",amount:5500,date:new Date(Date.now()-1e3*60*60*24*3),status:"active",method:"Bank Transfer"}]}},Ws=Se("hirer/fetchProfile",async(t,{rejectWithValue:r})=>{try{return(await qa.get("/api/users/me/profile")).data}catch(s){return console.warn("User service unavailable for hirer profile, using real user data:",s.message),{success:!0,data:Tu()}}}),hn=Se("hirer/updateProfile",async(t,{rejectWithValue:r})=>{try{return(await qa.put("/api/users/me/profile",t)).data}catch(s){return console.warn("User service unavailable for profile update, simulating success:",s.message),{success:!0,data:{...ar.profile,...t,updatedAt:new Date},message:"Profile updated successfully (mock)"}}}),_t=Se("hirer/fetchJobs",async(t="active",{rejectWithValue:r})=>{try{const s=await Xs.get("/api/jobs/my-jobs",{params:{status:t,role:"hirer"}});return{status:t,jobs:s.data}}catch(s){console.warn(`Job service unavailable for hirer jobs (${t}), using comprehensive mock data:`,s.message);const n=ar.jobs[t]||[];return{status:t,jobs:n}}}),Aa=Se("hirer/createJob",async(t,{rejectWithValue:r})=>{try{return(await Xs.post("/api/jobs",t)).data}catch(s){return console.warn("Job service unavailable for job creation, simulating success:",s.message),{success:!0,data:{id:`job-${Date.now()}`,...t,status:"draft",applicationsCount:0,viewsCount:0,createdAt:new Date,currency:"GHS"},message:"Job created successfully (mock)"}}}),li=Se("hirer/updateJobStatus",async({jobId:t,status:r},{rejectWithValue:s})=>{try{return(await Xs.put(`/api/jobs/${t}/status`,{status:r})).data}catch(n){return console.warn("Job service unavailable for status update, simulating success:",n.message),{success:!0,data:{jobId:t,status:r,updatedAt:new Date},message:`Job status updated to ${r} (mock)`}}}),ci=Se("hirer/deleteJob",async(t,{rejectWithValue:r})=>{try{const s=await Xs.delete(`/api/jobs/${t}`);return{jobId:t}}catch(s){return console.warn("Job service unavailable for job deletion, simulating success:",s.message),{success:!0,data:{jobId:t},message:"Job deleted successfully (mock)"}}}),Ts=Se("hirer/fetchJobApplications",async({jobId:t,status:r},{rejectWithValue:s})=>{try{const n=await Xs.get(`/api/jobs/${t}/applications`,{params:{status:r}});return{jobId:t,applications:n.data}}catch(n){console.warn("Job service unavailable for applications, using mock data:",n.message);const i=ar.applications.filter(c=>c.jobId===t);return{jobId:t,applications:i}}}),pn=Se("hirer/fetchAnalytics",async(t,{rejectWithValue:r})=>{try{return(await qa.get("/api/users/me/analytics")).data}catch(s){return console.warn("User service unavailable for analytics, using comprehensive mock data:",s.message),{success:!0,data:ar.analytics}}}),mn=Se("hirer/fetchPaymentSummary",async(t,{rejectWithValue:r})=>{try{return(await qa.get("/api/payments/summary")).data}catch(s){return console.warn("Payment service unavailable, using mock payment data:",s.message),{success:!0,data:ar.payments}}}),Ri={profile:null,jobs:{active:[],completed:[],draft:[]},applications:[],analytics:null,payments:null,loading:{profile:!1,jobs:!1,applications:!1,analytics:!1,payments:!1},error:{profile:null,jobs:null,applications:null,analytics:null,payments:null}},Eu=Vt({name:"hirer",initialState:Ri,reducers:{clearHirerData:t=>Ri,clearHirerErrors:t=>{Object.keys(t.error).forEach(r=>{t.error[r]=null})},updateJobInList:(t,r)=>{const{jobId:s,updates:n}=r.payload;Object.keys(t.jobs).forEach(i=>{const c=t.jobs[i].findIndex(d=>d.id===s);c!==-1&&(t.jobs[i][c]={...t.jobs[i][c],...n})})},removeJobFromList:(t,r)=>{const s=r.payload;Object.keys(t.jobs).forEach(n=>{t.jobs[n]=t.jobs[n].filter(i=>i.id!==s)})}},extraReducers:t=>{t.addCase(Ws.pending,r=>{r.loading.profile=!0,r.error.profile=null}).addCase(Ws.fulfilled,(r,s)=>{r.loading.profile=!1,r.profile=s.payload.data||s.payload}).addCase(Ws.rejected,(r,s)=>{r.loading.profile=!1,r.error.profile=s.payload||"Failed to fetch profile",r.profile=ar.profile}).addCase(hn.pending,r=>{r.loading.profile=!0,r.error.profile=null}).addCase(hn.fulfilled,(r,s)=>{r.loading.profile=!1,r.profile=s.payload.data||s.payload}).addCase(hn.rejected,(r,s)=>{r.loading.profile=!1,r.error.profile=s.payload||"Failed to update profile"}).addCase(_t.pending,r=>{r.loading.jobs=!0,r.error.jobs=null}).addCase(_t.fulfilled,(r,s)=>{r.loading.jobs=!1;const{status:n,jobs:i}=s.payload;r.jobs[n]=i}).addCase(_t.rejected,(r,s)=>{r.loading.jobs=!1,r.error.jobs=s.payload||"Failed to fetch jobs",r.jobs=ar.jobs}).addCase(Aa.pending,r=>{r.loading.jobs=!0,r.error.jobs=null}).addCase(Aa.fulfilled,(r,s)=>{r.loading.jobs=!1;const n=s.payload.data||s.payload;r.jobs.draft.unshift(n)}).addCase(Aa.rejected,(r,s)=>{r.loading.jobs=!1,r.error.jobs=s.payload||"Failed to create job"}).addCase(li.fulfilled,(r,s)=>{const{jobId:n,status:i}=s.payload.data||s.payload;let c=null;Object.keys(r.jobs).forEach(d=>{const x=r.jobs[d].findIndex(m=>m.id===n);x!==-1&&(c={...r.jobs[d][x],status:i},r.jobs[d].splice(x,1))}),c&&r.jobs[i]&&r.jobs[i].unshift(c)}).addCase(ci.fulfilled,(r,s)=>{var i;const n=((i=s.payload.data)==null?void 0:i.jobId)||s.payload.jobId;Object.keys(r.jobs).forEach(c=>{r.jobs[c]=r.jobs[c].filter(d=>d.id!==n)})}).addCase(Ts.pending,r=>{r.loading.applications=!0,r.error.applications=null}).addCase(Ts.fulfilled,(r,s)=>{r.loading.applications=!1;const{applications:n}=s.payload;r.applications=n}).addCase(Ts.rejected,(r,s)=>{r.loading.applications=!1,r.error.applications=s.payload||"Failed to fetch applications",r.applications=ar.applications}).addCase(pn.pending,r=>{r.loading.analytics=!0,r.error.analytics=null}).addCase(pn.fulfilled,(r,s)=>{r.loading.analytics=!1,r.analytics=s.payload.data||s.payload}).addCase(pn.rejected,(r,s)=>{r.loading.analytics=!1,r.error.analytics=s.payload||"Failed to fetch analytics",r.analytics=ar.analytics}).addCase(mn.pending,r=>{r.loading.payments=!0,r.error.payments=null}).addCase(mn.fulfilled,(r,s)=>{r.loading.payments=!1,r.payments=s.payload.data||s.payload}).addCase(mn.rejected,(r,s)=>{r.loading.payments=!1,r.error.payments=s.payload||"Failed to fetch payments",r.payments=ar.payments})}}),Or=t=>r=>r.hirer.jobs[t],gs=t=>r=>r.hirer.loading[t],Ya=t=>r=>r.hirer.error[t],Mu=Eu.reducer,Ft={async getContracts(t={}){try{return(await Ir.get("/api/contracts",{params:t})).data}catch(r){return console.warn("Contract service unavailable, using mock data:",r.message),{contracts:[{id:"contract-1",title:"Kitchen Renovation Contract",status:"active",client:"Sarah Mitchell",worker:"John Contractor",amount:5500,currency:"GHS",startDate:new Date(Date.now()-1e3*60*60*24*7),endDate:new Date(Date.now()+1e3*60*60*24*14),progress:65,milestones:[{name:"Planning & Design",status:"completed",amount:1100},{name:"Demolition",status:"completed",amount:1100},{name:"Installation",status:"in_progress",amount:2200},{name:"Finishing",status:"pending",amount:1100}]},{id:"contract-2",title:"Office Interior Design",status:"pending",client:"Tech Solutions Ltd",worker:"Maria Designer",amount:8e3,currency:"GHS",startDate:new Date(Date.now()+1e3*60*60*24*3),endDate:new Date(Date.now()+1e3*60*60*24*28),progress:0,milestones:[]}],total:2}}},async createContract(t){try{return(await Ir.post("/api/contracts",t)).data}catch(r){return console.warn("Contract service unavailable for creation, simulating success:",r.message),{success:!0,contract:{id:`contract-${Date.now()}`,...t,status:"pending",progress:0,createdAt:new Date}}}},async updateContract(t,r){try{return(await Ir.put(`/api/contracts/${t}`,r)).data}catch(s){return console.warn("Contract service unavailable for update, simulating success:",s.message),{success:!0,contract:{id:t,...r,updatedAt:new Date}}}}},gn=Se("contracts/fetchContracts",async(t={},{rejectWithValue:r})=>{try{return await Ft.getContracts(t)}catch(s){return r(s.message)}}),Pa=Se("contracts/fetchContractById",async(t,{rejectWithValue:r})=>{try{return await Ft.getContractById(t)}catch(s){return r(s.message)}}),Da=Se("contracts/createContract",async(t,{rejectWithValue:r})=>{try{return await Ft.createContract(t)}catch(s){return r(s.message)}}),bn=Se("contracts/updateContract",async({contractId:t,contractData:r},{rejectWithValue:s})=>{try{return await Ft.updateContract(t,r)}catch(n){return s(n.message)}}),Ia=Se("contracts/signContract",async({contractId:t,signatureData:r},{rejectWithValue:s})=>{try{return await Ft.signContract(t,r)}catch(n){return s(n.message)}}),Ra=Se("contracts/sendContractForSignature",async(t,{rejectWithValue:r})=>{try{return await Ft.sendContractForSignature(t)}catch(s){return r(s.message)}}),Fa=Se("contracts/fetchContractMilestones",async(t,{rejectWithValue:r})=>{try{const s=await Ft.getContractMilestones(t);return{contractId:t,milestones:s}}catch(s){return r(s.message)}}),jn=Se("contracts/createMilestone",async({contractId:t,milestoneData:r},{rejectWithValue:s})=>{try{const n=await Ft.createMilestone(t,r);return{contractId:t,milestone:n}}catch(n){return s(n.message)}}),Wa=Se("contracts/completeMilestone",async({contractId:t,milestoneId:r,completionData:s},{rejectWithValue:n})=>{try{const i=await Ft.completeMilestone(t,r,s);return{contractId:t,milestoneId:r,updatedMilestone:i}}catch(i){return n(i.message)}}),Ta=Se("contracts/cancelContract",async({contractId:t,reason:r},{rejectWithValue:s})=>{try{return await Ft.cancelContract(t,r)}catch(n){return s(n.message)}}),Ea=Se("contracts/createDispute",async({contractId:t,disputeData:r},{rejectWithValue:s})=>{try{const n=await Ft.createDispute(t,r);return{contractId:t,dispute:n}}catch(n){return s(n.message)}}),Ma=Se("contracts/fetchContractTemplates",async(t,{rejectWithValue:r})=>{try{return await Ft.getContractTemplates()}catch(s){return r(s.message)}}),zu={contracts:[],currentContract:null,contractMilestones:{},contractTemplates:[],disputes:[],loading:{contracts:!1,currentContract:!1,milestones:!1,templates:!1,createContract:!1,updateContract:!1,signContract:!1,dispute:!1},error:{contracts:null,currentContract:null,milestones:null,templates:null,createContract:null,updateContract:null,signContract:null,dispute:null}},Lu=Vt({name:"contracts",initialState:zu,reducers:{resetContractErrors:t=>{t.error={contracts:null,currentContract:null,milestones:null,templates:null,createContract:null,updateContract:null,signContract:null,dispute:null}},clearCurrentContract:t=>{t.currentContract=null}},extraReducers:t=>{t.addCase(gn.pending,r=>{r.loading.contracts=!0,r.error.contracts=null}).addCase(gn.fulfilled,(r,s)=>{r.loading.contracts=!1,r.contracts=s.payload}).addCase(gn.rejected,(r,s)=>{r.loading.contracts=!1,r.error.contracts=s.payload}).addCase(Pa.pending,r=>{r.loading.currentContract=!0,r.error.currentContract=null}).addCase(Pa.fulfilled,(r,s)=>{r.loading.currentContract=!1,r.currentContract=s.payload}).addCase(Pa.rejected,(r,s)=>{r.loading.currentContract=!1,r.error.currentContract=s.payload}).addCase(Da.pending,r=>{r.loading.createContract=!0,r.error.createContract=null}).addCase(Da.fulfilled,(r,s)=>{r.loading.createContract=!1,r.contracts.push(s.payload),r.currentContract=s.payload}).addCase(Da.rejected,(r,s)=>{r.loading.createContract=!1,r.error.createContract=s.payload}).addCase(bn.pending,r=>{r.loading.updateContract=!0,r.error.updateContract=null}).addCase(bn.fulfilled,(r,s)=>{r.loading.updateContract=!1;const n=s.payload;r.contracts=r.contracts.map(i=>i.id===n.id?n:i),r.currentContract&&r.currentContract.id===n.id&&(r.currentContract=n)}).addCase(bn.rejected,(r,s)=>{r.loading.updateContract=!1,r.error.updateContract=s.payload}).addCase(Ia.pending,r=>{r.loading.signContract=!0,r.error.signContract=null}).addCase(Ia.fulfilled,(r,s)=>{r.loading.signContract=!1;const n=s.payload;r.contracts=r.contracts.map(i=>i.id===n.id?n:i),r.currentContract&&r.currentContract.id===n.id&&(r.currentContract=n)}).addCase(Ia.rejected,(r,s)=>{r.loading.signContract=!1,r.error.signContract=s.payload}).addCase(Ra.pending,r=>{r.loading.currentContract=!0,r.error.currentContract=null}).addCase(Ra.fulfilled,(r,s)=>{r.loading.currentContract=!1;const n=s.payload;r.contracts=r.contracts.map(i=>i.id===n.id?n:i),r.currentContract&&r.currentContract.id===n.id&&(r.currentContract=n)}).addCase(Ra.rejected,(r,s)=>{r.loading.currentContract=!1,r.error.currentContract=s.payload}).addCase(Fa.pending,r=>{r.loading.milestones=!0,r.error.milestones=null}).addCase(Fa.fulfilled,(r,s)=>{r.loading.milestones=!1;const{contractId:n,milestones:i}=s.payload;r.contractMilestones[n]=i}).addCase(Fa.rejected,(r,s)=>{r.loading.milestones=!1,r.error.milestones=s.payload}).addCase(jn.pending,r=>{r.loading.milestones=!0,r.error.milestones=null}).addCase(jn.fulfilled,(r,s)=>{r.loading.milestones=!1;const{contractId:n,milestone:i}=s.payload;r.contractMilestones[n]?r.contractMilestones[n].push(i):r.contractMilestones[n]=[i]}).addCase(jn.rejected,(r,s)=>{r.loading.milestones=!1,r.error.milestones=s.payload}).addCase(Wa.pending,r=>{r.loading.milestones=!0,r.error.milestones=null}).addCase(Wa.fulfilled,(r,s)=>{r.loading.milestones=!1;const{contractId:n,milestoneId:i,updatedMilestone:c}=s.payload;r.contractMilestones[n]&&(r.contractMilestones[n]=r.contractMilestones[n].map(d=>d.id===i?c:d))}).addCase(Wa.rejected,(r,s)=>{r.loading.milestones=!1,r.error.milestones=s.payload}).addCase(Ta.pending,r=>{r.loading.currentContract=!0,r.error.currentContract=null}).addCase(Ta.fulfilled,(r,s)=>{r.loading.currentContract=!1;const n=s.payload;r.contracts=r.contracts.map(i=>i.id===n.id?n:i),r.currentContract&&r.currentContract.id===n.id&&(r.currentContract=n)}).addCase(Ta.rejected,(r,s)=>{r.loading.currentContract=!1,r.error.currentContract=s.payload}).addCase(Ea.pending,r=>{r.loading.dispute=!0,r.error.dispute=null}).addCase(Ea.fulfilled,(r,s)=>{r.loading.dispute=!1;const{dispute:n}=s.payload;r.disputes.push(n)}).addCase(Ea.rejected,(r,s)=>{r.loading.dispute=!1,r.error.dispute=s.payload}).addCase(Ma.pending,r=>{r.loading.templates=!0,r.error.templates=null}).addCase(Ma.fulfilled,(r,s)=>{r.loading.templates=!1,r.contractTemplates=s.payload}).addCase(Ma.rejected,(r,s)=>{r.loading.templates=!1,r.error.templates=s.payload})}}),$u=t=>t.contracts.currentContract,Bu=(t,r)=>t.contracts.contractMilestones[r]||[],_u=t=>t.contracts.contractTemplates,Bo=t=>t.contracts.loading,_o=t=>t.contracts.error,Nu=Lu.reducer,fn=Se("app/fetchUserProfile",async(t,{rejectWithValue:r})=>{try{return(await pe.get(`/users/${t}`)).data}catch(s){return r(s.response.data)}});Se("app/updateUserProfile",async({userId:t,data:r},{rejectWithValue:s})=>{try{return(await pe.put(`/users/${t}`,r)).data}catch(n){return s(n.response.data)}});const Ou=Vt({name:"app",initialState:{user:null,theme:"dark",loading:!1,error:null,notifications:[]},reducers:{setTheme:(t,r)=>{t.theme=r.payload},addNotification:(t,r)=>{t.notifications.push(r.payload)},removeNotification:(t,r)=>{t.notifications=t.notifications.filter(s=>s.id!==r.payload)}},extraReducers:t=>{t.addCase(fn.pending,r=>{r.loading=!0}).addCase(fn.fulfilled,(r,s)=>{r.loading=!1,r.user=s.payload}).addCase(fn.rejected,(r,s)=>{r.loading=!1,r.error=s.payload})}}),Ju=Ou.reducer,yn=Se("reviews/submit",async(t,{rejectWithValue:r,getState:s})=>{var n,i;try{const{auth:c}=s();return(await Xe.post(`${vt}/reviews`,t,{headers:{Authorization:`Bearer ${c.token}`}})).data}catch(c){return r(((i=(n=c.response)==null?void 0:n.data)==null?void 0:i.message)||"Failed to submit review. Please try again.")}}),vn=Se("reviews/fetchByRecipient",async({recipientId:t,recipientType:r,page:s=1,limit:n=10},{rejectWithValue:i,getState:c})=>{var d,x;try{const{auth:m}=c();return(await Xe.get(`${vt}/reviews`,{params:{recipientId:t,recipientType:r,page:s,limit:n},headers:{Authorization:`Bearer ${m.token}`}})).data}catch(m){return i(((x=(d=m.response)==null?void 0:d.data)==null?void 0:x.message)||"Failed to fetch reviews. Please try again.")}}),wn=Se("reviews/fetchByContract",async(t,{rejectWithValue:r,getState:s})=>{var n,i;try{const{auth:c}=s();return(await Xe.get(`${vt}/reviews/contract/${t}`,{headers:{Authorization:`Bearer ${c.token}`}})).data}catch(c){return r(((i=(n=c.response)==null?void 0:n.data)==null?void 0:i.message)||"Failed to fetch reviews for this contract. Please try again.")}}),Uu={reviews:[],contractReviews:[],totalCount:0,currentPage:1,loading:!1,submitting:!1,error:null,success:!1},Hu=Vt({name:"reviews",initialState:Uu,reducers:{clearReviewsState:t=>{t.reviews=[],t.contractReviews=[],t.totalCount=0,t.currentPage=1,t.error=null,t.success=!1},resetReviewSubmission:t=>{t.submitting=!1,t.success=!1,t.error=null}},extraReducers:t=>{t.addCase(yn.pending,r=>{r.submitting=!0,r.error=null,r.success=!1}).addCase(yn.fulfilled,r=>{r.submitting=!1,r.success=!0}).addCase(yn.rejected,(r,s)=>{r.submitting=!1,r.error=s.payload}).addCase(vn.pending,r=>{r.loading=!0,r.error=null}).addCase(vn.fulfilled,(r,s)=>{r.loading=!1,r.reviews=s.payload.reviews,r.totalCount=s.payload.totalCount,r.currentPage=s.payload.currentPage}).addCase(vn.rejected,(r,s)=>{r.loading=!1,r.error=s.payload}).addCase(wn.pending,r=>{r.loading=!0,r.error=null}).addCase(wn.fulfilled,(r,s)=>{r.loading=!1,r.contractReviews=s.payload}).addCase(wn.rejected,(r,s)=>{r.loading=!1,r.error=s.payload})}}),Gu=Hu.reducer,Vu={settings:null,loading:!1,error:null},No=Vt({name:"settings",initialState:Vu,reducers:{setLoading(t,r){t.loading=r.payload},setError(t,r){t.error=r.payload},setSettings(t,r){t.settings=r.payload,t.error=null}}}),{setLoading:Mt,setError:Tr,setSettings:Er}=No.actions,qu=t=>t.settings.settings,Yu=t=>t.settings.loading,Ku=t=>t.settings.error,Xu=No.reducer,di=Ll({reducer:{auth:uu,jobs:bu,dashboard:yu,notification:ku,calendar:Pu,worker:Fu,hirer:Mu,contract:Nu,app:Ju,reviews:Gu,settings:Xu},middleware:t=>t({serializableCheck:!1})});$l(di.dispatch);const Oo=l.createContext(),Jo=({children:t})=>{const[r,s]=l.useState(null),[n,i]=l.useState(!0),[c,d]=l.useState(null),[x,m]=l.useState(!1);let u=()=>{};try{u=Oe()}catch{}l.useEffect(()=>{(async()=>{i(!0);try{if(st.isAuthenticated())try{const O=await st.getCurrentUser();s(O)}catch(O){console.error("Failed to get current user:",O);const T=st.getStoredUser();T?(console.log("Using stored user data"),s(T)):st.clearStorage()}}catch(O){console.error("Failed to initialize auth:",O),st.clearStorage()}finally{i(!1),m(!0)}})()},[]);const v=l.useCallback(async _=>{var O;i(!0),d(null);try{const T=await st.login(_),H=((O=T.data)==null?void 0:O.user)||T.user;if(H)return s(H),console.log("Login successful. User:",H),H;throw new Error("No user data received from login")}catch(T){console.error("Login error:",T);const H=T.message||"Login failed. Please check your credentials.";throw d(H),new Error(H)}finally{i(!1)}},[]),y=l.useCallback(async _=>{i(!0),d(null);try{return await st.register(_)}catch(O){console.error("Registration error:",O);const T=O.message||"Registration failed. Please try again.";throw d(T),new Error(T)}finally{i(!1)}},[]),g=l.useCallback(async()=>{try{await st.logout()}catch(_){console.error("Logout error:",_)}finally{s(null),d(null),u("/login")}},[u]),j=l.useCallback(async _=>{i(!0),d(null);try{return await st.requestPasswordReset(_)}catch(O){console.error("Password reset request error:",O);const T=O.message||"Failed to request password reset. Please try again.";throw d(T),new Error(T)}finally{i(!1)}},[]),b=l.useCallback(async(_,O)=>{i(!0),d(null);try{return await st.resetPassword(_,O)}catch(T){console.error("Password reset error:",T);const H=T.message||"Failed to reset password. Please try again.";throw d(H),new Error(H)}finally{i(!1)}},[]),C=l.useCallback(async _=>{i(!0),d(null);try{const O=await st.updateProfile(_);return s(T=>({...T,...O})),O}catch(O){console.error("Profile update error:",O);const T=O.message||"Failed to update profile. Please try again.";throw d(T),new Error(T)}finally{i(!1)}},[]),A=l.useCallback(async()=>{i(!0),d(null);try{return await st.setupMFA()}catch(_){console.error("MFA setup error:",_);const O=_.message||"Failed to setup MFA.";throw d(O),new Error(O)}finally{i(!1)}},[]),w=l.useCallback(async _=>{i(!0),d(null);try{return await st.verifyMFA(_)}catch(O){console.error("MFA verify error:",O);const T=O.message||"Failed to verify MFA code.";throw d(T),new Error(T)}finally{i(!1)}},[]),p=l.useCallback(async(_,O)=>{i(!0),d(null);try{return await st.disableMFA(_,O)}catch(T){console.error("MFA disable error:",T);const H=T.message||"Failed to disable MFA.";throw d(H),new Error(H)}finally{i(!1)}},[]),k=l.useCallback(()=>st.isAuthenticated(),[]),U=l.useCallback(()=>st.getUserRole(),[]),W=l.useCallback(_=>st.hasRole(_),[]),R=l.useCallback(()=>st.getStoredToken(),[]),K={user:r,loading:n,error:c,isInitialized:x,isAuthenticated:k,getToken:R,hasRole:W,getUserRole:U,login:v,register:y,logout:g,requestPasswordReset:j,resetPassword:b,updateProfile:C,setupMFA:A,verifyMFA:w,disableMFA:p};return e.jsx(Oo.Provider,{value:K,children:t})};Jo.propTypes={children:Y.node.isRequired};const ut=()=>{const t=l.useContext(Oo);if(!t)throw new Error("useAuth must be used within an AuthProvider");return t};class Qu{constructor(){this.client=Ir}async getNotifications(r={}){try{return(await this.client.get("/api/notifications",{params:r})).data}catch(s){return console.warn("Notification service unavailable, using mock data:",s.message),{notifications:[{id:"notif-1",title:"New Job Application",message:"You have a new application for your Kitchen Renovation job",type:"application",read:!1,createdAt:new Date(Date.now()-1e3*60*30)},{id:"notif-2",title:"Payment Released",message:"Payment of GH₵7,800 has been released",type:"payment",read:!0,createdAt:new Date(Date.now()-1e3*60*60*24)}],total:2,unread:1}}}async getNotification(r){return(await this.client.get(`/api/notifications/${r}`)).data}async markAsRead(r){return(await this.client.put(`/api/notifications/${r}/read`)).data}async markAllAsRead(){const s=(await this.client.get("/api/notifications")).data.data.map(n=>n.id);return await Promise.all(s.map(n=>this.client.put(`/api/notifications/${n}/read`))),{success:!0}}async deleteNotification(r){return(await this.client.delete(`/api/notifications/${r}`)).data}async deleteAllNotifications(){const s=(await this.client.get("/api/notifications")).data.data.map(n=>n.id);return await Promise.all(s.map(n=>this.client.delete(`/api/notifications/${n}`))),{success:!0}}async getNotificationPreferences(){return(await this.client.get("/notifications/preferences")).data}async updateNotificationPreferences(r){return(await this.client.put("/notifications/preferences",r)).data}async getUnreadCount(){return(await this.client.get("/notifications/unread-count")).data}async subscribeToPushNotifications(r){return(await this.client.post("/api/notifications/push/subscribe",r)).data}async unsubscribeFromPushNotifications(){return(await this.client.post("/api/notifications/push/unsubscribe")).data}}const oa=new Qu,Zu={BASE_URL:"/",DEV:!1,MODE:"production",PROD:!0,SSR:!1,VITE_API_URL:"https://kelmah-auth-service.onrender.com"},{VITE_API_URL:Fi,VITE_WS_URL:gm,VITE_SOCKET_URL:bm,VITE_USE_MOCK_DATA:jm,VITE_ENABLE_ANALYTICS:fm,VITE_ENABLE_MESSAGING:ym,VITE_ENABLE_NOTIFICATIONS:vm,VITE_ENV:wm,VITE_DEBUG_MODE:Cm}=Zu,ex=Fi?`${Fi}/api`:"http://localhost:5000/api",os="kelmah_auth_token",Cn="kelmah_refresh_token",kn="kelmah_user",tx=ex,{STORAGE_KEYS:km,ROUTES:Sm,VALIDATION:Am,USER_ROLES:Pm,JOB_TYPES:Dm,WORKER_STRENGTHS:Im,MESSAGE_TYPES:Rm,PAGINATION:Fm,TIMEOUTS:Wm,COLORS:Tm,ITEMS_PER_PAGE:Em,MAX_FILE_SIZE:Mm,ALLOWED_FILE_TYPES:zm,MAX_ATTACHMENTS:Lm,WORKER_CATEGORIES:$m,JOB_STATUS:Bm,REVIEW_STRENGTHS:_m,TOKEN_KEY:Nm,REFRESH_TOKEN_KEY:Wi,USER_KEY:Om}=au,Uo=l.createContext(null),rx=[{id:1,type:"message",message:"You have a new message from John Smith regarding the 'Kitchen Sink Repair' job.",link:"/messages/123",read:!1,date:new Date(Date.now()-1e3*60*5)},{id:2,type:"job",message:"Your application for 'Ceiling Fan Installation' has been viewed by the hirer.",link:"/worker/applications",read:!1,date:new Date(Date.now()-1e3*60*60*2)},{id:3,type:"contract",message:"A new contract for 'Drywall Patching' has been sent to you for review.",link:"/contracts/c4",read:!0,date:new Date(Date.now()-1e3*60*60*24)},{id:4,type:"job",message:"The 'Electrical Socket Replacement' job has been marked as complete.",link:"/jobs/j5",read:!0,date:new Date(Date.now()-1e3*60*60*48)}],Ho=({children:t})=>{let r=null;try{r=ut().user}catch{r=null}const[s,n]=l.useState([]),[i,c]=l.useState(!0),[d,x]=l.useState(null),[m,u]=l.useState({open:!1,message:"",severity:"info"}),v=s.filter(p=>!p.read).length,y=l.useCallback(async()=>{if(r){c(!0);try{const p=await oa.getNotifications();n(p.data)}catch(p){console.error("Failed to fetch notifications:",p),x("Could not load notifications."),n(rx)}finally{c(!1)}}},[r]);l.useEffect(()=>{y()},[y]);const g=async p=>{try{await oa.markAsRead(p)}catch(k){console.error("Failed to mark notification as read:",k)}n(k=>k.map(U=>U.id===p?{...U,read:!0}:U))},j=async()=>{try{await oa.markAllAsRead()}catch(p){console.error("Failed to mark all notifications as read:",p)}n(p=>p.map(k=>({...k,read:!0})))},b=async()=>{try{await oa.deleteAllNotifications()}catch(p){console.error("Failed to clear notifications:",p)}n([])},C=l.useCallback((p,k="info")=>{u({open:!0,message:p,severity:k})},[]),A=l.useCallback(()=>{u(p=>({...p,open:!1}))},[]),w={notifications:s,loading:i,error:d,unreadCount:v,markAsRead:g,markAllAsRead:j,clearAllNotifications:b,refresh:y,showToast:C};return e.jsxs(Uo.Provider,{value:w,children:[t,e.jsx(Wt,{open:m.open,autoHideDuration:6e3,onClose:A,anchorOrigin:{vertical:"bottom",horizontal:"right"},children:e.jsx(be,{onClose:A,severity:m.severity,sx:{width:"100%"},children:m.message})})]})};Ho.propTypes={children:Y.node.isRequired};const Kr=()=>{const t=l.useContext(Uo);if(!t)throw new Error("useNotifications must be used within a NotificationProvider");return t};class sx{constructor(){this.client=Ir}async getPaymentMethods(){try{return(await this.client.get("/api/payments/methods")).data}catch(r){return console.warn("Payment service unavailable for methods, using mock data:",r.message),{methods:[{id:"pm-1",type:"mobile_money",provider:"MTN",number:"+233*****678",isDefault:!0,status:"active"},{id:"pm-2",type:"bank_account",provider:"GCB Bank",accountNumber:"****4567",isDefault:!1,status:"active"}]}}}async addPaymentMethod(r){try{return(await this.client.post("/api/payments/methods",r)).data}catch(s){return console.warn("Payment service unavailable for adding method, simulating success:",s.message),{success:!0,method:{id:`pm-${Date.now()}`,...r,isDefault:!1,status:"active",createdAt:new Date}}}}async deletePaymentMethod(r){return(await this.client.delete(`/api/payments/methods/${r}`)).data}async setDefaultPaymentMethod(r){return(await this.client.put(`/api/payments/methods/${r}/default`)).data}async getTransactionHistory(r={}){return(await this.client.get("/api/payments/transactions",{params:r})).data}async getTransactionDetails(r){return(await this.client.get(`/api/payments/transactions/${r}`)).data}async makeJobPayment(r){return(await this.client.post("/api/payments/job",r)).data}async requestRefund(r){return(await this.client.post("/api/payments/refunds",r)).data}async getRefundRequests(r={}){return(await this.client.get("/api/payments/refunds",{params:r})).data}async getPaymentSettings(){return(await this.client.get("/api/payments/settings")).data}async updatePaymentSettings(r){return(await this.client.put("/api/payments/settings",r)).data}async getPayoutMethods(){return(await this.client.get("/api/payments/payout-methods")).data}async addPayoutMethod(r){return(await this.client.post("/api/payments/payout-methods",r)).data}async deletePayoutMethod(r){return(await this.client.delete(`/api/payments/payout-methods/${r}`)).data}async setDefaultPayoutMethod(r){return(await this.client.put(`/api/payments/payout-methods/${r}/default`)).data}async requestPayout(r){return(await this.client.post("/api/payments/payouts",r)).data}async getPayoutHistory(r={}){return(await this.client.get("/api/payments/payouts",{params:r})).data}async createTransaction(r){return(await this.client.post("/api/payments/transactions",r)).data}async getWallet(){return(await this.client.get("/api/payments/wallet")).data}async getEscrows(){return(await this.client.get("/payments/escrows")).data}async releaseEscrow(r,s={}){return(await this.client.post(`/payments/escrows/${r}/release`,s)).data}async getBills(){return(await this.client.get("/api/payments/bills")).data}async payBill(r){return(await this.client.post(`/api/payments/bills/${r}/pay`)).data}}const At=new sx,Go=l.createContext(null),ax=({children:t})=>{const{user:r}=ut(),{showToast:s}=Kr(),[n,i]=l.useState(!0),[c,d]=l.useState(null),[x,m]=l.useState(0),[u,v]=l.useState([]),[y,g]=l.useState([]),[j,b]=l.useState([]),[C,A]=l.useState([]),[w,p]=l.useState(null),k=l.useCallback(async()=>{if(r){i(!0),d(null);try{const[T,H,F,V,re]=await Promise.all([At.getWallet(),At.getPaymentMethods(),At.getTransactionHistory(),At.getEscrows(),At.getBills()]);m(T.balance),v(H),g(F.transactions||F),b(V||[]),A(re)}catch(T){console.error("Failed to fetch payment data:",T),d("Could not load payment information. Please try again later."),s("Failed to load payment information.","error")}finally{i(!1)}}},[r,s]);l.useEffect(()=>{k()},[k]);const U=l.useCallback(async(T,H)=>{i(!0);try{await At.createTransaction({amount:T,type:"deposit",currency:"USD",paymentMethodId:H}),s(`$${T.toFixed(2)} deposited successfully.`,"success"),await k()}catch(F){console.error("Deposit failed:",F),s("Failed to deposit funds.","error")}finally{i(!1)}},[k,s]),W=l.useCallback(async(T,H)=>{if(T>x){s("Insufficient funds for withdrawal.","error");return}i(!0);try{await At.createTransaction({amount:T,type:"withdrawal",currency:"USD",paymentMethodId:H}),s("Withdrawal request submitted.","info"),await k()}catch(F){console.error("Withdrawal failed:",F),s("Failed to process withdrawal.","error")}finally{i(!1)}},[x,k,s]),R=l.useCallback(async(T={})=>{i(!0);try{const H=await At.getTransactionHistory(T);g(H.transactions||H)}catch(H){console.error("Failed to fetch transactions:",H),s("Failed to load transactions.","error")}finally{i(!1)}},[s]),K=l.useCallback(async T=>{s("Mock: Payment method added successfully.","success")},[s]),_=l.useCallback(async T=>{p(T);try{await At.payBill(T),s("Bill paid successfully!","success"),await k()}catch(H){console.error("Failed to pay bill:",H),s("Failed to pay bill.","error")}finally{p(null)}},[k,s]),O={loading:n,actionLoading:w,error:c,walletBalance:x,paymentMethods:u,transactions:y,escrows:j,bills:C,addFunds:U,withdrawFunds:W,addPaymentMethod:K,payBill:_,refresh:k,fetchTransactions:R};return e.jsx(Go.Provider,{value:O,children:t})},Ka=()=>{const t=l.useContext(Go);if(!t)throw new Error("usePayments must be used within a PaymentProvider");return t},_r={async getConversations(){try{return(await Ir.get("/api/conversations")).data}catch(t){return console.warn("Messaging service unavailable for conversations, using mock data:",t.message),{conversations:[{id:"conv-1",participants:[{id:"user-1",name:"John Contractor",avatar:"/api/placeholder/40/40"},{id:"user-2",name:"Sarah Client",avatar:"/api/placeholder/40/40"}],lastMessage:{content:"Thanks for the update on the project!",timestamp:new Date(Date.now()-1e3*60*30),senderId:"user-2"},unreadCount:2,jobTitle:"Kitchen Renovation"},{id:"conv-2",participants:[{id:"user-1",name:"Mike Builder",avatar:"/api/placeholder/40/40"},{id:"user-3",name:"Tech Support",avatar:"/api/placeholder/40/40"}],lastMessage:{content:"When can we schedule the next phase?",timestamp:new Date(Date.now()-1e3*60*60*2),senderId:"user-1"},unreadCount:0,jobTitle:"Office Setup"}]}}},async createConversation(t,r){try{return(await Ir.post("/api/conversations",{participantId:t,jobId:r})).data}catch(s){return console.warn("Messaging service unavailable for creating conversation, simulating success:",s.message),{success:!0,conversation:{id:`conv-${Date.now()}`,participants:[{id:t}],jobId:r,createdAt:new Date}}}},async createConversationFromApplication(t){try{return(await Ir.post("/api/conversations",{applicationId:t})).data}catch(r){return console.warn("Messaging service unavailable for conversation from application, simulating success:",r.message),{success:!0,conversation:{id:`conv-${Date.now()}`,applicationId:t,createdAt:new Date}}}}},Vo=l.createContext(null),qo=()=>{const t=l.useContext(Vo);if(!t)throw new Error("useMessages must be used within a MessageProvider");return t},nx=({children:t})=>{const{user:r}=ut(),[s,n]=l.useState([]),[i,c]=l.useState([]),[d,x]=l.useState(null),[m,u]=l.useState(!0),[v,y]=l.useState(!1),[g,j]=l.useState(!1),b=l.useCallback(async()=>{u(!0);try{const W=await _r.getConversations();n(W)}catch(W){console.error("Error loading conversations:",W),n([])}finally{u(!1)}},[]);l.useEffect(()=>{r&&b()},[r,b]);const C=l.useCallback(async W=>{if((d==null?void 0:d.id)!==W.id){x(W),y(!0);try{const R=await _r.getMessages(W.id);c(R)}catch(R){console.error(`Error loading messages for conversation ${W.id}:`,R),c([])}finally{y(!1)}}},[d]),A=l.useCallback(async W=>{if(!(!d||!W.trim()||!r)){j(!0);try{const R=d.participants.find(_=>_.id!==r.id),K=await _r.sendMessage(r.id,R.id,W);c(_=>[..._,K]),n(_=>_.map(O=>O.id===d.id?{...O,lastMessage:K}:O))}catch(R){console.error("Error sending message:",R)}finally{j(!1)}}},[d,s,r]),w=l.useCallback(async W=>{try{const R=await _r.createDirectConversation(W);return await b(),await C(R),R}catch(R){throw console.error("Error creating conversation:",R),R}},[b,C]),p=(s||[]).reduce((W,R)=>W+(R.unreadCount||0),0),k=l.useCallback(()=>{x(null),c([])},[]),U={conversations:s,selectedConversation:d,messages:i,loadingConversations:m,loadingMessages:v,sendingMessage:g,unreadCount:p,selectConversation:C,sendMessage:A,createConversation:w,clearConversation:k,messagingService:_r};return e.jsx(Vo.Provider,{value:U,children:t})},Yo=l.createContext(null),Ko=({children:t})=>{let r=null;try{r=ut().user}catch{r=null}let s=()=>{};try{s=Kr().showToast}catch{}const[n,i]=l.useState(!0),[c,d]=l.useState(null),[x,m]=l.useState([]),u=l.useCallback(async()=>{if(r){i(!0);try{const j=await Ft.getContracts();m(j)}catch(j){console.error("Failed to fetch contracts:",j),d("Could not load contract information. Please try again later."),s("Failed to load contracts.","error")}finally{i(!1)}}},[r,s]);l.useEffect(()=>{u()},[u]);const v=l.useCallback(async j=>{i(!0);try{return await Ft.getContractById(j)}catch{return s(`Failed to retrieve contract ${j}.`,"error"),null}finally{i(!1)}},[s]),y=l.useCallback(async(j,b)=>{try{const{success:C}=await Ft.approveMilestone(j,b);if(C){s("Milestone approved successfully!","success");const A=x.map(w=>(w.id===j&&(w.milestones.find(p=>p.id===b).status="paid"),w));m(A)}else throw new Error("Milestone approval failed on the backend.")}catch(C){console.error(C),s("Failed to approve milestone.","error")}},[x,s]),g={loading:n,error:c,contracts:x,getContractById:v,approveMilestone:y,refresh:u};return e.jsx(Yo.Provider,{value:g,children:t})},ix=()=>{const t=l.useContext(Yo);if(!t)throw new Error("useContracts must be used within a ContractProvider");return t},Xo=()=>{const{user:t,isAuthenticated:r,hasRole:s,isInitialized:n}=ut(),i=r(),c=Zt(),d=l.useMemo(()=>{if(!n)return[];const m=[{label:"Home",to:"/"},{label:"Jobs",to:"/jobs"}];return(!i||s("worker"))&&m.push({label:"Find Work",to:i&&s("worker")?"/worker/find-work":"/search/location"}),(!i||s("hirer"))&&m.push({label:"Find Talents",to:i&&s("hirer")?"/hirer/find-talent":"/find-talents"}),m.push({label:"Pricing",to:"/premium"}),i&&m.push({label:"Messages",to:"/messages"}),m},[n,i,s]),x=l.useCallback(m=>m==="/"?c.pathname==="/":c.pathname.startsWith(m),[c.pathname]);return{navLinks:d,isActive:x}},ox=()=>{const t=ve(),r=ot(),{user:s,isAuthenticated:n,hasRole:i,isInitialized:c,logout:d}=ut(),x=n(),{navLinks:m}=Xo(),{unreadCount:u}=Kr(),{unreadCount:v}=qo(),y=Oe(),[g,j]=l.useState(null),b=c&&x,C=c&&!x,A=k=>j(k.currentTarget),w=()=>j(null),p=()=>{w(),sessionStorage.setItem("dev-logout","true"),r(Rs()),d()};return e.jsxs(o,{sx:{display:"flex",alignItems:"center"},children:[m.map(({label:k,to:U})=>e.jsx(Dl,{to:U,style:({isActive:W})=>({margin:"0 8px",color:W?t.palette.secondary.dark:t.palette.primary.main,fontWeight:500,borderBottom:W?`2px solid ${t.palette.secondary.dark}`:"none",textDecoration:"none"}),children:k},U)),b?e.jsxs(e.Fragment,{children:[e.jsx(ne,{component:Fe,to:"/messages",sx:{mx:1,color:t.palette.primary.main},children:e.jsx(mt,{badgeContent:v,color:"secondary",children:e.jsx(oo,{})})}),e.jsx(ne,{component:Fe,to:"/notifications",sx:{mx:1,color:t.palette.primary.main},children:e.jsx(mt,{badgeContent:u,color:"error",children:e.jsx(Gn,{})})}),e.jsx(ne,{onClick:A,sx:{mx:1,color:t.palette.primary.main},children:s!=null&&s.profileImage?e.jsx(we,{src:s.profileImage,alt:s.firstName,sx:{width:32,height:32}}):e.jsx(Ql,{})}),e.jsxs(Xt,{anchorEl:g,open:!!g,onClose:w,transformOrigin:{horizontal:"right",vertical:"top"},anchorOrigin:{horizontal:"right",vertical:"bottom"},children:[e.jsx(Z,{onClick:()=>{w(),y("/dashboard")},children:"Dashboard"}),e.jsx(Z,{onClick:()=>{w(),y(i("worker")?"/worker/profile":"/profile")},children:"Profile"}),e.jsx(Z,{onClick:()=>{w(),y("/settings")},children:"Settings"}),e.jsx(Z,{onClick:p,children:"Logout"})]})]}):C?e.jsxs(e.Fragment,{children:[e.jsx(P,{component:Fe,to:"/login",sx:{mx:1,color:t.palette.secondary.contrastText,fontWeight:500},children:"Login"}),e.jsx(P,{variant:"contained",component:Fe,to:"/register",sx:{mx:1,background:t.palette.primary.main,color:t.palette.secondary.main,"&:hover":{background:t.palette.primary.light}},children:"Register"})]}):null]})},lx=()=>{const t=ve(),r=ot(),{user:s,isAuthenticated:n,hasRole:i,isInitialized:c,logout:d}=ut(),x=n(),{navLinks:m}=Xo(),{unreadCount:u}=Kr(),v=c&&!x,y=c&&x,g=Oe(),[j,b]=l.useState(null),C=k=>b(k.currentTarget),A=()=>b(null),w=()=>{A(),sessionStorage.setItem("dev-logout","true"),r(Rs()),d()},p=k=>{A(),g(k)};return e.jsxs(e.Fragment,{children:[e.jsx(ne,{onClick:C,sx:{color:t.palette.primary.main},children:e.jsx(lo,{})}),e.jsxs(Xt,{anchorEl:j,open:!!j,onClose:A,transformOrigin:{horizontal:"right",vertical:"top"},anchorOrigin:{horizontal:"right",vertical:"bottom"},children:[m.map(({label:k,to:U})=>e.jsx(Z,{onClick:()=>p(U),children:k},U)),v?[e.jsx(Z,{onClick:()=>p("/login"),children:"Login"},"login"),e.jsx(Z,{onClick:()=>p("/register"),children:"Register"},"register")]:y?[e.jsxs(Z,{onClick:()=>p("/notifications"),children:[e.jsx(mt,{badgeContent:u,color:"error",sx:{mr:1},children:e.jsx(Gn,{})}),"Notifications"]},"notifications"),e.jsx(Z,{onClick:()=>p("/dashboard"),children:"Dashboard"},"dashboard"),e.jsx(Z,{onClick:()=>p(i("worker")?"/worker/profile":"/profile"),children:"Profile"},"profile"),e.jsx(Z,{onClick:()=>p("/settings"),children:"Settings"},"settings"),e.jsx(Z,{onClick:w,children:"Logout"},"logout")]:null]})]})},cx=he(Vn)(({theme:t})=>({background:`linear-gradient(135deg, ${t.palette.secondary.main}, ${E(t.palette.secondary.main,.9)})`,backdropFilter:"blur(20px)",borderBottom:`1px solid ${E(t.palette.divider,.1)}`,boxShadow:"0 8px 32px 0 rgba(0, 0, 0, 0.1)"})),dx=he(o)(({theme:t})=>({display:"flex",alignItems:"center",textDecoration:"none",color:t.palette.primary.main,fontWeight:800,fontSize:"1.75rem",fontFamily:"Montserrat, sans-serif",letterSpacing:"0.02em",transition:"all 0.3s ease-in-out","&:hover":{transform:"scale(1.05)"}})),Ti=he(mt)(({theme:t})=>({"& .MuiBadge-badge":{background:`linear-gradient(135deg, ${t.palette.primary.main}, ${t.palette.secondary.main})`,color:t.palette.primary.contrastText,fontWeight:600}})),ux=({toggleTheme:t,mode:r})=>{var _,O;const s=ve(),n=Oe();Zt();const{user:i,logout:c,isAuthenticated:d}=ut(),x=Te(s.breakpoints.down("md")),[m,u]=l.useState(null),[v,y]=l.useState(null),[g,j]=l.useState(!1),b=3,C=2,A=T=>{u(T.currentTarget)},w=()=>{u(null)},p=T=>{y(T.currentTarget)},k=()=>{y(null)},U=async()=>{w(),await c(),n("/")},W=()=>{w(),(i==null?void 0:i.role)==="worker"?n("/worker/dashboard"):(i==null?void 0:i.role)==="hirer"?n("/hirer/dashboard"):n("/dashboard")},R=()=>{var T,H;return e.jsxs(Xt,{anchorEl:m,open:!!m,onClose:w,onClick:w,PaperProps:{elevation:8,sx:{overflow:"visible",filter:"drop-shadow(0px 2px 8px rgba(0,0,0,0.32))",mt:1.5,borderRadius:2,minWidth:200,"&:before":{content:'""',display:"block",position:"absolute",top:0,right:14,width:10,height:10,bgcolor:"background.paper",transform:"translateY(-50%) rotate(45deg)",zIndex:0}}},transformOrigin:{horizontal:"right",vertical:"top"},anchorOrigin:{horizontal:"right",vertical:"bottom"},children:[e.jsxs(o,{sx:{px:2,py:1,borderBottom:`1px solid ${s.palette.divider}`},children:[e.jsxs(a,{variant:"subtitle1",fontWeight:600,children:[i==null?void 0:i.firstName," ",i==null?void 0:i.lastName]}),e.jsx(a,{variant:"body2",color:"text.secondary",children:i==null?void 0:i.email}),e.jsx(a,{variant:"caption",color:"primary",children:((T=i==null?void 0:i.role)==null?void 0:T.charAt(0).toUpperCase())+((H=i==null?void 0:i.role)==null?void 0:H.slice(1))})]}),e.jsxs(Z,{onClick:W,children:[e.jsx(Ze,{children:e.jsx(co,{fontSize:"small"})}),e.jsx(Ie,{children:"Dashboard"})]}),e.jsxs(Z,{onClick:()=>n("/profile"),children:[e.jsx(Ze,{children:e.jsx(Ja,{fontSize:"small"})}),e.jsx(Ie,{children:"Profile"})]}),e.jsxs(Z,{onClick:()=>n("/settings"),children:[e.jsx(Ze,{children:e.jsx(uo,{fontSize:"small"})}),e.jsx(Ie,{children:"Settings"})]}),e.jsx(fe,{}),e.jsxs(Z,{onClick:U,children:[e.jsx(Ze,{children:e.jsx(rc,{fontSize:"small"})}),e.jsx(Ie,{children:"Logout"})]})]})},K=()=>e.jsxs(Xt,{anchorEl:v,open:!!v,onClose:k,PaperProps:{elevation:8,sx:{overflow:"visible",filter:"drop-shadow(0px 2px 8px rgba(0,0,0,0.32))",mt:1.5,borderRadius:2,minWidth:300,maxHeight:400}},transformOrigin:{horizontal:"right",vertical:"top"},anchorOrigin:{horizontal:"right",vertical:"bottom"},children:[e.jsx(o,{sx:{px:2,py:1,borderBottom:`1px solid ${s.palette.divider}`},children:e.jsx(a,{variant:"subtitle1",fontWeight:600,children:"Notifications"})}),e.jsx(Z,{onClick:k,children:e.jsx(Ie,{primary:"New job application received",secondary:"2 minutes ago"})}),e.jsx(Z,{onClick:k,children:e.jsx(Ie,{primary:"Payment processed successfully",secondary:"1 hour ago"})}),e.jsx(Z,{onClick:k,children:e.jsx(Ie,{primary:"Profile verification approved",secondary:"3 hours ago"})}),e.jsx(fe,{}),e.jsx(Z,{onClick:()=>{k(),n("/notifications")},children:e.jsx(Ie,{primary:"View all notifications",sx:{textAlign:"center",color:"primary.main"}})})]});return e.jsxs(cx,{position:"static",elevation:0,children:[e.jsxs(Oa,{sx:{minHeight:{xs:64,sm:70}},children:[x&&e.jsx(ne,{edge:"start",color:"inherit","aria-label":"menu",onClick:()=>j(!0),sx:{mr:2},children:e.jsx(Zl,{})}),e.jsx(ge.div,{whileHover:{scale:1.02},whileTap:{scale:.98},children:e.jsxs(dx,{component:Fe,to:"/",children:[e.jsx(o,{sx:{width:40,height:40,borderRadius:"50%",background:`linear-gradient(135deg, ${s.palette.primary.main}, ${s.palette.secondary.main})`,display:"flex",alignItems:"center",justifyContent:"center",mr:1,color:"white",fontWeight:800,fontSize:"1.2rem"},children:"K"}),e.jsx(a,{variant:"h6",sx:{fontWeight:800,fontFamily:"Montserrat, sans-serif",fontSize:{xs:"1.3rem",sm:"1.5rem"},background:`linear-gradient(135deg, ${s.palette.primary.main}, ${s.palette.text.primary})`,backgroundClip:"text",WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent"},children:"elmah"})]})}),e.jsx(o,{sx:{flexGrow:1}}),!x&&e.jsx(ox,{}),e.jsxs(o,{sx:{display:"flex",alignItems:"center",gap:1},children:[e.jsx(xe,{title:`Switch to ${r==="dark"?"light":"dark"} mode`,children:e.jsx(ne,{color:"inherit",onClick:t,sx:{bgcolor:E(s.palette.primary.main,.1),"&:hover":{bgcolor:E(s.palette.primary.main,.2),transform:"scale(1.05)"},transition:"all 0.3s ease-in-out"},children:r==="dark"?e.jsx(ec,{}):e.jsx(tc,{})})}),d?e.jsxs(e.Fragment,{children:[e.jsx(xe,{title:"Messages",children:e.jsx(ne,{color:"inherit",onClick:()=>n("/messages"),sx:{bgcolor:E(s.palette.primary.main,.1),"&:hover":{bgcolor:E(s.palette.primary.main,.2),transform:"scale(1.05)"},transition:"all 0.3s ease-in-out"},children:e.jsx(Ti,{badgeContent:C,color:"primary",children:e.jsx(Ot,{})})})}),e.jsx(xe,{title:"Notifications",children:e.jsx(ne,{color:"inherit",onClick:p,sx:{bgcolor:E(s.palette.primary.main,.1),"&:hover":{bgcolor:E(s.palette.primary.main,.2),transform:"scale(1.05)"},transition:"all 0.3s ease-in-out"},children:e.jsx(Ti,{badgeContent:b,color:"primary",children:e.jsx(yr,{})})})}),e.jsx(xe,{title:"Account menu",children:e.jsx(ne,{onClick:A,sx:{p:0,ml:1,border:`2px solid ${E(s.palette.primary.main,.3)}`,transition:"all 0.3s ease-in-out","&:hover":{transform:"scale(1.05)",border:`2px solid ${s.palette.primary.main}`}},children:e.jsxs(we,{sx:{width:36,height:36,bgcolor:"primary.main",fontSize:"0.9rem",fontWeight:600},children:[(_=i==null?void 0:i.firstName)==null?void 0:_.charAt(0),(O=i==null?void 0:i.lastName)==null?void 0:O.charAt(0)]})})})]}):e.jsxs(o,{sx:{display:"flex",gap:1},children:[e.jsx(P,{component:Fe,to:"/login",variant:"outlined",size:"small",sx:{borderRadius:3,textTransform:"none",fontWeight:600,borderColor:s.palette.primary.main,color:s.palette.primary.main,"&:hover":{bgcolor:E(s.palette.primary.main,.1),transform:"translateY(-1px)"}},children:"Login"}),e.jsx(P,{component:Fe,to:"/register",variant:"contained",size:"small",sx:{borderRadius:3,textTransform:"none",fontWeight:600,background:`linear-gradient(135deg, ${s.palette.primary.main}, ${s.palette.secondary.main})`,"&:hover":{transform:"translateY(-1px)",boxShadow:s.shadows[8]}},children:"Sign Up"})]})]}),!1]}),x&&e.jsx(lx,{open:g,onClose:()=>j(!1)}),R(),K()]})},xx=()=>{const t=ve(),r=new Date().getFullYear();return e.jsx(o,{component:"footer",sx:{py:4,mt:"auto",backgroundColor:"rgba(25, 25, 25, 0.9)",borderTop:"1px solid rgba(255, 215, 0, 0.1)"},children:e.jsxs(ye,{maxWidth:"lg",children:[e.jsxs(h,{container:!0,spacing:4,children:[e.jsxs(h,{item:!0,xs:12,sm:6,md:3,children:[e.jsx(a,{variant:"h6",gutterBottom:!0,sx:{fontWeight:"bold",background:`linear-gradient(45deg, ${t.palette.secondary.main}, ${t.palette.warning.main})`,WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent"},children:"KELMAH"}),e.jsx(a,{variant:"body2",color:"text.secondary",children:"Your professional platform for skilled trades, connecting experts, and growing businesses."}),e.jsxs(o,{sx:{mt:2,display:"flex"},children:[e.jsx(ne,{size:"small",color:"inherit",sx:{mr:1,color:"text.secondary","&:hover":{color:t.palette.secondary.main}},children:e.jsx(sc,{})}),e.jsx(ne,{size:"small",color:"inherit",sx:{mr:1,color:"text.secondary","&:hover":{color:t.palette.secondary.main}},children:e.jsx(ac,{})}),e.jsx(ne,{size:"small",color:"inherit",sx:{mr:1,color:"text.secondary","&:hover":{color:t.palette.secondary.main}},children:e.jsx(nc,{})}),e.jsx(ne,{size:"small",color:"inherit",sx:{color:"text.secondary","&:hover":{color:t.palette.secondary.main}},children:e.jsx(ic,{})})]})]}),e.jsxs(h,{item:!0,xs:12,sm:6,md:3,children:[e.jsx(a,{variant:"subtitle1",gutterBottom:!0,color:"text.primary",fontWeight:"bold",children:"For Workers"}),e.jsx(et,{component:Fe,to:"/search/location",color:"text.secondary",display:"block",sx:{mb:1,"&:hover":{color:t.palette.secondary.main}},children:"Find Work"}),e.jsx(et,{component:Fe,to:"/profile",color:"text.secondary",display:"block",sx:{mb:1,"&:hover":{color:t.palette.secondary.main}},children:"Create Profile"}),e.jsx(et,{component:Fe,to:"/settings/payments",color:"text.secondary",display:"block",sx:{mb:1,"&:hover":{color:t.palette.secondary.main}},children:"Payment Settings"}),e.jsx(et,{component:Fe,to:"/resources/workers",color:"text.secondary",display:"block",sx:{mb:1,"&:hover":{color:t.palette.secondary.main}},children:"Resources"})]}),e.jsxs(h,{item:!0,xs:12,sm:6,md:3,children:[e.jsx(a,{variant:"subtitle1",gutterBottom:!0,color:"text.primary",fontWeight:"bold",children:"For Hirers"}),e.jsx(et,{component:Fe,to:"/find-talent",color:"text.secondary",display:"block",sx:{mb:1,"&:hover":{color:t.palette.secondary.main}},children:"Find Talent"}),e.jsx(et,{component:Fe,to:"/post-job",color:"text.secondary",display:"block",sx:{mb:1,"&:hover":{color:t.palette.secondary.main}},children:"Post a Job"}),e.jsx(et,{component:Fe,to:"/pricing",color:"text.secondary",display:"block",sx:{mb:1,"&:hover":{color:t.palette.secondary.main}},children:"Pricing"}),e.jsx(et,{component:Fe,to:"/resources/hirers",color:"text.secondary",display:"block",sx:{mb:1,"&:hover":{color:t.palette.secondary.main}},children:"Resources"})]}),e.jsxs(h,{item:!0,xs:12,sm:6,md:3,children:[e.jsx(a,{variant:"subtitle1",gutterBottom:!0,color:"text.primary",fontWeight:"bold",children:"Company"}),e.jsx(et,{component:Fe,to:"/about",color:"text.secondary",display:"block",sx:{mb:1,"&:hover":{color:t.palette.secondary.main}},children:"About Us"}),e.jsx(et,{component:Fe,to:"/contact",color:"text.secondary",display:"block",sx:{mb:1,"&:hover":{color:t.palette.secondary.main}},children:"Contact"}),e.jsx(et,{component:Fe,to:"/privacy",color:"text.secondary",display:"block",sx:{mb:1,"&:hover":{color:t.palette.secondary.main}},children:"Privacy Policy"}),e.jsx(et,{component:Fe,to:"/terms",color:"text.secondary",display:"block",sx:{mb:1,"&:hover":{color:t.palette.secondary.main}},children:"Terms of Service"})]})]}),e.jsx(o,{sx:{mt:5,pt:3,borderTop:"1px solid rgba(255, 255, 255, 0.05)"},children:e.jsxs(a,{variant:"body2",color:"text.secondary",align:"center",children:["© ",r," Kelmah. All rights reserved."]})})]})})},Ei=({variant:t="permanent",open:r=!1,onClose:s})=>{const n=je(b=>b.auth.user),{unreadCount:i}=qo(),{unreadCount:c}=Kr();Zt();const d=(n==null?void 0:n.role)==="hirer"||(n==null?void 0:n.userType)==="hirer"||(n==null?void 0:n.userRole)==="hirer"?"hirer":(n==null?void 0:n.role)==="worker"||(n==null?void 0:n.userType)==="worker"||(n==null?void 0:n.userRole)==="worker"?"worker":null,x=75,[m,u]=l.useState({}),v=b=>{u(C=>({...C,[b]:!C[b]}))},y=d==="worker"?[{text:"Dashboard",icon:e.jsx(gi,{}),path:"/worker/dashboard"},{text:"My Schedule",icon:e.jsx(oc,{}),path:"/worker/schedule"},{text:"Find Work",icon:e.jsx(bi,{}),path:"/worker/find-work"},{text:"My Applications",icon:e.jsx(ji,{}),path:"/worker/applications"},{text:"Active Contracts",icon:e.jsx(fi,{}),path:"/worker/contracts"},{text:"My Reviews",icon:e.jsx(po,{}),path:"/worker/reviews"},{text:"Payment Center",icon:e.jsx(Ds,{}),path:"/worker/payment"},{text:"Wallet",icon:e.jsx(lc,{}),path:"/worker/wallet"},{text:"Bills",icon:e.jsx(cc,{}),path:"/payment/bill"}]:d==="hirer"?[{text:"Dashboard",icon:e.jsx(gi,{}),path:"/hirer/dashboard"},{text:"Post a Job",icon:e.jsx(Ds,{}),path:"/jobs/post"},{text:"Manage Jobs",icon:e.jsx(dc,{}),path:"/hirer/jobs"},{text:"Applications",icon:e.jsx(ji,{}),path:"/hirer/applications"},{text:"Find Talent",icon:e.jsx(bi,{}),path:"/find-talents"}]:[],g=[{text:"Notifications",icon:e.jsx(Gn,{}),path:"/notifications",badge:c},{text:"Messages",icon:e.jsx(oo,{}),path:"/messages",badge:i},{text:"Disputes",icon:e.jsx(fi,{}),path:"/disputes"},{text:"Settings",icon:e.jsx(uc,{}),path:"/settings"}],j=[...y,...g];return e.jsxs(xo,{variant:t,open:t==="temporary"?r:void 0,onClose:t==="temporary"?s:void 0,ModalProps:{keepMounted:!0},"aria-label":"Sidebar navigation",sx:{width:280,flexShrink:0,"& .MuiDrawer-paper":{width:280,boxSizing:"border-box",backgroundColor:"#1C2536",color:"#fff",display:"flex",flexDirection:"column"}},children:[e.jsx(Oa,{}),e.jsxs(o,{sx:{p:2,textAlign:"center"},children:[e.jsx(we,{alt:(n==null?void 0:n.firstName)||"Worker",src:(n==null?void 0:n.profileImage)||"/path/to/default-avatar.jpg",sx:{width:80,height:80,margin:"0 auto",mb:2,border:"2px solid #FFD700"}}),e.jsx(a,{variant:"h6",children:(n==null?void 0:n.firstName)||"Demo User"}),e.jsx(a,{variant:"body2",sx:{color:"rgba(255,255,255,0.7)"},children:(n==null?void 0:n.profession)||"Carpenter"}),e.jsx(o,{sx:{display:"flex",justifyContent:"center",my:1},children:e.jsx(Qe,{name:"read-only",value:(n==null?void 0:n.rating)||4.5,precision:.5,readOnly:!0,sx:{"& .MuiRating-iconFilled":{color:"#FFD700"},"& .MuiRating-iconEmpty":{color:"rgba(255,255,255,0.26)"}}})}),ee&&e.jsx(ee,{icon:e.jsx(ho,{}),label:"Verified",color:"success",size:"small",sx:{mt:1}})]}),e.jsx(fe,{sx:{borderColor:"rgba(255,255,255,0.12)"}}),e.jsxs(o,{sx:{px:2,py:2},children:[e.jsx(a,{variant:"body2",sx:{color:"rgba(255,255,255,0.7)",mb:1},children:"Profile Completion"}),e.jsx(lr,{variant:"determinate",value:x})]}),e.jsx(fe,{sx:{borderColor:"rgba(255,255,255,0.12)"}}),e.jsx(Ke,{sx:{flexGrow:1},children:j.map(b=>e.jsx(Rt.Fragment,{children:e.jsxs(Be,{button:!0,component:b.path?Fe:"div",to:b.path,onClick:()=>b.subItems&&v(b.text),children:[e.jsx(Ze,{sx:{color:"#fff"},children:b.badge&&b.badge>0?e.jsx(mt,{color:"error",badgeContent:b.badge,max:99,children:b.icon}):b.icon}),e.jsx(Ie,{primary:b.text})]})},b.text))}),e.jsx(o,{sx:{p:2,mt:"auto"},children:e.jsx(P,{component:Fe,to:"/premium",variant:"contained",fullWidth:!0,startIcon:e.jsx(rt,{}),sx:{backgroundColor:"#FFD700",color:"#000","&:hover":{backgroundColor:"#E6C200"}},children:"Upgrade to Premium"})})]})},hx=()=>{const t=Oe(),s=Zt().pathname,n=s.startsWith("/hirer");let i;s.includes("/dashboard")?i="dashboard":s.startsWith("/search")||s.startsWith("/find-talents")?i="search":s.includes("/applications")?i="applications":s.startsWith("/messages")?i="messages":s.startsWith("/profile")?i="profile":i="dashboard";const[c,d]=Rt.useState(i),x=(m,u)=>{switch(d(u),u){case"dashboard":t(n?"/hirer/dashboard":"/worker/dashboard");break;case"search":t(n?"/find-talents":"/search/location");break;case"applications":t(n?"/hirer/applications":"/worker/applications");break;case"messages":t("/messages");break;case"profile":t(n?"/profile":"/worker/profile");break;default:t("/")}};return e.jsx(se,{sx:{position:"fixed",bottom:0,left:0,right:0},elevation:3,children:e.jsxs(xc,{value:c,onChange:x,showLabels:!0,children:[e.jsx(js,{label:"Home",value:"dashboard",icon:e.jsx(Ua,{})}),e.jsx(js,{label:"Search",value:"search",icon:e.jsx(dt,{})}),e.jsx(js,{label:"Apps",value:"applications",icon:e.jsx(hc,{})}),e.jsx(js,{label:"Messages",value:"messages",icon:e.jsx(pc,{})}),e.jsx(js,{label:"Profile",value:"profile",icon:e.jsx(Ja,{})})]})})},Qo=({children:t,toggleTheme:r,mode:s})=>{const n=Zt(),i=ve(),c=Te(i.breakpoints.up("md")),d=n.pathname.includes("/dashboard")||n.pathname.startsWith("/worker")||n.pathname.startsWith("/hirer"),[x,m]=l.useState(!1),u=()=>m(v=>!v);return d?c?e.jsxs(o,{sx:{display:"flex",minHeight:"100vh"},children:[e.jsx(Ei,{variant:"permanent"}),e.jsx(o,{component:"main",sx:{flexGrow:1,p:2},children:e.jsx(ye,{maxWidth:"lg",children:t})})]}):e.jsxs(o,{sx:{display:"flex",flexDirection:"column",height:"100vh",bgcolor:i.palette.grey[900],color:i.palette.common.white,overflow:"hidden"},children:[e.jsx(Vn,{position:"fixed",elevation:0,sx:{zIndex:i.zIndex.drawer+1,backgroundColor:i.palette.secondary.main},children:e.jsxs(Oa,{children:[e.jsx(ne,{edge:"start",color:"inherit",onClick:u,sx:{mr:2},children:e.jsx(lo,{})}),e.jsx(a,{variant:"h6",noWrap:!0,children:"Kelmah"})]})}),e.jsx(Ei,{variant:"temporary",open:x,onClose:u}),e.jsx(o,{component:"main",sx:{flexGrow:1,pt:"64px",pb:"56px",px:2,overflowY:"auto",WebkitOverflowScrolling:"touch"},children:t}),e.jsx(hx,{})]}):e.jsxs(o,{sx:{display:"flex",flexDirection:"column",minHeight:"100vh"},children:[e.jsx(ux,{toggleTheme:r,mode:s}),e.jsx(qn,{in:!0,timeout:500,children:e.jsx(o,{component:"main",sx:{flexGrow:1,py:{xs:2,md:4}},children:e.jsx(ye,{maxWidth:"lg",children:t})})},n.pathname),e.jsx(xx,{})]})};Qo.propTypes={children:Y.node.isRequired,toggleTheme:Y.func,mode:Y.string};const rs=Yn({palette:{mode:"dark",primary:{main:"#1a1a1a",light:"#2c2c2c",dark:"#000000",contrastText:"#ffffff"},secondary:{main:"#FFD700",light:"#FFE55C",dark:"#c7a600",contrastText:"#000000"},background:{default:"#1a1a1a",paper:"#2c2c2c"},text:{primary:"#ffffff",secondary:"#ffd700"}},breakpoints:{values:{xs:0,sm:600,md:960,lg:1280,xl:1920}},shape:{borderRadius:16},typography:{fontFamily:'"Roboto", "Helvetica", "Arial", sans-serif',h1:{fontFamily:'"Montserrat", sans-serif',fontSize:{xs:"2.5rem",sm:"3rem",md:"3.75rem"},fontWeight:500,color:"#ffd700"},h2:{fontFamily:'"Montserrat", sans-serif',fontSize:{xs:"2rem",sm:"2.5rem",md:"3rem"},fontWeight:500,color:"#ffd700"},h3:{fontFamily:'"Montserrat", sans-serif',fontSize:"1.75rem",fontWeight:500,color:"#ffd700"},h4:{fontFamily:'"Montserrat", sans-serif',fontSize:"1.5rem",fontWeight:500,color:"#ffd700"},h5:{fontFamily:'"Montserrat", sans-serif',fontSize:"1.25rem",fontWeight:500,color:"#ffd700"},h6:{fontFamily:'"Montserrat", sans-serif',fontSize:"1.1rem",fontWeight:600,color:"#ffd700"},body1:{fontSize:"1rem",color:"#ffffff"},body2:{fontSize:"0.875rem",color:"#ffffff"}},components:{MuiButton:{styleOverrides:{root:{borderRadius:{xs:4,sm:8},textTransform:"none",fontWeight:600},contained:{boxShadow:"none","&:hover":{boxShadow:"0 2px 8px rgba(255, 215, 0, 0.2)"}},containedSecondary:{backgroundColor:"#ffd700",color:"#000000",boxShadow:"0 2px 8px rgba(255, 215, 0, 0.4)","&:hover":{backgroundColor:"#ffeb52"}},outlinedSecondary:{borderColor:"#ffd700",borderWidth:"2px",color:"#ffd700","&:hover":{borderColor:"#ffeb52",backgroundColor:"rgba(255, 235, 82, 0.1)"}}}},MuiTextField:{styleOverrides:{root:{"& .MuiOutlinedInput-root":{"& fieldset":{borderColor:"#ffd700"},"&:hover fieldset":{borderColor:"#ffff52"},"&.Mui-focused fieldset":{borderColor:"#ffd700"}}}}},MuiPaper:{styleOverrides:{root:{backgroundColor:"#2c2c2c",backgroundImage:"none",border:"1px solid #ffd700",transition:"box-shadow 0.3s ease-in-out, border-color 0.3s ease-in-out","&:hover":{boxShadow:"0 0 16px rgba(255, 215, 0, 0.5)",borderColor:"#ffeb52"}}}},MuiContainer:{styleOverrides:{root:{paddingLeft:{xs:2,sm:3},paddingRight:{xs:2,sm:3}}}},MuiCard:{styleOverrides:{root:{borderRadius:{xs:8,sm:12},boxShadow:"0 8px 32px rgba(0, 0, 0, 0.1)",transition:"box-shadow 0.3s ease-in-out","&:hover":{boxShadow:"0 0 12px rgba(255, 215, 0, 0.3)"}}}},MuiDrawer:{styleOverrides:{paper:{backgroundColor:"#1a1a1a",borderRight:"1px solid rgba(255, 215, 0, 0.1)"}}},MuiDialog:{styleOverrides:{paper:{borderRadius:16,padding:"24px",backgroundColor:"#2c2c2c",border:"2px solid #ffd700",boxShadow:"0 0 16px rgba(255, 215, 0, 0.5)"}}},MuiDialogTitle:{styleOverrides:{root:{padding:"16px 24px",borderBottom:"1px solid rgba(255, 215, 0, 0.1)",color:"#ffd700"}}},MuiDialogContent:{styleOverrides:{root:{padding:"20px 24px"}}},MuiDialogActions:{styleOverrides:{root:{padding:"16px 24px"}}},MuiBackdrop:{styleOverrides:{root:{backgroundColor:"rgba(0, 0, 0, 0.7)"}}},MuiTooltip:{styleOverrides:{tooltip:{backgroundColor:"#333",color:"#fff",fontSize:"0.875rem"},arrow:{color:"#333"}}}},transitions:{duration:{shortest:200,shorter:250,short:300,standard:500,complex:700},easing:{easeInOut:"cubic-bezier(0.4, 0, 0.2, 1)"}}}),px=Yn({palette:{mode:"light",primary:{main:"#1976d2",contrastText:"#ffffff"},secondary:rs.palette.secondary,background:{default:"#fafafa",paper:"#ffffff"},text:{primary:"#000000",secondary:"#555555"}},breakpoints:rs.breakpoints,shape:rs.shape,typography:rs.typography,components:rs.components}),Zo=({isLoading:t=!0,message:r="Loading..."})=>t?e.jsxs(o,{sx:{position:"fixed",top:0,left:0,right:0,bottom:0,display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",zIndex:9999,backgroundColor:"rgba(0, 0, 0, 0.7)"},children:[e.jsx(Ae,{size:60,sx:{color:"primary.main"}}),e.jsx(a,{variant:"h6",sx:{mt:2,color:"white"},children:r})]}):null,mx=({children:t})=>e.jsx(o,{children:t}),el=async(t=!0)=>{try{return(await pe.get("/health",{timeout:3e3,skipAuthRefresh:!0,skipErrorHandling:!0})).status===200}catch(r){return console.log("API health check failed:",r.message),!1}},gx="/assets/background-DydClsqx.jpg",tl="/assets/plumbing.jpg-DxwrnSW0.jpeg",bx="/assets/electrical-ujYVPrnk.jpg",jx="/assets/carpentry-B6-VKol9.jpg",fx="/assets/construction-9rZUjNDa.jpg",Mi=he(o)(({theme:t})=>({minHeight:"100vh",position:"relative",overflow:"hidden",display:"flex",alignItems:"center",justifyContent:"center",background:"#000000",width:"100vw",left:"50%",right:"50%",marginLeft:"-50vw",marginRight:"-50vw",[t.breakpoints.down("sm")]:{width:"100%",left:0,right:0,marginLeft:0,marginRight:0}})),yx=he(o)(({theme:t})=>({position:"absolute",top:0,left:0,width:"100vw",height:"100%",backgroundImage:`url(${tl})`,backgroundSize:"cover",backgroundPosition:"center",zIndex:0,"&::before":{content:'""',position:"absolute",top:0,left:0,width:"100%",height:"100%",zIndex:1,pointerEvents:"none",background:"linear-gradient(90deg, #000 0%, rgba(0,0,0,0.85) 15%, rgba(0,0,0,0.4) 35%, rgba(0,0,0,0.4) 65%, rgba(0,0,0,0.85) 85%, #000 100%)"}})),Qr=he(P)(({theme:t})=>({borderRadius:t.spacing(2),padding:`${t.spacing(1.8)} ${t.spacing(4)}`,fontSize:"1.1rem",textTransform:"none",fontWeight:"bold",transition:"all 0.4s cubic-bezier(0.4, 0, 0.2, 1)",boxShadow:"0 4px 20px rgba(0,0,0,0.25)","&:hover":{transform:"translateY(-3px)",boxShadow:"0 8px 25px rgba(0,0,0,0.35)"}})),vx=he(o)(({theme:t})=>({width:50,height:50,borderRadius:"50%",background:`linear-gradient(135deg, ${t.palette.secondary.main} 0%, ${t.palette.secondary.dark} 100%)`,display:"flex",alignItems:"center",justifyContent:"center",color:t.palette.secondary.contrastText,fontWeight:"bold",marginRight:t.spacing(3),boxShadow:"0 4px 15px rgba(255,215,0,0.3)"})),wx=he(o)(({theme:t})=>({display:"flex",alignItems:"center",padding:t.spacing(3),borderRadius:t.spacing(2),background:"rgba(50, 50, 50, 0.9)",backdropFilter:"blur(10px)",marginBottom:t.spacing(3),border:"1px solid rgba(255,215,0,0.2)",transition:"all 0.3s ease","&:hover":{background:"rgba(60, 60, 60, 0.95)",border:"1px solid rgba(255,215,0,0.4)",transform:"translateX(5px)"}})),Cx=he(me)(({theme:t})=>({height:"100%",background:"rgba(44, 44, 44, 0.6)",backdropFilter:"blur(8px)",borderRadius:t.spacing(3),overflow:"hidden",transition:"all 0.4s cubic-bezier(0.4, 0, 0.2, 1)",border:"2px solid rgba(255, 215, 0, 0.2)",cursor:"pointer","&:hover":{transform:"translateY(-12px) scale(1.02)",boxShadow:"0 20px 40px rgba(0, 0, 0, 0.4)",border:"2px solid rgba(255, 215, 0, 0.6)","& .MuiCardMedia-root":{transform:"scale(1.1)"},"& .service-icon":{transform:"rotate(360deg)"}}})),kx=he(ba)(({theme:t})=>({height:220,transition:"transform 0.6s ease",position:"relative"})),Sx=he(ce)(({theme:t})=>({background:"linear-gradient(to top, rgba(0,0,0,0.9) 0%, rgba(44,44,44,0.6) 100%)",padding:t.spacing(3)})),Ax=he(o)(({theme:t})=>({position:"absolute",top:15,right:15,width:40,height:40,borderRadius:"50%",background:"rgba(255,215,0,0.9)",display:"flex",alignItems:"center",justifyContent:"center",transition:"transform 0.4s ease"})),Px=()=>{const t=ve(),r=Oe(),s=Te(t.breakpoints.down("sm")),{user:n}=ut(),[i,c]=l.useState({isReachable:!0,checking:!1}),[d,x]=l.useState(!0),[m,u]=l.useState(0),v=[{title:"Plumbing Services",description:"Professional plumbing installations, repairs, and maintenance for homes and businesses",image:tl,icon:e.jsx(gc,{sx:{color:"#000",fontSize:24}}),skills:["Pipe Installation","Leak Repairs","Drain Cleaning"]},{title:"Electrical Work",description:"Licensed electricians for wiring, installations, and electrical system maintenance",image:bx,icon:e.jsx(bc,{sx:{color:"#000",fontSize:24}}),skills:["Wiring","Panel Upgrades","Lighting Installation"]},{title:"Carpentry & Woodwork",description:"Custom carpentry, furniture making, and wooden structure construction",image:jx,icon:e.jsx(jc,{sx:{color:"#000",fontSize:24}}),skills:["Custom Furniture","Framing","Cabinet Making"]},{title:"Construction & Masonry",description:"Building construction, masonry work, and renovation projects",image:fx,icon:e.jsx(fc,{sx:{color:"#000",fontSize:24}}),skills:["Foundation Work","Bricklaying","Concrete Work"]}],y=[{icon:e.jsx(ho,{sx:{fontSize:28,color:"#000"}}),title:"Verified Skilled Workers",description:"All tradespeople are vetted and verified for quality assurance"},{icon:e.jsx(yc,{sx:{fontSize:28,color:"#000"}}),title:"Secure Escrow Payments",description:"Safe payment system protecting both workers and hirers"},{icon:e.jsx(po,{sx:{fontSize:28,color:"#000"}}),title:"Quality Guarantee",description:"Rating system ensuring high-quality workmanship"}];return l.useEffect(()=>{const g=setTimeout(()=>{x(!1)},2e3);return()=>clearTimeout(g)},[]),l.useEffect(()=>{(async()=>{try{const j=await el(!1);c(b=>b.isReachable!==j?{isReachable:j,checking:!1}:b)}catch(j){console.warn("API check failed, continuing anyway:",j),c({isReachable:!0,checking:!1})}})()},[]),l.useEffect(()=>{const g=setInterval(()=>u(j=>(j+1)%v.length),1e4);return()=>clearInterval(g)},[v.length]),e.jsxs(e.Fragment,{children:[e.jsx(Zo,{isLoading:d}),e.jsx(mx,{children:e.jsxs(o,{sx:{position:"relative"},children:[e.jsx(ee,{label:`Platform ${i.isReachable?"Online":"Offline"}`,color:i.isReachable?"success":"error",size:"small",sx:{position:"absolute",top:16,right:16,zIndex:2,fontWeight:"bold",boxShadow:"0 2px 8px rgba(0,0,0,0.3)"}}),e.jsxs(Mi,{children:[e.jsx(yx,{sx:{backgroundImage:`url(${v[m].image})`}}),e.jsx(ye,{maxWidth:"lg",sx:{position:"relative",zIndex:1},children:e.jsxs(h,{container:!0,spacing:4,children:[e.jsx(h,{item:!0,xs:12,md:8,children:e.jsxs(ge.div,{initial:{opacity:0,y:50},animate:{opacity:1,y:0},transition:{duration:1,ease:"easeOut"},children:[n&&e.jsx(ge.div,{initial:{opacity:0,x:-30},animate:{opacity:1,x:0},transition:{duration:.8,delay:.3},children:e.jsxs(a,{variant:"h4",sx:{color:t.palette.secondary.main,mb:2,fontWeight:600},children:["Welcome back, ",n.firstName||n.username,"!"]})}),e.jsxs(a,{variant:s?"h4":"h1",sx:{fontSize:{xs:"2.2rem",sm:"3.8rem",md:"5rem"},fontWeight:800,color:t.palette.secondary.main,mb:3,textShadow:"2px 2px 4px rgba(0,0,0,0.5)",lineHeight:1.1},children:["Ghana's Premier",e.jsx("br",{}),e.jsx(a,{component:"span",sx:{fontSize:"inherit",fontWeight:"inherit",background:"linear-gradient(45deg, #FFD700 30%, #FFC000 90%)",backgroundClip:"text",WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent"},children:"Skilled Trades"})," ","Network"]}),e.jsx(a,{variant:"h5",sx:{color:"rgba(255, 255, 255, 0.95)",mb:4,fontWeight:400,maxWidth:"85%",lineHeight:1.4,fontSize:{xs:"1.1rem",md:"1.3rem"}},children:"Connect with verified skilled workers across Ghana. From plumbing and electrical work to carpentry and construction - find the right professional for every job."}),e.jsx(ge.div,{initial:{opacity:0,y:30},animate:{opacity:1,y:0},transition:{duration:.8,delay:.6},children:e.jsx(o,{sx:{display:"flex",flexDirection:s?"column":"row",gap:s?2:3,mt:5},children:n?n.role==="worker"?e.jsx(Qr,{variant:"contained",size:"large",sx:{background:"linear-gradient(135deg, #FFD700 0%, #FFC000 100%)",color:"#000",fontWeight:800,fontSize:"1.2rem",px:5,py:2,"&:hover":{background:"linear-gradient(135deg, #FFC000 0%, #FFB000 100%)"}},onClick:()=>r("/jobs"),children:"Browse Available Jobs"}):e.jsx(Qr,{variant:"contained",size:"large",sx:{background:"linear-gradient(135deg, #FFD700 0%, #FFC000 100%)",color:"#000",fontWeight:800,fontSize:"1.2rem",px:5,py:2,"&:hover":{background:"linear-gradient(135deg, #FFC000 0%, #FFB000 100%)"}},onClick:()=>r("/hirer/jobs/post"),children:"Post a Job"}):e.jsxs(e.Fragment,{children:[e.jsx(Qr,{variant:"contained",size:"large",sx:{background:"linear-gradient(135deg, #FFD700 0%, #FFC000 100%)",color:"#000",fontWeight:800,fontSize:"1.2rem",px:5,py:2,"&:hover":{background:"linear-gradient(135deg, #FFC000 0%, #FFB000 100%)"}},fullWidth:s,onClick:()=>r("/register"),children:s?"Join Kelmah":"Join the Network"}),e.jsx(Qr,{variant:"outlined",size:"large",sx:{borderColor:t.palette.secondary.main,color:t.palette.secondary.main,borderWidth:3,fontWeight:700,fontSize:"1.2rem",px:5,py:2,"&:hover":{borderColor:t.palette.secondary.dark,background:E(t.palette.secondary.main,.15),borderWidth:3}},fullWidth:s,onClick:()=>r("/search"),children:"Find Workers"})]})})})]})}),e.jsx(h,{item:!0,xs:12,md:4,children:e.jsx(ge.div,{initial:{opacity:0,x:50},animate:{opacity:1,x:0},transition:{duration:1,delay:.4},children:e.jsx(o,{sx:{mt:{xs:4,md:8}},children:y.map((g,j)=>e.jsx(ge.div,{initial:{opacity:0,y:30},whileInView:{opacity:1,y:0},viewport:{once:!0},transition:{duration:.6,delay:j*.2},children:e.jsxs(wx,{children:[e.jsx(vx,{children:g.icon}),e.jsxs(o,{children:[e.jsx(a,{color:"white",variant:"h6",sx:{fontWeight:700,mb:.5},children:g.title}),e.jsx(a,{color:"rgba(255,255,255,0.8)",variant:"body2",sx:{fontSize:"0.95rem"},children:g.description})]})]})},g.title))})})})]})}),e.jsxs(o,{sx:{position:"absolute",bottom:32,left:"50%",transform:"translateX(-50%)",zIndex:2,display:"flex",flexDirection:"column",alignItems:"center",gap:1},children:[e.jsx(a,{variant:"body2",sx:{color:t.palette.secondary.main,fontWeight:600,textTransform:"uppercase",letterSpacing:1},children:"Explore Services"}),e.jsx(ge.div,{initial:{y:-10},animate:{y:10},transition:{y:{repeat:1/0,repeatType:"reverse",duration:1.5}},style:{cursor:"pointer"},onClick:()=>document.getElementById("services").scrollIntoView({behavior:"smooth"}),children:e.jsx(mc,{sx:{fontSize:40,color:t.palette.secondary.main}})})]})]}),e.jsx(Mi,{id:"services",sx:{minHeight:"auto",py:16,background:"linear-gradient(135deg, #111 0%, #1a1a1a 100%)"},children:e.jsxs(ye,{maxWidth:"lg",children:[e.jsxs(ge.div,{initial:{opacity:0,y:50},whileInView:{opacity:1,y:0},viewport:{once:!0},transition:{duration:.8},children:[e.jsx(a,{variant:"h2",sx:{textAlign:"center",mb:3,color:t.palette.secondary.main,fontWeight:800,fontSize:{xs:"2.5rem",md:"3.5rem"}},children:"Trade Services Available"}),e.jsx(a,{variant:"h6",sx:{textAlign:"center",mb:10,color:"rgba(255,255,255,0.8)",maxWidth:600,mx:"auto",fontWeight:400},children:"Professional skilled workers ready to tackle your projects with expertise and dedication"})]}),e.jsx(h,{container:!0,spacing:4,children:v.map((g,j)=>e.jsx(h,{item:!0,xs:12,sm:6,md:3,children:e.jsx(ge.div,{initial:{opacity:0,y:50},whileInView:{opacity:1,y:0},viewport:{once:!0},transition:{duration:.6,delay:j*.15},children:e.jsxs(Cx,{children:[e.jsxs(o,{sx:{position:"relative"},children:[e.jsx(kx,{image:g.image,title:g.title}),e.jsx(Ax,{className:"service-icon",children:g.icon})]}),e.jsxs(Sx,{children:[e.jsx(a,{gutterBottom:!0,variant:"h5",component:"div",color:"white",sx:{fontWeight:700,mb:2},children:g.title}),e.jsx(a,{variant:"body2",color:"rgba(255,255,255,0.85)",sx:{mb:2,lineHeight:1.5},children:g.description}),e.jsx(o,{sx:{display:"flex",flexWrap:"wrap",gap:.5},children:g.skills.map(b=>e.jsx(ee,{label:b,size:"small",sx:{backgroundColor:"rgba(255,215,0,0.2)",color:"#FFD700",fontSize:"0.75rem",fontWeight:600}},b))})]})]})})},g.title))}),e.jsx(ge.div,{initial:{opacity:0,y:30},whileInView:{opacity:1,y:0},viewport:{once:!0},transition:{duration:.8,delay:.3},children:e.jsxs(o,{sx:{textAlign:"center",mt:12},children:[e.jsx(a,{variant:"h4",sx:{color:"white",mb:3,fontWeight:700},children:"Ready to Get Started?"}),e.jsx(a,{variant:"h6",sx:{color:"rgba(255,255,255,0.8)",mb:4,maxWidth:500,mx:"auto"},children:"Join thousands of skilled workers and satisfied customers on Ghana's leading trade platform"}),e.jsxs(o,{sx:{display:"flex",gap:3,justifyContent:"center",flexWrap:"wrap"},children:[e.jsx(Qr,{variant:"contained",size:"large",sx:{background:"linear-gradient(135deg, #FFD700 0%, #FFC000 100%)",color:"#000",fontWeight:800,fontSize:"1.1rem",px:4,py:1.5,"&:hover":{background:"linear-gradient(135deg, #FFC000 0%, #FFB000 100%)"}},onClick:()=>r("/register"),children:"Join as a Worker"}),e.jsx(Qr,{variant:"outlined",size:"large",sx:{borderColor:"#FFD700",color:"#FFD700",borderWidth:2,fontWeight:700,fontSize:"1.1rem",px:4,py:1.5,"&:hover":{background:E("#FFD700",.1),borderWidth:2}},onClick:()=>r("/find-talents"),children:"Hire Skilled Workers"})]})]})})]})})]})})]})};Y.string.isRequired,Y.oneOfType([Y.string,Y.number]).isRequired,Y.string,Y.node,Y.string,Y.string,Y.string;const zt=({title:t,subheader:r,action:s,children:n,elevation:i=1,sx:c={}})=>e.jsxs(me,{elevation:i,sx:{height:"100%",background:"rgba(35, 35, 35, 0.8)",backdropFilter:"blur(10px)",borderRadius:2,boxShadow:"0 4px 12px rgba(0,0,0,0.1)",border:"1px solid rgba(255, 215, 0, 0.3)",transition:"all 0.2s ease-in-out","&:hover":{boxShadow:"0 8px 16px rgba(0,0,0,0.2)",borderColor:"rgba(255, 215, 0, 0.5)"},...c},children:[e.jsx(vc,{title:t,subheader:r,action:s,titleTypographyProps:{variant:"h6",fontWeight:700,color:"#fff",letterSpacing:.5},subheaderTypographyProps:{variant:"body2",color:"textSecondary",opacity:.8},sx:{pb:1,px:3,pt:2}}),e.jsx(fe,{sx:{opacity:.1}}),e.jsx(ce,{sx:{p:3},children:n})]});zt.propTypes={title:Y.node.isRequired,subheader:Y.node,action:Y.node,children:Y.node.isRequired,elevation:Y.number,sx:Y.object};const Nn=({actions:t=[]})=>{const[r,s]=l.useState(t.map(()=>({loading:!1}))),[n,i]=l.useState({open:!1,message:"",severity:"success"}),c=(x,m)=>{m.preventDefault();const u=[...r];u[x]={loading:!0},s(u),setTimeout(()=>{u[x]={loading:!1},s(u),i({open:!0,message:`Navigating to ${t[x].title}...`,severity:"info"}),setTimeout(()=>{window.location.href=t[x].path},1e3)},500+Math.random()*300)},d=()=>{i({...n,open:!1})};return e.jsxs(zt,{title:"Quick Actions",children:[e.jsx(h,{container:!0,spacing:2,sx:{p:2,textAlign:"center"},children:t.map((x,m)=>e.jsx(h,{item:!0,xs:6,sm:3,children:e.jsx(xe,{title:x.description||x.title,arrow:!0,children:e.jsxs(o,{component:Fe,to:x.path,onClick:u=>c(m,u),sx:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",textDecoration:"none",color:"text.primary",p:2,borderRadius:"8px",transition:"all 0.2s ease",position:"relative","&:hover":{backgroundColor:"rgba(255, 255, 255, 0.1)",transform:"translateY(-3px)",boxShadow:"0 4px 8px rgba(0, 0, 0, 0.3)"},"&:active":{transform:"translateY(0)",boxShadow:"none"},opacity:r[m].loading?.7:1},children:[e.jsx(mt,{badgeContent:x.badgeContent,color:"error",children:e.jsx(o,{sx:{display:"flex",alignItems:"center",justifyContent:"center",width:60,height:60,borderRadius:"50%",mb:1,backgroundColor:`${x.color}30`,color:x.color,position:"relative"},children:r[m].loading?e.jsx(Ae,{size:30,sx:{position:"absolute",color:x.color}}):x.icon})}),e.jsx(a,{variant:"body2",sx:{fontWeight:"bold",opacity:r[m].loading?.7:1},children:x.title})]})})},m))}),e.jsx(Wt,{open:n.open,autoHideDuration:2e3,onClose:d,anchorOrigin:{vertical:"bottom",horizontal:"center"},children:e.jsx(be,{onClose:d,severity:n.severity,variant:"filled",sx:{width:"100%"},children:n.message})})]})};Nn.propTypes={actions:Y.arrayOf(Y.shape({title:Y.string.isRequired,description:Y.string,icon:Y.element.isRequired,path:Y.string.isRequired,color:Y.string,badgeContent:Y.number})).isRequired};let Dx=class{async getAvailabilityStatus(){return Promise.resolve({isAvailable:!0})}async updateAvailability(r){return console.log("Mock API: Updated availability to",r),Promise.resolve({isAvailable:r.isAvailable})}async getDashboardStats(){return Promise.resolve({activeContracts:3,pendingApplications:7,monthlyEarnings:2850,completionRate:94})}async getNotificationCounts(){return Promise.resolve({messages:5,applications:2,contracts:1})}async getPortfolioProjects(){return Promise.resolve([{id:1,title:"Modern Kitchen Remodel",description:"Complete overhaul of a kitchen with custom cabinets and granite countertops.",imageUrl:"https://images.pexels.com/photos/2724749/pexels-photo-2724749.jpeg?auto=compress&cs=tinysrgb&w=1260&h=750&dpr=1"},{id:2,title:"Luxury Bathroom Tiling",description:"New tile installation for a spa-like bathroom, featuring a walk-in shower.",imageUrl:"https://images.pexels.com/photos/3288102/pexels-photo-3288102.jpeg?auto=compress&cs=tinysrgb&w=1260&h=750&dpr=1"}])}async getSkillsAndLicenses(){return Promise.resolve({skills:[{name:"Carpentry",verified:!0},{name:"Plumbing",verified:!0},{name:"Electrical",verified:!1}],licenses:[{name:"Master Plumber",issuer:"State Board",expiry:"12/2025"},{name:"Certified Electrician",issuer:"National Electrical Board",expiry:"06/2026"}]})}async searchWorkers(){return Promise.resolve({workers:[],total:0,page:1,limit:10})}async getWorkerById(){return Promise.resolve({id:"worker-123",firstName:"Demo",lastName:"Worker",profession:"Professional Carpenter",rating:4.5,profileImage:"/path/to/default-avatar.jpg"})}async getMyWorkerProfile(){return Promise.resolve({id:"worker-123",firstName:"Demo",lastName:"Worker",profession:"Professional Carpenter",rating:4.5,profileImage:"/path/to/default-avatar.jpg"})}};const Ix=new Dx,Yt=Xe.create({baseURL:yt.USER_SERVICE,timeout:3e4,headers:{"Content-Type":"application/json"}});Yt.interceptors.request.use(t=>{const r=localStorage.getItem("kelmah_auth_token");return r&&(t.headers.Authorization=`Bearer ${r}`),t},t=>Promise.reject(t));const mr={profile:{id:"7a1f417c-e2e2-4210-9824-08d5fac336ac",firstName:"Tony",lastName:"Gate",email:"giftyafisa@gmail.com",phone:"+233 24 123 4567",location:"Accra, Greater Accra",bio:"Experienced carpenter with over 8 years in custom furniture and cabinet making. Specializing in modern designs and quality craftsmanship.",avatar:"/api/placeholder/150/150",rating:4.8,reviewsCount:24,completedJobs:47,responseTime:"2 hours",languages:["English","Twi"],verified:!0,joinedAt:new Date("2022-03-15"),lastActive:new Date},skills:[{id:"skill-1",name:"Carpentry",category:"Construction",level:"Expert",yearsExperience:8,verified:!0,verifiedAt:new Date("2023-01-15"),description:"Custom furniture making, cabinet installation, woodworking"},{id:"skill-2",name:"Furniture Making",category:"Craftsmanship",level:"Expert",yearsExperience:6,verified:!0,verifiedAt:new Date("2023-02-20"),description:"Custom chairs, tables, beds, and storage solutions"},{id:"skill-3",name:"Kitchen Installation",category:"Construction",level:"Advanced",yearsExperience:4,verified:!1,description:"Complete kitchen setup, cabinet mounting, countertop installation"}],licenses:[{id:"license-1",name:"Carpentry Trade Certificate",issuingBody:"Ghana Institute of Carpentry",issueDate:new Date("2020-06-15"),expiryDate:new Date("2025-06-15"),status:"active",verified:!0},{id:"license-2",name:"Safety Training Certificate",issuingBody:"Occupational Safety Institute",issueDate:new Date("2023-01-10"),expiryDate:new Date("2024-01-10"),status:"active",verified:!0}],availability:{status:"available",workSchedule:{monday:{available:!0,startTime:"08:00",endTime:"17:00"},tuesday:{available:!0,startTime:"08:00",endTime:"17:00"},wednesday:{available:!0,startTime:"08:00",endTime:"17:00"},thursday:{available:!0,startTime:"08:00",endTime:"17:00"},friday:{available:!0,startTime:"08:00",endTime:"17:00"},saturday:{available:!0,startTime:"09:00",endTime:"15:00"},sunday:{available:!1,startTime:null,endTime:null}},maxConcurrentJobs:2,currentActiveJobs:1,preferredJobTypes:["carpentry","furniture-making","installation"],travelRadius:25,hourlyRate:{min:15,max:45,currency:"GH₵"},lastUpdated:new Date},analytics:{totalEarnings:15420,monthlyEarnings:3200,averageJobValue:850,completionRate:96,onTimeDelivery:94,clientReturnRate:78,averageRating:4.8,totalReviews:24,responseRate:98,averageResponseTime:"2.3 hours"}};class Rx{async getProfile(){try{return(await Yt.get("/api/users/me/profile")).data}catch(r){return console.warn("User service unavailable for profile, using mock data:",r.message),{success:!0,data:{worker:mr.profile}}}}async updateProfile(r){try{return(await Yt.put("/api/users/me/profile",r)).data}catch(s){return console.warn("User service unavailable for profile update, simulating success:",s.message),{success:!0,data:{worker:{...mr.profile,...r,updatedAt:new Date}},message:"Profile updated successfully (mock)"}}}async getSkillsAndLicenses(){try{return(await Yt.get("/api/users/me/credentials")).data}catch(r){return console.warn("User service unavailable for credentials, using mock data:",r.message),{success:!0,data:{skills:mr.skills,licenses:mr.licenses}}}}async updateSkill(r){try{return(await Yt.post("/api/users/me/skills",r)).data}catch(s){return console.warn("User service unavailable for skill update, simulating success:",s.message),{success:!0,data:{skill:{id:`skill-${Date.now()}`,...r,verified:!1,createdAt:new Date}},message:"Skill added successfully (mock)"}}}async getAvailabilityStatus(){try{return(await Yt.get("/api/users/me/availability")).data}catch(r){return console.warn("User service unavailable for availability, using mock data:",r.message),{success:!0,data:{availability:mr.availability}}}}async updateAvailability(r){try{return(await Yt.put("/api/users/me/availability",r)).data}catch(s){return console.warn("User service unavailable for availability update, simulating success:",s.message),{success:!0,data:{availability:{...mr.availability,...r,lastUpdated:new Date}},message:"Availability updated successfully (mock)"}}}async getAnalytics(){try{return(await Yt.get("/api/users/me/analytics")).data}catch(r){return console.warn("User service unavailable for analytics, using mock data:",r.message),{success:!0,data:{analytics:mr.analytics}}}}async searchWorkers(r={}){try{return(await Yt.get("/api/users/workers",{params:r})).data}catch(s){console.warn("User service unavailable for worker search, using mock data:",s.message);const n=[{...mr.profile,skills:mr.skills.map(i=>i.name),distance:5.2},{id:"worker-2",firstName:"Emmanuel",lastName:"Asante",location:"Kumasi, Ashanti Region",skills:["Plumbing","Pipe Installation"],rating:4.6,completedJobs:32,responseTime:"1.5 hours",distance:15.8},{id:"worker-3",firstName:"Kwame",lastName:"Osei",location:"Takoradi, Western Region",skills:["Electrical","Wiring"],rating:4.9,completedJobs:28,responseTime:"3 hours",distance:45.3}];return{success:!0,data:{workers:n,pagination:{currentPage:1,totalPages:1,totalItems:n.length,itemsPerPage:10}}}}}async getNotificationCounts(){try{return(await Yt.get("/api/users/me/notification-counts")).data}catch(r){return console.warn("User service unavailable for notifications, using mock data:",r.message),{success:!0,data:{unreadMessages:3,pendingApplications:2,newJobMatches:5,systemNotifications:1}}}}async requestSkillVerification(r,s){try{return(await Yt.post(`/api/users/me/skills/${r}/verify`,s)).data}catch(n){return console.warn("User service unavailable for skill verification, simulating success:",n.message),{success:!0,data:{verification:{id:`verification-${Date.now()}`,skillId:r,status:"pending",submittedAt:new Date,estimatedCompletion:new Date(Date.now()+1e3*60*60*24*3)}},message:"Skill verification request submitted successfully (mock)"}}}}const Na=new Rx;class Fx{async login(r){const s=await He.post("/auth/login",r);return s.data.token&&(localStorage.setItem(os,s.data.token),s.data.refreshToken&&localStorage.setItem(Wi,s.data.refreshToken),localStorage.setItem(kn,JSON.stringify(s.data.user))),s.data}async register(r){const s=await He.post("/auth/register",r);return s.data.token&&(localStorage.setItem(os,s.data.token),s.data.refreshToken&&localStorage.setItem(Wi,s.data.refreshToken),localStorage.setItem(kn,JSON.stringify(s.data.user))),s.data}logout(){localStorage.removeItem(os),localStorage.removeItem(kn)}async verifyToken(){return(await He.get("/auth/verify")).data}async requestPasswordReset(r){return(await He.post("/auth/forgot-password",r)).data}async resetPassword(r){return(await He.post(`/auth/reset-password/${r.token}`,{password:r.password})).data}async changePassword(r){return(await He.post("/auth/change-password",r)).data}async getCurrentUser(){return(await He.get("/auth/me")).data}async updateSecuritySettings(r){return(await He.put("/auth/security",r)).data}async verifyEmail(r){return(await He.get(`/auth/verify/${r}`)).data}async resendVerificationEmail(r){return(await He.post("/auth/resend-verification",r)).data}}const Us=new Fx,St=Xe.create({baseURL:yt.JOB_SERVICE,timeout:3e4,headers:{"Content-Type":"application/json"}});St.interceptors.request.use(t=>{const r=localStorage.getItem("kelmah_auth_token");return r&&(t.headers.Authorization=`Bearer ${r}`),t},t=>Promise.reject(t));const la=[{id:"job-1",title:"Kitchen Renovation - Custom Cabinets",description:"Looking for an experienced carpenter to build custom kitchen cabinets. The project involves measuring, designing, and installing high-quality wooden cabinets with modern hardware.",company:"Mitchell Residence",location:"Accra, Greater Accra",category:"Carpentry",budget:5500,currency:"GH₵",type:"fixed-price",status:"open",urgency:"normal",featured:!0,tags:["Carpentry","Kitchen","Custom Work"],requirements:["Minimum 5 years carpentry experience","Portfolio of kitchen cabinet work","Own tools and equipment","Available for 3-4 weeks project duration"],postedBy:{id:"client-1",name:"Sarah Mitchell",avatar:"/api/placeholder/50/50",rating:4.8,reviewsCount:12},createdAt:new Date(Date.now()-1e3*60*60*24*2),updatedAt:new Date(Date.now()-1e3*60*60*24*1),deadline:new Date(Date.now()+1e3*60*60*24*14),applicationsCount:8,viewsCount:45,distance:5.2},{id:"job-2",title:"Emergency Bathroom Plumbing Repair",description:"Urgent plumbing repair needed for bathroom. Issues include leaking pipes, faulty faucet, and drainage problems. Need immediate professional help.",company:"Chen Family Home",location:"Kumasi, Ashanti Region",category:"Plumbing",budget:800,currency:"GH₵",type:"hourly",status:"open",urgency:"urgent",featured:!1,tags:["Plumbing","Emergency","Bathroom"],requirements:["Licensed plumber","Available within 24 hours","Emergency repair experience","Own professional tools"],postedBy:{id:"client-2",name:"David Chen",avatar:"/api/placeholder/50/50",rating:4.6,reviewsCount:8},createdAt:new Date(Date.now()-1e3*60*60*6),updatedAt:new Date(Date.now()-1e3*60*60*3),deadline:new Date(Date.now()+1e3*60*60*48),applicationsCount:12,viewsCount:67,distance:15.8},{id:"job-3",title:"Complete House Rewiring Project",description:"Full electrical rewiring for a 3-bedroom house. Includes new electrical panel, outlets, switches, and lighting fixtures. Must comply with current electrical codes.",company:"Thompson Residence",location:"Takoradi, Western Region",category:"Electrical",budget:3200,currency:"GH₵",type:"fixed-price",status:"open",urgency:"normal",featured:!0,tags:["Electrical","Rewiring","Residential"],requirements:["Certified electrician with license","Experience with residential rewiring","Knowledge of current electrical codes","Ability to work 2-3 weeks on project"],postedBy:{id:"client-3",name:"Lisa Thompson",avatar:"/api/placeholder/50/50",rating:4.9,reviewsCount:15},createdAt:new Date(Date.now()-1e3*60*60*24*5),updatedAt:new Date(Date.now()-1e3*60*60*24*4),deadline:new Date(Date.now()+1e3*60*60*24*21),applicationsCount:6,viewsCount:32,distance:45.3},{id:"job-4",title:"Interior House Painting",description:"Professional painting services needed for interior walls of a 2-bedroom apartment. Includes wall preparation, primer, and two coats of paint.",company:"Apartment Complex",location:"Tema, Greater Accra",category:"Painting",budget:1200,currency:"GH₵",type:"fixed-price",status:"open",urgency:"normal",featured:!1,tags:["Painting","Interior","Residential"],requirements:["Professional painting experience","Own brushes, rollers, and equipment","Attention to detail and clean work","Available within 2 weeks"],postedBy:{id:"client-4",name:"Robert Johnson",avatar:"/api/placeholder/50/50",rating:4.4,reviewsCount:7},createdAt:new Date(Date.now()-1e3*60*60*24*1),updatedAt:new Date(Date.now()-1e3*60*60*12),deadline:new Date(Date.now()+1e3*60*60*24*10),applicationsCount:4,viewsCount:28,distance:8.7},{id:"job-5",title:"Roof Repair and Maintenance",description:"Roof inspection and repair needed. Issues include loose tiles, minor leaks, and gutter cleaning. Looking for experienced roofer.",company:"Wilson Residence",location:"Cape Coast, Central Region",category:"Roofing",budget:950,currency:"GH₵",type:"fixed-price",status:"open",urgency:"high",featured:!1,tags:["Roofing","Repair","Maintenance"],requirements:["Roofing experience minimum 3 years","Safety equipment and insurance","Ability to work at heights","Available for inspection this week"],postedBy:{id:"client-5",name:"Mary Wilson",avatar:"/api/placeholder/50/50",rating:4.7,reviewsCount:9},createdAt:new Date(Date.now()-1e3*60*60*24*3),updatedAt:new Date(Date.now()-1e3*60*60*24*2),deadline:new Date(Date.now()+1e3*60*60*24*7),applicationsCount:3,viewsCount:19,distance:78.2}];class Wx{async getJobs(r={}){try{return(await St.get("/api/jobs",{params:r})).data}catch(s){console.warn("Job service unavailable, using mock data:",s.message);const{page:n=1,limit:i=10,search:c="",category:d="",location:x=""}=r;let m=la;if(c){const g=c.toLowerCase();m=m.filter(j=>j.title.toLowerCase().includes(g)||j.description.toLowerCase().includes(g)||j.company.toLowerCase().includes(g))}d&&(m=m.filter(g=>g.category.toLowerCase()===d.toLowerCase())),x&&(m=m.filter(g=>g.location.toLowerCase().includes(x.toLowerCase())));const u=(n-1)*i,v=u+i;return{success:!0,data:{jobs:m.slice(u,v),pagination:{currentPage:n,totalPages:Math.ceil(m.length/i),totalItems:m.length,itemsPerPage:i,hasNextPage:v<m.length,hasPrevPage:n>1}}}}}async getFeaturedJobs(r=6){try{return(await St.get("/api/jobs/featured",{params:{limit:r}})).data}catch(s){console.warn("Job service unavailable, using mock featured jobs:",s.message);const n=la.filter(i=>i.featured).slice(0,r);return{success:!0,data:{jobs:n,count:n.length}}}}async getJobById(r){try{return(await St.get(`/api/jobs/${r}`)).data}catch(s){console.warn("Job service unavailable, using mock job data:",s.message);const n=la.find(i=>i.id===r);if(!n)throw new Error("Job not found");return{success:!0,data:{job:n}}}}async createJob(r){try{return(await St.post("/api/jobs",r)).data}catch(s){return console.warn("Job service unavailable, simulating job creation:",s.message),{success:!0,data:{job:{id:`job-${Date.now()}`,...r,status:"open",createdAt:new Date,updatedAt:new Date,applicationsCount:0,viewsCount:0}},message:"Job created successfully (mock)"}}}async updateJob(r,s){try{return(await St.put(`/api/jobs/${r}`,s)).data}catch(n){return console.warn("Job service unavailable, simulating job update:",n.message),{success:!0,data:{job:{id:r,...s,updatedAt:new Date}},message:"Job updated successfully (mock)"}}}async deleteJob(r){try{return(await St.delete(`/api/jobs/${r}`)).data}catch(s){return console.warn("Job service unavailable, simulating job deletion:",s.message),{success:!0,message:"Job deleted successfully (mock)"}}}async applyToJob(r,s){try{return(await St.post(`/api/jobs/${r}/apply`,s)).data}catch(n){return console.warn("Job service unavailable, simulating job application:",n.message),{success:!0,data:{application:{id:`app-${Date.now()}`,jobId:r,...s,status:"pending",appliedAt:new Date}},message:"Application submitted successfully (mock)"}}}async getMyJobs(r={}){try{return(await St.get("/api/jobs/my-jobs",{params:r})).data}catch(s){return console.warn("Job service unavailable, using mock my jobs:",s.message),{success:!0,data:{jobs:la.slice(0,2),count:2}}}}async getJobApplications(r,s={}){try{return(await St.get(`/api/jobs/${r}/applications`,{params:s})).data}catch(n){return console.warn("Job service unavailable, using mock applications:",n.message),{success:!0,data:{applications:[],count:0}}}}async getMyApplications(r={}){try{return(await St.get("/api/jobs/my-applications",{params:r})).data}catch(s){return console.warn("Job service unavailable, using mock applications:",s.message),{success:!0,data:{applications:[],count:0}}}}async updateApplicationStatus(r,s,n){try{return(await St.put(`/api/jobs/${r}/applications/${s}`,{status:n})).data}catch(i){return console.warn("Job service unavailable, simulating status update:",i.message),{success:!0,data:{application:{id:s,jobId:r,status:n,updatedAt:new Date}},message:"Application status updated (mock)"}}}async saveJob(r){try{return(await St.post(`/api/jobs/${r}/save`)).data}catch(s){return console.warn("Job service unavailable, simulating job save:",s.message),{success:!0,message:"Job saved successfully (mock)"}}}async unsaveJob(r){try{return(await St.delete(`/api/jobs/${r}/save`)).data}catch(s){return console.warn("Job service unavailable, simulating job unsave:",s.message),{success:!0,message:"Job removed from saved list (mock)"}}}async getSavedJobs(r={}){try{return(await St.get("/api/jobs/saved",{params:r})).data}catch(s){return console.warn("Job service unavailable, using mock saved jobs:",s.message),{success:!0,data:{jobs:[],count:0}}}}async getJobCategories(){try{return(await St.get("/api/jobs/categories")).data}catch(r){return console.warn("Job service unavailable, using mock categories:",r.message),{success:!0,data:{categories:[{id:"carpentry",name:"Carpentry",count:15},{id:"plumbing",name:"Plumbing",count:12},{id:"electrical",name:"Electrical",count:8},{id:"painting",name:"Painting",count:6},{id:"roofing",name:"Roofing",count:4},{id:"masonry",name:"Masonry",count:7},{id:"welding",name:"Welding",count:3}]}}}}}const zi=new Wx,He=Xe.create({baseURL:tx,timeout:3e4,headers:{"Content-Type":"application/json"}});He.interceptors.request.use(t=>{const r=localStorage.getItem(os);return r&&(t.headers.Authorization=`Bearer ${r}`),t},t=>Promise.reject(t));He.interceptors.response.use(t=>t,async t=>{var s;const r=t.config;if(((s=t.response)==null?void 0:s.status)===401&&!r._retry){r._retry=!0;try{const n=localStorage.getItem(Cn);if(!n)throw new Error("No refresh token available");const i=await He.post("/auth/refresh-token",{refreshToken:n}),c=i.data.data||i.data,{token:d,refreshToken:x}=c;return localStorage.setItem(os,d),localStorage.setItem(Cn,x),r.headers.Authorization=`Bearer ${d}`,He(r)}catch{localStorage.removeItem(os),localStorage.removeItem(Cn)}}return Promise.reject(t)});const rl=Ix,Tx=Rt.forwardRef(function(r,s){return e.jsx(wc,{direction:"up",ref:s,...r})}),On=()=>{const[t,r]=l.useState(!1),[s,n]=l.useState(null),[i,c]=l.useState(!1),[d,x]=l.useState([]),[m,u]=l.useState(!0),[v,y]=l.useState(null);l.useEffect(()=>{(async()=>{try{u(!0);const p=await rl.getPortfolioProjects();x(p),y(null)}catch(p){console.error("Error fetching portfolio projects:",p),y("Failed to load portfolio projects")}finally{u(!1)}})()},[]);const g=()=>{r(!t)},j=w=>{n(w),c(!0),setTimeout(()=>{c(!1)},500)},b=()=>{n(null)};if(m)return e.jsx(zt,{title:e.jsxs(o,{sx:{display:"flex",alignItems:"center"},children:[e.jsx(ra,{sx:{mr:1}}),e.jsx(a,{variant:"h6",children:"My Portfolio"})]}),children:e.jsx(o,{sx:{display:"flex",justifyContent:"center",p:3},children:e.jsx(Ae,{})})});if(v)return e.jsx(zt,{title:e.jsxs(o,{sx:{display:"flex",alignItems:"center"},children:[e.jsx(ra,{sx:{mr:1}}),e.jsx(a,{variant:"h6",children:"My Portfolio"})]}),children:e.jsxs(o,{sx:{p:3,textAlign:"center"},children:[e.jsx(a,{color:"error",children:v}),e.jsx(P,{variant:"outlined",sx:{mt:2},onClick:()=>window.location.reload(),children:"Retry"})]})});if(d.length===0)return e.jsx(zt,{title:e.jsxs(o,{sx:{display:"flex",alignItems:"center"},children:[e.jsx(ra,{sx:{mr:1}}),e.jsx(a,{variant:"h6",children:"My Portfolio"})]}),children:e.jsx(a,{color:"text.secondary",align:"center",sx:{py:3},children:"No portfolio projects yet. Add some to showcase your work!"})});const C=Array.isArray(d)?d[0]:null,A=Array.isArray(d)?d.slice(1):[];return e.jsxs(zt,{title:e.jsxs(o,{sx:{display:"flex",alignItems:"center"},children:[e.jsx(ra,{sx:{mr:1}}),e.jsx(a,{variant:"h6",children:"My Portfolio"})]}),action:e.jsx(P,{onClick:g,endIcon:t?e.jsx(Cc,{}):e.jsx(kc,{}),size:"large",variant:"outlined",sx:{borderRadius:"20px",px:2,fontWeight:"bold",fontSize:"0.9rem",transition:"all 0.2s ease"},children:t?"Show Less":"Show More"}),children:[e.jsxs(Gs,{in:t,timeout:300,unmountOnExit:!0,children:[e.jsx(me,{elevation:0,sx:{mb:2},children:e.jsx(Mn,{onClick:()=>j(C),children:e.jsxs(h,{container:!0,children:[e.jsx(h,{item:!0,xs:12,md:4,children:e.jsx(ba,{component:"img",height:"200",image:(C==null?void 0:C.imageUrl)||"https://via.placeholder.com/400x200?text=Featured+Project",alt:C==null?void 0:C.title,sx:{objectFit:"cover"}})}),e.jsx(h,{item:!0,xs:12,md:8,children:e.jsxs(ce,{children:[e.jsx(a,{variant:"h6",component:"div",fontWeight:"bold",children:C==null?void 0:C.title}),e.jsx(a,{variant:"body2",color:"text.secondary",children:C==null?void 0:C.description})]})})]})})}),A.length>0&&e.jsxs(o,{sx:{mt:2},children:[e.jsx(fe,{sx:{mb:2}}),e.jsx(h,{container:!0,spacing:2,children:A.map((w,p)=>e.jsx(h,{item:!0,xs:12,sm:6,md:4,children:e.jsx(me,{sx:{height:"100%",display:"flex",flexDirection:"column"},children:e.jsxs(Mn,{onClick:()=>j(w),children:[e.jsx(ba,{component:"img",height:"140",image:(w==null?void 0:w.imageUrl)||`https://via.placeholder.com/300x140?text=Project+${p+2}`,alt:w==null?void 0:w.title}),e.jsxs(ce,{sx:{flexGrow:1},children:[e.jsx(a,{variant:"h6",component:"div",children:w==null?void 0:w.title}),e.jsx(a,{variant:"body2",color:"text.secondary",children:(w==null?void 0:w.description.length)>100?`${w==null?void 0:w.description.substring(0,100)}...`:w==null?void 0:w.description})]})]})})},p))})]})]}),e.jsxs(Ee,{open:s!==null,TransitionComponent:Tx,keepMounted:!0,onClose:b,maxWidth:"md",fullWidth:!0,children:[i?e.jsx(lr,{}):null,s&&e.jsxs(e.Fragment,{children:[e.jsxs(Me,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsx(a,{variant:"h5",component:"div",fontWeight:"bold",children:s.title}),e.jsx(ne,{onClick:b,children:e.jsx(mo,{})})]}),e.jsxs(ze,{children:[e.jsx(ba,{component:"img",height:"400",image:s.imageUrl||"https://via.placeholder.com/800x400?text=Project+Image",alt:s.title,sx:{borderRadius:1,mb:2}}),e.jsx(o,{sx:{mb:3},children:e.jsxs(a,{variant:"body1",paragraph:!0,children:[s.description,s.fullDescription&&` ${s.fullDescription}`]})}),e.jsxs(o,{sx:{display:"flex",gap:1,mb:2},children:[e.jsx(ee,{icon:e.jsx(Sc,{}),label:`Completed: ${s.completionDate||"Not specified"}`}),s.clientSatisfaction&&e.jsx(ee,{icon:e.jsx(Ms,{}),label:`Client: ${s.clientSatisfaction}`,color:"success"})]}),e.jsx(a,{variant:"h6",gutterBottom:!0,sx:{mt:2},children:"Skills Utilized"}),e.jsx(o,{sx:{display:"flex",gap:1},children:s.skills?s.skills.map((w,p)=>e.jsx(ee,{label:w},p)):e.jsxs(e.Fragment,{children:[e.jsx(ee,{label:"Carpentry"}),e.jsx(ee,{label:"Design"}),e.jsx(ee,{label:"Material Selection"})]})})]}),e.jsxs(Le,{children:[e.jsx(P,{onClick:b,children:"Close"}),e.jsx(P,{variant:"contained",children:"Contact for Similar Work"})]})]})]})]})};On.propTypes={projects:Y.arrayOf(Y.shape({title:Y.string.isRequired,description:Y.string.isRequired,imageUrl:Y.string}))};const sl=()=>{const[t,r]=l.useState([]),[s,n]=l.useState([]),[i,c]=l.useState(!0),[d,x]=l.useState(null),[m,u]=l.useState(t.filter(T=>T.verified).map(T=>T.name)),[v,y]=l.useState(!1),[g,j]=l.useState(null),[b,C]=l.useState(0),[A,w]=l.useState(!1),[p,k]=l.useState(!1),U=["Upload Documentation","Verification Review","Skills Assessment","Certification"];l.useEffect(()=>{(async()=>{try{c(!0);const H=await Na.getSkillsAndLicenses(),F=H.data||H,V=F.skills||[],re=F.licenses||[];r(V),n(re),u(V.filter(z=>z.verified).map(z=>z.id)),x(null)}catch(H){console.error("Error fetching credentials:",H),x("Failed to load credentials")}finally{c(!1)}})()},[]);const W=T=>{j(T),y(!0),C(0),k(!1)},R=()=>{A||y(!1)},K=async()=>{if(b===U.length-1){w(!0);try{await Na.requestSkillVerification(g.id,{documentUrls:[],notes:"Verification requested through worker dashboard"}),k(!0),u(T=>[...T,g.id]),r(T=>T.map(H=>H.id===g.id?{...H,verified:!0,verificationStatus:"pending"}:H))}catch(T){console.error("Error requesting verification:",T)}finally{w(!1)}}else C(T=>T+1)};if(i)return e.jsx(zt,{title:"Credentials & Skills",children:e.jsx(o,{sx:{display:"flex",justifyContent:"center",p:3},children:e.jsx(Ae,{})})});if(d)return e.jsx(zt,{title:"Credentials & Skills",children:e.jsxs(o,{sx:{p:3,textAlign:"center"},children:[e.jsx(a,{color:"error",children:d}),e.jsx(P,{variant:"outlined",sx:{mt:2},onClick:()=>window.location.reload(),children:"Retry"})]})});const _=t.filter(T=>m.includes(T.name)),O=t.filter(T=>!m.includes(T.name));return e.jsxs(zt,{title:"Credentials & Skills",children:[_.length>0&&e.jsxs(o,{sx:{mb:2},children:[e.jsx(a,{variant:"subtitle1",fontWeight:"bold",color:"text.secondary",sx:{mb:1},children:"Verified Skills"}),e.jsx(Ke,{dense:!0,sx:{p:0},children:_.map((T,H)=>e.jsxs(Be,{sx:{p:0},children:[e.jsx(Ze,{sx:{minWidth:36,color:"success.main"},children:e.jsx(Ac,{})}),e.jsx(Ie,{primary:T.name,sx:{"& .MuiListItemText-primary":{fontWeight:"medium"}}})]},H))})]}),O.length>0&&e.jsxs(o,{sx:{mb:2},children:[e.jsx(fe,{sx:{my:2}}),e.jsx(a,{variant:"subtitle1",fontWeight:"bold",color:"text.secondary",sx:{mb:1},children:"Unverified Skills"}),e.jsx(Ke,{dense:!0,sx:{p:0},children:O.map((T,H)=>e.jsxs(Be,{sx:{p:0,opacity:.7},children:[e.jsx(Ze,{sx:{minWidth:36},children:e.jsx(Pc,{})}),e.jsx(Ie,{primary:T.name}),e.jsx(P,{size:"small",variant:"contained",endIcon:e.jsx(Dc,{}),sx:{ml:1,borderRadius:"20px"},onClick:()=>W(T),children:"Get Verified"})]},H))})]}),s.length>0&&e.jsxs(e.Fragment,{children:[e.jsx(fe,{sx:{my:2}}),e.jsxs(o,{children:[e.jsx(a,{variant:"subtitle1",fontWeight:"bold",color:"text.secondary",sx:{mb:1},children:"Licenses"}),e.jsx(Ke,{dense:!0,sx:{p:0},children:s.map((T,H)=>e.jsxs(Be,{sx:{p:0},children:[e.jsx(Ze,{sx:{minWidth:36,color:"success.main"},children:e.jsx(Ic,{})}),e.jsx(Ie,{primary:T.name,secondary:`Expires: ${T.expiry}`,sx:{"& .MuiListItemText-primary":{fontWeight:"medium"},"& .MuiListItemText-secondary":{fontSize:"0.85rem",fontWeight:"medium"}}})]},H))})]})]}),e.jsxs(Ee,{open:v,onClose:R,maxWidth:"sm",fullWidth:!0,children:[e.jsx(Me,{children:p?e.jsxs(o,{sx:{display:"flex",alignItems:"center",color:"success.main"},children:[e.jsx(Ms,{sx:{mr:1}}),"Verification Complete"]}):`Get ${g==null?void 0:g.name} Verified`}),e.jsx(ze,{children:p?e.jsxs(o,{sx:{textAlign:"center",py:3},children:[e.jsx(Ms,{sx:{fontSize:64,color:"success.main",mb:2}}),e.jsx(a,{variant:"h6",gutterBottom:!0,children:"Congratulations!"}),e.jsxs(a,{variant:"body1",children:["Your ",g==null?void 0:g.name," skill has been verified. This verification will be visible to potential hirers."]})]}):e.jsxs(e.Fragment,{children:[e.jsx(us,{activeStep:b,sx:{my:3},children:U.map(T=>e.jsx(xs,{children:e.jsx(hs,{children:T})},T))}),e.jsxs(a,{sx:{mt:2,mb:1},children:[b===0&&"Upload documents that prove your qualifications for this skill.",b===1&&"Our team will review your documentation for accuracy and completeness.",b===2&&"Complete a brief assessment to demonstrate your proficiency.",b===3&&"Final review and certification of your skill."]})]})}),e.jsx(Le,{children:p?e.jsx(P,{onClick:R,color:"primary",children:"Close"}):e.jsxs(e.Fragment,{children:[e.jsx(P,{onClick:R,disabled:A,startIcon:e.jsx(mo,{}),children:"Cancel"}),e.jsx(P,{onClick:K,variant:"contained",color:"primary",disabled:A,endIcon:A?e.jsx(Ae,{size:24}):null,children:b===U.length-1?"Complete":"Next"})]})})]})]})};sl.propTypes={skills:Y.arrayOf(Y.shape({name:Y.string.isRequired,verified:Y.bool})),licenses:Y.arrayOf(Y.shape({name:Y.string.isRequired,expiry:Y.string.isRequired}))};const Li={Plumbing:{icon:e.jsx(Rc,{}),color:"#2196F3"},Carpentry:{icon:e.jsx(Fc,{}),color:"#8D6E63"},Electrical:{icon:e.jsx(Wc,{}),color:"#FFD700"},Masonry:{icon:e.jsx(tt,{}),color:"#607D8B"},Painting:{icon:e.jsx(tt,{}),color:"#E91E63"},Welding:{icon:e.jsx(tt,{}),color:"#FF5722"},Roofing:{icon:e.jsx(tt,{}),color:"#795548"},Default:{icon:e.jsx(tt,{}),color:"#9E9E9E"}},Ex=t=>{var s;const r=t.category||((s=t.tags)==null?void 0:s[0])||"Default";return Li[r]||Li.Default},Mx=t=>t.urgent||t.priority==="urgent"?{label:"Urgent",color:"#FF5722",bgColor:E("#FF5722",.1)}:t.featured||t.priority==="high"?{label:"Featured",color:"#FFD700",bgColor:E("#FFD700",.1)}:t.new||Date.now()-new Date(t.created_at).getTime()<24*60*60*1e3?{label:"New",color:"#4CAF50",bgColor:E("#4CAF50",.1)}:null,zx=()=>{const t=ve(),{user:r}=ut(),s=Te(t.breakpoints.down("sm"));Te(t.breakpoints.down("md"));const[n,i]=l.useState([]),[c,d]=l.useState([]),[x,m]=l.useState(null),[u,v]=l.useState(new Set),[y,g]=l.useState(""),[j,b]=l.useState("all"),[C,A]=l.useState("newest"),[w,p]=l.useState(null),[k,U]=l.useState(null),[W,R]=l.useState(null),[K,_]=l.useState({open:!1,message:"",severity:"success"}),[O,T]=l.useState(!0),[H,F]=l.useState(!1),[V,re]=l.useState(null),z=[{value:"all",label:"All Jobs",icon:e.jsx(tt,{})},{value:"nearby",label:"Nearby",icon:e.jsx(nt,{})},{value:"urgent",label:"Urgent",icon:e.jsx(cr,{})},{value:"featured",label:"Featured",icon:e.jsx(rt,{})},{value:"new",label:"New Today",icon:e.jsx(Tt,{})}],J=[{value:"newest",label:"Newest First"},{value:"salary",label:"Highest Pay"},{value:"distance",label:"Closest"},{value:"relevance",label:"Most Relevant"}],f=async(N=!1)=>{var q;try{N?F(!0):T(!0);const de=((q=(await zi.getJobs({status:"open",nearby:!0,limit:20,userSkills:(r==null?void 0:r.skills)||[]})).jobs)==null?void 0:q.map(Pe=>({...Pe,...Ex(Pe),status:u.has(Pe.id)?"saved":"idle",distance:Pe.distance||Math.floor(Math.random()*20)+1,salary:Pe.salary||Pe.budget||`GH₵${Math.floor(Math.random()*500)+100}/day`,applicants:Pe.applicants||Math.floor(Math.random()*15)+1,matchScore:Pe.matchScore||Math.floor(Math.random()*40)+60})))||[];i(de),re(null)}catch($){console.error("Error fetching jobs:",$),re("Failed to load jobs. Please try again.")}finally{T(!1),F(!1)}};l.useEffect(()=>{f()},[]);const M=l.useMemo(()=>{let N=[...n];if(y.trim()){const q=y.toLowerCase();N=N.filter($=>{var de,Pe,qe,at,xt;return((de=$.title)==null?void 0:de.toLowerCase().includes(q))||((Pe=$.company)==null?void 0:Pe.toLowerCase().includes(q))||((qe=$.location)==null?void 0:qe.toLowerCase().includes(q))||((at=$.description)==null?void 0:at.toLowerCase().includes(q))||((xt=$.category)==null?void 0:xt.toLowerCase().includes(q))})}switch(j){case"nearby":N=N.filter($=>$.distance<=10);break;case"urgent":N=N.filter($=>$.urgent||$.priority==="urgent");break;case"featured":N=N.filter($=>$.featured||$.priority==="high");break;case"new":const q=new Date;q.setHours(0,0,0,0),N=N.filter($=>new Date($.created_at)>=q);break}switch(C){case"salary":N.sort((q,$)=>{var qe,at,xt,kt;const de=parseInt(((at=(qe=q.salary)==null?void 0:qe.match(/\d+/))==null?void 0:at[0])||"0");return parseInt(((kt=(xt=$.salary)==null?void 0:xt.match(/\d+/))==null?void 0:kt[0])||"0")-de});break;case"distance":N.sort((q,$)=>q.distance-$.distance);break;case"relevance":N.sort((q,$)=>$.matchScore-q.matchScore);break;default:N.sort((q,$)=>new Date($.created_at)-new Date(q.created_at));break}return N},[n,y,j,C]);l.useEffect(()=>{d(M)},[M]);const G=async N=>{i(q=>q.map($=>$.id===N?{...$,status:"loading"}:$));try{await zi.applyToJob(N,{coverMessage:"I am interested in this position and believe my skills are a perfect match."}),i(q=>q.map($=>$.id===N?{...$,status:"applied"}:$)),L("Application submitted successfully!","success")}catch(q){console.error("Error applying to job:",q),i($=>$.map(de=>de.id===N?{...de,status:"idle"}:de)),L("Failed to submit application. Please try again.","error")}},I=N=>{const q=new Set(u);q.has(N)?(q.delete(N),L("Job removed from saved list","info")):(q.add(N),L("Job saved successfully!","success")),v(q),i($=>$.map(de=>de.id===N?{...de,status:q.has(N)?"saved":"idle"}:de))},L=(N,q)=>{_({open:!0,message:N,severity:q})},S=()=>m(null),B=()=>_(N=>({...N,open:!1})),D=({job:N,index:q})=>{const $=Mx(N),de=N.status==="applied",Pe=u.has(N.id);return e.jsx(ge.div,{layout:!0,initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},transition:{duration:.3,delay:q*.05},children:e.jsxs(me,{sx:{background:"linear-gradient(135deg, rgba(30,30,30,0.95) 0%, rgba(40,40,40,0.98) 100%)",border:`1px solid ${E(N.color||"#FFD700",.2)}`,borderRadius:3,overflow:"hidden",position:"relative",cursor:"pointer",transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)","&:hover":{transform:"translateY(-4px)",boxShadow:`0 8px 25px ${E(N.color||"#FFD700",.3)}`,border:`1px solid ${E(N.color||"#FFD700",.4)}`},"&::before":{content:'""',position:"absolute",top:0,left:0,right:0,height:"3px",background:`linear-gradient(90deg, ${N.color||"#FFD700"} 0%, ${E(N.color||"#FFD700",.8)} 100%)`}},onClick:()=>m(N),children:[e.jsxs(ce,{sx:{p:{xs:2,sm:2.5}},children:[e.jsxs(te,{direction:"row",alignItems:"flex-start",justifyContent:"space-between",spacing:2,sx:{mb:2},children:[e.jsxs(te,{direction:"row",alignItems:"center",spacing:2,sx:{flex:1,minWidth:0},children:[e.jsx(o,{sx:{width:{xs:40,sm:48},height:{xs:40,sm:48},borderRadius:"50%",background:E(N.color||"#FFD700",.2),display:"flex",alignItems:"center",justifyContent:"center",color:N.color||"#FFD700",flexShrink:0},children:N.icon}),e.jsxs(o,{sx:{flex:1,minWidth:0},children:[e.jsx(a,{variant:"h6",sx:{color:"#fff",fontWeight:700,fontSize:{xs:"1rem",sm:"1.1rem"},lineHeight:1.2,mb:.5,overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:N.title}),e.jsx(a,{variant:"body2",sx:{color:"rgba(255,255,255,0.7)",fontSize:{xs:"0.8rem",sm:"0.85rem"},overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:N.company})]})]}),e.jsxs(te,{direction:"row",alignItems:"center",spacing:.5,children:[e.jsx(xe,{title:Pe?"Remove from saved":"Save job",children:e.jsx(ne,{size:"small",onClick:qe=>{qe.stopPropagation(),I(N.id)},sx:{color:Pe?"#FFD700":"rgba(255,255,255,0.5)","&:hover":{color:"#FFD700",background:E("#FFD700",.1)}},children:Pe?e.jsx(Kt,{}):e.jsx(or,{})})}),e.jsx(xe,{title:"More options",children:e.jsx(ne,{size:"small",onClick:qe=>{qe.stopPropagation(),R(N),U(qe.currentTarget)},sx:{color:"rgba(255,255,255,0.5)","&:hover":{color:"#fff",background:"rgba(255,255,255,0.1)"}},children:e.jsx(Ur,{})})})]})]}),e.jsxs(te,{spacing:1.5,children:[e.jsxs(te,{direction:"row",alignItems:"center",spacing:2,flexWrap:"wrap",children:[e.jsx(ee,{icon:e.jsx(nt,{}),label:`${N.location} • ${N.distance}km`,size:"small",sx:{backgroundColor:"rgba(255,255,255,0.1)",color:"rgba(255,255,255,0.8)",fontSize:"0.75rem"}}),e.jsx(ee,{icon:e.jsx(ct,{}),label:N.salary,size:"small",sx:{backgroundColor:E("#4CAF50",.2),color:"#4CAF50",fontSize:"0.75rem",fontWeight:600}})]}),e.jsx(a,{variant:"body2",sx:{color:"rgba(255,255,255,0.7)",fontSize:"0.85rem",lineHeight:1.4,display:"-webkit-box",WebkitLineClamp:2,WebkitBoxOrient:"vertical",overflow:"hidden"},children:N.description}),e.jsxs(te,{direction:"row",alignItems:"center",justifyContent:"space-between",flexWrap:"wrap",children:[e.jsxs(te,{direction:"row",alignItems:"center",spacing:1,children:[$&&e.jsx(ee,{label:$.label,size:"small",sx:{backgroundColor:$.bgColor,color:$.color,fontSize:"0.7rem",fontWeight:700,height:"24px"}}),e.jsx(ee,{label:`${N.matchScore}% match`,size:"small",sx:{backgroundColor:E("#2196F3",.2),color:"#2196F3",fontSize:"0.7rem",fontWeight:600,height:"24px"}})]}),e.jsxs(te,{direction:"row",alignItems:"center",spacing:1,children:[e.jsx(xe,{title:"Applicants",children:e.jsx(ee,{icon:e.jsx(zs,{}),label:N.applicants,size:"small",sx:{backgroundColor:"rgba(255,255,255,0.1)",color:"rgba(255,255,255,0.6)",fontSize:"0.7rem",height:"24px"}})}),e.jsx(a,{variant:"caption",sx:{color:"rgba(255,255,255,0.5)",fontSize:"0.7rem"},children:N.timeAgo||"2h ago"})]})]})]})]}),e.jsx(wr,{sx:{p:{xs:2,sm:2.5},pt:0},children:e.jsx(P,{fullWidth:!0,variant:de?"outlined":"contained",color:de?"success":"primary",disabled:N.status==="loading",onClick:qe=>{qe.stopPropagation(),de||G(N.id)},startIcon:N.status==="loading"?e.jsx(Ae,{size:16,color:"inherit"}):de?e.jsx(Ve,{}):null,sx:{py:1.2,borderRadius:2,fontWeight:700,fontSize:{xs:"0.85rem",sm:"0.9rem"},textTransform:"none",...de?{borderColor:"#4CAF50",color:"#4CAF50","&:hover":{borderColor:"#388E3C",backgroundColor:E("#4CAF50",.1)}}:{background:"linear-gradient(135deg, #FFD700 0%, #FFC000 100%)",color:"#000","&:hover":{background:"linear-gradient(135deg, #FFC000 0%, #FFB300 100%)",transform:"translateY(-1px)"}}},children:de?"Applied":"Apply Now"})})]})})};return O?e.jsx(zt,{title:"Available Jobs",action:e.jsx(ne,{disabled:!0,children:e.jsx(Jr,{})}),children:e.jsx(te,{spacing:2,children:[...Array(3)].map((N,q)=>e.jsx(ie,{variant:"rectangular",height:180,sx:{borderRadius:3}},q))})}):V?e.jsx(zt,{title:"Available Jobs",children:e.jsxs(o,{sx:{p:3,textAlign:"center"},children:[e.jsx(a,{color:"error",sx:{mb:2},children:V}),e.jsx(P,{variant:"outlined",onClick:()=>f(),sx:{borderColor:"#FFD700",color:"#FFD700","&:hover":{borderColor:"#FFC000",backgroundColor:E("#FFD700",.1)}},children:"Try Again"})]})}):e.jsxs(e.Fragment,{children:[e.jsxs(zt,{title:e.jsxs(te,{direction:"row",alignItems:"center",spacing:2,children:[e.jsx(a,{variant:"h6",sx:{color:"#FFD700",fontWeight:700},children:"Available Jobs"}),e.jsx(mt,{badgeContent:c.length,color:"primary",children:e.jsx(tt,{sx:{color:"rgba(255,255,255,0.7)"}})})]}),action:e.jsx(te,{direction:"row",spacing:1,children:e.jsx(xe,{title:"Refresh jobs",children:e.jsx(ne,{onClick:()=>f(!0),disabled:H,sx:{color:"#FFD700","&:hover":{backgroundColor:E("#FFD700",.1)}},children:e.jsx(Jr,{sx:{animation:H?"spin 1s linear infinite":"none","@keyframes spin":{"0%":{transform:"rotate(0deg)"},"100%":{transform:"rotate(360deg)"}}}})})})}),children:[e.jsxs(o,{sx:{mb:3},children:[e.jsxs(te,{direction:"row",spacing:2,alignItems:"center",sx:{mb:2},children:[e.jsx(Q,{placeholder:"Search jobs, companies, locations...",value:y,onChange:N=>g(N.target.value),size:"small",sx:{flex:1,"& .MuiOutlinedInput-root":{backgroundColor:"rgba(255,255,255,0.05)",borderRadius:2,"& fieldset":{borderColor:"rgba(255,215,0,0.3)"},"&:hover fieldset":{borderColor:"rgba(255,215,0,0.5)"},"&.Mui-focused fieldset":{borderColor:"#FFD700"}},"& .MuiInputBase-input":{color:"#fff","&::placeholder":{color:"rgba(255,255,255,0.5)"}}},InputProps:{startAdornment:e.jsx(We,{position:"start",children:e.jsx(dt,{sx:{color:"rgba(255,255,255,0.5)"}})})}}),e.jsx(P,{variant:"outlined",startIcon:e.jsx(Ha,{}),onClick:N=>p(N.currentTarget),sx:{borderColor:"rgba(255,215,0,0.3)",color:"#FFD700","&:hover":{borderColor:"#FFD700",backgroundColor:E("#FFD700",.1)}},children:s?"Filter":`Filter (${j})`})]}),e.jsx(te,{direction:"row",spacing:1,sx:{overflowX:"auto",pb:1},children:z.map(N=>e.jsx(ee,{icon:N.icon,label:N.label,clickable:!0,onClick:()=>b(N.value),sx:{backgroundColor:j===N.value?E("#FFD700",.2):"rgba(255,255,255,0.05)",color:j===N.value?"#FFD700":"rgba(255,255,255,0.7)",border:`1px solid ${j===N.value?"rgba(255,215,0,0.5)":"rgba(255,255,255,0.1)"}`,"&:hover":{backgroundColor:E("#FFD700",.1),color:"#FFD700"},flexShrink:0}},N.value))})]}),e.jsxs(te,{direction:"row",alignItems:"center",justifyContent:"space-between",sx:{mb:3},children:[e.jsxs(a,{variant:"body2",sx:{color:"rgba(255,255,255,0.7)"},children:[c.length," job",c.length!==1?"s":""," ","found"]}),e.jsx(Q,{select:!0,size:"small",value:C,onChange:N=>A(N.target.value),sx:{minWidth:120,"& .MuiSelect-select":{color:"#fff",fontSize:"0.85rem"},"& .MuiOutlinedInput-notchedOutline":{borderColor:"rgba(255,215,0,0.3)"}},children:J.map(N=>e.jsx(Z,{value:N.value,children:N.label},N.value))})]}),c.length===0?e.jsxs(o,{sx:{textAlign:"center",py:6},children:[e.jsx(tt,{sx:{fontSize:64,color:"rgba(255,255,255,0.3)",mb:2}}),e.jsx(a,{variant:"h6",sx:{color:"rgba(255,255,255,0.7)",mb:1},children:"No jobs found"}),e.jsx(a,{variant:"body2",sx:{color:"rgba(255,255,255,0.5)"},children:"Try adjusting your search or filters"})]}):e.jsx(h,{container:!0,spacing:{xs:2,sm:2.5,md:3},children:e.jsx(Bt,{mode:"popLayout",children:c.map((N,q)=>e.jsx(h,{item:!0,xs:12,sm:6,lg:4,children:e.jsx(D,{job:N,index:q})},N.id))})}),c.length>0&&c.length<n.length&&e.jsx(o,{sx:{textAlign:"center",mt:4},children:e.jsx(P,{variant:"outlined",onClick:()=>f(),sx:{borderColor:"rgba(255,215,0,0.3)",color:"#FFD700","&:hover":{borderColor:"#FFD700",backgroundColor:E("#FFD700",.1)}},children:"Load More Jobs"})})]}),e.jsx(Xt,{anchorEl:w,open:!!w,onClose:()=>p(null),children:z.map(N=>e.jsxs(Z,{selected:j===N.value,onClick:()=>{b(N.value),p(null)},children:[e.jsx(Ze,{children:N.icon}),e.jsx(Ie,{children:N.label})]},N.value))}),e.jsxs(Xt,{anchorEl:k,open:!!k,onClose:()=>{U(null),R(null)},children:[e.jsxs(Z,{onClick:()=>{W&&I(W.id),U(null),R(null)},children:[e.jsx(Ze,{children:W&&u.has(W.id)?e.jsx(Kt,{}):e.jsx(or,{})}),e.jsx(Ie,{children:W&&u.has(W.id)?"Remove from Saved":"Save Job"})]}),e.jsxs(Z,{onClick:()=>{U(null),R(null)},children:[e.jsx(Ze,{children:e.jsx(ls,{})}),e.jsx(Ie,{children:"Share Job"})]})]}),e.jsx(Ee,{open:!!x,onClose:S,maxWidth:"md",fullWidth:!0,PaperProps:{sx:{background:"linear-gradient(135deg, rgba(30,30,30,0.98) 0%, rgba(40,40,40,0.98) 100%)",border:"1px solid rgba(255,215,0,0.2)"}},children:x&&e.jsxs(ge.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},transition:{duration:.2},children:[e.jsx(Me,{sx:{pb:1},children:e.jsxs(te,{direction:"row",alignItems:"center",spacing:2,children:[e.jsx(o,{sx:{width:56,height:56,borderRadius:"50%",background:E(x.color||"#FFD700",.2),display:"flex",alignItems:"center",justifyContent:"center",color:x.color||"#FFD700"},children:x.icon}),e.jsxs(o,{sx:{flex:1},children:[e.jsx(a,{variant:"h5",sx:{color:"#fff",fontWeight:700},children:x.title}),e.jsx(a,{variant:"body1",sx:{color:"rgba(255,255,255,0.7)"},children:x.company})]}),e.jsx(ne,{onClick:S,sx:{color:"rgba(255,255,255,0.7)"},children:e.jsx(vr,{})})]})}),e.jsx(ze,{children:e.jsxs(h,{container:!0,spacing:3,children:[e.jsx(h,{item:!0,xs:12,md:6,children:e.jsxs(te,{spacing:2,children:[e.jsxs(te,{direction:"row",alignItems:"center",spacing:1,children:[e.jsx(nt,{sx:{color:"rgba(255,255,255,0.5)"}}),e.jsxs(a,{sx:{color:"#fff"},children:[x.location," (",x.distance,"km away)"]})]}),e.jsxs(te,{direction:"row",alignItems:"center",spacing:1,children:[e.jsx(ct,{sx:{color:"rgba(255,255,255,0.5)"}}),e.jsx(a,{sx:{color:"#4CAF50",fontWeight:600},children:x.salary})]}),e.jsxs(te,{direction:"row",alignItems:"center",spacing:1,children:[e.jsx(Kn,{sx:{color:"rgba(255,255,255,0.5)"}}),e.jsxs(a,{sx:{color:"#fff"},children:["Duration: ",x.duration||"Not specified"]})]})]})}),e.jsx(h,{item:!0,xs:12,md:6,children:e.jsxs(te,{spacing:2,children:[e.jsxs(te,{direction:"row",alignItems:"center",spacing:1,children:[e.jsx(zs,{sx:{color:"rgba(255,255,255,0.5)"}}),e.jsxs(a,{sx:{color:"#fff"},children:[x.applicants," applicants"]})]}),e.jsxs(te,{direction:"row",alignItems:"center",spacing:1,children:[e.jsx(rt,{sx:{color:"rgba(255,255,255,0.5)"}}),e.jsxs(a,{sx:{color:"#2196F3",fontWeight:600},children:[x.matchScore,"% match"]})]}),e.jsxs(te,{direction:"row",alignItems:"center",spacing:1,children:[e.jsx(cs,{sx:{color:"rgba(255,255,255,0.5)"}}),e.jsxs(a,{sx:{color:"#fff"},children:["Posted ",x.timeAgo||"2 hours ago"]})]})]})}),e.jsxs(h,{item:!0,xs:12,children:[e.jsx(fe,{sx:{my:2,borderColor:"rgba(255,255,255,0.1)"}}),e.jsx(a,{variant:"h6",sx:{color:"#FFD700",mb:2},children:"Job Description"}),e.jsx(a,{sx:{color:"rgba(255,255,255,0.8)",lineHeight:1.6},children:x.description})]}),x.requirements&&e.jsxs(h,{item:!0,xs:12,children:[e.jsx(a,{variant:"h6",sx:{color:"#FFD700",mb:2},children:"Requirements"}),e.jsx(o,{component:"ul",sx:{color:"rgba(255,255,255,0.8)"},children:x.requirements.map((N,q)=>e.jsx(a,{component:"li",sx:{mb:.5},children:N},q))})]})]})}),e.jsxs(Le,{sx:{p:3,pt:0},children:[e.jsx(P,{onClick:()=>I(x.id),startIcon:u.has(x.id)?e.jsx(Kt,{}):e.jsx(or,{}),sx:{color:"#FFD700",borderColor:"rgba(255,215,0,0.3)","&:hover":{borderColor:"#FFD700",backgroundColor:E("#FFD700",.1)}},children:u.has(x.id)?"Saved":"Save"}),x.status!=="applied"?e.jsx(P,{variant:"contained",onClick:()=>{G(x.id),S()},disabled:x.status==="loading",sx:{background:"linear-gradient(135deg, #FFD700 0%, #FFC000 100%)",color:"#000",fontWeight:700,"&:hover":{background:"linear-gradient(135deg, #FFC000 0%, #FFB300 100%)"}},children:"Apply Now"}):e.jsx(P,{variant:"contained",disabled:!0,startIcon:e.jsx(Ve,{}),sx:{backgroundColor:"#4CAF50",color:"#fff"},children:"Applied"})]})]})}),e.jsx(Wt,{open:K.open,autoHideDuration:4e3,onClose:B,anchorOrigin:{vertical:"top",horizontal:"center"},children:e.jsx(be,{onClose:B,severity:K.severity,sx:{width:"100%"},children:K.message})})]})};class Lx{async getAvailabilityStatus(){return Promise.resolve({isAvailable:!0})}async updateAvailability(r){return console.log("Mock API: Updated availability to",r),Promise.resolve({isAvailable:r.isAvailable})}async getDashboardStats(){return Promise.resolve({activeContracts:3,pendingApplications:7,monthlyEarnings:2850,completionRate:94})}async getNotificationCounts(){return Promise.resolve({messages:5,applications:2,contracts:1})}async getPortfolioProjects(){return Promise.resolve([{id:1,title:"Modern Kitchen Remodel",description:"Complete overhaul of a kitchen with custom cabinets and granite countertops.",imageUrl:"https://images.pexels.com/photos/2724749/pexels-photo-2724749.jpeg?auto=compress&cs=tinysrgb&w=1260&h=750&dpr=1"},{id:2,title:"Luxury Bathroom Tiling",description:"New tile installation for a spa-like bathroom, featuring a walk-in shower.",imageUrl:"https://images.pexels.com/photos/3288102/pexels-photo-3288102.jpeg?auto=compress&cs=tinysrgb&w=1260&h=750&dpr=1"}])}async getSkillsAndLicenses(){return Promise.resolve({skills:[{name:"Carpentry",verified:!0},{name:"Plumbing",verified:!0},{name:"Electrical",verified:!1}],licenses:[{name:"Master Plumber",issuer:"State Board",expiry:"12/2025"},{name:"Certified Electrician",issuer:"National Electrical Board",expiry:"06/2026"}]})}async searchWorkers(){return Promise.resolve({workers:[],total:0,page:1,limit:10})}async getWorkerById(){return Promise.resolve({id:"worker-123",firstName:"Demo",lastName:"Worker",profession:"Professional Carpenter",rating:4.5,profileImage:"/path/to/default-avatar.jpg"})}async getMyWorkerProfile(){return Promise.resolve({id:"worker-123",firstName:"Demo",lastName:"Worker",profession:"Professional Carpenter",rating:4.5,profileImage:"/path/to/default-avatar.jpg"})}}const $i=new Lx,$x=()=>{const[t,r]=l.useState(!0),[s,n]=l.useState(!1),[i,c]=l.useState(!0),[d,x]=l.useState({open:!1,message:"",severity:"success"}),[m,u]=l.useState(!1),v=m?$i:Na;l.useEffect(()=>{(async()=>{try{c(!0);const b=await Na.getAvailabilityStatus();r(b.isAvailable)}catch(b){console.error("Error fetching availability status:",b),r(!0)}finally{c(!1)}})()},[]);const y=async j=>{const b=j.target.checked;n(!0);try{try{await v.updateAvailability({isAvailable:b})}catch(C){console.error("API error updating availability:",C),m||(u(!0),await $i.updateAvailability({isAvailable:b}))}r(b),x({open:!0,message:b?"You are now visible to potential hirers!":"Your availability has been set to Busy.",severity:"success"})}catch(C){console.error("Error updating availability status:",C),x({open:!0,message:"Unable to update status. Please try again.",severity:"error"})}finally{n(!1)}},g=()=>{x({...d,open:!1})};return i?e.jsx(zt,{title:"Availability Status",children:e.jsx(o,{sx:{display:"flex",justifyContent:"center",p:3},children:e.jsx(Ae,{})})}):e.jsxs(zt,{title:"Availability Status",action:e.jsxs(o,{sx:{display:"flex",alignItems:"center"},children:[s&&e.jsx(Ae,{size:24,sx:{mr:1}}),e.jsx(ft,{control:e.jsx(ss,{checked:t,onChange:y,color:"success",disabled:s}),label:t?"Available":"Busy",sx:{mr:1}})]}),children:[e.jsxs(o,{sx:{display:"flex",alignItems:"center",p:2},children:[t?e.jsx(Tc,{sx:{fontSize:40,color:"success.main",mr:2}}):e.jsx(Ec,{sx:{fontSize:40,color:"text.secondary",mr:2}}),e.jsx(a,{variant:"body1",color:"text.secondary",children:t?"You are visible to hirers and will appear in job searches.":"You are hidden from searches and will not receive new job alerts."})]}),e.jsx(Wt,{open:d.open,autoHideDuration:4e3,onClose:g,anchorOrigin:{vertical:"top",horizontal:"center"},children:e.jsx(be,{onClose:g,severity:d.severity,sx:{width:"100%"},children:d.message})})]})},Bx=[{name:"Jan",earnings:4e3},{name:"Feb",earnings:3e3},{name:"Mar",earnings:5e3},{name:"Apr",earnings:4500},{name:"May",earnings:6e3},{name:"Jun",earnings:5500}],_x=()=>e.jsx(me,{children:e.jsxs(ce,{children:[e.jsx(a,{variant:"h6",gutterBottom:!0,children:"Earnings Overview"}),e.jsx(o,{sx:{height:300},children:e.jsx(ro,{width:"100%",height:"100%",children:e.jsxs(Bl,{data:Bx,children:[e.jsx(so,{strokeDasharray:"3 3"}),e.jsx(ao,{dataKey:"name"}),e.jsx(no,{}),e.jsx(io,{}),e.jsx(_l,{type:"monotone",dataKey:"earnings",stroke:"#8884d8",activeDot:{r:8}})]})})})]})}),Bi=[{id:1,title:"Client Meeting: Johnson Residence",time:"Tomorrow, 10:00 AM"},{id:2,title:"Project Start: Downtown Office Renovation",time:"Wednesday, 9:00 AM"},{id:3,title:"Final Inspection: Miller Residence",time:"Friday, 2:00 PM"}],Nx=()=>e.jsx(me,{children:e.jsxs(ce,{children:[e.jsx(a,{variant:"h6",gutterBottom:!0,children:"Upcoming Appointments"}),e.jsx(Ke,{children:Bi.map((t,r)=>e.jsxs(Rt.Fragment,{children:[e.jsxs(Be,{children:[e.jsx(Vs,{children:e.jsx(we,{children:e.jsx(Mc,{})})}),e.jsx(Ie,{primary:t.title,secondary:t.time})]}),r<Bi.length-1&&e.jsx(fe,{variant:"inset",component:"li"})]},t.id))})]})}),Ox=({completion:t=75,profileData:r={},onComplete:s=()=>{}})=>{var v,y,g,j;ve();const[n,i]=l.useState(!1),c=[{id:"basic-info",title:"Basic Information",description:"Name, email, phone, location",completed:!!(r.firstName&&r.lastName&&r.email&&r.phone),icon:e.jsx(Lt,{}),weight:15},{id:"profile-photo",title:"Profile Photo",description:"Professional profile picture",completed:!!r.profileImage,icon:e.jsx(yi,{}),weight:10},{id:"skills",title:"Skills & Expertise",description:"Add at least 3 skills",completed:((v=r.skills)==null?void 0:v.length)>=3,icon:e.jsx(Ls,{}),weight:25},{id:"experience",title:"Work Experience",description:"Add work history",completed:((y=r.experience)==null?void 0:y.length)>0,icon:e.jsx(tt,{}),weight:20},{id:"portfolio",title:"Portfolio & Projects",description:"Showcase your work",completed:((g=r.portfolio)==null?void 0:g.length)>0,icon:e.jsx(yi,{}),weight:15},{id:"documents",title:"Certifications",description:"Upload licenses and certificates",completed:((j=r.certifications)==null?void 0:j.length)>0,icon:e.jsx($s,{}),weight:10},{id:"verification",title:"Identity Verification",description:"Verify your identity",completed:r.isVerified,icon:e.jsx(rt,{}),weight:5}],d=c.filter(b=>b.completed),x=c.reduce((b,C)=>b+(C.completed?C.weight:0),0),u=(b=>b>=90?"#4CAF50":b>=70?"#FFD700":b>=50?"#FF9800":"#F44336")(x);return e.jsx(ge.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},children:e.jsx(me,{sx:{background:"linear-gradient(135deg, rgba(30,30,30,0.95) 0%, rgba(40,40,40,0.98) 100%)",border:"1px solid rgba(255,215,0,0.2)",borderRadius:3,overflow:"hidden",position:"relative","&::before":{content:'""',position:"absolute",top:0,left:0,right:0,height:"3px",background:`linear-gradient(90deg, ${u} ${x}%, rgba(255,255,255,0.1) ${x}%)`}},children:e.jsxs(ce,{sx:{p:{xs:2,sm:2.5}},children:[e.jsxs(te,{direction:"row",alignItems:"center",justifyContent:"space-between",sx:{mb:2},children:[e.jsx(a,{variant:"h6",sx:{color:"#FFD700",fontWeight:700,fontSize:{xs:"1rem",sm:"1.1rem"}},children:"Profile Strength"}),e.jsx(xe,{title:n?"Show less":"Show details",children:e.jsx(ne,{onClick:()=>i(!n),size:"small",sx:{color:"rgba(255,255,255,0.7)","&:hover":{color:"#FFD700",background:E("#FFD700",.1)}},children:n?e.jsx(qs,{}):e.jsx(nr,{})})})]}),e.jsxs(o,{sx:{mb:2},children:[e.jsxs(te,{direction:"row",alignItems:"center",justifyContent:"space-between",sx:{mb:1},children:[e.jsxs(a,{variant:"h4",sx:{color:u,fontWeight:800,fontSize:{xs:"1.5rem",sm:"1.75rem"}},children:[Math.round(x),"%"]}),e.jsx(ee,{label:`${d.length}/${c.length} Complete`,size:"small",sx:{backgroundColor:E(u,.2),color:u,fontWeight:600,fontSize:"0.75rem"}})]}),e.jsx(o,{sx:{position:"relative",mb:1},children:e.jsx(lr,{variant:"determinate",value:x,sx:{height:8,borderRadius:4,backgroundColor:"rgba(255,255,255,0.1)","& .MuiLinearProgress-bar":{borderRadius:4,background:`linear-gradient(90deg, ${u} 0%, ${E(u,.8)} 100%)`}}})}),e.jsx(a,{variant:"body2",sx:{color:"rgba(255,255,255,0.7)",fontSize:{xs:"0.8rem",sm:"0.85rem"},lineHeight:1.4},children:x>=90?"Excellent! Your profile is complete and attractive to clients.":x>=70?"Good progress! Complete a few more sections to boost visibility.":x>=50?"Keep going! More details will help you get better job matches.":"Let's build your profile to attract quality job opportunities."})]}),e.jsx(Bt,{children:n&&e.jsx(ge.div,{initial:{height:0,opacity:0},animate:{height:"auto",opacity:1},exit:{height:0,opacity:0},transition:{duration:.3},style:{overflow:"hidden"},children:e.jsx(Ke,{dense:!0,sx:{py:0},children:c.map((b,C)=>e.jsx(ge.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{duration:.3,delay:C*.05},children:e.jsxs(Be,{sx:{px:0,py:.5,borderRadius:1,"&:hover":{backgroundColor:"rgba(255,255,255,0.03)"}},children:[e.jsx(Ze,{sx:{minWidth:36},children:b.completed?e.jsx(Ve,{sx:{color:"#4CAF50",fontSize:20}}):e.jsx(zc,{sx:{color:"rgba(255,255,255,0.3)",fontSize:20}})}),e.jsx(Ie,{primary:e.jsx(a,{variant:"body2",sx:{color:b.completed?"#fff":"rgba(255,255,255,0.7)",fontWeight:500,fontSize:"0.85rem"},children:b.title}),secondary:e.jsx(a,{variant:"caption",sx:{color:"rgba(255,255,255,0.5)",fontSize:"0.75rem"},children:b.description})}),e.jsxs(a,{variant:"caption",sx:{color:b.completed?"#4CAF50":"rgba(255,255,255,0.4)",fontWeight:600,fontSize:"0.7rem"},children:[b.weight,"%"]})]})},b.id))})})}),e.jsx(P,{component:Fe,to:"/worker/profile/edit",fullWidth:!0,variant:"contained",onClick:s,sx:{mt:2,py:1.5,borderRadius:2,background:"linear-gradient(135deg, #FFD700 0%, #FFC000 100%)",color:"#000",fontWeight:700,fontSize:{xs:"0.9rem",sm:"1rem"},textTransform:"none",boxShadow:"0 4px 15px rgba(255,215,0,0.3)","&:hover":{background:"linear-gradient(135deg, #FFC000 0%, #FFB300 100%)",boxShadow:"0 6px 20px rgba(255,215,0,0.4)",transform:"translateY(-1px)"},transition:"all 0.3s ease"},children:x>=90?"View Profile":"Complete Profile"}),x<70&&e.jsxs(o,{sx:{mt:2,p:1.5,borderRadius:2,background:"rgba(255,215,0,0.1)",border:"1px solid rgba(255,215,0,0.2)"},children:[e.jsx(a,{variant:"caption",sx:{color:"#FFD700",fontWeight:600,fontSize:"0.75rem",display:"block",mb:.5},children:"💡 Quick Tip:"}),e.jsx(a,{variant:"caption",sx:{color:"rgba(255,255,255,0.8)",fontSize:"0.7rem",lineHeight:1.3},children:"Profiles with 80%+ completion get 3x more job invitations!"})]})]})})})},Jx=()=>{const t=ot(),r=Oe(),{user:s}=ut(),{data:n,loading:i,error:c}=je(p=>p.dashboard),d=ve(),x=Te(d.breakpoints.down("sm")),m=Te(d.breakpoints.down("md"));Te(d.breakpoints.up("lg")),l.useState(null);const[u,v]=l.useState(!1),[y,g]=l.useState(!1);l.useEffect(()=>{t(is())},[t]);const j=async()=>{v(!0);try{await t(is()).unwrap()}catch(p){console.error("Failed to refresh dashboard:",p)}finally{v(!1)}},b=l.useMemo(()=>{const p=(n==null?void 0:n.metrics)||{};return[{id:"active-jobs",title:"Active Jobs",value:p.activeJobs||0,subtitle:"Currently working on",color:"#FFD700",gradient:"linear-gradient(135deg, #FFD700 0%, #FFC000 100%)",icon:e.jsx(dr,{sx:{fontSize:{xs:28,sm:32}}}),trend:p.activeJobsChange||0,trendDirection:p.activeJobsChange>0?"up":p.activeJobsChange<0?"down":"stable",onClick:()=>r("/worker/jobs"),priority:1},{id:"pending-applications",title:"Applications",value:p.pendingApplications||0,subtitle:"Awaiting response",color:"#2196F3",gradient:"linear-gradient(135deg, #2196F3 0%, #1976D2 100%)",icon:e.jsx(Bs,{sx:{fontSize:{xs:28,sm:32}}}),trend:p.applicationsTrend||0,trendDirection:p.applicationsTrend>0?"up":p.applicationsTrend<0?"down":"stable",onClick:()=>r("/worker/applications"),priority:2},{id:"monthly-earnings",title:"This Month",value:`GH₵${(p.earningsThisMonth||0).toLocaleString()}`,subtitle:"Total earnings",color:"#4CAF50",gradient:"linear-gradient(135deg, #4CAF50 0%, #388E3C 100%)",icon:e.jsx(Xn,{sx:{fontSize:{xs:28,sm:32}}}),trend:p.earningsChange||0,trendDirection:p.earningsChange>0?"up":p.earningsChange<0?"down":"stable",onClick:()=>r("/worker/earnings"),priority:1},{id:"completion-rate",title:"Success Rate",value:`${p.completionRate||0}%`,subtitle:"Jobs completed",color:"#9C27B0",gradient:"linear-gradient(135deg, #9C27B0 0%, #7B1FA2 100%)",icon:e.jsx(Ve,{sx:{fontSize:{xs:28,sm:32}}}),trend:p.completionRateChange||0,trendDirection:p.completionRateChange>0?"up":p.completionRateChange<0?"down":"stable",onClick:()=>r("/worker/profile"),priority:3},{id:"rating",title:"Rating",value:(p.averageRating||0).toFixed(1),subtitle:"Average from clients",color:"#FF9800",gradient:"linear-gradient(135deg, #FF9800 0%, #F57C00 100%)",icon:e.jsx(rt,{sx:{fontSize:{xs:28,sm:32}}}),trend:p.ratingChange||0,trendDirection:p.ratingChange>0?"up":p.ratingChange<0?"down":"stable",onClick:()=>r("/worker/reviews"),priority:3},{id:"profile-views",title:"Profile Views",value:p.profileViews||0,subtitle:"This week",color:"#00BCD4",gradient:"linear-gradient(135deg, #00BCD4 0%, #0097A7 100%)",icon:e.jsx(Et,{sx:{fontSize:{xs:28,sm:32}}}),trend:p.profileViewsChange||0,trendDirection:p.profileViewsChange>0?"up":p.profileViewsChange<0?"down":"stable",onClick:()=>r("/worker/profile"),priority:4}]},[n,r]),C=l.useMemo(()=>{var p,k,U;return[{title:"Find Jobs",description:"Browse available opportunities",icon:e.jsx(dt,{sx:{fontSize:{xs:24,sm:28}}}),path:"/worker/find-work",color:"#2196F3",gradient:"linear-gradient(135deg, #2196F3 0%, #1976D2 100%)",priority:1},{title:"Applications",description:"Manage job applications",icon:e.jsx(Bs,{sx:{fontSize:{xs:24,sm:28}}}),path:"/worker/applications",color:"#4CAF50",gradient:"linear-gradient(135deg, #4CAF50 0%, #388E3C 100%)",badgeContent:((p=n==null?void 0:n.metrics)==null?void 0:p.newApplications)||0,priority:1},{title:"Messages",description:"Chat with clients",icon:e.jsx(Ot,{sx:{fontSize:{xs:24,sm:28}}}),path:"/messages",color:"#FF9800",gradient:"linear-gradient(135deg, #FF9800 0%, #F57C00 100%)",badgeContent:((k=n==null?void 0:n.metrics)==null?void 0:k.unreadMessages)||0,priority:1},{title:"Schedule",description:"Manage appointments",icon:e.jsx(Tt,{sx:{fontSize:{xs:24,sm:28}}}),path:"/worker/schedule",color:"#9C27B0",gradient:"linear-gradient(135deg, #9C27B0 0%, #7B1FA2 100%)",priority:2},{title:"Notifications",description:"View all updates",icon:e.jsx(yr,{sx:{fontSize:{xs:24,sm:28}}}),path:"/notifications",color:"#F44336",gradient:"linear-gradient(135deg, #F44336 0%, #D32F2F 100%)",badgeContent:((U=n==null?void 0:n.metrics)==null?void 0:U.unreadNotifications)||0,priority:3}]},[n]),A=l.useMemo(()=>x&&!y?b.filter(p=>p.priority<=2).slice(0,2):b,[b,x,y]),w=({stat:p,index:k})=>e.jsx(ge.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:k*.1},style:{height:"100%"},children:e.jsx(me,{sx:{height:"100%",background:`linear-gradient(135deg, ${E(p.color,.1)} 0%, ${E(p.color,.05)} 100%)`,border:`1px solid ${E(p.color,.2)}`,borderRadius:3,cursor:"pointer",transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)",position:"relative",overflow:"hidden","&:hover":{transform:"translateY(-4px)",boxShadow:`0 8px 25px ${E(p.color,.3)}`,border:`1px solid ${E(p.color,.4)}`},"&::before":{content:'""',position:"absolute",top:0,left:0,right:0,height:"3px",background:p.gradient}},onClick:p.onClick,children:e.jsx(ce,{sx:{p:{xs:2,sm:2.5}},children:e.jsxs(te,{direction:"row",alignItems:"flex-start",justifyContent:"space-between",spacing:2,children:[e.jsxs(o,{sx:{flex:1,minWidth:0},children:[e.jsx(a,{variant:"body2",sx:{color:"rgba(255,255,255,0.7)",fontWeight:600,fontSize:{xs:"0.75rem",sm:"0.8rem"},textTransform:"uppercase",letterSpacing:.5,mb:.5},children:p.title}),e.jsx(a,{variant:"h4",sx:{color:"#fff",fontWeight:800,fontSize:{xs:"1.5rem",sm:"1.75rem",md:"2rem"},lineHeight:1.2,mb:.5},children:p.value}),e.jsx(a,{variant:"caption",sx:{color:"rgba(255,255,255,0.6)",fontSize:{xs:"0.7rem",sm:"0.75rem"}},children:p.subtitle}),p.trend!==0&&e.jsxs(te,{direction:"row",alignItems:"center",spacing:.5,sx:{mt:1},children:[p.trendDirection==="up"&&e.jsx(cr,{sx:{fontSize:16,color:"#4CAF50"}}),p.trendDirection==="down"&&e.jsx(Lc,{sx:{fontSize:16,color:"#F44336"}}),p.trendDirection==="stable"&&e.jsx($c,{sx:{fontSize:16,color:"rgba(255,255,255,0.5)"}}),e.jsxs(a,{variant:"caption",sx:{color:p.trendDirection==="up"?"#4CAF50":p.trendDirection==="down"?"#F44336":"rgba(255,255,255,0.5)",fontWeight:600,fontSize:"0.7rem"},children:[p.trend>0?"+":"",p.trend,"%"]})]})]}),e.jsx(o,{sx:{width:{xs:48,sm:56},height:{xs:48,sm:56},borderRadius:"50%",background:E(p.color,.2),display:"flex",alignItems:"center",justifyContent:"center",color:p.color,flexShrink:0},children:p.icon})]})})})});return i&&!n?e.jsx(o,{sx:{p:{xs:2,md:3}},children:e.jsx(h,{container:!0,spacing:3,children:[...Array(4)].map((p,k)=>e.jsx(h,{item:!0,xs:12,sm:6,md:3,children:e.jsx(ie,{variant:"rectangular",height:150,sx:{borderRadius:3}})},k))})}):c?e.jsx(o,{sx:{p:{xs:2,md:3}},children:e.jsxs(be,{severity:"error",action:e.jsx(P,{color:"inherit",size:"small",onClick:j,children:"Retry"}),children:["Failed to load dashboard data: ",c]})}):e.jsxs(o,{sx:{minHeight:"100vh",background:"linear-gradient(135deg, #1a1a1a 0%, #2d2d2d 100%)",p:{xs:1,sm:2,md:3}},children:[e.jsx(o,{sx:{mb:{xs:2,md:3}},children:e.jsxs(te,{direction:"row",alignItems:"center",justifyContent:"space-between",flexWrap:"wrap",spacing:2,children:[e.jsxs(o,{children:[e.jsxs(a,{variant:"h4",sx:{color:"#FFD700",fontWeight:800,fontSize:{xs:"1.5rem",sm:"1.75rem",md:"2rem"},mb:.5},children:["Welcome back, ",(s==null?void 0:s.firstName)||"Worker","!"]}),e.jsx(a,{variant:"body1",sx:{color:"rgba(255,255,255,0.7)",fontSize:{xs:"0.9rem",sm:"1rem"}},children:"Here's what's happening with your work today"})]}),e.jsx(ne,{onClick:j,disabled:u,sx:{background:E("#FFD700",.1),border:"1px solid rgba(255,215,0,0.3)","&:hover":{background:E("#FFD700",.2)}},children:e.jsx(Jr,{sx:{color:"#FFD700",animation:u?"spin 1s linear infinite":"none","@keyframes spin":{"0%":{transform:"rotate(0deg)"},"100%":{transform:"rotate(360deg)"}}}})})]})}),x&&e.jsx(o,{sx:{mb:3},children:e.jsx(Nn,{actions:C.filter(p=>p.priority<=1)})}),e.jsx(o,{sx:{mb:{xs:3,md:4}},children:e.jsxs(h,{container:!0,spacing:{xs:2,sm:2.5,md:3},children:[A.map((p,k)=>e.jsx(h,{item:!0,xs:12,sm:6,md:4,lg:b.length>4?2.4:3,children:e.jsx(w,{stat:p,index:k})},p.id)),x&&b.length>2&&e.jsx(h,{item:!0,xs:12,children:e.jsxs(P,{fullWidth:!0,variant:"outlined",onClick:()=>g(!y),sx:{borderColor:"rgba(255,215,0,0.3)",color:"#FFD700","&:hover":{borderColor:"#FFD700",background:E("#FFD700",.1)}},children:[y?"Show Less":`Show ${b.length-2} More`,y?e.jsx(qs,{}):e.jsx(nr,{})]})})]})}),e.jsxs(h,{container:!0,spacing:{xs:2,md:3},children:[e.jsx(h,{item:!0,xs:12,lg:8,children:e.jsxs(te,{spacing:{xs:2,md:3},children:[e.jsx(zx,{}),e.jsx(_x,{}),!m&&e.jsx(On,{})]})}),e.jsx(h,{item:!0,xs:12,lg:4,children:e.jsxs(te,{spacing:{xs:2,md:3},children:[e.jsx($x,{}),e.jsx(Ox,{}),e.jsx(Nx,{}),!x&&e.jsx(Nn,{actions:C}),e.jsx(sl,{}),m&&e.jsx(On,{})]})})]})]})},Ux="/assets/cartoon-worker-B9XBL0yr.jpeg",al=()=>{const t=ve(),r=Te(t.breakpoints.down("sm")),i=je(d=>d.auth.user)||{firstName:"Demo",role:"worker",profession:"Professional Carpenter"},c=()=>i!=null&&i.profession?i.profession:(i==null?void 0:i.role)==="worker"?"Professional Carpenter":"";return e.jsxs(e.Fragment,{children:[e.jsxs(o,{sx:{display:"flex",flexDirection:r?"column":"row",alignItems:"center",textAlign:r?"center":"left",mb:4,pb:2,backgroundColor:"rgba(255,255,255,0.05)",color:t.palette.common.white,borderBottom:"1px solid rgba(255, 215, 0, 0.2)",borderRadius:2,p:2},children:[e.jsx(o,{component:"img",src:Ux,alt:"Worker Avatar",sx:{width:80,height:80,borderRadius:"50%",mb:r?2:0,mr:r?0:2}}),e.jsxs(o,{children:[e.jsxs(a,{variant:r?"h5":"h3",fontWeight:800,color:t.palette.secondary.main,sx:{mb:1,letterSpacing:.5},children:["Welcome back,"," ",(i==null?void 0:i.firstName)||(i==null?void 0:i.name)||"Demo","!"]}),e.jsx(a,{variant:r?"body2":"subtitle1",color:t.palette.secondary.main,fontWeight:500,sx:{mb:1,opacity:.8},children:c()}),e.jsx(a,{variant:r?"body2":"h6",color:t.palette.primary.contrastText,sx:{opacity:.9},children:"Ready to find your next job? Let's get to work."})]})]}),e.jsx(Jx,{user:i})]})},ca={summary:{totalJobs:45,activeJobs:8,completedJobs:32,draftJobs:5,totalSpent:125e3,averageJobValue:3289,totalApplications:284,hireSuccessRate:84},monthlyData:[{month:"Jan",jobs:6,spending:18500,applications:45},{month:"Feb",jobs:4,spending:12e3,applications:32},{month:"Mar",jobs:7,spending:21500,applications:58},{month:"Apr",jobs:5,spending:15e3,applications:38},{month:"May",jobs:8,spending:23500,applications:67},{month:"Jun",jobs:6,spending:18200,applications:44}],topCategories:[{category:"Carpentry",jobs:12,spending:35e3,avgRate:2917},{category:"Plumbing",jobs:8,spending:28e3,avgRate:3500},{category:"Electrical",jobs:6,spending:22e3,avgRate:3667},{category:"Painting",jobs:5,spending:15e3,avgRate:3e3},{category:"Landscaping",jobs:4,spending:12e3,avgRate:3e3}]},Hx=()=>{const t=ve(),r=Te(t.breakpoints.down("md")),s=ot(),[n,i]=l.useState(0),[c,d]=l.useState(null),[x,m]=l.useState(null),[u,v]=l.useState(!1),[y,g]=l.useState(null),[j,b]=l.useState(0),[C,A]=l.useState(10),w=je(Or("active")),p=je(Or("completed")),k=je(Or("draft")),U=je(gs("jobs")),W=je(Ya("jobs"));l.useEffect(()=>{s(_t("active")),s(_t("completed")),s(_t("draft"))},[s]);const R=()=>{switch(n){case 0:return w||[];case 1:return p||[];case 2:return k||[];default:return[]}},K=S=>{switch(S){case 0:return"active";case 1:return"completed";case 2:return"draft";default:return"active"}},_=(S,B)=>{i(B),b(0)},O=(S,B)=>{d(S.currentTarget),m(B)},T=()=>{d(null),m(null)},H=S=>{g(S),v(!0),T()},F=()=>{v(!1),g(null),m(null)},V=async()=>{if(x)try{await s(ci(x.id)).unwrap(),F()}catch(S){console.error("Error deleting job:",S)}},re=async()=>{if(x)try{await s(li({jobId:x.id,status:"active"})).unwrap(),F()}catch(S){console.error("Error publishing job:",S)}},z=S=>{switch(S){case"active":return"success";case"completed":return"primary";case"draft":return"warning";case"cancelled":return"error";default:return"default"}},J=S=>new Intl.NumberFormat("en-GH",{style:"currency",currency:"GHS",minimumFractionDigits:0}).format(S),f=S=>new Date(S).toLocaleDateString("en-GH",{year:"numeric",month:"short",day:"numeric"}),M=()=>e.jsxs(h,{container:!0,spacing:3,sx:{mb:3},children:[e.jsx(h,{item:!0,xs:12,sm:6,md:3,children:e.jsx(me,{sx:{background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",color:"white",height:"100%"},children:e.jsx(ce,{children:e.jsxs(o,{display:"flex",alignItems:"center",justifyContent:"space-between",children:[e.jsxs(o,{children:[e.jsx(a,{variant:"h4",fontWeight:"bold",children:ca.summary.totalJobs}),e.jsx(a,{variant:"body2",sx:{opacity:.9},children:"Total Jobs Posted"})]}),e.jsx(tt,{sx:{fontSize:40,opacity:.8}})]})})})}),e.jsx(h,{item:!0,xs:12,sm:6,md:3,children:e.jsx(me,{sx:{background:"linear-gradient(135deg, #f093fb 0%, #f5576c 100%)",color:"white",height:"100%"},children:e.jsx(ce,{children:e.jsxs(o,{display:"flex",alignItems:"center",justifyContent:"space-between",children:[e.jsxs(o,{children:[e.jsx(a,{variant:"h4",fontWeight:"bold",children:J(ca.summary.totalSpent)}),e.jsx(a,{variant:"body2",sx:{opacity:.9},children:"Total Amount Spent"})]}),e.jsx(ct,{sx:{fontSize:40,opacity:.8}})]})})})}),e.jsx(h,{item:!0,xs:12,sm:6,md:3,children:e.jsx(me,{sx:{background:"linear-gradient(135deg, #4facfe 0%, #00f2fe 100%)",color:"white",height:"100%"},children:e.jsx(ce,{children:e.jsxs(o,{display:"flex",alignItems:"center",justifyContent:"space-between",children:[e.jsxs(o,{children:[e.jsx(a,{variant:"h4",fontWeight:"bold",children:ca.summary.totalApplications}),e.jsx(a,{variant:"body2",sx:{opacity:.9},children:"Total Applications"})]}),e.jsx(ja,{sx:{fontSize:40,opacity:.8}})]})})})}),e.jsx(h,{item:!0,xs:12,sm:6,md:3,children:e.jsx(me,{sx:{background:"linear-gradient(135deg, #43e97b 0%, #38f9d7 100%)",color:"white",height:"100%"},children:e.jsx(ce,{children:e.jsxs(o,{display:"flex",alignItems:"center",justifyContent:"space-between",children:[e.jsxs(o,{children:[e.jsxs(a,{variant:"h4",fontWeight:"bold",children:[ca.summary.hireSuccessRate,"%"]}),e.jsx(a,{variant:"body2",sx:{opacity:.9},children:"Success Rate"})]}),e.jsx(cr,{sx:{fontSize:40,opacity:.8}})]})})})})]}),G=()=>e.jsxs(o,{children:[e.jsx(h,{container:!0,spacing:3,sx:{mb:3},children:[...Array(4)].map((S,B)=>e.jsx(h,{item:!0,xs:12,sm:6,md:3,children:e.jsx(ie,{variant:"rounded",height:120,animation:"wave"})},B))}),e.jsx(me,{children:e.jsxs(ce,{children:[e.jsx(ie,{variant:"text",height:40,width:"40%",sx:{mb:2}}),[...Array(5)].map((S,B)=>e.jsx(ie,{variant:"text",height:60,sx:{mb:1}},B))]})})]});if(U)return e.jsx(G,{});if(W)return e.jsx(be,{severity:"error",sx:{mb:3},children:W});const I=R(),L=I.slice(j*C,j*C+C);return e.jsxs(o,{children:[e.jsx(M,{}),e.jsx(me,{children:e.jsxs(ce,{children:[e.jsx(a,{variant:"h5",gutterBottom:!0,fontWeight:"bold",children:"Job Management"}),e.jsxs($t,{value:n,onChange:_,sx:{mb:3},variant:r?"scrollable":"standard",scrollButtons:"auto",children:[e.jsx(Ce,{label:`Active (${(w==null?void 0:w.length)||0})`,sx:{fontWeight:"bold"}}),e.jsx(Ce,{label:`Completed (${(p==null?void 0:p.length)||0})`,sx:{fontWeight:"bold"}}),e.jsx(Ce,{label:`Draft (${(k==null?void 0:k.length)||0})`,sx:{fontWeight:"bold"}})]}),I.length===0?e.jsxs(o,{textAlign:"center",py:4,children:[e.jsx(tt,{sx:{fontSize:64,color:"text.secondary",mb:2}}),e.jsxs(a,{variant:"h6",color:"text.secondary",children:["No ",K(n)," jobs found"]}),e.jsx(a,{variant:"body2",color:"text.secondary",sx:{mb:3},children:n===2?"Start by creating a new job posting":`You don't have any ${K(n)} jobs yet`}),n===2&&e.jsx(P,{variant:"contained",color:"primary",children:"Post New Job"})]}):e.jsxs(e.Fragment,{children:[e.jsx(Hr,{children:e.jsxs(Gr,{children:[e.jsx(Vr,{children:e.jsxs(It,{children:[e.jsx(ae,{children:e.jsx("strong",{children:"Job Title"})}),e.jsx(ae,{children:e.jsx("strong",{children:"Category"})}),e.jsx(ae,{children:e.jsx("strong",{children:"Budget"})}),e.jsx(ae,{children:e.jsx("strong",{children:"Applications"})}),e.jsx(ae,{children:e.jsx("strong",{children:"Status"})}),e.jsx(ae,{children:e.jsx("strong",{children:"Created"})}),e.jsx(ae,{align:"center",children:e.jsx("strong",{children:"Actions"})})]})}),e.jsx(qr,{children:L.map(S=>{var B,D;return e.jsxs(It,{hover:!0,children:[e.jsxs(ae,{children:[e.jsx(a,{variant:"subtitle2",fontWeight:"bold",children:S.title}),e.jsxs(a,{variant:"body2",color:"text.secondary",noWrap:!0,children:[(B=S.description)==null?void 0:B.substring(0,60),"..."]})]}),e.jsx(ae,{children:e.jsx(ee,{label:S.category,size:"small",variant:"outlined",color:"primary"})}),e.jsxs(ae,{children:[e.jsx(a,{variant:"subtitle2",fontWeight:"bold",children:J(S.budget)}),e.jsx(a,{variant:"body2",color:"text.secondary",children:S.type==="hourly"?"Hourly":"Fixed Price"})]}),e.jsx(ae,{children:e.jsxs(o,{display:"flex",alignItems:"center",gap:1,children:[e.jsx(we,{sx:{width:24,height:24,fontSize:12},children:S.applicationsCount||0}),e.jsx(a,{variant:"body2",children:"Applications"})]})}),e.jsx(ae,{children:e.jsx(ee,{label:(D=S.status)==null?void 0:D.toUpperCase(),size:"small",color:z(S.status),variant:"filled"})}),e.jsx(ae,{children:e.jsx(a,{variant:"body2",children:f(S.createdAt)})}),e.jsx(ae,{align:"center",children:e.jsx(ne,{size:"small",onClick:N=>O(N,S),children:e.jsx(Ur,{})})})]},S.id)})})]})}),e.jsx(go,{component:"div",count:I.length,page:j,onPageChange:(S,B)=>b(B),rowsPerPage:C,onRowsPerPageChange:S=>{A(parseInt(S.target.value,10)),b(0)},rowsPerPageOptions:[5,10,25]})]})]})}),e.jsxs(Xt,{anchorEl:c,open:!!c,onClose:T,children:[e.jsxs(Z,{onClick:()=>H("view"),children:[e.jsx(Et,{sx:{mr:1}}),"View Details"]}),e.jsxs(Z,{onClick:()=>H("edit"),children:[e.jsx(ur,{sx:{mr:1}}),"Edit Job"]}),(x==null?void 0:x.status)==="draft"&&e.jsxs(Z,{onClick:()=>H("publish"),children:[e.jsx(Qn,{sx:{mr:1}}),"Publish Job"]}),e.jsxs(Z,{onClick:()=>H("delete"),sx:{color:"error.main"},children:[e.jsx(Ct,{sx:{mr:1}}),"Delete Job"]})]}),e.jsxs(Ee,{open:u,onClose:F,children:[e.jsxs(Me,{children:[y==="delete"&&"Delete Job",y==="publish"&&"Publish Job"]}),e.jsx(ze,{children:e.jsxs(a,{children:[y==="delete"&&`Are you sure you want to delete "${x==null?void 0:x.title}"? This action cannot be undone.`,y==="publish"&&`Are you sure you want to publish "${x==null?void 0:x.title}"? It will become visible to workers.`]})}),e.jsxs(Le,{children:[e.jsx(P,{onClick:F,children:"Cancel"}),e.jsx(P,{onClick:y==="delete"?V:re,color:y==="delete"?"error":"primary",variant:"contained",children:y==="delete"?"Delete":"Publish"})]})]})]})},kr={summary:{totalPaid:87500,pendingPayments:23500,escrowBalance:45e3,thisMonthPaid:23500,averagePaymentTime:"2.3 days",paymentMethods:[{method:"Mobile Money",percentage:65},{method:"Bank Transfer",percentage:30},{method:"Card Payment",percentage:5}]},pendingPayments:[{id:"payment-1",jobId:"job-h1",jobTitle:"Kitchen Renovation - Custom Cabinets",worker:{id:"worker-1",name:"Tony Gate",avatar:"/api/placeholder/40/40",rating:4.8},milestone:"Cabinet Construction",amount:1650,dueDate:new Date(Date.now()+1e3*60*60*24*2),status:"ready_for_release",completedDate:new Date(Date.now()-1e3*60*60*24),escrowId:"escrow-001"},{id:"payment-2",jobId:"job-h2",jobTitle:"Office Interior Design & Setup",worker:{id:"worker-2",name:"Sarah Williams",avatar:"/api/placeholder/40/40",rating:4.9},milestone:"Furniture Selection & Ordering",amount:5250,dueDate:new Date(Date.now()+1e3*60*60*24*5),status:"pending_approval",submittedDate:new Date(Date.now()-1e3*60*60*12),escrowId:"escrow-002"}],paymentHistory:[{id:"payment-h1",jobId:"job-h1",jobTitle:"Kitchen Renovation - Custom Cabinets",worker:{id:"worker-1",name:"Tony Gate",avatar:"/api/placeholder/40/40"},milestone:"Material Purchase & Preparation",amount:1100,paidDate:new Date(Date.now()-1e3*60*60*24*6),status:"completed",paymentMethod:"Mobile Money",transactionId:"TXN-001234"},{id:"payment-h2",jobId:"job-h1",jobTitle:"Kitchen Renovation - Custom Cabinets",worker:{id:"worker-1",name:"Tony Gate",avatar:"/api/placeholder/40/40"},milestone:"Initial Measurements & Design",amount:1100,paidDate:new Date(Date.now()-1e3*60*60*24*10),status:"completed",paymentMethod:"Bank Transfer",transactionId:"TXN-001233"},{id:"payment-h3",jobId:"job-h2",jobTitle:"Office Interior Design & Setup",worker:{id:"worker-2",name:"Sarah Williams",avatar:"/api/placeholder/40/40"},milestone:"Space Planning & Design",amount:4500,paidDate:new Date(Date.now()-1e3*60*60*24*2),status:"completed",paymentMethod:"Mobile Money",transactionId:"TXN-001235"}]},Gx=()=>{const t=ve();Te(t.breakpoints.down("md")),ot();const[r,s]=l.useState(null),[n,i]=l.useState(!1),[c,d]=l.useState(null),[x,m]=l.useState("mobile_money"),[u,v]=l.useState(""),[y,g]=l.useState(!1);je(Or("active"));const j=je(gs("jobs")),b=R=>new Intl.NumberFormat("en-GH",{style:"currency",currency:"GHS",minimumFractionDigits:0}).format(R),C=R=>new Date(R).toLocaleDateString("en-GH",{month:"short",day:"numeric",year:"numeric"}),A=R=>{switch(R){case"ready_for_release":return"success";case"pending_approval":return"warning";case"completed":return"primary";case"overdue":return"error";default:return"default"}},w=R=>{switch(R){case"ready_for_release":return"Ready to Release";case"pending_approval":return"Pending Approval";case"completed":return"Completed";case"overdue":return"Overdue";default:return R}},p=(R,K)=>{d(R),s(K),i(!0)},k=()=>{i(!1),d(null),s(null),m("mobile_money"),v("")},U=async()=>{g(!0);try{console.log(`Releasing payment of ${r.amount} via ${x}`),await new Promise(R=>setTimeout(R,2e3)),k()}catch(R){console.error("Error releasing payment:",R)}finally{g(!1)}},W=()=>e.jsxs(h,{container:!0,spacing:3,sx:{mb:4},children:[e.jsx(h,{item:!0,xs:12,sm:6,md:3,children:e.jsx(me,{sx:{background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",color:"white",height:"100%"},children:e.jsx(ce,{children:e.jsxs(o,{display:"flex",alignItems:"center",justifyContent:"space-between",children:[e.jsxs(o,{children:[e.jsx(a,{variant:"h5",fontWeight:"bold",children:b(kr.summary.totalPaid)}),e.jsx(a,{variant:"body2",sx:{opacity:.9},children:"Total Paid Out"})]}),e.jsx(ct,{sx:{fontSize:40,opacity:.8}})]})})})}),e.jsx(h,{item:!0,xs:12,sm:6,md:3,children:e.jsx(me,{sx:{background:"linear-gradient(135deg, #f093fb 0%, #f5576c 100%)",color:"white",height:"100%"},children:e.jsx(ce,{children:e.jsxs(o,{display:"flex",alignItems:"center",justifyContent:"space-between",children:[e.jsxs(o,{children:[e.jsx(a,{variant:"h5",fontWeight:"bold",children:b(kr.summary.pendingPayments)}),e.jsx(a,{variant:"body2",sx:{opacity:.9},children:"Pending Payments"})]}),e.jsx(Tt,{sx:{fontSize:40,opacity:.8}})]})})})}),e.jsx(h,{item:!0,xs:12,sm:6,md:3,children:e.jsx(me,{sx:{background:"linear-gradient(135deg, #4facfe 0%, #00f2fe 100%)",color:"white",height:"100%"},children:e.jsx(ce,{children:e.jsxs(o,{display:"flex",alignItems:"center",justifyContent:"space-between",children:[e.jsxs(o,{children:[e.jsx(a,{variant:"h5",fontWeight:"bold",children:b(kr.summary.escrowBalance)}),e.jsx(a,{variant:"body2",sx:{opacity:.9},children:"Escrow Balance"})]}),e.jsx(ws,{sx:{fontSize:40,opacity:.8}})]})})})}),e.jsx(h,{item:!0,xs:12,sm:6,md:3,children:e.jsx(me,{sx:{background:"linear-gradient(135deg, #43e97b 0%, #38f9d7 100%)",color:"white",height:"100%"},children:e.jsx(ce,{children:e.jsxs(o,{display:"flex",alignItems:"center",justifyContent:"space-between",children:[e.jsxs(o,{children:[e.jsx(a,{variant:"h5",fontWeight:"bold",children:kr.summary.averagePaymentTime}),e.jsx(a,{variant:"body2",sx:{opacity:.9},children:"Avg Payment Time"})]}),e.jsx(cr,{sx:{fontSize:40,opacity:.8}})]})})})})]});return j?e.jsxs(o,{children:[e.jsx(h,{container:!0,spacing:3,sx:{mb:4},children:[...Array(4)].map((R,K)=>e.jsx(h,{item:!0,xs:12,sm:6,md:3,children:e.jsx(ie,{variant:"rounded",height:120,animation:"wave"})},K))}),e.jsx(me,{children:e.jsxs(ce,{children:[e.jsx(ie,{variant:"text",height:40,width:"40%",sx:{mb:2}}),[...Array(3)].map((R,K)=>e.jsx(ie,{variant:"text",height:60,sx:{mb:1}},K))]})})]}):e.jsxs(o,{children:[e.jsx(W,{}),e.jsx(me,{sx:{mb:4},children:e.jsxs(ce,{children:[e.jsxs(a,{variant:"h6",fontWeight:"bold",gutterBottom:!0,children:["Pending Payments (",kr.pendingPayments.length,")"]}),kr.pendingPayments.length===0?e.jsxs(o,{textAlign:"center",py:4,children:[e.jsx(ct,{sx:{fontSize:64,color:"text.secondary",mb:2}}),e.jsx(a,{variant:"h6",color:"text.secondary",children:"No pending payments"}),e.jsx(a,{variant:"body2",color:"text.secondary",children:"All payments are up to date"})]}):e.jsx(Hr,{children:e.jsxs(Gr,{children:[e.jsx(Vr,{children:e.jsxs(It,{children:[e.jsx(ae,{children:e.jsx("strong",{children:"Job & Worker"})}),e.jsx(ae,{children:e.jsx("strong",{children:"Milestone"})}),e.jsx(ae,{children:e.jsx("strong",{children:"Amount"})}),e.jsx(ae,{children:e.jsx("strong",{children:"Status"})}),e.jsx(ae,{children:e.jsx("strong",{children:"Due Date"})}),e.jsx(ae,{align:"center",children:e.jsx("strong",{children:"Actions"})})]})}),e.jsx(qr,{children:kr.pendingPayments.map(R=>e.jsxs(It,{hover:!0,children:[e.jsx(ae,{children:e.jsxs(o,{display:"flex",alignItems:"center",gap:2,children:[e.jsx(we,{src:R.worker.avatar,sx:{width:40,height:40},children:R.worker.name.charAt(0)}),e.jsxs(o,{children:[e.jsx(a,{variant:"subtitle2",fontWeight:"bold",children:R.jobTitle}),e.jsx(a,{variant:"body2",color:"text.secondary",children:R.worker.name})]})]})}),e.jsx(ae,{children:e.jsx(a,{variant:"body2",children:R.milestone})}),e.jsx(ae,{children:e.jsx(a,{variant:"subtitle2",fontWeight:"bold",color:"primary.main",children:b(R.amount)})}),e.jsx(ae,{children:e.jsx(ee,{label:w(R.status),color:A(R.status),size:"small"})}),e.jsx(ae,{children:e.jsx(a,{variant:"body2",children:C(R.dueDate)})}),e.jsx(ae,{align:"center",children:e.jsxs(o,{display:"flex",gap:1,justifyContent:"center",children:[e.jsx(xe,{title:"View Details",children:e.jsx(ne,{size:"small",onClick:()=>p("view",R),children:e.jsx(Et,{})})}),R.status==="ready_for_release"&&e.jsx(P,{size:"small",variant:"contained",color:"primary",startIcon:e.jsx(ct,{}),onClick:()=>p("release",R),children:"Release"})]})})]},R.id))})]})})]})}),e.jsx(me,{children:e.jsxs(ce,{children:[e.jsx(a,{variant:"h6",fontWeight:"bold",gutterBottom:!0,children:"Recent Payment History"}),e.jsx(Hr,{children:e.jsxs(Gr,{children:[e.jsx(Vr,{children:e.jsxs(It,{children:[e.jsx(ae,{children:e.jsx("strong",{children:"Job & Worker"})}),e.jsx(ae,{children:e.jsx("strong",{children:"Milestone"})}),e.jsx(ae,{children:e.jsx("strong",{children:"Amount"})}),e.jsx(ae,{children:e.jsx("strong",{children:"Date Paid"})}),e.jsx(ae,{children:e.jsx("strong",{children:"Method"})}),e.jsx(ae,{children:e.jsx("strong",{children:"Transaction ID"})})]})}),e.jsx(qr,{children:kr.paymentHistory.map(R=>e.jsxs(It,{hover:!0,children:[e.jsx(ae,{children:e.jsxs(o,{display:"flex",alignItems:"center",gap:2,children:[e.jsx(we,{src:R.worker.avatar,sx:{width:32,height:32},children:R.worker.name.charAt(0)}),e.jsxs(o,{children:[e.jsx(a,{variant:"body2",fontWeight:"bold",children:R.jobTitle}),e.jsx(a,{variant:"caption",color:"text.secondary",children:R.worker.name})]})]})}),e.jsx(ae,{children:e.jsx(a,{variant:"body2",children:R.milestone})}),e.jsx(ae,{children:e.jsx(a,{variant:"body2",fontWeight:"bold",color:"success.main",children:b(R.amount)})}),e.jsx(ae,{children:e.jsx(a,{variant:"body2",children:C(R.paidDate)})}),e.jsx(ae,{children:e.jsx(ee,{label:R.paymentMethod,size:"small",variant:"outlined"})}),e.jsx(ae,{children:e.jsx(a,{variant:"body2",color:"text.secondary",children:R.transactionId})})]},R.id))})]})})]})}),e.jsxs(Ee,{open:n&&c==="release",onClose:k,maxWidth:"sm",fullWidth:!0,children:[e.jsx(Me,{children:e.jsxs(o,{display:"flex",alignItems:"center",gap:2,children:[e.jsx(ct,{color:"primary"}),"Release Payment"]})}),e.jsx(ze,{children:r&&e.jsxs(o,{children:[e.jsx(be,{severity:"info",sx:{mb:3},children:"You are about to release payment for completed work. This action cannot be undone."}),e.jsxs(o,{mb:3,children:[e.jsx(a,{variant:"subtitle1",fontWeight:"bold",gutterBottom:!0,children:"Payment Details"}),e.jsxs(o,{display:"flex",alignItems:"center",gap:2,mb:2,children:[e.jsx(we,{src:r.worker.avatar,children:r.worker.name.charAt(0)}),e.jsxs(o,{children:[e.jsx(a,{variant:"body1",fontWeight:"bold",children:r.worker.name}),e.jsx(a,{variant:"body2",color:"text.secondary",children:r.jobTitle})]})]}),e.jsxs(a,{variant:"body2",color:"text.secondary",gutterBottom:!0,children:["Milestone: ",r.milestone]}),e.jsx(a,{variant:"h5",color:"primary.main",fontWeight:"bold",children:b(r.amount)})]}),e.jsx(fe,{sx:{my:2}}),e.jsxs(o,{mb:3,children:[e.jsx(a,{variant:"subtitle1",fontWeight:"bold",gutterBottom:!0,children:"Payment Method"}),e.jsx(o,{display:"flex",gap:2,flexWrap:"wrap",children:["mobile_money","bank_transfer","card"].map(R=>e.jsx(P,{variant:x===R?"contained":"outlined",onClick:()=>m(R),sx:{textTransform:"capitalize"},children:R.replace("_"," ")},R))})]}),e.jsx(Q,{fullWidth:!0,label:"Confirmation Code (Optional)",value:u,onChange:R=>v(R.target.value),placeholder:"Enter any reference code for your records",helperText:"This will be included in the payment receipt"})]})}),e.jsxs(Le,{children:[e.jsx(P,{onClick:k,disabled:y,children:"Cancel"}),e.jsx(P,{onClick:U,variant:"contained",disabled:y,startIcon:y?e.jsx(lr,{}):e.jsx(ct,{}),children:y?"Processing...":"Release Payment"})]})]}),e.jsxs(Ee,{open:n&&c==="view",onClose:k,maxWidth:"sm",fullWidth:!0,children:[e.jsx(Me,{children:"Payment Details"}),e.jsx(ze,{children:r&&e.jsx(o,{children:e.jsxs(h,{container:!0,spacing:2,children:[e.jsxs(h,{item:!0,xs:12,children:[e.jsx(a,{variant:"subtitle1",fontWeight:"bold",children:"Job Information"}),e.jsx(a,{variant:"body2",children:r.jobTitle})]}),e.jsxs(h,{item:!0,xs:12,children:[e.jsx(a,{variant:"subtitle1",fontWeight:"bold",children:"Worker"}),e.jsxs(o,{display:"flex",alignItems:"center",gap:2,children:[e.jsx(we,{src:r.worker.avatar,children:r.worker.name.charAt(0)}),e.jsx(a,{variant:"body2",children:r.worker.name})]})]}),e.jsxs(h,{item:!0,xs:6,children:[e.jsx(a,{variant:"subtitle1",fontWeight:"bold",children:"Amount"}),e.jsx(a,{variant:"h6",color:"primary.main",children:b(r.amount)})]}),e.jsxs(h,{item:!0,xs:6,children:[e.jsx(a,{variant:"subtitle1",fontWeight:"bold",children:"Status"}),e.jsx(ee,{label:w(r.status),color:A(r.status),size:"small"})]}),e.jsxs(h,{item:!0,xs:12,children:[e.jsx(a,{variant:"subtitle1",fontWeight:"bold",children:"Escrow ID"}),e.jsx(a,{variant:"body2",color:"text.secondary",children:r.escrowId})]})]})})}),e.jsx(Le,{children:e.jsx(P,{onClick:k,children:"Close"})})]})]})},nl=Xe.create({baseURL:yt.AUTH_SERVICE,timeout:3e4,headers:{"Content-Type":"application/json"}});nl.interceptors.request.use(t=>{const r=localStorage.getItem("kelmah_auth_token");return r&&(t.headers.Authorization=`Bearer ${r}`),t},t=>Promise.reject(t));const Sn=[{id:"proposal-1",jobId:"job-h1",jobTitle:"Kitchen Renovation - Custom Cabinets",jobBudget:5500,worker:{id:"worker-1",name:"Tony Gate",avatar:"/api/placeholder/40/40",rating:4.8,completedJobs:23,skills:["Carpentry","Cabinet Making","Wood Finishing"],location:"Accra, Greater Accra",experience:"5+ years"},proposedRate:5200,estimatedDuration:"3 weeks",proposalText:"I have extensive experience in custom cabinet making and kitchen renovations. I can deliver high-quality cabinets with modern designs that will transform your kitchen. My approach includes detailed measurements, custom design, quality materials, and professional installation.",submittedDate:new Date(Date.now()-1e3*60*60*24*2),status:"pending",attachments:[{name:"portfolio.pdf",size:"2.3 MB"},{name:"previous_work.jpg",size:"1.8 MB"}],timeline:[{phase:"Design & Planning",duration:"3 days"},{phase:"Material Selection",duration:"2 days"},{phase:"Cabinet Construction",duration:"12 days"},{phase:"Installation & Finishing",duration:"4 days"}]},{id:"proposal-2",jobId:"job-h2",jobTitle:"Office Interior Design & Setup",jobBudget:15e3,worker:{id:"worker-2",name:"Sarah Williams",avatar:"/api/placeholder/40/40",rating:4.9,completedJobs:31,skills:["Interior Design","Space Planning","Project Management"],location:"Kumasi, Ashanti",experience:"7+ years"},proposedRate:14500,estimatedDuration:"4 weeks",proposalText:"I specialize in modern office interior design that maximizes productivity and creates inspiring work environments. My comprehensive approach includes space planning, furniture selection, lighting design, and complete project management from concept to completion.",submittedDate:new Date(Date.now()-1e3*60*60*24*1),status:"pending",attachments:[{name:"design_portfolio.pdf",size:"5.2 MB"},{name:"office_mockup.jpg",size:"3.1 MB"},{name:"references.pdf",size:"1.5 MB"}],timeline:[{phase:"Space Assessment & Planning",duration:"5 days"},{phase:"Design Development",duration:"7 days"},{phase:"Procurement & Ordering",duration:"10 days"},{phase:"Installation & Setup",duration:"6 days"}]},{id:"proposal-3",jobId:"job-h3",jobTitle:"Bathroom Renovation - Modern Design",jobBudget:8e3,worker:{id:"worker-3",name:"Michael Asante",avatar:"/api/placeholder/40/40",rating:4.7,completedJobs:18,skills:["Plumbing","Tiling","Bathroom Design"],location:"Tema, Greater Accra",experience:"4+ years"},proposedRate:7800,estimatedDuration:"2.5 weeks",proposalText:"I offer complete bathroom renovation services with modern designs and quality fixtures. My expertise includes plumbing, tiling, electrical work, and finishing. I ensure all work meets building codes and delivers a stunning, functional bathroom.",submittedDate:new Date(Date.now()-1e3*60*60*24*3),status:"pending",attachments:[{name:"bathroom_designs.pdf",size:"4.1 MB"},{name:"certifications.pdf",size:"1.2 MB"}],timeline:[{phase:"Demolition & Preparation",duration:"3 days"},{phase:"Plumbing & Electrical",duration:"4 days"},{phase:"Tiling & Fixtures",duration:"6 days"},{phase:"Finishing & Cleanup",duration:"3 days"}]}],Vx=()=>{var H;const t=ve();Te(t.breakpoints.down("md"));const[r,s]=l.useState(!1),[n,i]=l.useState(null),[c,d]=l.useState(Sn),[x,m]=l.useState(null),[u,v]=l.useState(null),[y,g]=l.useState(!1),[j,b]=l.useState(null),[C,A]=l.useState({rating:5,feedback:"",decision:""});l.useEffect(()=>{w()},[]);const w=async()=>{try{s(!0);const F=await nl.get("/api/jobs/proposals");d(F.data||Sn),i(null)}catch(F){console.warn("Job service unavailable for proposals, using mock data:",F.message),d(Sn),i(null)}finally{s(!1)}},p=F=>new Intl.NumberFormat("en-GH",{style:"currency",currency:"GHS",minimumFractionDigits:0}).format(F),k=F=>new Date(F).toLocaleDateString("en-GH",{month:"short",day:"numeric",year:"numeric"}),U=F=>{switch(F){case"pending":return"warning";case"accepted":return"success";case"rejected":return"error";case"withdrawn":return"default";default:return"default"}},W=(F,V)=>{m(F.currentTarget),v(V)},R=()=>{m(null),v(null)},K=F=>{b(F),g(!0),R()},_=()=>{g(!1),b(null),v(null),A({rating:5,feedback:"",decision:""})},O=async F=>{if(u)try{console.log(`${F} proposal ${u.id}`),d(V=>V.map(re=>re.id===u.id?{...re,status:F}:re)),_()}catch(V){console.error(`Error ${F} proposal:`,V),i(`Failed to ${F} proposal`)}},T={total:c.length,pending:c.filter(F=>F.status==="pending").length,accepted:c.filter(F=>F.status==="accepted").length,rejected:c.filter(F=>F.status==="rejected").length,averageRate:c.reduce((F,V)=>F+V.proposedRate,0)/c.length};return r?e.jsxs(o,{children:[e.jsx(h,{container:!0,spacing:3,sx:{mb:4},children:[...Array(4)].map((F,V)=>e.jsx(h,{item:!0,xs:12,sm:6,md:3,children:e.jsx(ie,{variant:"rounded",height:120,animation:"wave"})},V))}),e.jsx(me,{children:e.jsxs(ce,{children:[e.jsx(ie,{variant:"text",height:40,width:"40%",sx:{mb:2}}),[...Array(3)].map((F,V)=>e.jsx(ie,{variant:"text",height:60,sx:{mb:1}},V))]})})]}):e.jsxs(o,{children:[n&&e.jsx(be,{severity:"error",sx:{mb:3},onClose:()=>i(null),children:n}),e.jsxs(h,{container:!0,spacing:3,sx:{mb:4},children:[e.jsx(h,{item:!0,xs:12,sm:6,md:3,children:e.jsx(me,{sx:{background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",color:"white",height:"100%"},children:e.jsx(ce,{children:e.jsxs(o,{display:"flex",alignItems:"center",justifyContent:"space-between",children:[e.jsxs(o,{children:[e.jsx(a,{variant:"h4",fontWeight:"bold",children:T.total}),e.jsx(a,{variant:"body2",sx:{opacity:.9},children:"Total Proposals"})]}),e.jsx(Lt,{sx:{fontSize:40,opacity:.8}})]})})})}),e.jsx(h,{item:!0,xs:12,sm:6,md:3,children:e.jsx(me,{sx:{background:"linear-gradient(135deg, #f093fb 0%, #f5576c 100%)",color:"white",height:"100%"},children:e.jsx(ce,{children:e.jsxs(o,{display:"flex",alignItems:"center",justifyContent:"space-between",children:[e.jsxs(o,{children:[e.jsx(a,{variant:"h4",fontWeight:"bold",children:T.pending}),e.jsx(a,{variant:"body2",sx:{opacity:.9},children:"Pending Review"})]}),e.jsx(Tt,{sx:{fontSize:40,opacity:.8}})]})})})}),e.jsx(h,{item:!0,xs:12,sm:6,md:3,children:e.jsx(me,{sx:{background:"linear-gradient(135deg, #4facfe 0%, #00f2fe 100%)",color:"white",height:"100%"},children:e.jsx(ce,{children:e.jsxs(o,{display:"flex",alignItems:"center",justifyContent:"space-between",children:[e.jsxs(o,{children:[e.jsx(a,{variant:"h4",fontWeight:"bold",children:p(T.averageRate)}),e.jsx(a,{variant:"body2",sx:{opacity:.9},children:"Average Rate"})]}),e.jsx(ct,{sx:{fontSize:40,opacity:.8}})]})})})}),e.jsx(h,{item:!0,xs:12,sm:6,md:3,children:e.jsx(me,{sx:{background:"linear-gradient(135deg, #43e97b 0%, #38f9d7 100%)",color:"white",height:"100%"},children:e.jsx(ce,{children:e.jsxs(o,{display:"flex",alignItems:"center",justifyContent:"space-between",children:[e.jsxs(o,{children:[e.jsx(a,{variant:"h4",fontWeight:"bold",children:T.accepted}),e.jsx(a,{variant:"body2",sx:{opacity:.9},children:"Accepted"})]}),e.jsx(Ve,{sx:{fontSize:40,opacity:.8}})]})})})})]}),e.jsx(me,{children:e.jsxs(ce,{children:[e.jsxs(a,{variant:"h6",fontWeight:"bold",gutterBottom:!0,children:["Job Proposals (",c.length,")"]}),c.length===0?e.jsxs(o,{textAlign:"center",py:4,children:[e.jsx(Lt,{sx:{fontSize:64,color:"text.secondary",mb:2}}),e.jsx(a,{variant:"h6",color:"text.secondary",children:"No proposals received yet"}),e.jsx(a,{variant:"body2",color:"text.secondary",children:"Proposals from workers will appear here"})]}):e.jsx(Hr,{children:e.jsxs(Gr,{children:[e.jsx(Vr,{children:e.jsxs(It,{children:[e.jsx(ae,{children:e.jsx("strong",{children:"Worker & Job"})}),e.jsx(ae,{children:e.jsx("strong",{children:"Proposed Rate"})}),e.jsx(ae,{children:e.jsx("strong",{children:"Duration"})}),e.jsx(ae,{children:e.jsx("strong",{children:"Rating"})}),e.jsx(ae,{children:e.jsx("strong",{children:"Status"})}),e.jsx(ae,{children:e.jsx("strong",{children:"Submitted"})}),e.jsx(ae,{align:"center",children:e.jsx("strong",{children:"Actions"})})]})}),e.jsx(qr,{children:c.map(F=>e.jsxs(It,{hover:!0,children:[e.jsx(ae,{children:e.jsxs(o,{display:"flex",alignItems:"center",gap:2,children:[e.jsx(we,{src:F.worker.avatar,sx:{width:40,height:40},children:F.worker.name.charAt(0)}),e.jsxs(o,{children:[e.jsx(a,{variant:"subtitle2",fontWeight:"bold",children:F.worker.name}),e.jsx(a,{variant:"body2",color:"text.secondary",noWrap:!0,children:F.jobTitle}),e.jsxs(a,{variant:"caption",color:"text.secondary",children:[F.worker.location," •"," ",F.worker.experience]})]})]})}),e.jsxs(ae,{children:[e.jsx(a,{variant:"subtitle2",fontWeight:"bold",color:"primary.main",children:p(F.proposedRate)}),e.jsxs(a,{variant:"caption",color:"text.secondary",children:["vs ",p(F.jobBudget)," budget"]})]}),e.jsx(ae,{children:e.jsx(a,{variant:"body2",children:F.estimatedDuration})}),e.jsx(ae,{children:e.jsxs(o,{display:"flex",alignItems:"center",gap:.5,children:[e.jsx(rt,{sx:{fontSize:16,color:"gold"}}),e.jsx(a,{variant:"body2",children:F.worker.rating}),e.jsxs(a,{variant:"caption",color:"text.secondary",children:["(",F.worker.completedJobs," jobs)"]})]})}),e.jsx(ae,{children:e.jsx(ee,{label:F.status.toUpperCase(),color:U(F.status),size:"small"})}),e.jsx(ae,{children:e.jsx(a,{variant:"body2",children:k(F.submittedDate)})}),e.jsx(ae,{align:"center",children:e.jsx(ne,{size:"small",onClick:V=>W(V,F),children:e.jsx(Ur,{})})})]},F.id))})]})})]})}),e.jsxs(Xt,{anchorEl:x,open:!!x,onClose:R,children:[e.jsxs(Z,{onClick:()=>K("view"),children:[e.jsx(Et,{sx:{mr:1}}),"View Details"]}),(u==null?void 0:u.status)==="pending"&&[e.jsxs(Z,{onClick:()=>K("accept"),children:[e.jsx(Ve,{sx:{mr:1,color:"success.main"}}),"Accept Proposal"]},"accept"),e.jsxs(Z,{onClick:()=>K("reject"),children:[e.jsx(ps,{sx:{mr:1,color:"error.main"}}),"Reject Proposal"]},"reject")]]}),e.jsxs(Ee,{open:y&&j==="view",onClose:_,maxWidth:"md",fullWidth:!0,children:[e.jsx(Me,{children:"Proposal Details"}),e.jsx(ze,{children:u&&e.jsxs(o,{children:[e.jsxs(o,{display:"flex",alignItems:"center",gap:2,mb:3,children:[e.jsx(we,{src:u.worker.avatar,sx:{width:64,height:64},children:u.worker.name.charAt(0)}),e.jsxs(o,{children:[e.jsx(a,{variant:"h6",children:u.worker.name}),e.jsxs(o,{display:"flex",alignItems:"center",gap:1,children:[e.jsx(rt,{sx:{fontSize:16,color:"gold"}}),e.jsxs(a,{variant:"body2",children:[u.worker.rating," (",u.worker.completedJobs," jobs)"]})]}),e.jsx(a,{variant:"body2",color:"text.secondary",children:u.worker.location})]})]}),e.jsx(fe,{sx:{my:2}}),e.jsxs(h,{container:!0,spacing:3,sx:{mb:3},children:[e.jsxs(h,{item:!0,xs:12,md:6,children:[e.jsxs(a,{variant:"subtitle1",fontWeight:"bold",gutterBottom:!0,children:["Job: ",u.jobTitle]}),e.jsxs(a,{variant:"body2",color:"text.secondary",children:["Budget: ",p(u.jobBudget)]})]}),e.jsxs(h,{item:!0,xs:12,md:6,children:[e.jsxs(a,{variant:"subtitle1",fontWeight:"bold",color:"primary.main",children:["Proposed Rate:"," ",p(u.proposedRate)]}),e.jsxs(a,{variant:"body2",color:"text.secondary",children:["Duration: ",u.estimatedDuration]})]})]}),e.jsx(fe,{sx:{my:2}}),e.jsx(a,{variant:"subtitle1",fontWeight:"bold",gutterBottom:!0,children:"Proposal"}),e.jsx(a,{variant:"body2",paragraph:!0,children:u.proposalText}),e.jsx(a,{variant:"subtitle1",fontWeight:"bold",gutterBottom:!0,children:"Skills"}),e.jsx(o,{display:"flex",gap:1,flexWrap:"wrap",mb:2,children:u.worker.skills.map((F,V)=>e.jsx(ee,{label:F,size:"small",variant:"outlined"},V))}),e.jsx(a,{variant:"subtitle1",fontWeight:"bold",gutterBottom:!0,children:"Proposed Timeline"}),e.jsx(o,{mb:2,children:u.timeline.map((F,V)=>e.jsxs(o,{display:"flex",justifyContent:"space-between",py:.5,children:[e.jsx(a,{variant:"body2",children:F.phase}),e.jsx(a,{variant:"body2",color:"text.secondary",children:F.duration})]},V))}),u.attachments.length>0&&e.jsxs(e.Fragment,{children:[e.jsx(a,{variant:"subtitle1",fontWeight:"bold",gutterBottom:!0,children:"Attachments"}),e.jsx(o,{children:u.attachments.map((F,V)=>e.jsxs(o,{display:"flex",justifyContent:"space-between",py:.5,children:[e.jsx(a,{variant:"body2",children:F.name}),e.jsx(a,{variant:"body2",color:"text.secondary",children:F.size})]},V))})]})]})}),e.jsxs(Le,{children:[e.jsx(P,{onClick:_,children:"Close"}),(u==null?void 0:u.status)==="pending"&&e.jsxs(e.Fragment,{children:[e.jsx(P,{onClick:()=>O("rejected"),color:"error",variant:"outlined",children:"Reject"}),e.jsx(P,{onClick:()=>O("accepted"),color:"success",variant:"contained",children:"Accept"})]})]})]}),e.jsxs(Ee,{open:y&&(j==="accept"||j==="reject"),onClose:_,children:[e.jsx(Me,{children:j==="accept"?"Accept Proposal":"Reject Proposal"}),e.jsxs(ze,{children:[e.jsxs(a,{gutterBottom:!0,children:["Are you sure you want to ",j," this proposal from"," ",(H=u==null?void 0:u.worker)==null?void 0:H.name,"?"]}),j==="reject"&&e.jsx(Q,{fullWidth:!0,multiline:!0,rows:3,label:"Reason for rejection (optional)",value:C.feedback,onChange:F=>A({...C,feedback:F.target.value}),sx:{mt:2}})]}),e.jsxs(Le,{children:[e.jsx(P,{onClick:_,children:"Cancel"}),e.jsx(P,{onClick:()=>O(j==="accept"?"accepted":"rejected"),color:j==="accept"?"success":"error",variant:"contained",children:j==="accept"?"Accept":"Reject"})]})]})]})},qx=[{id:"job-h1",title:"Kitchen Renovation - Custom Cabinets",worker:{id:"worker-1",name:"Tony Gate",avatar:"/api/placeholder/40/40",rating:4.8,completedJobs:23},progress:65,status:"in_progress",budget:5500,paidAmount:2200,remainingAmount:3300,startDate:new Date(Date.now()-1e3*60*60*24*12),expectedCompletion:new Date(Date.now()+1e3*60*60*24*8),milestones:[{id:"milestone-1",title:"Initial Measurements & Design",description:"Take accurate measurements and create cabinet design",status:"completed",amount:1100,completedDate:new Date(Date.now()-1e3*60*60*24*10),paid:!0},{id:"milestone-2",title:"Material Purchase & Preparation",description:"Purchase wood and hardware, prepare materials",status:"completed",amount:1100,completedDate:new Date(Date.now()-1e3*60*60*24*6),paid:!0},{id:"milestone-3",title:"Cabinet Construction",description:"Build cabinet frames and doors",status:"in_progress",amount:1650,expectedDate:new Date(Date.now()+1e3*60*60*24*3),paid:!1},{id:"milestone-4",title:"Installation & Finishing",description:"Install cabinets and apply final finish",status:"pending",amount:1650,expectedDate:new Date(Date.now()+1e3*60*60*24*8),paid:!1}],recentUpdates:[{id:"update-1",message:"Cabinet frames are taking shape nicely. Should be ready for door installation by tomorrow.",timestamp:new Date(Date.now()-1e3*60*60*4),type:"progress"},{id:"update-2",message:"Milestone 2 completed - all materials ready for construction phase.",timestamp:new Date(Date.now()-1e3*60*60*24*6),type:"milestone"}]},{id:"job-h2",title:"Office Interior Design & Setup",worker:{id:"worker-2",name:"Sarah Williams",avatar:"/api/placeholder/40/40",rating:4.9,completedJobs:31},progress:30,status:"in_progress",budget:15e3,paidAmount:4500,remainingAmount:10500,startDate:new Date(Date.now()-1e3*60*60*24*5),expectedCompletion:new Date(Date.now()+1e3*60*60*24*16),milestones:[{id:"milestone-1",title:"Space Planning & Design",description:"Create detailed floor plan and design concepts",status:"completed",amount:4500,completedDate:new Date(Date.now()-1e3*60*60*24*2),paid:!0},{id:"milestone-2",title:"Furniture Selection & Ordering",description:"Select and order all furniture and fixtures",status:"in_progress",amount:5250,expectedDate:new Date(Date.now()+1e3*60*60*24*7),paid:!1},{id:"milestone-3",title:"Installation & Setup",description:"Deliver and install all furniture and fixtures",status:"pending",amount:5250,expectedDate:new Date(Date.now()+1e3*60*60*24*16),paid:!1}],recentUpdates:[{id:"update-1",message:"Furniture selections approved. Placing orders with suppliers today.",timestamp:new Date(Date.now()-1e3*60*60*8),type:"progress"}]}],Yx=()=>{var K,_,O,T,H;const t=ve();Te(t.breakpoints.down("md"));const r=ot(),[s,n]=l.useState(null),[i,c]=l.useState(!1),[d,x]=l.useState(null),[m,u]=l.useState(""),[v,y]=l.useState(5),[g,j]=l.useState("");je(Or("active"));const b=je(gs("jobs"));l.useEffect(()=>{r(_t("active"))},[r]);const C=F=>new Intl.NumberFormat("en-GH",{style:"currency",currency:"GHS",minimumFractionDigits:0}).format(F),A=F=>new Date(F).toLocaleDateString("en-GH",{month:"short",day:"numeric",year:"numeric"}),w=F=>{switch(F){case"completed":return"success";case"in_progress":return"primary";case"pending":return"warning";case"overdue":return"error";default:return"default"}},p=(F,V)=>{x(F),n(V),c(!0)},k=()=>{c(!1),x(null),n(null),u(""),y(5),j("")},U=()=>{console.log(`Releasing payment of ${m} for job ${s.id}`),k()},W=()=>{console.log(`Submitting review for worker ${s.worker.id}:`,{rating:v,comment:g}),k()},R=qx;return b?e.jsx(o,{children:[...Array(2)].map((F,V)=>e.jsx(me,{sx:{mb:3},children:e.jsxs(ce,{children:[e.jsx(ie,{variant:"text",height:40,width:"60%",sx:{mb:2}}),e.jsx(ie,{variant:"rectangular",height:120,sx:{mb:2}}),e.jsx(ie,{variant:"text",height:30,width:"40%"})]})},V))}):R.length===0?e.jsx(me,{children:e.jsx(ce,{children:e.jsxs(o,{textAlign:"center",py:4,children:[e.jsx(Tt,{sx:{fontSize:64,color:"text.secondary",mb:2}}),e.jsx(a,{variant:"h6",color:"text.secondary",children:"No active jobs in progress"}),e.jsx(a,{variant:"body2",color:"text.secondary",children:"Your active job progress will appear here"})]})})}):e.jsxs(o,{children:[R.map(F=>e.jsx(me,{sx:{mb:3,overflow:"visible"},children:e.jsxs(ce,{children:[e.jsxs(o,{display:"flex",justifyContent:"space-between",alignItems:"flex-start",mb:3,children:[e.jsxs(o,{flex:1,children:[e.jsx(a,{variant:"h6",fontWeight:"bold",gutterBottom:!0,children:F.title}),e.jsxs(o,{display:"flex",alignItems:"center",gap:2,flexWrap:"wrap",children:[e.jsxs(o,{display:"flex",alignItems:"center",gap:1,children:[e.jsx(we,{src:F.worker.avatar,sx:{width:32,height:32},children:F.worker.name.charAt(0)}),e.jsxs(o,{children:[e.jsx(a,{variant:"body2",fontWeight:"bold",children:F.worker.name}),e.jsxs(o,{display:"flex",alignItems:"center",gap:.5,children:[e.jsx(rt,{sx:{fontSize:16,color:"gold"}}),e.jsxs(a,{variant:"caption",children:[F.worker.rating," (",F.worker.completedJobs," jobs)"]})]})]})]}),e.jsx(ee,{label:F.status.replace("_"," ").toUpperCase(),color:w(F.status),size:"small"})]})]}),e.jsxs(o,{display:"flex",gap:1,children:[e.jsx(ne,{size:"small",onClick:()=>p("view",F),children:e.jsx(Et,{})}),e.jsx(ne,{size:"small",children:e.jsx(Ot,{})})]})]}),e.jsxs(h,{container:!0,spacing:3,sx:{mb:3},children:[e.jsxs(h,{item:!0,xs:12,md:8,children:[e.jsxs(o,{mb:2,children:[e.jsxs(o,{display:"flex",justifyContent:"space-between",alignItems:"center",mb:1,children:[e.jsx(a,{variant:"body2",fontWeight:"bold",children:"Overall Progress"}),e.jsxs(a,{variant:"body2",color:"text.secondary",children:[F.progress,"% Complete"]})]}),e.jsx(lr,{variant:"determinate",value:F.progress,sx:{height:8,borderRadius:4,backgroundColor:"grey.200","& .MuiLinearProgress-bar":{borderRadius:4,background:F.progress>=75?"linear-gradient(90deg, #4caf50, #66bb6a)":F.progress>=50?"linear-gradient(90deg, #2196f3, #42a5f5)":"linear-gradient(90deg, #ff9800, #ffb74d)"}}})]}),e.jsxs(h,{container:!0,spacing:2,children:[e.jsx(h,{item:!0,xs:6,children:e.jsxs(a,{variant:"body2",color:"text.secondary",children:["Started: ",A(F.startDate)]})}),e.jsx(h,{item:!0,xs:6,children:e.jsxs(a,{variant:"body2",color:"text.secondary",children:["Expected: ",A(F.expectedCompletion)]})})]})]}),e.jsx(h,{item:!0,xs:12,md:4,children:e.jsxs(o,{p:2,bgcolor:"primary.50",borderRadius:2,border:1,borderColor:"primary.200",children:[e.jsx(a,{variant:"body2",color:"text.secondary",gutterBottom:!0,children:"Budget Overview"}),e.jsx(a,{variant:"h6",fontWeight:"bold",color:"primary.main",children:C(F.budget)}),e.jsxs(o,{display:"flex",justifyContent:"space-between",mt:1,children:[e.jsxs(a,{variant:"caption",color:"success.main",children:["Paid: ",C(F.paidAmount)]}),e.jsxs(a,{variant:"caption",color:"text.secondary",children:["Remaining: ",C(F.remainingAmount)]})]})]})})]}),e.jsx(fe,{sx:{my:2}}),e.jsx(a,{variant:"subtitle1",fontWeight:"bold",gutterBottom:!0,children:"Milestones"}),e.jsx(Ke,{dense:!0,children:F.milestones.map((V,re)=>e.jsxs(Be,{sx:{px:0},children:[e.jsx(Vs,{children:e.jsx(we,{sx:{width:32,height:32,bgcolor:V.status==="completed"?"success.main":V.status==="in_progress"?"primary.main":"grey.400"},children:V.status==="completed"?e.jsx(Ve,{sx:{fontSize:20}}):V.status==="in_progress"?e.jsx(Cs,{sx:{fontSize:20}}):e.jsx(Tt,{sx:{fontSize:20}})})}),e.jsx(Ie,{primary:e.jsx(a,{variant:"body2",fontWeight:"bold",children:V.title}),secondary:e.jsxs(o,{children:[e.jsx(a,{variant:"caption",color:"text.secondary",children:V.description}),e.jsx("br",{}),e.jsx(a,{variant:"caption",color:"text.secondary",children:V.status==="completed"?`Completed: ${A(V.completedDate)}`:`Expected: ${A(V.expectedDate)}`})]})}),e.jsx(Bc,{children:e.jsxs(o,{textAlign:"right",children:[e.jsx(a,{variant:"body2",fontWeight:"bold",children:C(V.amount)}),V.status==="completed"&&!V.paid&&e.jsx(P,{size:"small",variant:"contained",color:"primary",startIcon:e.jsx(ct,{}),onClick:()=>p("payment",{...F,selectedMilestone:V}),children:"Release Payment"}),V.paid&&e.jsx(ee,{label:"Paid",size:"small",color:"success"})]})})]},V.id))}),F.recentUpdates.length>0&&e.jsxs(e.Fragment,{children:[e.jsx(fe,{sx:{my:2}}),e.jsx(a,{variant:"subtitle1",fontWeight:"bold",gutterBottom:!0,children:"Recent Updates"}),F.recentUpdates.slice(0,2).map(V=>e.jsxs(o,{mb:1,children:[e.jsx(a,{variant:"body2",children:V.message}),e.jsx(a,{variant:"caption",color:"text.secondary",children:new Date(V.timestamp).toLocaleString("en-GH")})]},V.id))]})]})},F.id)),e.jsxs(Ee,{open:i&&d==="payment",onClose:k,children:[e.jsx(Me,{children:"Release Milestone Payment"}),e.jsxs(ze,{children:[e.jsxs(a,{gutterBottom:!0,children:["Release payment for: ",(K=s==null?void 0:s.selectedMilestone)==null?void 0:K.title]}),e.jsx(Q,{fullWidth:!0,label:"Payment Amount",type:"number",value:m,onChange:F=>u(F.target.value),sx:{mt:2},InputProps:{startAdornment:e.jsx(a,{sx:{mr:1},children:"GH₵"})}})]}),e.jsxs(Le,{children:[e.jsx(P,{onClick:k,children:"Cancel"}),e.jsx(P,{onClick:U,variant:"contained",children:"Release Payment"})]})]}),e.jsxs(Ee,{open:i&&d==="review",onClose:k,children:[e.jsx(Me,{children:"Review Worker"}),e.jsxs(ze,{children:[e.jsxs(o,{textAlign:"center",mb:2,children:[e.jsx(we,{src:(_=s==null?void 0:s.worker)==null?void 0:_.avatar,sx:{width:64,height:64,mx:"auto",mb:1},children:(T=(O=s==null?void 0:s.worker)==null?void 0:O.name)==null?void 0:T.charAt(0)}),e.jsx(a,{variant:"h6",children:(H=s==null?void 0:s.worker)==null?void 0:H.name})]}),e.jsxs(o,{textAlign:"center",mb:2,children:[e.jsx(a,{gutterBottom:!0,children:"Rate this worker:"}),e.jsx(Qe,{value:v,onChange:(F,V)=>y(V),size:"large"})]}),e.jsx(Q,{fullWidth:!0,multiline:!0,rows:4,label:"Review Comments",value:g,onChange:F=>j(F.target.value),placeholder:"Share your experience working with this professional..."})]}),e.jsxs(Le,{children:[e.jsx(P,{onClick:k,children:"Cancel"}),e.jsx(P,{onClick:W,variant:"contained",children:"Submit Review"})]})]})]})},il=Xe.create({baseURL:yt.USER_SERVICE,timeout:3e4,headers:{"Content-Type":"application/json"}});il.interceptors.request.use(t=>{const r=localStorage.getItem("kelmah_auth_token");return r&&(t.headers.Authorization=`Bearer ${r}`),t},t=>Promise.reject(t));const An=[{id:"worker-1",name:"Tony Gate",avatar:"/api/placeholder/40/40",skills:["Carpentry","Cabinet Making","Wood Finishing"],location:"Accra, Greater Accra",overallRating:4.8,totalJobs:23,completedJobs:[{id:"job-completed-1",title:"Kitchen Renovation - Custom Cabinets",completedDate:new Date(Date.now()-1e3*60*60*24*30),duration:"3 weeks",amount:5200,status:"completed",review:{rating:5,communication:5,quality:5,deadline:4,professionalism:5,comment:"Outstanding work! Tony exceeded our expectations with the custom cabinets. Very professional and delivered on time.",recommend:"yes",reviewDate:new Date(Date.now()-1e3*60*60*24*25)}},{id:"job-completed-2",title:"Bedroom Wardrobe Installation",completedDate:new Date(Date.now()-1e3*60*60*24*60),duration:"1 week",amount:2800,status:"completed",review:null}]},{id:"worker-2",name:"Sarah Williams",avatar:"/api/placeholder/40/40",skills:["Interior Design","Space Planning","Project Management"],location:"Kumasi, Ashanti",overallRating:4.9,totalJobs:31,completedJobs:[{id:"job-completed-3",title:"Office Interior Design & Setup",completedDate:new Date(Date.now()-1e3*60*60*24*45),duration:"4 weeks",amount:14500,status:"completed",review:{rating:5,communication:5,quality:5,deadline:5,professionalism:5,comment:"Sarah transformed our office space beautifully. Her attention to detail and professional approach was impressive.",recommend:"yes",reviewDate:new Date(Date.now()-1e3*60*60*24*40)}}]},{id:"worker-3",name:"Michael Asante",avatar:"/api/placeholder/40/40",skills:["Plumbing","Tiling","Bathroom Design"],location:"Tema, Greater Accra",overallRating:4.7,totalJobs:18,completedJobs:[{id:"job-completed-4",title:"Bathroom Renovation - Modern Design",completedDate:new Date(Date.now()-1e3*60*60*24*15),duration:"2.5 weeks",amount:7800,status:"completed",review:null}]}],Kx=()=>{const t=ve();Te(t.breakpoints.down("md"));const[r,s]=l.useState(!1),[n,i]=l.useState(null),[c,d]=l.useState(An),[x,m]=l.useState(null),[u,v]=l.useState(null),[y,g]=l.useState(null),[j,b]=l.useState(!1),[C,A]=l.useState(null),[w,p]=l.useState({rating:5,communication:5,quality:5,deadline:5,professionalism:5,comment:"",recommend:"yes"});l.useEffect(()=>{k()},[]);const k=async()=>{try{s(!0);const J=await il.get("/api/users/workers/completed-jobs");d(J.data||An),i(null)}catch(J){console.warn("User service unavailable for worker reviews, using mock data:",J.message),d(An),i(null)}finally{s(!1)}},U=J=>new Intl.NumberFormat("en-GH",{style:"currency",currency:"GHS",minimumFractionDigits:0}).format(J),W=J=>new Date(J).toLocaleDateString("en-GH",{month:"short",day:"numeric",year:"numeric"}),R=(J,f,M=null)=>{m(J.currentTarget),v(f),g(M)},K=()=>{m(null),v(null),g(null)},_=J=>{A(J),b(!0),K()},O=()=>{b(!1),A(null),v(null),g(null),p({rating:5,communication:5,quality:5,deadline:5,professionalism:5,comment:"",recommend:"yes"})},T=async()=>{if(u&&y)try{console.log("Submitting review for worker:",u.id,"job:",y.id,w),d(J=>J.map(f=>f.id===u.id?{...f,completedJobs:f.completedJobs.map(M=>M.id===y.id?{...M,review:{...w,reviewDate:new Date}}:M)}:f)),O()}catch(J){console.error("Error submitting review:",J),i("Failed to submit review")}},F=(()=>{const J=[];return c.forEach(f=>{f.completedJobs.forEach(M=>{J.push({...M,worker:{id:f.id,name:f.name,avatar:f.avatar,rating:f.overallRating,skills:f.skills,location:f.location}})})}),J.sort((f,M)=>new Date(M.completedDate)-new Date(f.completedDate))})(),V=F.filter(J=>!J.review),re=F.filter(J=>J.review),z={totalJobs:F.length,pendingReviews:V.length,completedReviews:re.length,averageRating:re.length>0?(re.reduce((J,f)=>J+f.review.rating,0)/re.length).toFixed(1):0,totalSpent:F.reduce((J,f)=>J+f.amount,0)};return r?e.jsxs(o,{children:[e.jsx(h,{container:!0,spacing:3,sx:{mb:4},children:[...Array(4)].map((J,f)=>e.jsx(h,{item:!0,xs:12,sm:6,md:3,children:e.jsx(ie,{variant:"rounded",height:120,animation:"wave"})},f))}),e.jsx(me,{children:e.jsxs(ce,{children:[e.jsx(ie,{variant:"text",height:40,width:"40%",sx:{mb:2}}),[...Array(3)].map((J,f)=>e.jsx(ie,{variant:"text",height:60,sx:{mb:1}},f))]})})]}):e.jsxs(o,{children:[n&&e.jsx(be,{severity:"error",sx:{mb:3},onClose:()=>i(null),children:n}),e.jsxs(h,{container:!0,spacing:3,sx:{mb:4},children:[e.jsx(h,{item:!0,xs:12,sm:6,md:3,children:e.jsx(me,{sx:{background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",color:"white",height:"100%"},children:e.jsx(ce,{children:e.jsxs(o,{display:"flex",alignItems:"center",justifyContent:"space-between",children:[e.jsxs(o,{children:[e.jsx(a,{variant:"h4",fontWeight:"bold",children:z.totalJobs}),e.jsx(a,{variant:"body2",sx:{opacity:.9},children:"Completed Jobs"})]}),e.jsx(tt,{sx:{fontSize:40,opacity:.8}})]})})})}),e.jsx(h,{item:!0,xs:12,sm:6,md:3,children:e.jsx(me,{sx:{background:"linear-gradient(135deg, #f093fb 0%, #f5576c 100%)",color:"white",height:"100%"},children:e.jsx(ce,{children:e.jsxs(o,{display:"flex",alignItems:"center",justifyContent:"space-between",children:[e.jsxs(o,{children:[e.jsx(a,{variant:"h4",fontWeight:"bold",children:z.pendingReviews}),e.jsx(a,{variant:"body2",sx:{opacity:.9},children:"Pending Reviews"})]}),e.jsx(Tt,{sx:{fontSize:40,opacity:.8}})]})})})}),e.jsx(h,{item:!0,xs:12,sm:6,md:3,children:e.jsx(me,{sx:{background:"linear-gradient(135deg, #4facfe 0%, #00f2fe 100%)",color:"white",height:"100%"},children:e.jsx(ce,{children:e.jsxs(o,{display:"flex",alignItems:"center",justifyContent:"space-between",children:[e.jsxs(o,{children:[e.jsx(a,{variant:"h4",fontWeight:"bold",children:U(z.totalSpent)}),e.jsx(a,{variant:"body2",sx:{opacity:.9},children:"Total Spent"})]}),e.jsx(ct,{sx:{fontSize:40,opacity:.8}})]})})})}),e.jsx(h,{item:!0,xs:12,sm:6,md:3,children:e.jsx(me,{sx:{background:"linear-gradient(135deg, #43e97b 0%, #38f9d7 100%)",color:"white",height:"100%"},children:e.jsx(ce,{children:e.jsxs(o,{display:"flex",alignItems:"center",justifyContent:"space-between",children:[e.jsxs(o,{children:[e.jsxs(a,{variant:"h4",fontWeight:"bold",children:[z.averageRating,e.jsx(rt,{sx:{fontSize:32,ml:.5,opacity:.9}})]}),e.jsx(a,{variant:"body2",sx:{opacity:.9},children:"Average Rating"})]}),e.jsx(_c,{sx:{fontSize:40,opacity:.8}})]})})})})]}),e.jsx(me,{children:e.jsxs(ce,{children:[e.jsxs(a,{variant:"h6",fontWeight:"bold",gutterBottom:!0,children:["Completed Jobs & Reviews (",F.length,")"]}),F.length===0?e.jsxs(o,{textAlign:"center",py:4,children:[e.jsx(tt,{sx:{fontSize:64,color:"text.secondary",mb:2}}),e.jsx(a,{variant:"h6",color:"text.secondary",children:"No completed jobs yet"}),e.jsx(a,{variant:"body2",color:"text.secondary",children:"Completed jobs will appear here for review"})]}):e.jsx(Hr,{children:e.jsxs(Gr,{children:[e.jsx(Vr,{children:e.jsxs(It,{children:[e.jsx(ae,{children:e.jsx("strong",{children:"Worker & Job"})}),e.jsx(ae,{children:e.jsx("strong",{children:"Amount"})}),e.jsx(ae,{children:e.jsx("strong",{children:"Duration"})}),e.jsx(ae,{children:e.jsx("strong",{children:"Completed"})}),e.jsx(ae,{children:e.jsx("strong",{children:"Review Status"})}),e.jsx(ae,{children:e.jsx("strong",{children:"Rating"})}),e.jsx(ae,{align:"center",children:e.jsx("strong",{children:"Actions"})})]})}),e.jsx(qr,{children:F.map(J=>e.jsxs(It,{hover:!0,children:[e.jsx(ae,{children:e.jsxs(o,{display:"flex",alignItems:"center",gap:2,children:[e.jsx(we,{src:J.worker.avatar,sx:{width:40,height:40},children:J.worker.name.charAt(0)}),e.jsxs(o,{children:[e.jsx(a,{variant:"subtitle2",fontWeight:"bold",children:J.worker.name}),e.jsx(a,{variant:"body2",color:"text.secondary",noWrap:!0,children:J.title}),e.jsx(a,{variant:"caption",color:"text.secondary",children:J.worker.location})]})]})}),e.jsx(ae,{children:e.jsx(a,{variant:"subtitle2",fontWeight:"bold",color:"primary.main",children:U(J.amount)})}),e.jsx(ae,{children:e.jsx(a,{variant:"body2",children:J.duration})}),e.jsx(ae,{children:e.jsx(a,{variant:"body2",children:W(J.completedDate)})}),e.jsx(ae,{children:J.review?e.jsx(ee,{label:"Reviewed",color:"success",size:"small"}):e.jsx(ee,{label:"Pending Review",color:"warning",size:"small"})}),e.jsx(ae,{children:J.review?e.jsxs(o,{display:"flex",alignItems:"center",gap:.5,children:[e.jsx(rt,{sx:{fontSize:16,color:"gold"}}),e.jsx(a,{variant:"body2",children:J.review.rating})]}):e.jsx(a,{variant:"body2",color:"text.secondary",children:"Not rated"})}),e.jsx(ae,{align:"center",children:e.jsx(ne,{size:"small",onClick:f=>R(f,J.worker,J),children:e.jsx(Ur,{})})})]},J.id))})]})})]})}),e.jsxs(Xt,{anchorEl:x,open:!!x,onClose:K,children:[e.jsxs(Z,{onClick:()=>_("view"),children:[e.jsx(Et,{sx:{mr:1}}),"View Details"]}),y&&!y.review&&e.jsxs(Z,{onClick:()=>_("review"),children:[e.jsx(ur,{sx:{mr:1}}),"Write Review"]}),y&&y.review&&e.jsxs(Z,{onClick:()=>_("edit_review"),children:[e.jsx(ur,{sx:{mr:1}}),"Edit Review"]})]}),e.jsxs(Ee,{open:j&&C==="view",onClose:O,maxWidth:"sm",fullWidth:!0,children:[e.jsx(Me,{children:"Job Details"}),e.jsx(ze,{children:y&&u&&e.jsxs(o,{children:[e.jsxs(o,{display:"flex",alignItems:"center",gap:2,mb:3,children:[e.jsx(we,{src:u.avatar,sx:{width:64,height:64},children:u.name.charAt(0)}),e.jsxs(o,{children:[e.jsx(a,{variant:"h6",children:u.name}),e.jsxs(o,{display:"flex",alignItems:"center",gap:1,children:[e.jsx(rt,{sx:{fontSize:16,color:"gold"}}),e.jsx(a,{variant:"body2",children:u.rating})]}),e.jsx(a,{variant:"body2",color:"text.secondary",children:u.location})]})]}),e.jsx(fe,{sx:{my:2}}),e.jsxs(h,{container:!0,spacing:2,children:[e.jsx(h,{item:!0,xs:12,children:e.jsx(a,{variant:"subtitle1",fontWeight:"bold",children:y.title})}),e.jsx(h,{item:!0,xs:6,children:e.jsxs(a,{variant:"body2",color:"text.secondary",children:["Amount: ",U(y.amount)]})}),e.jsx(h,{item:!0,xs:6,children:e.jsxs(a,{variant:"body2",color:"text.secondary",children:["Duration: ",y.duration]})}),e.jsx(h,{item:!0,xs:12,children:e.jsxs(a,{variant:"body2",color:"text.secondary",children:["Completed: ",W(y.completedDate)]})})]}),y.review&&e.jsxs(e.Fragment,{children:[e.jsx(fe,{sx:{my:2}}),e.jsx(a,{variant:"subtitle1",fontWeight:"bold",gutterBottom:!0,children:"Your Review"}),e.jsxs(o,{display:"flex",alignItems:"center",gap:1,mb:1,children:[e.jsx(Qe,{value:y.review.rating,readOnly:!0,size:"small"}),e.jsxs(a,{variant:"body2",children:["(",y.review.rating,"/5)"]})]}),e.jsx(a,{variant:"body2",paragraph:!0,children:y.review.comment}),e.jsxs(a,{variant:"caption",color:"text.secondary",children:["Reviewed on ",W(y.review.reviewDate)]})]})]})}),e.jsxs(Le,{children:[e.jsx(P,{onClick:O,children:"Close"}),y&&!y.review&&e.jsx(P,{onClick:()=>_("review"),variant:"contained",children:"Write Review"})]})]}),e.jsxs(Ee,{open:j&&(C==="review"||C==="edit_review"),onClose:O,maxWidth:"sm",fullWidth:!0,children:[e.jsx(Me,{children:C==="edit_review"?"Edit Review":"Write Review"}),e.jsx(ze,{children:u&&y&&e.jsxs(o,{children:[e.jsxs(o,{display:"flex",alignItems:"center",gap:2,mb:3,children:[e.jsx(we,{src:u.avatar,children:u.name.charAt(0)}),e.jsxs(o,{children:[e.jsx(a,{variant:"h6",children:u.name}),e.jsx(a,{variant:"body2",color:"text.secondary",children:y.title})]})]}),e.jsx(fe,{sx:{my:2}}),e.jsxs(h,{container:!0,spacing:3,children:[e.jsxs(h,{item:!0,xs:12,children:[e.jsx(a,{variant:"subtitle1",fontWeight:"bold",gutterBottom:!0,children:"Overall Rating"}),e.jsx(Qe,{value:w.rating,onChange:(J,f)=>p({...w,rating:f}),size:"large"})]}),e.jsxs(h,{item:!0,xs:12,sm:6,children:[e.jsx(a,{variant:"body2",gutterBottom:!0,children:"Communication"}),e.jsx(Qe,{value:w.communication,onChange:(J,f)=>p({...w,communication:f}),size:"small"})]}),e.jsxs(h,{item:!0,xs:12,sm:6,children:[e.jsx(a,{variant:"body2",gutterBottom:!0,children:"Quality of Work"}),e.jsx(Qe,{value:w.quality,onChange:(J,f)=>p({...w,quality:f}),size:"small"})]}),e.jsxs(h,{item:!0,xs:12,sm:6,children:[e.jsx(a,{variant:"body2",gutterBottom:!0,children:"Met Deadlines"}),e.jsx(Qe,{value:w.deadline,onChange:(J,f)=>p({...w,deadline:f}),size:"small"})]}),e.jsxs(h,{item:!0,xs:12,sm:6,children:[e.jsx(a,{variant:"body2",gutterBottom:!0,children:"Professionalism"}),e.jsx(Qe,{value:w.professionalism,onChange:(J,f)=>p({...w,professionalism:f}),size:"small"})]}),e.jsx(h,{item:!0,xs:12,children:e.jsx(Q,{fullWidth:!0,multiline:!0,rows:4,label:"Review Comments",value:w.comment,onChange:J=>p({...w,comment:J.target.value}),placeholder:"Share your experience working with this professional..."})}),e.jsxs(h,{item:!0,xs:12,children:[e.jsx(a,{variant:"body2",gutterBottom:!0,children:"Would you recommend this worker?"}),e.jsxs(o,{display:"flex",gap:2,children:[e.jsx(P,{variant:w.recommend==="yes"?"contained":"outlined",onClick:()=>p({...w,recommend:"yes"}),color:"success",children:"Yes"}),e.jsx(P,{variant:w.recommend==="no"?"contained":"outlined",onClick:()=>p({...w,recommend:"no"}),color:"error",children:"No"})]})]})]})]})}),e.jsxs(Le,{children:[e.jsx(P,{onClick:O,children:"Cancel"}),e.jsx(P,{onClick:T,variant:"contained",children:C==="edit_review"?"Update Review":"Submit Review"})]})]})]})},ol=Xe.create({baseURL:yt.USER_SERVICE,timeout:3e4,headers:{"Content-Type":"application/json"}});ol.interceptors.request.use(t=>{const r=localStorage.getItem("kelmah_auth_token");return r&&(t.headers.Authorization=`Bearer ${r}`),t},t=>Promise.reject(t));const Pn={workers:[{id:"worker-1",name:"Tony Gate",avatar:"/api/placeholder/100/100",title:"Expert Carpenter & Cabinet Maker",skills:["Carpentry","Cabinet Making","Wood Finishing","Furniture Repair"],location:"Accra, Greater Accra",rating:4.8,reviewCount:23,completedJobs:45,hourlyRate:35,availability:"available",experience:"5+ years",bio:"Professional carpenter with extensive experience in custom cabinet making, furniture restoration, and wood finishing. I take pride in delivering high-quality craftsmanship.",portfolio:[{image:"/api/placeholder/200/150",title:"Custom Kitchen Cabinets"},{image:"/api/placeholder/200/150",title:"Bedroom Wardrobe"},{image:"/api/placeholder/200/150",title:"Living Room Furniture"}],certifications:["Ghana Carpentry Association","Safety Training Certificate"],languages:["English","Twi"],responseTime:"2 hours",featured:!0},{id:"worker-2",name:"Sarah Williams",avatar:"/api/placeholder/100/100",title:"Interior Designer & Space Planner",skills:["Interior Design","Space Planning","Color Consultation","Project Management"],location:"Kumasi, Ashanti",rating:4.9,reviewCount:31,completedJobs:52,hourlyRate:45,availability:"available",experience:"7+ years",bio:"Creative interior designer specializing in modern office and residential spaces. I help transform environments to maximize both aesthetics and functionality.",portfolio:[{image:"/api/placeholder/200/150",title:"Modern Office Design"},{image:"/api/placeholder/200/150",title:"Residential Living Room"},{image:"/api/placeholder/200/150",title:"Restaurant Interior"}],certifications:["Interior Design Diploma","Project Management Certificate"],languages:["English","Twi","French"],responseTime:"1 hour",featured:!0},{id:"worker-3",name:"Michael Asante",avatar:"/api/placeholder/100/100",title:"Licensed Plumber & Bathroom Specialist",skills:["Plumbing","Pipe Installation","Bathroom Design","Emergency Repairs"],location:"Tema, Greater Accra",rating:4.7,reviewCount:18,completedJobs:28,hourlyRate:40,availability:"busy",experience:"4+ years",bio:"Licensed plumber with expertise in residential and commercial plumbing systems. Specializing in bathroom renovations and emergency repair services.",portfolio:[{image:"/api/placeholder/200/150",title:"Bathroom Renovation"},{image:"/api/placeholder/200/150",title:"Pipe Installation"},{image:"/api/placeholder/200/150",title:"Kitchen Plumbing"}],certifications:["Licensed Plumber","Safety Certification"],languages:["English","Ga"],responseTime:"4 hours",featured:!1},{id:"worker-4",name:"Jennifer Osei",avatar:"/api/placeholder/100/100",title:"Certified Electrician",skills:["Electrical Installation","Wiring","Safety Inspection","Solar Systems"],location:"Takoradi, Western",rating:4.6,reviewCount:15,completedJobs:22,hourlyRate:38,availability:"available",experience:"3+ years",bio:"Certified electrician providing safe and reliable electrical services for homes and businesses. Experienced in modern electrical systems and solar installations.",portfolio:[{image:"/api/placeholder/200/150",title:"Home Wiring"},{image:"/api/placeholder/200/150",title:"Solar Installation"},{image:"/api/placeholder/200/150",title:"Commercial Electrical"}],certifications:["Electrical License","Solar Installation Certificate"],languages:["English","Twi"],responseTime:"3 hours",featured:!1},{id:"worker-5",name:"David Mensah",avatar:"/api/placeholder/100/100",title:"Professional Painter & Decorator",skills:["Interior Painting","Exterior Painting","Decorative Finishes","Surface Preparation"],location:"Cape Coast, Central",rating:4.5,reviewCount:12,completedJobs:19,hourlyRate:25,availability:"available",experience:"3+ years",bio:"Professional painter offering comprehensive painting and decorating services. Committed to delivering flawless finishes with attention to detail.",portfolio:[{image:"/api/placeholder/200/150",title:"Residential Exterior"},{image:"/api/placeholder/200/150",title:"Office Interior"},{image:"/api/placeholder/200/150",title:"Decorative Wall Art"}],certifications:["Painting Certification"],languages:["English","Fanti"],responseTime:"6 hours",featured:!1}],totalPages:2,totalWorkers:8},Xx=()=>{const t=ve(),r=Te(t.breakpoints.down("md")),[s,n]=l.useState(!1),[i,c]=l.useState(null),[d,x]=l.useState(Pn.workers),[m,u]=l.useState(Pn.totalPages),[v,y]=l.useState([]),[g,j]=l.useState(null),[b,C]=l.useState(!1),[A,w]=l.useState(!1),[p,k]=l.useState({skills:[],minRating:0,maxRate:100,location:"",availability:"all",experience:"all"}),[U,W]=l.useState(""),[R,K]=l.useState(1),_=["Carpentry","Plumbing","Electrical","Interior Design","Painting","Tiling","Landscaping","Masonry","Roofing","HVAC"],O=["Accra, Greater Accra","Kumasi, Ashanti","Tema, Greater Accra","Takoradi, Western","Cape Coast, Central","Tamale, Northern"];l.useEffect(()=>{T()},[R,p,U]);const T=async()=>{try{n(!0);const S=new URLSearchParams({page:R.toString(),search:U,...p,skills:p.skills.join(",")}),B=await ol.get(`/api/workers/search?${S}`);if(B.data)x(B.data.workers||[]),u(B.data.totalPages||1);else throw new Error("No data received");c(null)}catch(S){console.warn("User service unavailable for worker search, using mock data:",S.message);let B=Pn.workers;U&&(B=B.filter(D=>D.name.toLowerCase().includes(U.toLowerCase())||D.skills.some(N=>N.toLowerCase().includes(U.toLowerCase()))||D.title.toLowerCase().includes(U.toLowerCase()))),p.skills.length>0&&(B=B.filter(D=>p.skills.some(N=>D.skills.includes(N)))),p.location&&(B=B.filter(D=>D.location.includes(p.location))),p.availability!=="all"&&(B=B.filter(D=>D.availability===p.availability)),p.minRating>0&&(B=B.filter(D=>D.rating>=p.minRating)),B=B.filter(D=>D.hourlyRate>=0&&D.hourlyRate<=p.maxRate),x(B),u(Math.ceil(B.length/6)),c(null)}finally{n(!1)}},H=S=>new Intl.NumberFormat("en-GH",{style:"currency",currency:"GHS",minimumFractionDigits:0}).format(S),F=(S,B)=>{k(D=>({...D,[S]:B})),K(1)},V=S=>{k(B=>({...B,skills:B.skills.includes(S)?B.skills.filter(D=>D!==S):[...B.skills,S]})),K(1)},re=S=>{W(S.target.value),K(1)},z=(S,B)=>{K(B)},J=async S=>{try{console.log("Saving worker:",S),v.includes(S)?y(B=>B.filter(D=>D!==S)):y(B=>[...B,S])}catch(B){console.error("Error saving worker:",B),c("Failed to save worker")}},f=S=>{j(S),C(!0)},M=()=>{C(!1),j(null)},G=S=>{switch(S){case"available":return"success";case"busy":return"warning";case"unavailable":return"error";default:return"default"}},I=S=>{switch(S){case"available":return"Available";case"busy":return"Busy";case"unavailable":return"Unavailable";default:return S}},L={totalWorkers:d.length,availableWorkers:d.filter(S=>S.availability==="available").length,averageRating:d.length>0?(d.reduce((S,B)=>S+B.rating,0)/d.length).toFixed(1):0,averageRate:d.length>0?Math.round(d.reduce((S,B)=>S+B.hourlyRate,0)/d.length):0};return e.jsxs(o,{children:[i&&e.jsx(be,{severity:"error",sx:{mb:3},onClose:()=>c(null),children:i}),e.jsxs(h,{container:!0,spacing:3,sx:{mb:4},children:[e.jsx(h,{item:!0,xs:12,sm:6,md:3,children:e.jsx(me,{sx:{background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",color:"white",height:"100%"},children:e.jsx(ce,{children:e.jsxs(o,{display:"flex",alignItems:"center",justifyContent:"space-between",children:[e.jsxs(o,{children:[e.jsx(a,{variant:"h4",fontWeight:"bold",children:L.totalWorkers}),e.jsx(a,{variant:"body2",sx:{opacity:.9},children:"Workers Found"})]}),e.jsx(zs,{sx:{fontSize:40,opacity:.8}})]})})})}),e.jsx(h,{item:!0,xs:12,sm:6,md:3,children:e.jsx(me,{sx:{background:"linear-gradient(135deg, #43e97b 0%, #38f9d7 100%)",color:"white",height:"100%"},children:e.jsx(ce,{children:e.jsxs(o,{display:"flex",alignItems:"center",justifyContent:"space-between",children:[e.jsxs(o,{children:[e.jsx(a,{variant:"h4",fontWeight:"bold",children:L.availableWorkers}),e.jsx(a,{variant:"body2",sx:{opacity:.9},children:"Available Now"})]}),e.jsx(tt,{sx:{fontSize:40,opacity:.8}})]})})})}),e.jsx(h,{item:!0,xs:12,sm:6,md:3,children:e.jsx(me,{sx:{background:"linear-gradient(135deg, #f093fb 0%, #f5576c 100%)",color:"white",height:"100%"},children:e.jsx(ce,{children:e.jsxs(o,{display:"flex",alignItems:"center",justifyContent:"space-between",children:[e.jsxs(o,{children:[e.jsxs(a,{variant:"h4",fontWeight:"bold",children:[L.averageRating,"★"]}),e.jsx(a,{variant:"body2",sx:{opacity:.9},children:"Average Rating"})]}),e.jsx(cr,{sx:{fontSize:40,opacity:.8}})]})})})}),e.jsx(h,{item:!0,xs:12,sm:6,md:3,children:e.jsx(me,{sx:{background:"linear-gradient(135deg, #4facfe 0%, #00f2fe 100%)",color:"white",height:"100%"},children:e.jsx(ce,{children:e.jsxs(o,{display:"flex",alignItems:"center",justifyContent:"space-between",children:[e.jsxs(o,{children:[e.jsxs(a,{variant:"h4",fontWeight:"bold",children:["₵",L.averageRate]}),e.jsx(a,{variant:"body2",sx:{opacity:.9},children:"Average Rate/Hr"})]}),e.jsx(ct,{sx:{fontSize:40,opacity:.8}})]})})})})]}),e.jsx(me,{sx:{mb:4},children:e.jsxs(ce,{children:[e.jsxs(h,{container:!0,spacing:3,alignItems:"center",children:[e.jsx(h,{item:!0,xs:12,md:6,children:e.jsx(Q,{fullWidth:!0,placeholder:"Search workers by name, skills, or title...",value:U,onChange:re,InputProps:{startAdornment:e.jsx(dt,{sx:{mr:1,color:"text.secondary"}})}})}),e.jsx(h,{item:!0,xs:12,md:6,children:e.jsxs(o,{display:"flex",gap:2,alignItems:"center",children:[e.jsx(P,{variant:"outlined",startIcon:e.jsx(Ha,{}),onClick:()=>w(!A),fullWidth:r,children:"Filters"}),(p.skills.length>0||p.location||p.availability!=="all")&&e.jsx(P,{size:"small",onClick:()=>k({skills:[],minRating:0,maxRate:100,location:"",availability:"all",experience:"all"}),children:"Clear"})]})})]}),e.jsxs(ks,{expanded:A,onChange:()=>w(!A),children:[e.jsx(Ss,{expandIcon:e.jsx(nr,{}),children:e.jsx(a,{variant:"subtitle1",fontWeight:"bold",children:"Advanced Filters"})}),e.jsx(As,{children:e.jsxs(h,{container:!0,spacing:3,children:[e.jsxs(h,{item:!0,xs:12,md:6,children:[e.jsx(a,{variant:"subtitle2",gutterBottom:!0,children:"Skills"}),e.jsx(o,{display:"flex",gap:1,flexWrap:"wrap",children:_.map(S=>e.jsx(ee,{label:S,onClick:()=>V(S),color:p.skills.includes(S)?"primary":"default",variant:p.skills.includes(S)?"filled":"outlined",size:"small"},S))})]}),e.jsxs(h,{item:!0,xs:12,md:6,children:[e.jsx(a,{variant:"subtitle2",gutterBottom:!0,children:"Location"}),e.jsx(Ne,{fullWidth:!0,size:"small",children:e.jsxs(Ge,{value:p.location,onChange:S=>F("location",S.target.value),displayEmpty:!0,children:[e.jsx(Z,{value:"",children:"All Locations"}),O.map(S=>e.jsx(Z,{value:S,children:S},S))]})})]}),e.jsxs(h,{item:!0,xs:12,md:4,children:[e.jsx(a,{variant:"subtitle2",gutterBottom:!0,children:"Availability"}),e.jsx(Ne,{fullWidth:!0,size:"small",children:e.jsxs(Ge,{value:p.availability,onChange:S=>F("availability",S.target.value),children:[e.jsx(Z,{value:"all",children:"All"}),e.jsx(Z,{value:"available",children:"Available"}),e.jsx(Z,{value:"busy",children:"Busy"})]})})]}),e.jsxs(h,{item:!0,xs:12,md:4,children:[e.jsx(a,{variant:"subtitle2",gutterBottom:!0,children:"Minimum Rating"}),e.jsx(Yr,{value:p.minRating,onChange:(S,B)=>F("minRating",B),min:0,max:5,step:.5,marks:!0,valueLabelDisplay:"auto"})]}),e.jsxs(h,{item:!0,xs:12,md:4,children:[e.jsxs(a,{variant:"subtitle2",gutterBottom:!0,children:["Max Hourly Rate (₵",p.maxRate,")"]}),e.jsx(Yr,{value:p.maxRate,onChange:(S,B)=>F("maxRate",B),min:0,max:100,step:5,valueLabelDisplay:"auto"})]})]})})]})]})}),s?e.jsx(h,{container:!0,spacing:3,children:[...Array(6)].map((S,B)=>e.jsx(h,{item:!0,xs:12,sm:6,md:4,children:e.jsx(me,{children:e.jsxs(ce,{children:[e.jsxs(o,{display:"flex",alignItems:"center",gap:2,mb:2,children:[e.jsx(ie,{variant:"circular",width:64,height:64}),e.jsxs(o,{flex:1,children:[e.jsx(ie,{variant:"text",height:30,width:"80%"}),e.jsx(ie,{variant:"text",height:20,width:"60%"})]})]}),e.jsx(ie,{variant:"text",height:60}),e.jsx(ie,{variant:"rectangular",height:40,sx:{mt:2}})]})})},B))}):d.length===0?e.jsx(me,{children:e.jsx(ce,{children:e.jsxs(o,{textAlign:"center",py:4,children:[e.jsx(dt,{sx:{fontSize:64,color:"text.secondary",mb:2}}),e.jsx(a,{variant:"h6",color:"text.secondary",children:"No workers found"}),e.jsx(a,{variant:"body2",color:"text.secondary",children:"Try adjusting your search criteria or filters"})]})})}):e.jsxs(e.Fragment,{children:[e.jsx(h,{container:!0,spacing:3,children:d.map(S=>e.jsx(h,{item:!0,xs:12,sm:6,md:4,children:e.jsxs(me,{sx:{height:"100%",display:"flex",flexDirection:"column",position:"relative",border:S.featured?2:1,borderColor:S.featured?"primary.main":"grey.200","&:hover":{transform:"translateY(-4px)",boxShadow:4,transition:"all 0.3s ease"}},children:[S.featured&&e.jsx(ee,{label:"Featured",color:"primary",size:"small",sx:{position:"absolute",top:16,right:16,zIndex:1}}),e.jsxs(ce,{sx:{flexGrow:1},children:[e.jsxs(o,{display:"flex",alignItems:"center",gap:2,mb:2,children:[e.jsx(we,{src:S.avatar,sx:{width:64,height:64},children:S.name.charAt(0)}),e.jsxs(o,{flex:1,children:[e.jsx(a,{variant:"h6",fontWeight:"bold",children:S.name}),e.jsx(a,{variant:"body2",color:"text.secondary",noWrap:!0,children:S.title}),e.jsxs(o,{display:"flex",alignItems:"center",gap:.5,mt:.5,children:[e.jsx(nt,{sx:{fontSize:16,color:"text.secondary"}}),e.jsx(a,{variant:"caption",color:"text.secondary",children:S.location})]})]})]}),e.jsxs(o,{display:"flex",alignItems:"center",justifyContent:"space-between",mb:2,children:[e.jsxs(o,{display:"flex",alignItems:"center",gap:.5,children:[e.jsx(Qe,{value:S.rating,readOnly:!0,size:"small"}),e.jsxs(a,{variant:"body2",children:[S.rating," (",S.reviewCount,")"]})]}),e.jsx(ee,{label:I(S.availability),color:G(S.availability),size:"small"})]}),e.jsx(a,{variant:"subtitle2",gutterBottom:!0,children:"Skills"}),e.jsxs(o,{display:"flex",gap:.5,flexWrap:"wrap",mb:2,children:[S.skills.slice(0,3).map((B,D)=>e.jsx(ee,{label:B,size:"small",variant:"outlined"},D)),S.skills.length>3&&e.jsx(ee,{label:`+${S.skills.length-3} more`,size:"small",variant:"outlined",color:"primary"})]}),e.jsxs(h,{container:!0,spacing:2,sx:{mb:2},children:[e.jsxs(h,{item:!0,xs:6,children:[e.jsx(a,{variant:"caption",color:"text.secondary",children:"Hourly Rate"}),e.jsxs(a,{variant:"subtitle1",fontWeight:"bold",color:"primary.main",children:[H(S.hourlyRate),"/hr"]})]}),e.jsxs(h,{item:!0,xs:6,children:[e.jsx(a,{variant:"caption",color:"text.secondary",children:"Experience"}),e.jsx(a,{variant:"subtitle1",fontWeight:"bold",children:S.experience})]})]}),e.jsxs(a,{variant:"body2",color:"text.secondary",sx:{mb:2},children:[S.bio.substring(0,120),"..."]}),e.jsxs(o,{display:"flex",gap:1,children:[e.jsx(P,{variant:"contained",size:"small",startIcon:e.jsx(Ot,{}),sx:{flex:1},children:"Message"}),e.jsx(P,{variant:"outlined",size:"small",startIcon:e.jsx(Et,{}),onClick:()=>f(S),children:"View"}),e.jsx(ne,{size:"small",onClick:()=>J(S.id),color:v.includes(S.id)?"primary":"default",children:v.includes(S.id)?e.jsx(Kt,{}):e.jsx(or,{})})]})]})]})},S.id))}),m>1&&e.jsx(o,{display:"flex",justifyContent:"center",mt:4,children:e.jsx(Gt,{count:m,page:R,onChange:z,color:"primary",size:r?"small":"medium"})})]}),e.jsxs(Ee,{open:b,onClose:M,maxWidth:"md",fullWidth:!0,children:[e.jsx(Me,{children:e.jsx(o,{display:"flex",alignItems:"center",gap:2,children:g&&e.jsxs(e.Fragment,{children:[e.jsx(we,{src:g.avatar,sx:{width:56,height:56},children:g.name.charAt(0)}),e.jsxs(o,{children:[e.jsx(a,{variant:"h6",children:g.name}),e.jsx(a,{variant:"body2",color:"text.secondary",children:g.title})]})]})})}),e.jsx(ze,{children:g&&e.jsxs(o,{children:[e.jsxs(h,{container:!0,spacing:3,sx:{mb:3},children:[e.jsxs(h,{item:!0,xs:6,sm:3,children:[e.jsx(a,{variant:"caption",color:"text.secondary",children:"Rating"}),e.jsxs(o,{display:"flex",alignItems:"center",gap:.5,children:[e.jsx(rt,{sx:{fontSize:20,color:"gold"}}),e.jsx(a,{variant:"h6",children:g.rating}),e.jsxs(a,{variant:"body2",color:"text.secondary",children:["(",g.reviewCount,")"]})]})]}),e.jsxs(h,{item:!0,xs:6,sm:3,children:[e.jsx(a,{variant:"caption",color:"text.secondary",children:"Completed Jobs"}),e.jsx(a,{variant:"h6",children:g.completedJobs})]}),e.jsxs(h,{item:!0,xs:6,sm:3,children:[e.jsx(a,{variant:"caption",color:"text.secondary",children:"Response Time"}),e.jsx(a,{variant:"h6",children:g.responseTime})]}),e.jsxs(h,{item:!0,xs:6,sm:3,children:[e.jsx(a,{variant:"caption",color:"text.secondary",children:"Hourly Rate"}),e.jsx(a,{variant:"h6",color:"primary.main",children:H(g.hourlyRate)})]})]}),e.jsx(fe,{sx:{my:2}}),e.jsx(a,{variant:"subtitle1",fontWeight:"bold",gutterBottom:!0,children:"About"}),e.jsx(a,{variant:"body2",paragraph:!0,children:g.bio}),e.jsx(a,{variant:"subtitle1",fontWeight:"bold",gutterBottom:!0,children:"Skills & Expertise"}),e.jsx(o,{display:"flex",gap:1,flexWrap:"wrap",mb:3,children:g.skills.map((S,B)=>e.jsx(ee,{label:S,color:"primary",variant:"outlined"},B))}),e.jsx(a,{variant:"subtitle1",fontWeight:"bold",gutterBottom:!0,children:"Certifications"}),e.jsx(o,{mb:3,children:g.certifications.map((S,B)=>e.jsxs(a,{variant:"body2",gutterBottom:!0,children:["• ",S]},B))}),e.jsx(a,{variant:"subtitle1",fontWeight:"bold",gutterBottom:!0,children:"Languages"}),e.jsx(a,{variant:"body2",paragraph:!0,children:g.languages.join(", ")}),e.jsx(a,{variant:"subtitle1",fontWeight:"bold",gutterBottom:!0,children:"Portfolio"}),e.jsx(h,{container:!0,spacing:2,children:g.portfolio.map((S,B)=>e.jsx(h,{item:!0,xs:4,children:e.jsx(se,{sx:{height:120,backgroundImage:`url(${S.image})`,backgroundSize:"cover",backgroundPosition:"center",position:"relative",borderRadius:2},children:e.jsx(o,{sx:{position:"absolute",bottom:0,left:0,right:0,background:"linear-gradient(transparent, rgba(0,0,0,0.7))",color:"white",p:1,borderRadius:"0 0 8px 8px"},children:e.jsx(a,{variant:"caption",children:S.title})})})},B))})]})}),e.jsxs(Le,{children:[e.jsx(P,{onClick:M,children:"Close"}),e.jsx(P,{variant:"outlined",startIcon:g&&v.includes(g.id)?e.jsx(Kt,{}):e.jsx(or,{}),onClick:()=>g&&J(g.id),children:g&&v.includes(g.id)?"Saved":"Save Worker"}),e.jsx(P,{variant:"contained",startIcon:e.jsx(Ot,{}),children:"Send Message"})]})]})]})},Mr=({icon:t,label:r,...s})=>e.jsx(Ce,{icon:t,label:r,sx:{minHeight:72,color:"text.secondary","&.Mui-selected":{color:"secondary.main",fontWeight:600},"& .MuiTab-iconWrapper":{marginBottom:.5},textTransform:"none",fontSize:"0.9rem",transition:"all 0.3s ease"},...s});function zr(t){const{children:r,value:s,index:n,...i}=t;return e.jsx("div",{role:"tabpanel",hidden:s!==n,id:`hirer-dashboard-tabpanel-${n}`,"aria-labelledby":`hirer-dashboard-tab-${n}`,...i,children:s===n&&e.jsx(se,{elevation:2,sx:{p:3,mt:2,bgcolor:"background.paper"},children:r})})}const da=({icon:t,iconColor:r,title:s,value:n,secondaryLabel:i,secondaryValue:c,secondaryComponent:d,actionText:x,actionIcon:m,actionHandler:u,actionColor:v="primary",...y})=>(ve(),e.jsxs(me,{elevation:3,sx:{height:"100%",position:"relative",overflow:"visible",borderRadius:3,backgroundColor:"background.paper",borderLeft:"4px solid "+r,transition:"transform 0.3s ease, box-shadow 0.3s ease","&:hover":{transform:"translateY(-5px)",boxShadow:"0 12px 20px rgba(0,0,0,0.15)"},...y.sx},...y,children:[e.jsx(o,{sx:{position:"absolute",top:-20,left:20,width:60,height:60,borderRadius:"50%",bgcolor:r||"primary.main",display:"flex",alignItems:"center",justifyContent:"center",boxShadow:"0px 6px 15px rgba(0, 0, 0, 0.2)",border:"4px solid #1a1a1a",zIndex:1},children:t}),e.jsxs(ce,{sx:{pt:6,pb:3,px:3},children:[e.jsx(a,{variant:"h6",color:"text.secondary",gutterBottom:!0,children:s}),e.jsx(a,{variant:"h3",fontWeight:700,sx:{mb:2},children:n}),(i||d)&&e.jsxs(o,{sx:{mt:2,mb:2},children:[i&&e.jsx(a,{variant:"body2",color:"text.secondary",gutterBottom:!0,children:i}),d||e.jsx(a,{variant:"h6",fontWeight:600,children:c})]}),x&&e.jsx(P,{variant:"contained",color:v,endIcon:m||e.jsx(ti,{}),onClick:u,sx:{mt:2,width:"100%",borderRadius:2},children:x})]})]})),Qx=({children:t,elevation:r=3,...s})=>e.jsx(se,{elevation:r,sx:{borderRadius:3,overflow:"hidden",...s.sx},...s,children:t}),ll=()=>{var T,H;const t=ve(),r=Oe(),s=ot(),n=Te(t.breakpoints.down("md")),[i,c]=l.useState(0),[d,x]=l.useState(null),[m,u]=l.useState(!1),[v,y]=l.useState(Date.now()),g=je(F=>F.auth.user),j=je(F=>F.hirer.profile),b=je(Or("active")),C=je(Or("completed")),A=je(F=>F.hirer.applications),w=je(F=>F.hirer.payments),p=je(gs("profile"));je(Ya("profile"));const k=je(Cu),U=()=>e.jsx(h,{container:!0,spacing:3,children:[...Array(4)].map((F,V)=>e.jsx(h,{item:!0,xs:12,sm:6,md:3,children:e.jsx(ie,{variant:"rounded",height:180,animation:"wave"})},V))});l.useEffect(()=>{(async()=>{try{if(x(null),await Promise.all([s(Ws()).unwrap(),s(_t("active")).unwrap(),s(_t("completed")).unwrap()]),b){const V=b.map(re=>s(Ts({jobId:re.id,status:"pending"})).unwrap());await Promise.all(V)}}catch(V){console.error("Error fetching hirer data:",V),x("Failed to load hirer data. Please try again.")}})()},[s,b]);const W=async()=>{if(!m){u(!0);try{if(await Promise.all([s(Ws()).unwrap(),s(_t("active")).unwrap(),s(_t("completed")).unwrap()]),b){const F=b.map(V=>s(Ts({jobId:V.id,status:"pending"})).unwrap());await Promise.all(F)}}catch(F){console.error("Error refreshing data:",F),x("Failed to refresh data. Please try again.")}finally{u(!1),y(Date.now())}}},R=(F,V)=>{c(V)},K=Object.values(A).reduce((F,V)=>{var re;return F+(((re=V.pending)==null?void 0:re.length)||0)},0),_={activeJobs:(b==null?void 0:b.length)||0,pendingProposals:K,completedJobs:(C==null?void 0:C.length)||0,totalSpent:(j==null?void 0:j.totalSpent)||0,pendingPayments:((T=w==null?void 0:w.pending)==null?void 0:T.length)||0,activeWorkers:(j==null?void 0:j.activeWorkers)||[]},O=()=>{var F,V,re,z,J,f;return e.jsx(qn,{in:!0,timeout:500,children:e.jsxs(h,{container:!0,spacing:3,children:[e.jsx(h,{item:!0,xs:12,children:e.jsx(se,{elevation:4,sx:{p:{xs:2,md:4},textAlign:{xs:"center",md:"left"},backgroundColor:"rgba(255,255,255,0.05)",borderRadius:2,mb:4,border:"1px solid rgba(255,215,0,0.2)",boxShadow:"0 15px 35px rgba(0,0,0,0.15), 0 5px 15px rgba(0,0,0,0.1)",position:"relative",overflow:"hidden","&::after":{content:'""',position:"absolute",top:0,left:0,width:"100%",height:"100%",backgroundImage:"radial-gradient(circle at 20% 30%, rgba(255,215,0,0.07) 0%, transparent 60%)",zIndex:0}},children:e.jsx(o,{sx:{position:"relative",zIndex:1},children:e.jsxs(o,{sx:{display:"flex",flexDirection:{xs:"column",md:"row"},alignItems:{xs:"center",md:"center"},justifyContent:{xs:"center",md:"space-between"},flexWrap:"wrap",gap:2},children:[e.jsxs(o,{children:[e.jsxs(a,{variant:"h3",gutterBottom:!0,fontWeight:700,sx:{color:"#FFD700",textShadow:"0px 2px 4px rgba(0,0,0,0.4)",fontSize:{xs:"1.8rem",sm:"2.2rem",md:"2.5rem"}},children:["Welcome back,"," ",(j==null?void 0:j.firstName)||(g==null?void 0:g.firstName)||"Hirer","!"]}),e.jsx(a,{variant:"h6",color:"white",sx:{opacity:.9,fontWeight:400,maxWidth:"90%",lineHeight:1.5},children:"Manage your jobs, review proposals, and track progress"})]}),e.jsxs(te,{direction:"row",spacing:2,sx:{overflowX:"auto",scrollSnapType:"x mandatory",WebkitOverflowScrolling:"touch","&::-webkit-scrollbar":{display:"none"},flexWrap:{xs:"nowrap",sm:"wrap"},justifyContent:{xs:"flex-start",md:"flex-end"},width:"100%",mt:{xs:2,md:0},py:{xs:1,md:0},px:{xs:1,md:0}},children:[e.jsxs(o,{sx:{scrollSnapAlign:"start",textAlign:"center",px:3,py:1.5,borderRadius:3,bgcolor:"rgba(255,215,0,0.1)",border:"1px solid rgba(255,215,0,0.3)",minWidth:120,transition:"all 0.3s ease","&:hover":{transform:"translateY(-5px)",boxShadow:"0 10px 20px rgba(0,0,0,0.2)"}},children:[e.jsx(a,{variant:"h4",fontWeight:700,color:"secondary.main",children:_.activeJobs}),e.jsx(a,{variant:"body2",color:"text.primary",children:"Active Jobs"})]}),e.jsxs(o,{sx:{scrollSnapAlign:"start",textAlign:"center",px:3,py:1.5,borderRadius:3,bgcolor:"rgba(255,255,255,0.05)",border:"1px solid rgba(255,255,255,0.1)",minWidth:120,transition:"all 0.3s ease","&:hover":{transform:"translateY(-5px)",boxShadow:"0 10px 20px rgba(0,0,0,0.2)"}},children:[e.jsx(a,{variant:"h4",fontWeight:700,color:"text.primary",children:((F=_.activeWorkers)==null?void 0:F.length)||0}),e.jsx(a,{variant:"body2",color:"text.primary",children:"Active Workers"})]}),e.jsxs(o,{sx:{scrollSnapAlign:"start",textAlign:"center",px:3,py:1.5,borderRadius:3,bgcolor:"rgba(76,175,80,0.05)",border:"1px solid rgba(76,175,80,0.3)",minWidth:120,transition:"all 0.3s ease","&:hover":{transform:"translateY(-5px)",boxShadow:"0 10px 20px rgba(0,0,0,0.2)"}},children:[e.jsxs(a,{variant:"h4",fontWeight:700,color:"success.main",children:["$",((V=_.totalSpent)==null?void 0:V.toLocaleString())||0]}),e.jsx(a,{variant:"body2",color:"text.primary",children:"Total Spent"})]})]})]})})})}),e.jsx(h,{item:!0,xs:12,md:8,children:e.jsxs(h,{container:!0,spacing:3,children:[e.jsx(h,{item:!0,xs:12,sm:6,children:e.jsx(da,{icon:e.jsx(tt,{sx:{fontSize:30,color:"primary.contrastText"}}),iconColor:"primary.main",title:"Active Jobs",value:_.activeJobs,secondaryLabel:"Pending applications",secondaryComponent:e.jsxs(o,{sx:{display:"flex",alignItems:"space-between"},children:[e.jsx(a,{variant:"h6",fontWeight:600,children:_.pendingProposals}),e.jsx(ee,{label:"Waiting for review",size:"small",color:"warning",sx:{borderRadius:1.5}})]}),actionText:"Manage Jobs",actionHandler:()=>c(1)})}),e.jsx(h,{item:!0,xs:12,sm:6,children:e.jsx(da,{icon:e.jsx(Ve,{sx:{fontSize:30,color:"success.contrastText"}}),iconColor:"success.main",title:"Completed Jobs",value:(C==null?void 0:C.length)||0,secondaryLabel:"Success rate",secondaryComponent:e.jsxs(o,{sx:{display:"flex",alignItems:"center",mt:1},children:[e.jsx(o,{sx:{flexGrow:1,mr:1},children:e.jsx(lr,{variant:"determinate",value:(j==null?void 0:j.completionRate)||100,color:"success",sx:{height:8,borderRadius:4,bgcolor:"rgba(76,175,80,0.1)"}})}),e.jsxs(a,{variant:"body2",fontWeight:600,color:"success.main",children:[(j==null?void 0:j.completionRate)||100,"%"]})]}),actionText:"View History",actionColor:"success",actionHandler:()=>c(2)})}),e.jsx(h,{item:!0,xs:12,sm:6,children:e.jsx(da,{icon:e.jsx(ja,{sx:{fontSize:30,color:"secondary.contrastText"}}),iconColor:"secondary.main",title:"Worker Management",value:((re=j==null?void 0:j.activeWorkers)==null?void 0:re.length)||0,secondaryLabel:"Average worker rating",secondaryComponent:e.jsxs(o,{sx:{display:"flex",alignItems:"center"},children:[e.jsx(Qe,{value:(j==null?void 0:j.averageWorkerRating)||0,readOnly:!0,precision:.5,size:"medium",sx:{color:"#FFD700"}}),e.jsx(a,{variant:"body1",fontWeight:600,sx:{ml:1},children:((z=j==null?void 0:j.averageWorkerRating)==null?void 0:z.toFixed(1))||0})]}),actionText:"Manage Workers",actionColor:"secondary",actionHandler:()=>c(3)})}),e.jsx(h,{item:!0,xs:12,sm:6,children:e.jsx(da,{icon:e.jsx(sa,{sx:{fontSize:30,color:"white"}}),iconColor:"info.main",title:"Financial Overview",value:e.jsxs(o,{sx:{display:"flex",alignItems:"baseline"},children:[e.jsx(o,{component:"span",sx:{fontSize:"1.5rem",mr:.5},children:"$"}),((J=j==null?void 0:j.totalSpent)==null?void 0:J.toLocaleString())||0]}),secondaryLabel:"Current budget",secondaryValue:e.jsxs(a,{variant:"h6",fontWeight:600,color:"info.main",children:["$",((f=j==null?void 0:j.currentBudget)==null?void 0:f.toLocaleString())||0," ","available"]}),actionText:"Financial Reports",actionColor:"info",actionHandler:()=>c(4)})})]})}),e.jsx(h,{item:!0,xs:12,md:4,children:e.jsx(Qx,{elevation:3,sx:{height:"100%"},children:e.jsxs(ce,{sx:{p:0,height:"100%",display:"flex",flexDirection:"column"},children:[e.jsx(o,{sx:{bgcolor:"background.dark",color:"white",py:2,px:3,background:"linear-gradient(90deg, #1a1a1a 0%, #222222 100%)",borderBottom:"1px solid rgba(255,215,0,0.2)"},children:e.jsx(a,{variant:"h6",fontWeight:600,children:"Recent Activity"})}),e.jsx(o,{sx:{flexGrow:1,overflow:"auto"},children:e.jsx(Ke,{sx:{py:0},children:j!=null&&j.recentActivity&&j.recentActivity.length>0?j.recentActivity.slice(0,5).map((M,G)=>e.jsxs(Rt.Fragment,{children:[e.jsxs(Be,{alignItems:"flex-start",sx:{px:3,py:2,transition:"all 0.2s ease","&:hover":{bgcolor:"rgba(255,215,0,0.03)"}},children:[e.jsx(Vs,{children:e.jsx(we,{sx:{bgcolor:M.type==="job_posted"?"primary.main":M.type==="worker_hired"?"secondary.main":M.type==="payment"?"success.main":"info.main",boxShadow:"0 4px 8px rgba(0,0,0,0.1)"},children:M.type==="job_posted"?e.jsx(tt,{}):M.type==="worker_hired"?e.jsx(ja,{}):M.type==="payment"?e.jsx(sa,{}):e.jsx(yr,{})})}),e.jsx(Ie,{primary:e.jsx(a,{variant:"subtitle1",fontWeight:600,children:M.title}),secondary:e.jsxs(Rt.Fragment,{children:[e.jsx(a,{sx:{display:"block",mt:.5,mb:.5},component:"span",variant:"body2",color:"text.primary",children:M.description}),e.jsx(a,{component:"span",variant:"body2",color:"text.secondary",children:new Date(M.date).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"})})]})})]}),G<j.recentActivity.slice(0,5).length-1&&e.jsx(fe,{component:"li",sx:{opacity:.6}})]},G)):e.jsxs(Be,{sx:{px:3,py:4,display:"flex",flexDirection:"column",alignItems:"center"},children:[e.jsx(yr,{sx:{fontSize:40,color:"text.disabled",mb:2,opacity:.4}}),e.jsx(Ie,{primary:e.jsx(a,{align:"center",variant:"subtitle1",color:"text.secondary",gutterBottom:!0,children:"No recent activity"}),secondary:e.jsx(a,{align:"center",variant:"body2",color:"text.disabled",children:"Your activities will appear here"})})]})})}),e.jsx(o,{sx:{p:2,textAlign:"center",borderTop:"1px solid rgba(0,0,0,0.05)"},children:e.jsxs(P,{startIcon:e.jsx(yr,{}),onClick:()=>r("/notifications"),variant:"text",color:"secondary",sx:{py:1,fontWeight:600,"&:hover":{backgroundColor:"rgba(255,215,0,0.05)"}},children:["View All Notifications",k>0&&e.jsx(mt,{color:"error",badgeContent:k,sx:{ml:1}})]})})]})})})]})})};return p?e.jsxs(o,{sx:{display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",height:"80vh"},children:[e.jsx(Ae,{sx:{mb:2,color:"secondary.main"}}),e.jsx(a,{variant:"body1",color:"text.secondary",children:"Loading your dashboard..."})]}):e.jsx(Ga,{in:!0,timeout:500,children:e.jsxs(o,{children:[e.jsx(Fr,{children:e.jsx("title",{children:"Hirer Dashboard | Kelmah"})}),e.jsxs(o,{sx:{display:"flex",alignItems:"center",justifyContent:"space-between",px:4,py:2,background:"linear-gradient(135deg, #1a1a1a 0%, #2c2c2c 100%)",boxShadow:3},children:[e.jsxs(o,{sx:{display:"flex",alignItems:"center",gap:2},children:[e.jsx(we,{src:g==null?void 0:g.profileImage,alt:g==null?void 0:g.firstName,sx:{width:48,height:48,bgcolor:"primary.main",fontWeight:700,boxShadow:3},children:((H=g==null?void 0:g.firstName)==null?void 0:H[0])||"U"}),e.jsxs(o,{children:[e.jsxs(a,{variant:"h5",fontWeight:700,color:"secondary.main",children:["Welcome back, ",(g==null?void 0:g.firstName)||(g==null?void 0:g.name)||"Hirer","!"]}),e.jsx(a,{variant:"body2",color:"text.primary",children:"Here's your hirer dashboard. Manage your jobs and talent!"})]})]}),e.jsxs(o,{sx:{display:"flex",alignItems:"center",gap:1},children:[e.jsx(xe,{title:"Refresh Dashboard",children:e.jsx(ne,{onClick:W,color:"secondary",children:e.jsx(Jr,{})})}),e.jsxs(a,{variant:"caption",color:"text.secondary",sx:{ml:1},children:["Last updated:"," ",new Date(v).toLocaleTimeString(void 0,{hour:"2-digit",minute:"2-digit"})]}),e.jsx(xe,{title:"View Notifications",children:e.jsx(ne,{onClick:()=>r("/notifications"),color:"secondary",children:e.jsx(mt,{badgeContent:k,color:"error",children:e.jsx(yr,{})})})})]})]}),e.jsxs(Ys,{"aria-label":"breadcrumb",sx:{px:4,pt:1,color:"text.secondary"},children:[e.jsx(et,{component:Fe,to:"/",color:"inherit",underline:"hover",children:"Home"}),e.jsx(a,{color:"text.primary",children:"Dashboard"})]}),e.jsxs(ye,{maxWidth:!1,disableGutters:!0,sx:{py:4,px:{xs:2,sm:3,md:4},bgcolor:"background.default",color:"text.primary"},children:[d&&e.jsx(be,{severity:"error",sx:{mb:3},children:d}),e.jsx(o,{sx:{borderBottom:1,borderColor:"divider",mb:3},children:e.jsxs($t,{value:i,onChange:R,variant:n?"scrollable":"fullWidth",scrollButtons:"auto",textColor:"inherit",TabIndicatorProps:{style:{backgroundColor:"#FFD700"}},children:[e.jsx(Mr,{icon:e.jsx(co,{}),label:"Overview"}),e.jsx(Mr,{icon:e.jsx(tt,{}),label:"Jobs"}),e.jsx(Mr,{icon:e.jsx(mt,{badgeContent:_.pendingProposals,color:"warning",children:e.jsx(Bs,{})}),label:"Proposals"}),e.jsx(Mr,{icon:e.jsx(mt,{badgeContent:_.pendingPayments,color:"info",children:e.jsx(sa,{})}),label:"Payments"}),e.jsx(Mr,{icon:e.jsx(bo,{}),label:"Progress"}),e.jsx(Mr,{icon:e.jsx(rt,{}),label:"Reviews"}),e.jsx(Mr,{icon:e.jsx(dt,{}),label:"Find Talent"})]})}),e.jsx(zr,{value:i,index:0,children:p?e.jsx(U,{}):O()}),e.jsx(zr,{value:i,index:1,children:e.jsx(Hx,{})}),e.jsx(zr,{value:i,index:2,children:e.jsx(Vx,{})}),e.jsx(zr,{value:i,index:3,children:e.jsx(Gx,{})}),e.jsx(zr,{value:i,index:4,children:e.jsx(Yx,{})}),e.jsx(zr,{value:i,index:5,children:e.jsx(Kx,{})}),e.jsx(zr,{value:i,index:6,children:e.jsx(Xx,{})})]}),e.jsxs(Zn,{ariaLabel:"Quick Actions",sx:{position:"fixed",bottom:32,right:32,zIndex:F=>F.zIndex.tooltip},icon:e.jsx(ei,{openIcon:e.jsx(Dt,{})}),children:[e.jsx(ir,{icon:e.jsx(Dt,{}),tooltipTitle:"Post New Job",onClick:()=>r("/hirer/jobs/post")}),e.jsx(ir,{icon:e.jsx(ja,{}),tooltipTitle:"Find Talent",onClick:()=>r("/hirer/find-talent")}),e.jsx(ir,{icon:e.jsx(Ot,{}),tooltipTitle:"Messages",onClick:()=>r("/messages")}),e.jsx(ir,{icon:e.jsx(sa,{}),tooltipTitle:"Payments",onClick:()=>r("/payments")})]})]})})},Zx=()=>{const t=ot(),r=ve(),s=Te(r.breakpoints.down("sm")),{user:n,loading:i}=ut(),{loading:c,error:d}=je(m=>m.dashboard);if(l.useEffect(()=>{t(is())},[t]),i||c)return e.jsx(Zo,{message:"Loading your dashboard..."});if(d)return e.jsxs(o,{sx:{p:3,textAlign:"center"},children:[e.jsx(a,{variant:"h6",color:"error",gutterBottom:!0,children:"There was a problem loading your dashboard"}),e.jsx(a,{variant:"body1",children:d})]});const x=()=>{if(!n)return e.jsx(o,{sx:{p:3,textAlign:"center"},children:e.jsx(a,{variant:"h6",color:"error",children:"Authentication required to view dashboard"})});const m=n.role||n.userType||"worker";switch(m){case"worker":return e.jsx(al,{user:n});case"hirer":return e.jsx(ll,{user:n});case"admin":return e.jsxs(o,{sx:{p:3,textAlign:"center"},children:[e.jsx(a,{variant:"h5",gutterBottom:!0,children:"Admin Dashboard"}),e.jsx(a,{variant:"body1",children:"Admin dashboard is available in the admin section."})]});default:return e.jsx(o,{sx:{p:3,textAlign:"center"},children:e.jsxs(a,{variant:"h6",color:"error",children:["Unknown user role: ",m]})})}};return e.jsxs(o,{sx:{flexGrow:1,padding:s?2:3},children:[e.jsxs(se,{elevation:2,sx:{p:3,mb:3,borderRadius:2,background:"rgba(25, 25, 25, 0.8)",backdropFilter:"blur(10px)",borderLeft:"4px solid #FFD700"},children:[e.jsxs(a,{variant:"h4",gutterBottom:!0,sx:{color:"#FFF"},children:["Welcome back, ",(n==null?void 0:n.firstName)||"User","!"]}),e.jsx(a,{variant:"body1",sx:{color:"text.secondary"},children:"Here's an overview of your activities and important information."})]}),e.jsx(h,{container:!0,spacing:3,children:e.jsx(h,{item:!0,xs:12,children:x()})})]})},Je="/api/workers",Ht={getWorkers:(t={})=>pe.get(Je,{params:t}),getWorkerById:t=>pe.get(`${Je}/${t}`),getWorkerReviews:(t,r={})=>pe.get(`${Je}/${t}/reviews`,{params:r}),submitReview:(t,r)=>pe.post(`${Je}/${t}/reviews`,r),updateWorkerProfile:(t,r)=>pe.put(`${Je}/${t}`,r),uploadProfileImage:(t,r)=>pe.post(`${Je}/${t}/image`,r,{headers:{"Content-Type":"multipart/form-data"}}),getWorkerSkills:t=>pe.get(`${Je}/${t}/skills`),addWorkerSkill:(t,r)=>pe.post(`${Je}/${t}/skills`,r),updateWorkerSkill:(t,r,s)=>pe.put(`${Je}/${t}/skills/${r}`,s),deleteWorkerSkill:(t,r)=>pe.delete(`${Je}/${t}/skills/${r}`),getWorkerPortfolio:t=>pe.get(`${Je}/${t}/portfolio`),addPortfolioItem:(t,r)=>pe.post(`${Je}/${t}/portfolio`,r),updatePortfolioItem:(t,r,s)=>pe.put(`${Je}/${t}/portfolio/${r}`,s),deletePortfolioItem:(t,r)=>pe.delete(`${Je}/${t}/portfolio/${r}`),getWorkerCertificates:t=>pe.get(`${Je}/${t}/certificates`),addCertificate:(t,r)=>pe.post(`${Je}/${t}/certificates`,r),updateCertificate:(t,r,s)=>pe.put(`${Je}/${t}/certificates/${r}`,s),deleteCertificate:(t,r)=>pe.delete(`${Je}/${t}/certificates/${r}`),getWorkHistory:t=>pe.get(`${Je}/${t}/work-history`),addWorkHistory:(t,r)=>pe.post(`${Je}/${t}/work-history`,r),getWorkerAvailability:t=>pe.get(`${Je}/${t}/availability`),updateWorkerAvailability:(t,r)=>pe.put(`${Je}/${t}/availability`,r),getWorkerStats:t=>pe.get(`${Je}/${t}/stats`),getWorkerEarnings:(t,r={})=>pe.get(`${Je}/${t}/earnings`,{params:r}),getNearbyWorkers:t=>pe.post(`${Je}/nearby`,t),searchWorkers:t=>pe.get(`${Je}/search`,{params:t}),bookmarkWorker:t=>pe.post(`${Je}/${t}/bookmark`),removeBookmark:t=>pe.delete(`${Je}/${t}/bookmark`),reportWorker:(t,r)=>pe.post(`${Je}/${t}/report`,r),getVerificationStatus:t=>pe.get(`${Je}/${t}/verification`),requestVerification:(t,r)=>pe.post(`${Je}/${t}/verification`,r),getRecommendedWorkers:(t={})=>pe.get(`${Je}/recommended`,{params:t}),getSavedJobs:()=>pe.get("/api/workers/me/saved-jobs"),saveJob:t=>pe.post(`/api/jobs/${t}/save`),unsaveJob:t=>pe.delete(`/api/jobs/${t}/save`),getApplications:(t={})=>pe.get("/api/workers/me/applications",{params:t}),applyToJob:(t,r)=>pe.post(`/api/jobs/${t}/apply`,r),withdrawApplication:t=>pe.delete(`/api/jobs/${t}/apply`),getApplicationStatus:t=>pe.get(`/api/jobs/${t}/application-status`)},eh=Jt`
  0% { transform: scale(1); }
  50% { transform: scale(1.05); }
  100% { transform: scale(1); }
`,fr=he(me)(({theme:t})=>({background:E(t.palette.background.paper,.9),backdropFilter:"blur(20px)",border:`1px solid ${E(t.palette.divider,.1)}`,borderRadius:16,transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)","&:hover":{transform:"translateY(-4px)",boxShadow:t.shadows[20]}})),th=he(fr)(({theme:t,difficulty:r})=>({position:"relative",cursor:"pointer",overflow:"hidden","&::before":{content:'""',position:"absolute",top:0,left:0,right:0,height:4,background:(()=>{switch(r){case"beginner":return t.palette.success.main;case"intermediate":return t.palette.warning.main;case"advanced":return t.palette.error.main;case"expert":return t.palette.primary.main;default:return t.palette.info.main}})()}})),ua=he(P)(({theme:t})=>({borderRadius:25,padding:"12px 24px",fontWeight:600,textTransform:"none",transition:"all 0.3s ease-in-out","&:hover":{transform:"translateY(-2px)",boxShadow:t.shadows[12]}})),rh=he(o)(({theme:t,progress:r})=>({position:"relative",display:"inline-flex","&::after":{content:'""',position:"absolute",top:0,left:0,right:0,bottom:0,borderRadius:"50%",background:`conic-gradient(${t.palette.primary.main} ${r*3.6}deg, ${E(t.palette.primary.main,.1)} 0deg)`,mask:"radial-gradient(circle at center, transparent 65%, black 65%)"}})),sh=he(o)(({theme:t,urgent:r})=>({display:"flex",alignItems:"center",gap:1,padding:t.spacing(1,2),borderRadius:20,background:r?E(t.palette.error.main,.1):E(t.palette.primary.main,.1),border:`1px solid ${r?t.palette.error.main:t.palette.primary.main}`,...r&&{animation:`${eh} 1s infinite`}}));function xa(t){const{children:r,value:s,index:n,...i}=t;return e.jsx("div",{role:"tabpanel",hidden:s!==n,id:`skills-tabpanel-${n}`,"aria-labelledby":`skills-tab-${n}`,...i,children:s===n&&e.jsx(o,{sx:{py:3},children:r})})}const Jn=()=>{var ta;ut();const t=Oe(),{testId:r}=Cr(),s=ve(),n=Te(s.breakpoints.down("md")),[i,c]=l.useState(0),[d,x]=l.useState(!1),[m,u]=l.useState(null),[v,y]=l.useState(!1),[g,j]=l.useState(null),[b,C]=l.useState([]),[A,w]=l.useState([]),[p,k]=l.useState([]),[U,W]=l.useState(null);l.useState(0);const[R,K]=l.useState(0),[_,O]=l.useState({}),[T,H]=l.useState(0),[F,V]=l.useState(!1),[re,z]=l.useState(!1),[J,f]=l.useState(!1),[M,G]=l.useState(!1),[I,L]=l.useState(!1),[S,B]=l.useState(!1),[D,N]=l.useState(null),[q,$]=l.useState({open:!1,message:"",severity:"info"}),de={availableTests:[{id:1,title:"Electrical Systems Fundamentals",category:"Electrical",difficulty:"beginner",duration:30,questions:25,description:"Test your knowledge of basic electrical systems, wiring, and safety protocols.",skills:["Circuit Analysis","Wiring","Safety Protocols","Electrical Codes"],certification:!0,premium:!1,rating:4.8,completions:1250,passingScore:70},{id:2,title:"Advanced Plumbing Techniques",category:"Plumbing",difficulty:"advanced",duration:45,questions:35,description:"Advanced plumbing systems, pipe fitting, and troubleshooting complex issues.",skills:["Pipe Fitting","Drain Systems","Water Pressure","Leak Detection"],certification:!0,premium:!0,rating:4.9,completions:892,passingScore:80},{id:3,title:"Carpentry and Woodworking",category:"Carpentry",difficulty:"intermediate",duration:40,questions:30,description:"Comprehensive assessment of carpentry skills, tools, and techniques.",skills:["Joinery","Tool Usage","Measurements","Wood Types"],certification:!0,premium:!1,rating:4.7,completions:1100,passingScore:75},{id:4,title:"HVAC Systems Mastery",category:"HVAC",difficulty:"expert",duration:60,questions:50,description:"Expert-level assessment covering complex HVAC systems and refrigeration.",skills:["Refrigeration","Air Conditioning","Heating Systems","Ventilation"],certification:!0,premium:!0,rating:4.9,completions:567,passingScore:85}],completedTests:[{id:1,title:"Electrical Systems Fundamentals",score:85,maxScore:100,completedAt:"2024-01-10T10:00:00Z",certificate:!0,timeSpent:28,correctAnswers:21,totalQuestions:25},{id:3,title:"Carpentry and Woodworking",score:78,maxScore:100,completedAt:"2024-01-05T14:30:00Z",certificate:!0,timeSpent:35,correctAnswers:23,totalQuestions:30}],mySkills:[{name:"Electrical Wiring",level:85,verified:!0,category:"Electrical"},{name:"Carpentry",level:78,verified:!0,category:"Carpentry"},{name:"Plumbing Basics",level:65,verified:!1,category:"Plumbing"},{name:"Safety Protocols",level:92,verified:!0,category:"General"},{name:"Tool Maintenance",level:73,verified:!1,category:"General"}],analytics:{totalTests:12,avgScore:81.5,totalTimeSpent:420,certifications:3,skillsVerified:8,rankPercentile:87,strengths:["Electrical","Safety"],improvementAreas:["Plumbing","HVAC"]}},Pe=[{id:1,type:"multiple-choice",question:"What is the standard voltage for household electrical outlets in the US?",options:["110V","120V","220V","240V"],correct:1,explanation:"120V is the standard voltage for household outlets in the United States.",difficulty:"easy"},{id:2,type:"multiple-choice",question:"Which tool is primarily used for cutting copper pipes?",options:["Hacksaw","Pipe cutter","Angle grinder","Reciprocating saw"],correct:1,explanation:"A pipe cutter provides clean, straight cuts for copper pipes.",difficulty:"medium"},{id:3,type:"true-false",question:"GFCI outlets are required in all bathroom installations.",correct:!0,explanation:"GFCI outlets are required in bathrooms to prevent electrical shock.",difficulty:"easy"}];l.useEffect(()=>{r?at(r):qe()},[r]),l.useEffect(()=>{let ue;return F&&T>0&&!J?ue=setInterval(()=>{H($e=>$e-1)},1e3):T===0&&F&&it(!0),()=>clearInterval(ue)},[F,T,J]);const qe=l.useCallback(async()=>{x(!0);try{setTimeout(()=>{C(de.availableTests),k(de.completedTests),w(de.mySkills),W(de.analytics),x(!1)},1e3)}catch{u("Failed to load skills data"),x(!1)}},[]),at=l.useCallback(async ue=>{x(!0);try{const $e=de.availableTests.find(gt=>gt.id===parseInt(ue));$e&&(j({...$e,questions:Pe}),y(!0),H($e.duration*60)),x(!1)}catch{u("Failed to load test details"),x(!1)}},[]),xt=ue=>{j({...ue,questions:Pe}),G(!0)},kt=()=>{G(!1),y(!0),z(!0),V(!0),K(0),O({}),H(g.duration*60),t(`/worker/skills/test/${g.id}`)},er=(ue,$e)=>{O(gt=>({...gt,[ue]:$e}))},hr=()=>{R<g.questions.length-1&&K(ue=>ue+1)},X=()=>{R>0&&K(ue=>ue-1)},oe=()=>{f(!0),V(!1)},le=()=>{f(!1),V(!0)},Re=()=>{L(!0)},_e=()=>{L(!1),y(!1),z(!1),V(!1),j(null),t("/worker/skills")},it=l.useCallback(async(ue=!1)=>{V(!1);const $e=Object.entries(_).reduce((pt,[Sl,Al])=>{const mi=g.questions.find(Pl=>Pl.id===parseInt(Sl));return mi&&mi.correct===Al?pt+1:pt},0),gt=Math.round($e/g.questions.length*100),pr=g.duration*60-T,ke={score:gt,maxScore:100,correctAnswers:$e,totalQuestions:g.questions.length,timeSpent:Math.round(pr/60),passed:gt>=g.passingScore,certificate:gt>=g.passingScore&&g.certification,autoSubmitted:ue};N(ke),B(!0),y(!1),z(!1),k(pt=>[...pt,{...g,...ke,completedAt:new Date().toISOString()}])},[_,g,T]),bt=ue=>{const $e=Math.floor(ue/60),gt=ue%60;return`${$e}:${gt.toString().padStart(2,"0")}`},ht=ue=>{switch(ue){case"beginner":return"success";case"intermediate":return"warning";case"advanced":return"error";case"expert":return"primary";default:return"info"}},Ut=ue=>{switch(ue){case"beginner":return e.jsx(rt,{});case"intermediate":return e.jsx(cr,{});case"advanced":return e.jsx(za,{});case"expert":return e.jsx(Ps,{});default:return e.jsx(Bs,{})}},bs=()=>e.jsx(h,{container:!0,spacing:3,children:b.map(ue=>e.jsx(h,{item:!0,xs:12,sm:6,lg:4,children:e.jsx(ge.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.3},children:e.jsxs(th,{difficulty:ue.difficulty,onClick:()=>xt(ue),children:[e.jsxs(ce,{children:[e.jsxs(o,{sx:{display:"flex",alignItems:"flex-start",mb:2},children:[e.jsx(we,{sx:{bgcolor:`${ht(ue.difficulty)}.main`,mr:2},children:Ut(ue.difficulty)}),e.jsxs(o,{sx:{flexGrow:1,minWidth:0},children:[e.jsx(a,{variant:"h6",fontWeight:700,noWrap:!0,children:ue.title}),e.jsx(a,{variant:"body2",color:"text.secondary",children:ue.category})]}),ue.premium&&e.jsx(Ps,{color:"warning"})]}),e.jsx(a,{variant:"body2",color:"text.secondary",sx:{mb:2,minHeight:40},children:ue.description}),e.jsxs(o,{sx:{display:"flex",gap:1,mb:2,flexWrap:"wrap"},children:[e.jsx(ee,{label:ue.difficulty.charAt(0).toUpperCase()+ue.difficulty.slice(1),color:ht(ue.difficulty),size:"small"}),e.jsx(ee,{icon:e.jsx(Za,{}),label:`${ue.duration} min`,size:"small",variant:"outlined"}),e.jsx(ee,{icon:e.jsx(aa,{}),label:`${ue.questions} questions`,size:"small",variant:"outlined"})]}),e.jsxs(o,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:2},children:[e.jsxs(o,{sx:{display:"flex",alignItems:"center"},children:[e.jsx(Qe,{value:ue.rating,size:"small",readOnly:!0}),e.jsxs(a,{variant:"caption",sx:{ml:.5},children:["(",ue.completions,")"]})]}),ue.certification&&e.jsx(ee,{icon:e.jsx(Ps,{}),label:"Certificate",size:"small",color:"primary",variant:"outlined"})]}),e.jsxs(a,{variant:"caption",color:"text.secondary",children:["Passing Score: ",ue.passingScore,"%"]})]}),e.jsx(wr,{sx:{px:2,pb:2},children:e.jsx(ua,{variant:"contained",fullWidth:!0,startIcon:e.jsx(Cs,{}),onClick:$e=>{$e.stopPropagation(),xt(ue)},children:"Start Assessment"})})]})})},ue.id))}),Xa=()=>e.jsxs(o,{children:[e.jsx(a,{variant:"h5",fontWeight:700,gutterBottom:!0,children:"My Skills & Competencies"}),e.jsx(h,{container:!0,spacing:3,children:A.map((ue,$e)=>e.jsx(h,{item:!0,xs:12,sm:6,md:4,children:e.jsx(fr,{children:e.jsxs(ce,{children:[e.jsxs(o,{sx:{display:"flex",alignItems:"center",mb:2},children:[e.jsx(a,{variant:"h6",fontWeight:600,sx:{flexGrow:1},children:ue.name}),ue.verified&&e.jsx(xe,{title:"Verified Skill",children:e.jsx(xr,{color:"primary"})})]}),e.jsx(a,{variant:"body2",color:"text.secondary",gutterBottom:!0,children:ue.category}),e.jsxs(o,{sx:{display:"flex",alignItems:"center",mb:1},children:[e.jsx(o,{sx:{width:"100%",mr:1},children:e.jsx(lr,{variant:"determinate",value:ue.level,sx:{height:8,borderRadius:4}})}),e.jsxs(a,{variant:"body2",fontWeight:600,children:[ue.level,"%"]})]}),e.jsx(a,{variant:"caption",color:"text.secondary",children:"Proficiency Level"})]})})},$e))})]}),Zs=()=>e.jsxs(o,{children:[e.jsx(a,{variant:"h5",fontWeight:700,gutterBottom:!0,children:"Completed Assessments"}),e.jsx(h,{container:!0,spacing:3,children:p.map((ue,$e)=>e.jsx(h,{item:!0,xs:12,sm:6,lg:4,children:e.jsxs(fr,{children:[e.jsxs(ce,{children:[e.jsxs(o,{sx:{display:"flex",alignItems:"center",mb:2},children:[e.jsx(a,{variant:"h6",fontWeight:600,sx:{flexGrow:1},children:ue.title}),ue.certificate&&e.jsx(Ps,{color:"primary"})]}),e.jsxs(o,{sx:{display:"flex",alignItems:"center",mb:2},children:[e.jsxs(rh,{progress:ue.score,children:[e.jsx(Ae,{variant:"determinate",value:ue.score,size:60,thickness:6,sx:{color:ue.score>=80?"success.main":ue.score>=60?"warning.main":"error.main"}}),e.jsx(o,{sx:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)"},children:e.jsxs(a,{variant:"h6",fontWeight:700,children:[ue.score,"%"]})})]}),e.jsxs(o,{sx:{ml:2,flexGrow:1},children:[e.jsxs(a,{variant:"body2",color:"text.secondary",children:["Score: ",ue.correctAnswers,"/",ue.totalQuestions]}),e.jsxs(a,{variant:"body2",color:"text.secondary",children:["Time: ",ue.timeSpent," minutes"]}),e.jsx(a,{variant:"caption",color:"text.secondary",children:Hs(new Date(ue.completedAt),{addSuffix:!0})})]})]}),e.jsxs(o,{sx:{display:"flex",gap:1},children:[e.jsx(ee,{label:ue.score>=80?"Excellent":ue.score>=60?"Good":"Needs Improvement",color:ue.score>=80?"success":ue.score>=60?"warning":"error",size:"small"}),ue.certificate&&e.jsx(ee,{label:"Certified",color:"primary",size:"small",icon:e.jsx(Ve,{})})]})]}),e.jsxs(wr,{children:[e.jsx(P,{size:"small",startIcon:e.jsx(vi,{}),children:"Certificate"}),e.jsx(P,{size:"small",startIcon:e.jsx(ls,{}),children:"Share"})]})]})},$e))})]}),ea=()=>{if(!U)return null;const ue=A.map($e=>({name:$e.name,level:$e.level,verified:$e.verified}));return e.jsxs(o,{children:[e.jsx(a,{variant:"h5",fontWeight:700,gutterBottom:!0,children:"Skills Analytics"}),e.jsxs(h,{container:!0,spacing:3,children:[e.jsxs(h,{item:!0,xs:12,md:8,children:[e.jsx(fr,{sx:{mb:3},children:e.jsxs(ce,{children:[e.jsx(a,{variant:"h6",fontWeight:600,gutterBottom:!0,children:"Performance Overview"}),e.jsxs(h,{container:!0,spacing:2,children:[e.jsx(h,{item:!0,xs:6,sm:3,children:e.jsxs(o,{sx:{textAlign:"center"},children:[e.jsx(a,{variant:"h4",color:"primary",fontWeight:700,children:U.totalTests}),e.jsx(a,{variant:"body2",color:"text.secondary",children:"Tests Taken"})]})}),e.jsx(h,{item:!0,xs:6,sm:3,children:e.jsxs(o,{sx:{textAlign:"center"},children:[e.jsxs(a,{variant:"h4",color:"success.main",fontWeight:700,children:[U.avgScore,"%"]}),e.jsx(a,{variant:"body2",color:"text.secondary",children:"Avg Score"})]})}),e.jsx(h,{item:!0,xs:6,sm:3,children:e.jsxs(o,{sx:{textAlign:"center"},children:[e.jsx(a,{variant:"h4",color:"warning.main",fontWeight:700,children:U.certifications}),e.jsx(a,{variant:"body2",color:"text.secondary",children:"Certificates"})]})}),e.jsx(h,{item:!0,xs:6,sm:3,children:e.jsxs(o,{sx:{textAlign:"center"},children:[e.jsxs(a,{variant:"h4",color:"info.main",fontWeight:700,children:[U.rankPercentile,"%"]}),e.jsx(a,{variant:"body2",color:"text.secondary",children:"Top Percentile"})]})})]})]})}),e.jsx(fr,{children:e.jsxs(ce,{children:[e.jsx(a,{variant:"h6",fontWeight:600,gutterBottom:!0,children:"Skills Breakdown"}),e.jsx(o,{sx:{height:300},children:e.jsx(ro,{width:"100%",height:"100%",children:e.jsxs(Nl,{data:ue,children:[e.jsx(so,{strokeDasharray:"3 3"}),e.jsx(ao,{dataKey:"name",angle:-45,textAnchor:"end",height:100}),e.jsx(no,{}),e.jsx(io,{}),e.jsx(Ol,{dataKey:"level",fill:s.palette.primary.main})]})})})]})})]}),e.jsxs(h,{item:!0,xs:12,md:4,children:[e.jsx(fr,{sx:{mb:3},children:e.jsxs(ce,{children:[e.jsxs(a,{variant:"h6",fontWeight:600,gutterBottom:!0,sx:{color:"success.main"},children:[e.jsx(cr,{sx:{mr:1,verticalAlign:"middle"}}),"Strengths"]}),e.jsx(Ke,{dense:!0,children:U.strengths.map(($e,gt)=>e.jsxs(Be,{children:[e.jsx(Ze,{children:e.jsx(Ve,{color:"success"})}),e.jsx(Ie,{primary:$e})]},gt))})]})}),e.jsx(fr,{children:e.jsxs(ce,{children:[e.jsxs(a,{variant:"h6",fontWeight:600,gutterBottom:!0,sx:{color:"warning.main"},children:[e.jsx(Oc,{sx:{mr:1,verticalAlign:"middle"}}),"Growth Areas"]}),e.jsx(Ke,{dense:!0,children:U.improvementAreas.map(($e,gt)=>e.jsxs(Be,{children:[e.jsx(Ze,{children:e.jsx(jo,{color:"warning"})}),e.jsx(Ie,{primary:$e,secondary:"Consider taking assessment"})]},gt))})]})})]})]})]})},Qa=()=>{if(!g||!re)return null;const ue=g.questions[R],$e=(R+1)/g.questions.length*100,gt=T<300;return e.jsxs(o,{children:[e.jsxs(se,{sx:{p:3,mb:3,borderRadius:2},children:[e.jsxs(o,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:2},children:[e.jsx(a,{variant:"h5",fontWeight:700,children:g.title}),e.jsxs(o,{sx:{display:"flex",alignItems:"center",gap:2},children:[e.jsxs(sh,{urgent:gt,children:[e.jsx(Za,{}),e.jsx(a,{variant:"h6",fontWeight:600,children:bt(T)})]}),e.jsx(P,{variant:"outlined",onClick:J?le:oe,startIcon:J?e.jsx(Cs,{}):e.jsx(wi,{}),children:J?"Resume":"Pause"}),e.jsx(P,{variant:"outlined",color:"error",onClick:Re,startIcon:e.jsx(Jc,{}),children:"Exit"})]})]}),e.jsxs(o,{sx:{display:"flex",alignItems:"center",gap:2},children:[e.jsxs(a,{variant:"body2",color:"text.secondary",children:["Question ",R+1," of ",g.questions.length]}),e.jsx(lr,{variant:"determinate",value:$e,sx:{flexGrow:1,height:8,borderRadius:4}}),e.jsxs(a,{variant:"body2",color:"text.secondary",children:[Math.round($e),"%"]})]})]}),!J&&e.jsx(ge.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},transition:{duration:.3},children:e.jsx(fr,{sx:{mb:3},children:e.jsxs(ce,{sx:{p:4},children:[e.jsx(a,{variant:"h6",gutterBottom:!0,children:ue.question}),ue.type==="multiple-choice"&&e.jsx(La,{value:_[ue.id]||"",onChange:pr=>er(ue.id,parseInt(pr.target.value)),children:ue.options.map((pr,ke)=>e.jsx(ft,{value:ke,control:e.jsx(sr,{}),label:pr,sx:{mb:1}},ke))}),ue.type==="true-false"&&e.jsxs(La,{value:_[ue.id]!==void 0?_[ue.id].toString():"",onChange:pr=>er(ue.id,pr.target.value==="true"),children:[e.jsx(ft,{value:"true",control:e.jsx(sr,{}),label:"True"}),e.jsx(ft,{value:"false",control:e.jsx(sr,{}),label:"False"})]})]})})},R),J&&e.jsxs(fr,{sx:{textAlign:"center",py:8},children:[e.jsx(wi,{sx:{fontSize:80,color:"text.secondary",mb:2}}),e.jsx(a,{variant:"h4",gutterBottom:!0,children:"Test Paused"}),e.jsx(a,{variant:"body1",color:"text.secondary",sx:{mb:3},children:"Click Resume to continue your assessment"}),e.jsx(ua,{variant:"contained",size:"large",startIcon:e.jsx(Cs,{}),onClick:le,children:"Resume Test"})]}),!J&&e.jsxs(o,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsx(P,{variant:"outlined",onClick:X,disabled:R===0,startIcon:e.jsx(Rr,{}),children:"Previous"}),e.jsxs(a,{variant:"body2",color:"text.secondary",children:[Object.keys(_).length," of ",g.questions.length," ","answered"]}),R===g.questions.length-1?e.jsx(ua,{variant:"contained",onClick:()=>it(),startIcon:e.jsx(fo,{}),disabled:Object.keys(_).length<g.questions.length,children:"Submit Test"}):e.jsx(P,{variant:"contained",onClick:hr,endIcon:e.jsx(ti,{}),children:"Next"})]})]})};return d?e.jsx(ye,{maxWidth:"lg",sx:{py:4},children:e.jsx(o,{sx:{display:"flex",justifyContent:"center",alignItems:"center",minHeight:400},children:e.jsx(Ae,{size:60,thickness:4})})}):m?e.jsx(ye,{maxWidth:"lg",sx:{py:4},children:e.jsx(be,{severity:"error",sx:{borderRadius:2},children:m})}):v&&re?e.jsxs(ye,{maxWidth:"lg",sx:{py:4},children:[Qa(),e.jsxs(Ee,{open:I,onClose:()=>L(!1),children:[e.jsx(Me,{children:"Exit Assessment?"}),e.jsx(ze,{children:e.jsx(a,{children:"Are you sure you want to exit this assessment? Your progress will be lost."})}),e.jsxs(Le,{children:[e.jsx(P,{onClick:()=>L(!1),children:"Cancel"}),e.jsx(P,{onClick:_e,color:"error",children:"Exit"})]})]})]}):e.jsxs(e.Fragment,{children:[e.jsxs(Fr,{children:[e.jsx("title",{children:"Skills Assessment - Professional Certification | Kelmah"}),e.jsx("meta",{name:"description",content:"Take professional skills assessments to validate your expertise and earn certifications in electrical, plumbing, carpentry, HVAC and more."})]}),e.jsxs(ye,{maxWidth:"xl",sx:{py:4},children:[e.jsxs(Ys,{sx:{mb:3},children:[e.jsxs(et,{color:"inherit",component:Fe,to:"/",children:[e.jsx(Ua,{sx:{mr:.5},fontSize:"inherit"}),"Home"]}),e.jsx(et,{color:"inherit",component:Fe,to:"/worker/dashboard",children:"Dashboard"}),e.jsx(a,{color:"text.primary",children:"Skills Assessment"})]}),e.jsxs(o,{sx:{mb:4},children:[e.jsx(a,{variant:"h3",fontWeight:700,gutterBottom:!0,children:"Skills Assessment Center"}),e.jsx(a,{variant:"h6",color:"text.secondary",children:"Validate your expertise and earn professional certifications"})]}),e.jsx(o,{sx:{borderBottom:1,borderColor:"divider",mb:3},children:e.jsxs($t,{value:i,onChange:(ue,$e)=>c($e),variant:n?"scrollable":"fullWidth",scrollButtons:"auto",children:[e.jsx(Ce,{icon:e.jsx(aa,{}),label:"Available Tests"}),e.jsx(Ce,{icon:e.jsx(Va,{}),label:"My Skills"}),e.jsx(Ce,{icon:e.jsx(za,{}),label:"Completed"}),e.jsx(Ce,{icon:e.jsx(Nc,{}),label:"Analytics"})]})}),e.jsx(xa,{value:i,index:0,children:bs()}),e.jsx(xa,{value:i,index:1,children:Xa()}),e.jsx(xa,{value:i,index:2,children:Zs()}),e.jsx(xa,{value:i,index:3,children:ea()}),e.jsxs(Ee,{open:M,onClose:()=>G(!1),maxWidth:"md",fullWidth:!0,children:[e.jsx(Me,{children:e.jsxs(o,{sx:{display:"flex",alignItems:"center"},children:[e.jsx(we,{sx:{bgcolor:"primary.main",mr:2},children:e.jsx(aa,{})}),"Start Assessment"]})}),e.jsx(ze,{children:g&&e.jsxs(o,{sx:{mt:2},children:[e.jsx(a,{variant:"h6",gutterBottom:!0,children:g.title}),e.jsx(a,{variant:"body2",color:"text.secondary",paragraph:!0,children:g.description}),e.jsxs(h,{container:!0,spacing:2,sx:{mb:3},children:[e.jsx(h,{item:!0,xs:6,children:e.jsxs(o,{sx:{textAlign:"center",p:2,border:1,borderColor:"divider",borderRadius:2},children:[e.jsx(Za,{color:"primary"}),e.jsxs(a,{variant:"h6",children:[g.duration," min"]}),e.jsx(a,{variant:"caption",children:"Duration"})]})}),e.jsx(h,{item:!0,xs:6,children:e.jsxs(o,{sx:{textAlign:"center",p:2,border:1,borderColor:"divider",borderRadius:2},children:[e.jsx(aa,{color:"primary"}),e.jsxs(a,{variant:"h6",children:[((ta=g.questions)==null?void 0:ta.length)||g.questions," ","questions"]}),e.jsx(a,{variant:"caption",children:"Questions"})]})})]}),e.jsx(be,{severity:"info",sx:{mb:2},children:"Once you start, you cannot pause or restart the assessment. Make sure you have enough time to complete it."}),e.jsxs(a,{variant:"body2",color:"text.secondary",children:["Passing score: ",g.passingScore,"%"]})]})}),e.jsxs(Le,{sx:{p:3},children:[e.jsx(P,{onClick:()=>G(!1),children:"Cancel"}),e.jsx(ua,{variant:"contained",onClick:kt,startIcon:e.jsx(Cs,{}),children:"Start Assessment"})]})]}),e.jsxs(Ee,{open:S,onClose:()=>B(!1),maxWidth:"md",fullWidth:!0,children:[e.jsx(Me,{children:e.jsxs(o,{sx:{textAlign:"center"},children:[D!=null&&D.passed?e.jsx(Ve,{sx:{fontSize:60,color:"success.main",mb:1}}):e.jsx(ps,{sx:{fontSize:60,color:"error.main",mb:1}}),e.jsx(a,{variant:"h4",fontWeight:700,children:D!=null&&D.passed?"Congratulations!":"Assessment Complete"})]})}),e.jsx(ze,{children:D&&e.jsxs(o,{sx:{textAlign:"center"},children:[e.jsxs(a,{variant:"h2",fontWeight:700,color:"primary",gutterBottom:!0,children:[D.score,"%"]}),e.jsxs(a,{variant:"h6",gutterBottom:!0,children:[D.correctAnswers," out of"," ",D.totalQuestions," correct"]}),e.jsxs(a,{variant:"body1",color:"text.secondary",sx:{mb:3},children:["Completed in ",D.timeSpent," minutes"]}),D.passed?e.jsxs(be,{severity:"success",sx:{mb:2},children:["You have successfully passed this assessment!",D.certificate&&" Your certificate is ready for download."]}):e.jsx(be,{severity:"info",sx:{mb:2},children:"You can retake this assessment after 24 hours to improve your score."}),D.autoSubmitted&&e.jsx(be,{severity:"warning",sx:{mb:2},children:"This assessment was automatically submitted due to time expiration."})]})}),e.jsxs(Le,{sx:{justifyContent:"center",p:3},children:[(D==null?void 0:D.certificate)&&e.jsx(P,{startIcon:e.jsx(vi,{}),variant:"outlined",children:"Download Certificate"}),e.jsx(P,{onClick:()=>B(!1),children:"Close"}),e.jsx(P,{variant:"contained",onClick:()=>{B(!1),t("/worker/skills")},children:"View All Assessments"})]})]}),e.jsx(Wt,{open:q.open,autoHideDuration:4e3,onClose:()=>$({...q,open:!1}),children:e.jsx(be,{severity:q.severity,onClose:()=>$({...q,open:!1}),children:q.message})})]})]})},Br=Xe.create({baseURL:yt.JOB_SERVICE,timeout:3e4,headers:{"Content-Type":"application/json"}});Br.interceptors.request.use(t=>{const r=localStorage.getItem("kelmah_auth_token");return r&&(t.headers.Authorization=`Bearer ${r}`),t},t=>Promise.reject(t));const qt=[{id:"app-1",jobId:"job-1",jobTitle:"Kitchen Renovation - Custom Cabinets",jobDescription:"Looking for an experienced carpenter to build custom kitchen cabinets...",company:"Mitchell Residence",location:"Accra, Greater Accra",budget:5500,currency:"GH₵",status:"pending",appliedAt:new Date(Date.now()-1e3*60*60*24*3),coverLetter:"I am very interested in this kitchen cabinet project. With over 8 years of carpentry experience, I specialize in custom furniture and cabinet making. I have completed similar projects and can provide references.",proposedRate:5200,estimatedDuration:"3-4 weeks",clientResponse:null,clientResponseAt:null,hirer:{id:"client-1",name:"Sarah Mitchell",avatar:"/api/placeholder/50/50",rating:4.8,reviewsCount:12},attachments:[{id:"att-1",name:"portfolio_kitchen_cabinets.pdf",url:"/api/placeholder/document",type:"pdf"}]},{id:"app-2",jobId:"job-4",jobTitle:"Interior House Painting",jobDescription:"Professional painting services needed for interior walls of a 2-bedroom apartment...",company:"Apartment Complex",location:"Tema, Greater Accra",budget:1200,currency:"GH₵",status:"accepted",appliedAt:new Date(Date.now()-1e3*60*60*24*7),coverLetter:"I would be happy to help with your interior painting project. I have experience with residential painting and pay attention to detail.",proposedRate:1150,estimatedDuration:"1-2 weeks",clientResponse:"Your portfolio looks great! We would like to proceed with your proposal.",clientResponseAt:new Date(Date.now()-1e3*60*60*24*2),hirer:{id:"client-4",name:"Robert Johnson",avatar:"/api/placeholder/50/50",rating:4.4,reviewsCount:7},attachments:[]},{id:"app-3",jobId:"job-expired",jobTitle:"Deck Construction",jobDescription:"Build a wooden deck for backyard entertainment area...",company:"Williams Family",location:"Kumasi, Ashanti Region",budget:2800,currency:"GH₵",status:"rejected",appliedAt:new Date(Date.now()-1e3*60*60*24*14),coverLetter:"I am interested in building your deck. I have experience with outdoor construction and can work with various wood types.",proposedRate:2650,estimatedDuration:"2-3 weeks",clientResponse:"Thank you for your application. We decided to go with another contractor who had more deck-specific experience.",clientResponseAt:new Date(Date.now()-1e3*60*60*24*10),hirer:{id:"client-5",name:"Jennifer Williams",avatar:"/api/placeholder/50/50",rating:4.6,reviewsCount:9},attachments:[{id:"att-2",name:"deck_design_proposal.jpg",url:"/api/placeholder/image",type:"image"}]},{id:"app-4",jobId:"job-5",jobTitle:"Roof Repair and Maintenance",jobDescription:"Roof inspection and repair needed. Issues include loose tiles, minor leaks...",company:"Wilson Residence",location:"Cape Coast, Central Region",budget:950,currency:"GH₵",status:"pending",appliedAt:new Date(Date.now()-1e3*60*60*12),coverLetter:"While my main expertise is carpentry, I have experience with basic roof repairs and maintenance. I would be happy to assess the situation and provide an honest evaluation.",proposedRate:900,estimatedDuration:"3-5 days",clientResponse:null,clientResponseAt:null,hirer:{id:"client-6",name:"Mary Wilson",avatar:"/api/placeholder/50/50",rating:4.7,reviewsCount:9},attachments:[]},{id:"app-5",jobId:"job-completed",jobTitle:"Custom Bookshelf Installation",jobDescription:"Install custom-built bookshelves in home office...",company:"Thompson Residence",location:"Accra, Greater Accra",budget:1800,currency:"GH₵",status:"completed",appliedAt:new Date(Date.now()-1e3*60*60*24*30),coverLetter:"I specialize in custom furniture and would love to create beautiful bookshelves for your home office.",proposedRate:1750,estimatedDuration:"1 week",clientResponse:"Excellent work! The bookshelves look amazing and fit perfectly.",clientResponseAt:new Date(Date.now()-1e3*60*60*24*5),completedAt:new Date(Date.now()-1e3*60*60*24*7),finalPayment:1750,clientRating:5,clientReview:"Tony did an outstanding job on our custom bookshelves. Professional, timely, and excellent craftsmanship.",hirer:{id:"client-7",name:"Michael Thompson",avatar:"/api/placeholder/50/50",rating:4.9,reviewsCount:15},attachments:[{id:"att-3",name:"bookshelf_final_photos.jpg",url:"/api/placeholder/image",type:"image"}]}],ah={getMyApplications:async(t={})=>{try{const r=await Br.get("/api/applications/my-applications",{params:t});return r.data.data||r.data}catch(r){console.warn("Job service unavailable for applications, using mock data:",r.message);let s=[...qt];return t.status&&(s=s.filter(n=>n.status===t.status)),t.jobId&&(s=s.filter(n=>n.jobId===t.jobId)),s.sort((n,i)=>new Date(i.appliedAt)-new Date(n.appliedAt)),s}},getApplicationById:async t=>{try{const r=await Br.get(`/api/applications/${t}`);return r.data.data||r.data}catch(r){return console.warn("Job service unavailable for application details, using mock data:",r.message),qt.find(s=>s.id===t)||null}},submitApplication:async(t,r)=>{try{const s=await Br.post(`/api/jobs/${t}/apply`,r);return s.data.data||s.data}catch(s){return console.warn("Job service unavailable for application submission, simulating success:",s.message),{id:`app-${Date.now()}`,jobId:t,...r,status:"pending",appliedAt:new Date,clientResponse:null,clientResponseAt:null}}},withdrawApplication:async t=>{try{return(await Br.delete(`/api/applications/${t}`)).data}catch(r){return console.warn("Job service unavailable for application withdrawal, simulating success:",r.message),{success:!0,message:"Application withdrawn successfully (mock)"}}},updateApplication:async(t,r)=>{try{const s=await Br.put(`/api/applications/${t}`,r);return s.data.data||s.data}catch(s){return console.warn("Job service unavailable for application update, simulating success:",s.message),{...qt.find(i=>i.id===t),...r,updatedAt:new Date}}},getApplicationStats:async()=>{try{const t=await Br.get("/api/applications/stats");return t.data.data||t.data}catch(t){return console.warn("Job service unavailable for application stats, using mock data:",t.message),{total:qt.length,pending:qt.filter(s=>s.status==="pending").length,accepted:qt.filter(s=>s.status==="accepted").length,rejected:qt.filter(s=>s.status==="rejected").length,completed:qt.filter(s=>s.status==="completed").length,successRate:Math.round(qt.filter(s=>["accepted","completed"].includes(s.status)).length/qt.length*100),averageResponseTime:"2.5 days",totalEarnings:qt.filter(s=>s.status==="completed").reduce((s,n)=>s+(n.finalPayment||0),0)}}}},nh=()=>{const[t,r]=l.useState([]),[s,n]=l.useState(!0),[i,c]=l.useState(0),[d,x]=l.useState(null),[m,u]=l.useState(!1),[v,y]=l.useState(!1),[g,j]=l.useState(""),b=ve();l.useEffect(()=>{(async()=>{try{const R=await ah.getMyApplications();r(R)}catch(R){console.error("Error loading applications:",R)}finally{n(!1)}})()},[]);const C=(W,R)=>{c(R)},A=W=>{x(W),u(!0)},w=W=>{x(W),y(!0)},p=()=>{console.log("Sending message to",d==null?void 0:d.company,":",g),j(""),y(!1)},k=t.filter(W=>i===0?!0:i===1?W.status==="pending":i===2?W.status==="interview":i===3?W.status==="offer":i===4?W.status==="rejected":!1),U=W=>{switch(W){case"pending":return{label:"Application Pending",color:"info",icon:e.jsx(cs,{fontSize:"small"})};case"interview":return{label:"Interview Scheduled",color:"primary",icon:e.jsx(Lt,{fontSize:"small"})};case"offer":return{label:"Offer Received",color:"success",icon:e.jsx(Ve,{fontSize:"small"})};case"rejected":return{label:"Application Rejected",color:"error",icon:e.jsx(ps,{fontSize:"small"})};default:return{label:"Unknown",color:"default",icon:e.jsx(cs,{fontSize:"small"})}}};return e.jsxs(ye,{sx:{py:4},children:[e.jsx(a,{variant:"h4",gutterBottom:!0,children:"My Applications"}),e.jsxs(se,{sx:{width:"100%",mb:4},children:[e.jsxs($t,{value:i,onChange:C,variant:"scrollable",scrollButtons:"auto",indicatorColor:"primary",textColor:"primary",children:[e.jsx(Ce,{label:"All Applications"}),e.jsx(Ce,{label:"Pending"}),e.jsx(Ce,{label:"Interviews"}),e.jsx(Ce,{label:"Offers"}),e.jsx(Ce,{label:"Rejected"})]}),s?e.jsx(o,{sx:{display:"flex",justifyContent:"center",p:4},children:e.jsx(Ae,{})}):k.length===0?e.jsxs(o,{sx:{p:4,textAlign:"center"},children:[e.jsx(dr,{sx:{fontSize:60,color:"text.secondary",mb:2}}),e.jsx(a,{variant:"h6",gutterBottom:!0,children:"No applications found"}),e.jsx(a,{color:"textSecondary",paragraph:!0,children:"You haven't applied to any jobs in this category yet"}),e.jsx(P,{variant:"contained",color:"primary",children:"Browse Jobs"})]}):e.jsx(Hr,{children:e.jsxs(Gr,{children:[e.jsx(Vr,{children:e.jsxs(It,{children:[e.jsx(ae,{children:"Job"}),e.jsx(ae,{children:"Company"}),e.jsx(ae,{children:"Applied Date"}),e.jsx(ae,{children:"Status"}),e.jsx(ae,{align:"right",children:"Actions"})]})}),e.jsx(qr,{children:k.map(W=>{const R=U(W.status);return e.jsxs(It,{children:[e.jsxs(ae,{children:[e.jsx(a,{variant:"subtitle2",children:W.job.title}),e.jsxs(a,{variant:"body2",color:"text.secondary",children:[W.job.location.city,","," ",W.job.location.country]})]}),e.jsx(ae,{children:e.jsxs(o,{sx:{display:"flex",alignItems:"center"},children:[e.jsx(we,{src:W.companyLogo,alt:W.company,variant:"square",sx:{width:30,height:30,mr:1}}),e.jsx(a,{variant:"body2",children:W.company})]})}),e.jsx(ae,{children:new Date(W.createdAt).toLocaleDateString()}),e.jsx(ae,{children:e.jsx(ee,{icon:R.icon,label:R.label,color:R.color,size:"small"})}),e.jsxs(ae,{align:"right",children:[e.jsx(ne,{size:"small",onClick:()=>A(W),title:"View Details",children:e.jsx(Et,{fontSize:"small"})}),e.jsx(ne,{size:"small",onClick:()=>w(W),title:"Send Message",children:e.jsx(Ot,{fontSize:"small"})})]})]},W.id)})})]})})]}),e.jsx(Ee,{open:m,onClose:()=>u(!1),maxWidth:"md",fullWidth:!0,children:d&&e.jsxs(e.Fragment,{children:[e.jsx(Me,{children:"Application Details"}),e.jsxs(ze,{children:[e.jsx(me,{variant:"outlined",sx:{mb:3},children:e.jsxs(ce,{children:[e.jsx(a,{variant:"h5",gutterBottom:!0,children:d.jobTitle}),e.jsxs(te,{direction:"row",spacing:2,sx:{mb:2},children:[e.jsxs(o,{sx:{display:"flex",alignItems:"center"},children:[e.jsx(ri,{fontSize:"small",sx:{mr:.5,color:"text.secondary"}}),e.jsx(a,{variant:"body2",children:d.company})]}),e.jsxs(o,{sx:{display:"flex",alignItems:"center"},children:[e.jsx(dr,{fontSize:"small",sx:{mr:.5,color:"text.secondary"}}),e.jsx(a,{variant:"body2",children:d.salary})]})]}),e.jsx(Divider,{sx:{my:2}}),e.jsxs(h,{container:!0,spacing:2,children:[e.jsxs(h,{item:!0,xs:12,sm:6,children:[e.jsx(a,{variant:"subtitle2",color:"text.secondary",children:"Application Status"}),e.jsx(o,{sx:{display:"flex",alignItems:"center",mt:1},children:e.jsx(ee,{icon:U(d.status).icon,label:U(d.status).label,color:U(d.status).color,size:"small"})})]}),e.jsxs(h,{item:!0,xs:12,sm:6,children:[e.jsx(a,{variant:"subtitle2",color:"text.secondary",children:"Applied On"}),e.jsx(a,{variant:"body1",children:new Date(d.createdAt).toLocaleDateString()})]}),d.interviewDate&&e.jsxs(h,{item:!0,xs:12,sm:6,children:[e.jsx(a,{variant:"subtitle2",color:"text.secondary",children:"Interview Date"}),e.jsx(a,{variant:"body1",children:new Date(d.interviewDate).toLocaleDateString()})]})]})]})}),d.status==="offer"&&e.jsx(me,{variant:"outlined",sx:{mb:3,bgcolor:"success.light"},children:e.jsxs(ce,{children:[e.jsxs(a,{variant:"h6",color:"success.main",gutterBottom:!0,children:[e.jsx(Ve,{sx:{mr:1,verticalAlign:"text-bottom"}}),"Congratulations! You have received a job offer."]}),e.jsx(a,{variant:"body2",children:"Please check your messages for details about the offer. You can accept or negotiate the terms."})]})}),e.jsx(a,{variant:"subtitle1",gutterBottom:!0,children:"Application Timeline"}),e.jsxs(o,{sx:{ml:2,borderLeft:`2px solid ${b.palette.divider}`,pl:2},children:[e.jsxs(o,{sx:{mb:2,position:"relative"},children:[e.jsx(o,{sx:{width:10,height:10,bgcolor:"primary.main",borderRadius:"50%",position:"absolute",left:-28,top:6}}),e.jsx(a,{variant:"subtitle2",children:"Application Submitted"}),e.jsx(a,{variant:"body2",color:"text.secondary",children:new Date(d.createdAt).toLocaleDateString()})]}),d.status!=="pending"&&e.jsxs(o,{sx:{mb:2,position:"relative"},children:[e.jsx(o,{sx:{width:10,height:10,bgcolor:"primary.main",borderRadius:"50%",position:"absolute",left:-28,top:6}}),e.jsx(a,{variant:"subtitle2",children:"Application Reviewed"}),e.jsx(a,{variant:"body2",color:"text.secondary",children:new Date(new Date(d.createdAt).getTime()+3*24*60*60*1e3).toLocaleDateString()})]}),(d.status==="interview"||d.status==="offer"||d.status==="rejected")&&d.interviewDate&&e.jsxs(o,{sx:{mb:2,position:"relative"},children:[e.jsx(o,{sx:{width:10,height:10,bgcolor:"primary.main",borderRadius:"50%",position:"absolute",left:-28,top:6}}),e.jsx(a,{variant:"subtitle2",children:"Interview Scheduled"}),e.jsx(a,{variant:"body2",color:"text.secondary",children:new Date(d.interviewDate).toLocaleDateString()})]}),d.status==="offer"&&e.jsxs(o,{sx:{mb:2,position:"relative"},children:[e.jsx(o,{sx:{width:10,height:10,bgcolor:"success.main",borderRadius:"50%",position:"absolute",left:-28,top:6}}),e.jsx(a,{variant:"subtitle2",children:"Offer Received"}),e.jsx(a,{variant:"body2",color:"text.secondary",children:new Date(new Date(d.interviewDate).getTime()+5*24*60*60*1e3).toLocaleDateString()})]}),d.status==="rejected"&&e.jsxs(o,{sx:{mb:2,position:"relative"},children:[e.jsx(o,{sx:{width:10,height:10,bgcolor:"error.main",borderRadius:"50%",position:"absolute",left:-28,top:6}}),e.jsx(a,{variant:"subtitle2",children:"Application Rejected"}),e.jsx(a,{variant:"body2",color:"text.secondary",children:new Date(new Date(d.interviewDate).getTime()+2*24*60*60*1e3).toLocaleDateString()})]})]})]}),e.jsxs(Le,{children:[e.jsx(P,{onClick:()=>u(!1),children:"Close"}),e.jsx(P,{onClick:()=>{u(!1),w(d)},variant:"outlined",startIcon:e.jsx(Ot,{}),children:"Contact Employer"})]})]})}),e.jsx(Ee,{open:v,onClose:()=>y(!1),maxWidth:"sm",fullWidth:!0,children:d&&e.jsxs(e.Fragment,{children:[e.jsxs(Me,{children:["Message to ",d.company]}),e.jsxs(ze,{children:[e.jsxs(a,{variant:"subtitle2",gutterBottom:!0,children:["Regarding: ",d.jobTitle]}),e.jsxs(a,{variant:"body2",color:"text.secondary",paragraph:!0,children:["Your message will be sent to the hiring manager at"," ",d.company,"."]}),e.jsx(Q,{autoFocus:!0,margin:"dense",label:"Message",fullWidth:!0,variant:"outlined",multiline:!0,rows:6,value:g,onChange:W=>j(W.target.value)})]}),e.jsxs(Le,{children:[e.jsx(P,{onClick:()=>y(!1),children:"Cancel"}),e.jsx(P,{onClick:p,variant:"contained",disabled:!g.trim(),children:"Send Message"})]})]})})]})},_i=he("input")({display:"none"}),ih=()=>{const t=ve(),r=Oe(),s=ot();Te(t.breakpoints.down("sm"));const{user:n}=je(I=>I.auth),{profile:i,loading:c,error:d}=je(I=>I.worker),[x,m]=l.useState({open:!1,message:"",severity:"success"}),[u,v]=l.useState({firstName:"",lastName:"",title:"",bio:"",hourlyRate:"",experience:"",skills:[],education:[],languages:[],location:"",phone:"",profileImage:null,portfolio:[]}),[y,g]=l.useState(null),[j,b]=l.useState(""),[C,A]=l.useState({degree:"",institution:"",year:""}),[w,p]=l.useState({language:"",proficiency:"Beginner"});l.useEffect(()=>{s(ka()).unwrap().then(I=>{v({firstName:I.firstName||(n==null?void 0:n.firstName)||"",lastName:I.lastName||(n==null?void 0:n.lastName)||"",title:I.title||"",bio:I.bio||"",hourlyRate:I.hourlyRate||"",experience:I.experience||"",skills:I.skills||[],education:I.education||[],languages:I.languages||[],location:I.location||"",phone:I.phone||"",profileImage:null,portfolio:I.portfolio||[]}),g(I.profileImageUrl)}).catch(I=>{console.error("Error loading profile:",I),m({open:!0,message:"Failed to load profile. Please try again.",severity:"error"})})},[s,n]);const k=I=>{const{name:L,value:S}=I.target;v(B=>({...B,[L]:S}))},U=I=>{const L=I.target.files[0];if(L){v(B=>({...B,profileImage:L}));const S=new FileReader;S.onloadend=()=>{g(S.result)},S.readAsDataURL(L)}},W=()=>{j.trim()&&!u.skills.includes(j.trim())&&(v(I=>({...I,skills:[...I.skills,j.trim()]})),b(""))},R=I=>{v(L=>({...L,skills:L.skills.filter(S=>S!==I)}))},K=I=>{const{name:L,value:S}=I.target;A(B=>({...B,[L]:S}))},_=()=>{C.degree&&C.institution&&(v(I=>({...I,education:[...I.education,{...C}]})),A({degree:"",institution:"",year:""}))},O=I=>{v(L=>({...L,education:L.education.filter((S,B)=>B!==I)}))},T=I=>{const{name:L,value:S}=I.target;p(B=>({...B,[L]:S}))},H=()=>{w.language&&(v(I=>({...I,languages:[...I.languages,{...w}]})),p({language:"",proficiency:"Beginner"}))},F=I=>{v(L=>({...L,languages:L.languages.filter((S,B)=>B!==I)}))},V=()=>{v(I=>({...I,portfolio:[...I.portfolio,{title:"",description:"",image:null,imagePreview:null}]}))},re=I=>{v(L=>({...L,portfolio:L.portfolio.filter((S,B)=>B!==I)}))},z=(I,L,S)=>{const B=[...u.portfolio];B[I]={...B[I],[L]:S},v(D=>({...D,portfolio:B}))},J=(I,L)=>{const S=I.target.files[0];if(S){const B=[...u.portfolio];B[L]={...B[L],image:S};const D=new FileReader;D.onloadend=()=>{B[L].imagePreview=D.result,v(N=>({...N,portfolio:B}))},D.readAsDataURL(S)}},f=async I=>{I.preventDefault();const L=new FormData;Object.keys(u).forEach(S=>{S==="profileImage"&&u[S]?L.append("profileImage",u[S]):S==="skills"||S==="education"||S==="languages"||S==="portfolio"?L.append(S,JSON.stringify(u[S])):L.append(S,u[S])}),u.portfolio.forEach((S,B)=>{S.image&&L.append(`portfolioImage${B}`,S.image)});try{await s(Sa(L)).unwrap(),m({open:!0,message:"Profile updated successfully!",severity:"success"}),setTimeout(()=>{r("/worker/profile")},2e3)}catch(S){console.error("Error updating profile:",S),m({open:!0,message:"Failed to update profile. Please try again.",severity:"error"})}},M=()=>{r("/worker/profile")},G=()=>{m(I=>({...I,open:!1}))};return e.jsxs(ye,{maxWidth:"lg",sx:{py:4},children:[e.jsxs(o,{sx:{mb:4},children:[e.jsx(a,{variant:"h4",gutterBottom:!0,fontWeight:"bold",children:"Edit Your Profile"}),e.jsx(a,{variant:"body1",color:"text.secondary",children:"Complete your profile to attract more job opportunities"})]}),e.jsx(Wt,{open:x.open,autoHideDuration:6e3,onClose:G,anchorOrigin:{vertical:"top",horizontal:"center"},children:e.jsx(be,{onClose:G,severity:x.severity,sx:{width:"100%"},children:x.message})}),d&&e.jsx(be,{severity:"error",sx:{mb:3},children:d}),e.jsxs("form",{onSubmit:f,children:[e.jsxs(se,{elevation:3,sx:{p:3,mb:4,borderRadius:2},children:[e.jsx(a,{variant:"h6",gutterBottom:!0,sx:{color:t.palette.primary.main},children:"Basic Information"}),e.jsxs(o,{sx:{display:"flex",flexDirection:"column",alignItems:"center",mb:4},children:[e.jsx(we,{src:y,alt:`${u.firstName} ${u.lastName}`,sx:{width:150,height:150,mb:2}}),e.jsxs("label",{htmlFor:"profile-image",children:[e.jsx(_i,{accept:"image/*",id:"profile-image",type:"file",onChange:U}),e.jsx(P,{component:"span",variant:"outlined",startIcon:e.jsx(zn,{}),children:"Change Profile Picture"})]})]}),e.jsxs(h,{container:!0,spacing:3,children:[e.jsx(h,{item:!0,xs:12,sm:6,children:e.jsx(Q,{fullWidth:!0,label:"First Name",name:"firstName",value:u.firstName,onChange:k,required:!0,InputProps:{startAdornment:e.jsx(We,{position:"start",children:e.jsx(PersonIcon,{})})}})}),e.jsx(h,{item:!0,xs:12,sm:6,children:e.jsx(Q,{fullWidth:!0,label:"Last Name",name:"lastName",value:u.lastName,onChange:k,required:!0,InputProps:{startAdornment:e.jsx(We,{position:"start",children:e.jsx(PersonIcon,{})})}})}),e.jsx(h,{item:!0,xs:12,children:e.jsx(Q,{fullWidth:!0,label:"Professional Title",name:"title",value:u.title,onChange:k,required:!0,placeholder:"e.g. Senior Plumber, Experienced Electrician",InputProps:{startAdornment:e.jsx(We,{position:"start",children:e.jsx(_s,{})})}})}),e.jsx(h,{item:!0,xs:12,sm:6,children:e.jsx(Q,{fullWidth:!0,label:"Location",name:"location",value:u.location,onChange:k,placeholder:"City, State/Province, Country",InputProps:{startAdornment:e.jsx(We,{position:"start",children:e.jsx(nt,{})})}})}),e.jsx(h,{item:!0,xs:12,sm:6,children:e.jsx(Q,{fullWidth:!0,label:"Phone Number",name:"phone",value:u.phone,onChange:k})})]})]}),e.jsxs(se,{elevation:3,sx:{p:3,mb:4,borderRadius:2},children:[e.jsx(a,{variant:"h6",gutterBottom:!0,sx:{color:t.palette.primary.main},children:"Professional Information"}),e.jsxs(h,{container:!0,spacing:3,children:[e.jsx(h,{item:!0,xs:12,sm:6,children:e.jsx(Q,{fullWidth:!0,label:"Hourly Rate ($)",name:"hourlyRate",type:"number",value:u.hourlyRate,onChange:k,InputProps:{startAdornment:e.jsx(We,{position:"start",children:e.jsx(Xn,{})})}})}),e.jsx(h,{item:!0,xs:12,sm:6,children:e.jsx(Q,{fullWidth:!0,label:"Years of Experience",name:"experience",type:"number",value:u.experience,onChange:k,InputProps:{startAdornment:e.jsx(We,{position:"start",children:e.jsx(_s,{})})}})}),e.jsx(h,{item:!0,xs:12,children:e.jsx(Q,{fullWidth:!0,label:"Bio",name:"bio",value:u.bio,onChange:k,multiline:!0,rows:4,placeholder:"Tell potential clients about yourself, your experience, and why they should hire you.",InputProps:{startAdornment:e.jsx(We,{position:"start",sx:{alignSelf:"flex-start",mt:1.5},children:e.jsx($s,{})})}})})]})]}),e.jsxs(se,{elevation:3,sx:{p:3,mb:4,borderRadius:2},children:[e.jsx(a,{variant:"h6",gutterBottom:!0,sx:{color:t.palette.primary.main},children:"Skills"}),e.jsxs(o,{sx:{mb:2},children:[e.jsxs(o,{sx:{display:"flex",mb:2},children:[e.jsx(Q,{fullWidth:!0,label:"Add a Skill",value:j,onChange:I=>b(I.target.value),onKeyPress:I=>I.key==="Enter"&&W(),placeholder:"e.g. Plumbing, Electrical Installation, Carpentry",InputProps:{startAdornment:e.jsx(We,{position:"start",children:e.jsx(Va,{})})}}),e.jsx(P,{variant:"contained",onClick:W,sx:{ml:1},startIcon:e.jsx(na,{}),children:"Add"})]}),e.jsx(o,{sx:{display:"flex",flexWrap:"wrap",gap:1},children:u.skills.map((I,L)=>e.jsx(ee,{label:I,onDelete:()=>R(I),color:"primary",variant:"outlined"},L))})]})]}),e.jsxs(se,{elevation:3,sx:{p:3,mb:4,borderRadius:2},children:[e.jsx(a,{variant:"h6",gutterBottom:!0,sx:{color:t.palette.primary.main},children:"Education & Certifications"}),e.jsxs(h,{container:!0,spacing:2,sx:{mb:2},children:[e.jsx(h,{item:!0,xs:12,sm:5,children:e.jsx(Q,{fullWidth:!0,label:"Degree/Certification",name:"degree",value:C.degree,onChange:K,placeholder:"e.g. Certified Plumber, Electrical Engineer",InputProps:{startAdornment:e.jsx(We,{position:"start",children:e.jsx(Ls,{})})}})}),e.jsx(h,{item:!0,xs:12,sm:4,children:e.jsx(Q,{fullWidth:!0,label:"Institution",name:"institution",value:C.institution,onChange:K,placeholder:"e.g. Trade School, University"})}),e.jsx(h,{item:!0,xs:12,sm:2,children:e.jsx(Q,{fullWidth:!0,label:"Year",name:"year",value:C.year,onChange:K,placeholder:"e.g. 2018"})}),e.jsx(h,{item:!0,xs:12,sm:1,children:e.jsx(P,{variant:"contained",onClick:_,fullWidth:!0,sx:{height:"100%"},children:e.jsx(na,{})})})]}),u.education.length>0&&e.jsxs(o,{children:[e.jsx(fe,{sx:{my:2}}),e.jsx(a,{variant:"subtitle1",gutterBottom:!0,children:"Added Education & Certifications"}),u.education.map((I,L)=>e.jsx(me,{variant:"outlined",sx:{mb:1},children:e.jsx(ce,{sx:{py:1,"&:last-child":{pb:1}},children:e.jsxs(o,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsxs(o,{children:[e.jsx(a,{variant:"subtitle1",children:I.degree}),e.jsxs(a,{variant:"body2",color:"text.secondary",children:[I.institution," ",I.year&&`(${I.year})`]})]}),e.jsx(ne,{size:"small",onClick:()=>O(L),color:"error",children:e.jsx(Ct,{})})]})})},L))]})]}),e.jsxs(se,{elevation:3,sx:{p:3,mb:4,borderRadius:2},children:[e.jsx(a,{variant:"h6",gutterBottom:!0,sx:{color:t.palette.primary.main},children:"Languages"}),e.jsxs(h,{container:!0,spacing:2,sx:{mb:2},children:[e.jsx(h,{item:!0,xs:12,sm:6,children:e.jsx(Q,{fullWidth:!0,label:"Language",name:"language",value:w.language,onChange:T,placeholder:"e.g. English, Spanish, French",InputProps:{startAdornment:e.jsx(We,{position:"start",children:e.jsx(Uc,{})})}})}),e.jsx(h,{item:!0,xs:12,sm:5,children:e.jsxs(Ne,{fullWidth:!0,children:[e.jsx(Ye,{id:"language-proficiency-label",children:"Proficiency"}),e.jsxs(Ge,{labelId:"language-proficiency-label",name:"proficiency",value:w.proficiency,onChange:T,label:"Proficiency",children:[e.jsx(Z,{value:"Beginner",children:"Beginner"}),e.jsx(Z,{value:"Intermediate",children:"Intermediate"}),e.jsx(Z,{value:"Advanced",children:"Advanced"}),e.jsx(Z,{value:"Native",children:"Native/Fluent"})]})]})}),e.jsx(h,{item:!0,xs:12,sm:1,children:e.jsx(P,{variant:"contained",onClick:H,fullWidth:!0,sx:{height:"100%"},children:e.jsx(na,{})})})]}),u.languages.length>0&&e.jsxs(o,{children:[e.jsx(fe,{sx:{my:2}}),e.jsx(a,{variant:"subtitle1",gutterBottom:!0,children:"Added Languages"}),u.languages.map((I,L)=>e.jsx(me,{variant:"outlined",sx:{mb:1},children:e.jsx(ce,{sx:{py:1,"&:last-child":{pb:1}},children:e.jsxs(o,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsxs(o,{children:[e.jsx(a,{variant:"subtitle1",children:I.language}),e.jsx(a,{variant:"body2",color:"text.secondary",children:I.proficiency})]}),e.jsx(ne,{size:"small",onClick:()=>F(L),color:"error",children:e.jsx(Ct,{})})]})})},L))]})]}),e.jsxs(se,{elevation:3,sx:{p:3,mb:4,borderRadius:2},children:[e.jsx(a,{variant:"h6",gutterBottom:!0,sx:{color:t.palette.primary.main},children:"Portfolio"}),e.jsx(a,{variant:"body2",color:"text.secondary",gutterBottom:!0,children:"Add examples of your previous work to showcase your skills"}),e.jsx(P,{variant:"outlined",onClick:V,startIcon:e.jsx(na,{}),sx:{mb:3},children:"Add Portfolio Item"}),e.jsx(h,{container:!0,spacing:3,children:u.portfolio.map((I,L)=>e.jsx(h,{item:!0,xs:12,sm:6,md:4,children:e.jsx(me,{variant:"outlined",children:e.jsxs(ce,{children:[e.jsxs(o,{sx:{mb:2},children:[e.jsxs(a,{variant:"subtitle1",gutterBottom:!0,children:["Portfolio Item #",L+1]}),e.jsx(ne,{size:"small",onClick:()=>re(L),color:"error",sx:{position:"absolute",top:8,right:8},children:e.jsx(Ct,{})})]}),e.jsx(Q,{fullWidth:!0,label:"Title",value:I.title||"",onChange:S=>z(L,"title",S.target.value),sx:{mb:2}}),e.jsx(Q,{fullWidth:!0,label:"Description",value:I.description||"",onChange:S=>z(L,"description",S.target.value),multiline:!0,rows:2,sx:{mb:2}}),e.jsxs(o,{sx:{textAlign:"center"},children:[I.imagePreview||I.image?e.jsx(o,{component:"img",src:I.imagePreview||I.image,alt:I.title,sx:{width:"100%",height:150,objectFit:"cover",mb:2,borderRadius:1}}):e.jsx(o,{sx:{width:"100%",height:150,backgroundColor:"rgba(0,0,0,0.1)",display:"flex",alignItems:"center",justifyContent:"center",mb:2,borderRadius:1},children:e.jsx(a,{variant:"body2",color:"text.secondary",children:"No image selected"})}),e.jsxs("label",{htmlFor:`portfolio-image-${L}`,children:[e.jsx(_i,{accept:"image/*",id:`portfolio-image-${L}`,type:"file",onChange:S=>J(S,L)}),e.jsx(P,{component:"span",variant:"outlined",size:"small",startIcon:e.jsx(zn,{}),children:I.imagePreview||I.image?"Change Image":"Add Image"})]})]})]})})},L))})]}),e.jsxs(o,{sx:{display:"flex",justifyContent:"space-between",mt:4},children:[e.jsx(P,{variant:"outlined",color:"error",startIcon:e.jsx(ps,{}),onClick:M,size:"large",children:"Cancel"}),e.jsx(P,{type:"submit",variant:"contained",color:"primary",startIcon:e.jsx(yo,{}),size:"large",disabled:c,children:c?"Saving...":"Save Profile"})]})]})]})};Jt`
  0% { background-position: -200px 0; }
  100% { background-position: calc(200px + 100%) 0; }
`;const oh=he(me)(({theme:t})=>({background:E(t.palette.background.paper,.9),backdropFilter:"blur(20px)",border:`1px solid ${E(t.palette.divider,.1)}`,borderRadius:16,transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)","&:hover":{transform:"translateY(-4px)",boxShadow:t.shadows[20],background:E(t.palette.background.paper,.95)}})),lh=he(oh)(({theme:t,urgent:r})=>({position:"relative",overflow:"hidden",cursor:"pointer",...r&&{border:`2px solid ${t.palette.warning.main}`,"&::before":{content:'""',position:"absolute",top:0,left:0,right:0,height:4,background:`linear-gradient(90deg, ${t.palette.warning.main}, ${t.palette.error.main})`}}})),ch=he(se)(({theme:t})=>({padding:t.spacing(3),marginBottom:t.spacing(3),borderRadius:16,background:E(t.palette.background.paper,.8),backdropFilter:"blur(10px)"})),Dn=he(P)(({theme:t})=>({borderRadius:25,padding:"10px 24px",fontWeight:600,textTransform:"none",transition:"all 0.3s ease-in-out","&:hover":{transform:"translateY(-2px)",boxShadow:t.shadows[8]}})),ha=he(me)(({theme:t})=>({background:`linear-gradient(135deg, ${E(t.palette.primary.main,.1)}, ${E(t.palette.secondary.main,.1)})`,border:`1px solid ${E(t.palette.primary.main,.2)}`,borderRadius:16,textAlign:"center",padding:t.spacing(2)})),dh=()=>{const t=ve(),r=Oe(),[s,n]=Il();ut(),Te(t.breakpoints.down("md")),Te(t.breakpoints.down("lg"));const[i,c]=l.useState([]),[d,x]=l.useState(0),[m,u]=l.useState(!1),[v,y]=l.useState(1),[g,j]=l.useState("grid"),[b,C]=l.useState(new Set),[A,w]=l.useState(new Set),[p,k]=l.useState({search:s.get("search")||"",location:s.get("location")||"",category:s.get("category")||"",skillLevel:s.get("skillLevel")||"",payRange:[Number(s.get("minPay"))||0,Number(s.get("maxPay"))||1e4],jobType:s.get("jobType")||"",sortBy:s.get("sortBy")||"relevance",datePosted:s.get("datePosted")||""}),[U,W]=l.useState({open:!1,job:null}),[R,K]=l.useState(!1),[_,O]=l.useState({open:!1,message:"",severity:"info"});l.useState(0);const T=["Electrical","Plumbing","Carpentry","HVAC","Masonry","Painting","Landscaping","Roofing","Welding","General Construction"],H=["Entry Level","Intermediate","Expert","Master Craftsman"],F=["Full-time","Part-time","Contract","Temporary","Project-based"],V=[{value:"relevance",label:"Relevance"},{value:"date",label:"Date Posted"},{value:"pay",label:"Pay Rate"},{value:"distance",label:"Distance"},{value:"rating",label:"Client Rating"}],re=l.useCallback(async(D=1,N=p)=>{u(!0);try{const q={page:D,limit:12,...N,minPay:N.payRange[0],maxPay:N.payRange[1]},$=await Qt.searchJobs(q);c($.data.jobs||[]),x($.data.total||0);const de=new URLSearchParams;Object.keys(q).forEach(Pe=>{q[Pe]&&q[Pe]!==""&&Pe!=="page"&&Pe!=="limit"&&de.set(Pe,q[Pe])}),n(de)}catch(q){console.error("Error fetching jobs:",q),O({open:!0,message:"Failed to load jobs. Please try again.",severity:"error"})}finally{u(!1)}},[p,n]);l.useEffect(()=>{re(v),z()},[v]);const z=async()=>{var D,N;try{const[q,$]=await Promise.all([Ht.getSavedJobs(),Ht.getApplications()]);C(new Set(((D=q.data)==null?void 0:D.map(de=>de.id))||[])),w(new Set(((N=$.data)==null?void 0:N.map(de=>de.job_id))||[]))}catch(q){console.error("Error loading user data:",q)}},J=(D,N)=>{const q={...p,[D]:N};k(q),y(1),re(1,q)},f=async(D,N)=>{N.stopPropagation();try{b.has(D)?(await Ht.unsaveJob(D),C(q=>{const $=new Set(q);return $.delete(D),$}),O({open:!0,message:"Job removed from saved",severity:"info"})):(await Ht.saveJob(D),C(q=>new Set([...q,D])),O({open:!0,message:"Job saved successfully",severity:"success"}))}catch{O({open:!0,message:"Failed to update bookmark",severity:"error"})}},M=D=>{if(A.has(D.id)){O({open:!0,message:"You have already applied to this job",severity:"warning"});return}W({open:!0,job:D})},G=()=>{const D={search:"",location:"",category:"",skillLevel:"",payRange:[0,1e4],jobType:"",sortBy:"relevance",datePosted:""};k(D),y(1),re(1,D)},I=()=>{navigator.geolocation&&navigator.geolocation.getCurrentPosition(D=>{O({open:!0,message:"Location updated",severity:"success"})},D=>{O({open:!0,message:"Could not get location",severity:"warning"})})},L=D=>{var N;return e.jsx(h,{item:!0,xs:12,sm:6,lg:g==="grid"?4:12,children:e.jsx(ge.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.3},children:e.jsxs(lh,{urgent:D.is_urgent,onClick:()=>r(`/jobs/${D.id}`),children:[D.is_urgent&&e.jsx(ee,{label:"URGENT",color:"warning",size:"small",sx:{position:"absolute",top:12,left:12,zIndex:1,fontWeight:700}}),e.jsxs(ce,{sx:{pb:1},children:[e.jsxs(o,{sx:{display:"flex",alignItems:"flex-start",mb:2},children:[e.jsx(we,{sx:{width:48,height:48,mr:2,bgcolor:"primary.main"},children:((N=D.company_name)==null?void 0:N.charAt(0))||"C"}),e.jsxs(o,{sx:{flexGrow:1,minWidth:0},children:[e.jsx(a,{variant:"h6",fontWeight:700,noWrap:!0,children:D.title}),e.jsx(a,{variant:"body2",color:"text.secondary",noWrap:!0,children:D.company_name}),e.jsxs(o,{sx:{display:"flex",alignItems:"center",mt:.5},children:[e.jsx(nt,{sx:{fontSize:16,mr:.5,color:"text.secondary"}}),e.jsx(a,{variant:"caption",color:"text.secondary",children:D.location})]})]}),e.jsx(ne,{size:"small",onClick:q=>f(D.id,q),sx:{color:b.has(D.id)?"primary.main":"text.secondary"},children:b.has(D.id)?e.jsx(Kt,{}):e.jsx(or,{})})]}),e.jsx(a,{variant:"body2",color:"text.secondary",sx:{mb:2,display:"-webkit-box",WebkitLineClamp:2,WebkitBoxOrient:"vertical",overflow:"hidden"},children:D.description}),e.jsxs(o,{sx:{display:"flex",gap:1,mb:2,flexWrap:"wrap"},children:[e.jsx(ee,{icon:e.jsx(ct,{}),label:`$${D.pay_rate}/hr`,size:"small",color:"primary",variant:"outlined"}),e.jsx(ee,{label:D.job_type,size:"small",variant:"outlined"}),D.skill_level&&e.jsx(ee,{label:D.skill_level,size:"small",variant:"outlined"})]}),e.jsxs(o,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsx(a,{variant:"caption",color:"text.secondary",children:Hs(new Date(D.created_at),{addSuffix:!0})}),D.client_rating&&e.jsxs(o,{sx:{display:"flex",alignItems:"center"},children:[e.jsx(Qe,{value:D.client_rating,size:"small",readOnly:!0}),e.jsxs(a,{variant:"caption",sx:{ml:.5},children:["(",D.client_rating,")"]})]})]})]}),e.jsx(wr,{sx:{pt:0,px:2,pb:2},children:e.jsx(Dn,{variant:A.has(D.id)?"outlined":"contained",color:A.has(D.id)?"success":"primary",size:"small",fullWidth:!0,startIcon:A.has(D.id)?e.jsx(Ve,{}):e.jsx(ds,{}),onClick:q=>{q.stopPropagation(),M(D)},disabled:A.has(D.id),children:A.has(D.id)?"Applied":"Apply Now"})})]})})},D.id)},S=()=>e.jsxs(ch,{children:[e.jsx(a,{variant:"h6",fontWeight:700,gutterBottom:!0,children:"Find Your Perfect Job"}),e.jsxs(h,{container:!0,spacing:2,alignItems:"center",children:[e.jsx(h,{item:!0,xs:12,md:4,children:e.jsx(Q,{fullWidth:!0,placeholder:"Search jobs, skills, companies...",value:p.search,onChange:D=>J("search",D.target.value),InputProps:{startAdornment:e.jsx(We,{position:"start",children:e.jsx(dt,{})})},sx:{"& .MuiOutlinedInput-root":{borderRadius:3}}})}),e.jsx(h,{item:!0,xs:12,md:3,children:e.jsx(Q,{fullWidth:!0,placeholder:"Location",value:p.location,onChange:D=>J("location",D.target.value),InputProps:{startAdornment:e.jsx(We,{position:"start",children:e.jsx(nt,{})}),endAdornment:e.jsx(We,{position:"end",children:e.jsx(xe,{title:"Use my location",children:e.jsx(ne,{size:"small",onClick:I,children:e.jsx(ms,{})})})})},sx:{"& .MuiOutlinedInput-root":{borderRadius:3}}})}),e.jsx(h,{item:!0,xs:12,md:2,children:e.jsxs(Ne,{fullWidth:!0,children:[e.jsx(Ye,{children:"Category"}),e.jsxs(Ge,{value:p.category,label:"Category",onChange:D=>J("category",D.target.value),sx:{borderRadius:3},children:[e.jsx(Z,{value:"",children:"All Categories"}),T.map(D=>e.jsx(Z,{value:D,children:D},D))]})]})}),e.jsx(h,{item:!0,xs:12,md:2,children:e.jsxs(Ne,{fullWidth:!0,children:[e.jsx(Ye,{children:"Sort By"}),e.jsx(Ge,{value:p.sortBy,label:"Sort By",onChange:D=>J("sortBy",D.target.value),sx:{borderRadius:3},children:V.map(D=>e.jsx(Z,{value:D.value,children:D.label},D.value))})]})}),e.jsx(h,{item:!0,xs:12,md:1,children:e.jsx(o,{sx:{display:"flex",gap:1},children:e.jsx(xe,{title:"Advanced Filters",children:e.jsx(ne,{onClick:()=>K(!0),color:"primary",sx:{bgcolor:E(t.palette.primary.main,.1),"&:hover":{bgcolor:E(t.palette.primary.main,.2)}},children:e.jsx(Ns,{})})})})})]}),Object.values(p).some(D=>D&&D!==""&&JSON.stringify(D)!==JSON.stringify([0,1e4]))&&e.jsxs(o,{sx:{mt:2,display:"flex",gap:1,flexWrap:"wrap",alignItems:"center"},children:[e.jsx(a,{variant:"body2",color:"text.secondary",children:"Active filters:"}),p.category&&e.jsx(ee,{label:`Category: ${p.category}`,size:"small",onDelete:()=>J("category","")}),p.skillLevel&&e.jsx(ee,{label:`Level: ${p.skillLevel}`,size:"small",onDelete:()=>J("skillLevel","")}),p.jobType&&e.jsx(ee,{label:`Type: ${p.jobType}`,size:"small",onDelete:()=>J("jobType","")}),e.jsx(P,{size:"small",onClick:G,startIcon:e.jsx(Nr,{}),sx:{minWidth:"auto"},children:"Clear All"})]})]}),B=()=>e.jsxs(h,{container:!0,spacing:2,sx:{mb:3},children:[e.jsx(h,{item:!0,xs:6,sm:3,children:e.jsxs(ha,{children:[e.jsx(dr,{color:"primary",sx:{fontSize:32,mb:1}}),e.jsx(a,{variant:"h6",fontWeight:700,children:d.toLocaleString()}),e.jsx(a,{variant:"body2",color:"text.secondary",children:"Available Jobs"})]})}),e.jsx(h,{item:!0,xs:6,sm:3,children:e.jsxs(ha,{children:[e.jsx(Ci,{color:"primary",sx:{fontSize:32,mb:1}}),e.jsx(a,{variant:"h6",fontWeight:700,children:b.size}),e.jsx(a,{variant:"body2",color:"text.secondary",children:"Saved Jobs"})]})}),e.jsx(h,{item:!0,xs:6,sm:3,children:e.jsxs(ha,{children:[e.jsx(Ve,{color:"primary",sx:{fontSize:32,mb:1}}),e.jsx(a,{variant:"h6",fontWeight:700,children:A.size}),e.jsx(a,{variant:"body2",color:"text.secondary",children:"Applications"})]})}),e.jsx(h,{item:!0,xs:6,sm:3,children:e.jsxs(ha,{children:[e.jsx(cr,{color:"primary",sx:{fontSize:32,mb:1}}),e.jsx(a,{variant:"h6",fontWeight:700,children:"23%"}),e.jsx(a,{variant:"body2",color:"text.secondary",children:"Match Rate"})]})})]});return e.jsxs(e.Fragment,{children:[e.jsxs(Fr,{children:[e.jsx("title",{children:"Find Jobs - Professional Opportunities | Kelmah"}),e.jsx("meta",{name:"description",content:"Discover professional job opportunities in construction, electrical, plumbing, carpentry and more. Apply to jobs that match your skills and experience."})]}),e.jsxs(ye,{maxWidth:"xl",sx:{py:4},children:[e.jsxs(Ys,{sx:{mb:3},children:[e.jsxs(et,{color:"inherit",component:Fe,to:"/",children:[e.jsx(Ua,{sx:{mr:.5},fontSize:"inherit"}),"Home"]}),e.jsx(et,{color:"inherit",component:Fe,to:"/worker/dashboard",children:"Dashboard"}),e.jsx(a,{color:"text.primary",children:"Find Jobs"})]}),e.jsxs(o,{sx:{mb:4},children:[e.jsx(a,{variant:"h3",fontWeight:700,gutterBottom:!0,children:"Find Your Next Opportunity"}),e.jsx(a,{variant:"h6",color:"text.secondary",children:"Discover jobs that match your skills and advance your career"})]}),B(),S(),e.jsxs(o,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:3},children:[e.jsx(a,{variant:"h6",fontWeight:600,children:m?"Loading...":`${d} jobs found`}),e.jsxs(o,{sx:{display:"flex",alignItems:"center",gap:2},children:[e.jsx(xe,{title:"Refresh",children:e.jsx(ne,{onClick:()=>re(v),disabled:m,children:e.jsx(Jr,{})})}),e.jsxs(si,{value:g,exclusive:!0,onChange:(D,N)=>N&&j(N),size:"small",children:[e.jsx(Dr,{value:"grid",children:e.jsx(Hc,{})}),e.jsx(Dr,{value:"list",children:e.jsx(vo,{})})]})]})]}),m?e.jsx(h,{container:!0,spacing:3,children:Array.from({length:12}).map((D,N)=>e.jsx(h,{item:!0,xs:12,sm:6,lg:g==="grid"?4:12,children:e.jsx(me,{sx:{borderRadius:2},children:e.jsxs(ce,{children:[e.jsxs(o,{sx:{display:"flex",alignItems:"center",mb:2},children:[e.jsx(ie,{variant:"circular",width:48,height:48,sx:{mr:2}}),e.jsxs(o,{sx:{flexGrow:1},children:[e.jsx(ie,{variant:"text",width:"60%",height:24}),e.jsx(ie,{variant:"text",width:"40%",height:20})]})]}),e.jsx(ie,{variant:"text",width:"100%",height:20}),e.jsx(ie,{variant:"text",width:"80%",height:20}),e.jsxs(o,{sx:{display:"flex",gap:1,mt:2},children:[e.jsx(ie,{variant:"rectangular",width:80,height:24,sx:{borderRadius:1}}),e.jsx(ie,{variant:"rectangular",width:60,height:24,sx:{borderRadius:1}})]})]})})},N))}):i.length>0?e.jsxs(e.Fragment,{children:[e.jsx(h,{container:!0,spacing:3,children:e.jsx(Bt,{children:i.map(D=>L(D))})}),d>12&&e.jsx(o,{sx:{display:"flex",justifyContent:"center",mt:4},children:e.jsx(Gt,{count:Math.ceil(d/12),page:v,onChange:(D,N)=>y(N),color:"primary",size:"large",sx:{"& .MuiPaginationItem-root":{borderRadius:2}}})})]}):e.jsxs(o,{sx:{textAlign:"center",py:8},children:[e.jsx(dr,{sx:{fontSize:80,color:"text.secondary",mb:2}}),e.jsx(a,{variant:"h5",fontWeight:600,gutterBottom:!0,children:"No jobs found"}),e.jsx(a,{variant:"body1",color:"text.secondary",sx:{mb:3},children:"Try adjusting your search criteria or filters"}),e.jsx(Dn,{variant:"contained",onClick:G,startIcon:e.jsx(Nr,{}),children:"Clear Filters"})]}),e.jsxs(Ee,{open:R,onClose:()=>K(!1),maxWidth:"md",fullWidth:!0,children:[e.jsx(Me,{children:e.jsxs(o,{sx:{display:"flex",alignItems:"center",justifyContent:"space-between"},children:[e.jsx(a,{variant:"h5",fontWeight:600,children:"Advanced Filters"}),e.jsx(ne,{onClick:()=>K(!1),children:e.jsx(vr,{})})]})}),e.jsx(ze,{children:e.jsxs(h,{container:!0,spacing:3,sx:{mt:1},children:[e.jsx(h,{item:!0,xs:12,md:6,children:e.jsxs(Ne,{fullWidth:!0,children:[e.jsx(Ye,{children:"Skill Level"}),e.jsxs(Ge,{value:p.skillLevel,label:"Skill Level",onChange:D=>J("skillLevel",D.target.value),children:[e.jsx(Z,{value:"",children:"Any Level"}),H.map(D=>e.jsx(Z,{value:D,children:D},D))]})]})}),e.jsx(h,{item:!0,xs:12,md:6,children:e.jsxs(Ne,{fullWidth:!0,children:[e.jsx(Ye,{children:"Job Type"}),e.jsxs(Ge,{value:p.jobType,label:"Job Type",onChange:D=>J("jobType",D.target.value),children:[e.jsx(Z,{value:"",children:"Any Type"}),F.map(D=>e.jsx(Z,{value:D,children:D},D))]})]})}),e.jsxs(h,{item:!0,xs:12,children:[e.jsxs(a,{gutterBottom:!0,children:["Pay Range: $",p.payRange[0]," - $",p.payRange[1]," per hour"]}),e.jsx(Yr,{value:p.payRange,onChange:(D,N)=>J("payRange",N),valueLabelDisplay:"auto",min:0,max:200,step:5,marks:[{value:0,label:"$0"},{value:50,label:"$50"},{value:100,label:"$100"},{value:200,label:"$200+"}]})]}),e.jsx(h,{item:!0,xs:12,children:e.jsxs(Ne,{fullWidth:!0,children:[e.jsx(Ye,{children:"Date Posted"}),e.jsxs(Ge,{value:p.datePosted,label:"Date Posted",onChange:D=>J("datePosted",D.target.value),children:[e.jsx(Z,{value:"",children:"Any Time"}),e.jsx(Z,{value:"today",children:"Today"}),e.jsx(Z,{value:"week",children:"This Week"}),e.jsx(Z,{value:"month",children:"This Month"})]})]})})]})}),e.jsxs(Le,{sx:{p:3},children:[e.jsx(P,{onClick:G,startIcon:e.jsx(Nr,{}),children:"Clear All"}),e.jsx(Dn,{variant:"contained",onClick:()=>K(!1),children:"Apply Filters"})]})]}),e.jsx(Wt,{open:_.open,autoHideDuration:4e3,onClose:()=>O({..._,open:!1}),children:e.jsx(be,{severity:_.severity,onClose:()=>O({..._,open:!1}),sx:{borderRadius:2},children:_.message})}),e.jsxs(Zn,{ariaLabel:"Quick Actions",sx:{position:"fixed",bottom:16,right:16},icon:e.jsx(ei,{}),children:[e.jsx(ir,{icon:e.jsx(Ci,{}),tooltipTitle:"Saved Jobs",onClick:()=>r("/worker/saved-jobs")}),e.jsx(ir,{icon:e.jsx(ds,{}),tooltipTitle:"My Applications",onClick:()=>r("/worker/applications")}),e.jsx(ir,{icon:e.jsx(Ns,{}),tooltipTitle:"Advanced Filters",onClick:()=>K(!0)})]})]})]})},uh=({job:t,onViewDetails:r})=>{if(!t)return null;const{id:s,title:n,description:i,budget:c,location:d,postedDate:x,deadline:m,category:u,skills:v=[],hirerName:y,hirerRating:g}=t;return e.jsxs(me,{sx:{mb:2,borderRadius:2,boxShadow:2},children:[e.jsxs(ce,{children:[e.jsxs(o,{sx:{display:"flex",justifyContent:"space-between",mb:1},children:[e.jsx(a,{variant:"h6",component:"div",children:n}),e.jsx(ee,{size:"small",label:u,color:"primary",variant:"outlined"})]}),e.jsxs(a,{variant:"body2",color:"text.secondary",sx:{mb:2},children:[i==null?void 0:i.substring(0,150),(i==null?void 0:i.length)>150?"...":""]}),e.jsxs(te,{direction:"row",spacing:2,sx:{mb:2},children:[e.jsxs(o,{sx:{display:"flex",alignItems:"center"},children:[e.jsx(ct,{fontSize:"small",color:"action",sx:{mr:.5}}),e.jsxs(a,{variant:"body2",children:["$",c]})]}),e.jsxs(o,{sx:{display:"flex",alignItems:"center"},children:[e.jsx(nt,{fontSize:"small",color:"action",sx:{mr:.5}}),e.jsx(a,{variant:"body2",children:d})]}),e.jsxs(o,{sx:{display:"flex",alignItems:"center"},children:[e.jsx(cs,{fontSize:"small",color:"action",sx:{mr:.5}}),e.jsx(a,{variant:"body2",children:new Date(x).toLocaleDateString()})]})]}),e.jsx(o,{sx:{display:"flex",flexWrap:"wrap",gap:.5,mb:2},children:v.map((j,b)=>e.jsx(ee,{label:j,size:"small",variant:"outlined",sx:{mr:.5,mb:.5}},b))}),e.jsx(fe,{sx:{my:1.5}}),e.jsxs(o,{sx:{display:"flex",alignItems:"center"},children:[e.jsx(we,{sx:{width:32,height:32,mr:1},children:y?y[0].toUpperCase():"H"}),e.jsx(a,{variant:"body2",children:y}),g&&e.jsxs(o,{sx:{display:"flex",alignItems:"center",ml:"auto"},children:[e.jsx(rt,{sx:{color:"gold",fontSize:18,mr:.5}}),e.jsx(a,{variant:"body2",children:g})]})]})]}),e.jsx(wr,{children:e.jsx(P,{size:"small",variant:"contained",onClick:()=>r==null?void 0:r(s),fullWidth:!0,children:"View Details"})})]})},cl=({worker:t})=>{var n,i;const r=Oe(),s=()=>{r(`/workers/${t.id}`)};return e.jsx(me,{elevation:2,sx:{height:"100%",display:"flex",flexDirection:"column",transition:"transform 0.2s, box-shadow 0.2s","&:hover":{transform:"translateY(-4px)",boxShadow:6}},children:e.jsx(Mn,{onClick:s,sx:{flexGrow:1},children:e.jsxs(ce,{children:[e.jsxs(o,{sx:{display:"flex",alignItems:"center",mb:2},children:[e.jsx(we,{src:t.profileImage,alt:t.name,sx:{width:56,height:56,mr:2}}),e.jsxs(o,{children:[e.jsx(a,{variant:"h6",component:"h2",noWrap:!0,children:t.name}),e.jsx(a,{variant:"body2",color:"text.secondary",noWrap:!0,children:t.title||"Freelancer"}),e.jsxs(o,{sx:{display:"flex",alignItems:"center",mt:.5},children:[e.jsx(Qe,{value:t.rating||0,precision:.5,size:"small",readOnly:!0,emptyIcon:e.jsx(rt,{style:{opacity:.55},fontSize:"inherit"})}),e.jsxs(a,{variant:"caption",color:"text.secondary",sx:{ml:.5},children:["(",t.reviewCount||0,")"]})]})]})]}),e.jsx(a,{variant:"body2",color:"text.secondary",sx:{minHeight:"3em",overflow:"hidden",textOverflow:"ellipsis",display:"-webkit-box",WebkitLineClamp:2,WebkitBoxOrient:"vertical",mb:2},children:t.bio||"No bio provided"}),e.jsxs(te,{direction:"row",spacing:1,sx:{mb:2,flexWrap:"wrap",gap:.5},children:[(n=t.skills)==null?void 0:n.slice(0,3).map(c=>e.jsx(ee,{label:c,size:"small",variant:"outlined"},c)),((i=t.skills)==null?void 0:i.length)>3&&e.jsx(ee,{label:`+${t.skills.length-3}`,size:"small",variant:"outlined"})]}),e.jsx(fe,{sx:{my:1}}),e.jsxs(h,{container:!0,spacing:1,children:[e.jsx(h,{item:!0,xs:6,children:e.jsxs(o,{sx:{display:"flex",alignItems:"center"},children:[e.jsx(ct,{fontSize:"small",sx:{mr:.5,color:"text.secondary"}}),e.jsxs(a,{variant:"body2",color:"text.primary",children:["$",t.hourlyRate||"--","/hr"]})]})}),e.jsx(h,{item:!0,xs:6,children:e.jsxs(o,{sx:{display:"flex",alignItems:"center"},children:[e.jsx(dr,{fontSize:"small",sx:{mr:.5,color:"text.secondary"}}),e.jsx(a,{variant:"body2",color:"text.secondary",children:t.jobSuccess?`${t.jobSuccess}% Success`:"New Worker"})]})}),t.location&&e.jsx(h,{item:!0,xs:12,children:e.jsxs(o,{sx:{display:"flex",alignItems:"center"},children:[e.jsx(nt,{fontSize:"small",sx:{mr:.5,color:"text.secondary"}}),e.jsx(a,{variant:"body2",color:"text.secondary",noWrap:!0,children:t.location})]})})]})]})})})};cl.propTypes={worker:Y.shape({id:Y.string.isRequired,name:Y.string.isRequired,profileImage:Y.string,title:Y.string,bio:Y.string,rating:Y.number,reviewCount:Y.number,hourlyRate:Y.number,jobSuccess:Y.number,location:Y.string,skills:Y.arrayOf(Y.string)}).isRequired};function Ni(t){const{children:r,value:s,index:n,...i}=t;return e.jsx("div",{role:"tabpanel",hidden:s!==n,id:`search-tabpanel-${n}`,"aria-labelledby":`search-tab-${n}`,...i,children:s===n&&e.jsx(o,{sx:{py:3},children:r})})}const xh=({onRetry:t,onManualEntry:r})=>{const s=ve();return e.jsxs(se,{sx:{p:{xs:4,sm:6},mb:4,textAlign:"center",background:`linear-gradient(135deg, ${E(s.palette.secondary.main,.1)} 0%, ${E(s.palette.secondary.main,.05)} 100%)`,border:`2px solid ${E(s.palette.secondary.main,.3)}`,borderRadius:3,position:"relative",overflow:"hidden"},children:[e.jsx(Gc,{sx:{fontSize:80,color:s.palette.secondary.main,mb:3}}),e.jsx(a,{variant:"h4",gutterBottom:!0,fontWeight:"bold",sx:{color:s.palette.secondary.main,fontSize:{xs:"1.5rem",sm:"2rem"}},children:"🌍 Let's Find Your Location!"}),e.jsx(a,{variant:"h6",sx:{mb:4,maxWidth:600,mx:"auto",color:s.palette.text.primary,fontSize:{xs:"1rem",sm:"1.1rem"},lineHeight:1.6,fontWeight:500},children:"To show you the most relevant jobs and professionals in your area, we need to know your location. You can either allow location access or enter your city manually."}),e.jsxs(te,{direction:{xs:"column",sm:"row"},spacing:3,justifyContent:"center",sx:{mb:4},children:[e.jsx(P,{variant:"contained",size:"large",startIcon:e.jsx(ms,{}),onClick:t,sx:{px:4,py:2,fontSize:"1.1rem",fontWeight:"bold",backgroundColor:s.palette.secondary.main,color:s.palette.secondary.contrastText,borderRadius:3,"&:hover":{backgroundColor:s.palette.secondary.dark,transform:"translateY(-3px)",boxShadow:`0 8px 25px ${E(s.palette.secondary.main,.5)}`}},children:"Allow Location Access"}),e.jsx(P,{variant:"outlined",size:"large",startIcon:e.jsx(Vc,{}),onClick:r,sx:{px:4,py:2,fontSize:"1.1rem",fontWeight:"bold",borderColor:s.palette.secondary.main,color:s.palette.secondary.main,borderWidth:2,borderRadius:3,"&:hover":{borderColor:s.palette.secondary.light,backgroundColor:E(s.palette.secondary.main,.1),transform:"translateY(-3px)"}},children:"Enter Location Manually"})]}),e.jsx(o,{sx:{p:3,backgroundColor:E(s.palette.secondary.main,.1),borderRadius:3,border:`1px solid ${E(s.palette.secondary.main,.3)}`},children:e.jsxs(a,{variant:"body1",sx:{color:s.palette.text.primary,fontSize:"1rem",fontWeight:500,lineHeight:1.6},children:["💡"," ",e.jsx(a,{component:"span",sx:{fontWeight:"bold",color:s.palette.secondary.main},children:"Why location matters:"})," ","We use your location to show nearby opportunities, calculate travel distances, and connect you with local professionals and clients."]})})]})},hh=({searchType:t,location:r,setLocation:s,keywords:n,setKeywords:i,distance:c,setDistance:d,category:x,setCategory:m,sortBy:u,setSortBy:v,categories:y,skills:g,loading:j,onSearch:b,onClearFilters:C,suggestedLocations:A,getCurrentLocation:w})=>{const p=ve(),[k,U]=l.useState(!1);return e.jsxs(se,{sx:{p:3,mb:4,borderRadius:3,border:`2px solid ${E(p.palette.secondary.main,.3)}`,backgroundColor:p.palette.background.paper,boxShadow:`0 8px 32px ${E(p.palette.common.black,.2)}`},children:[e.jsxs(a,{variant:"h5",gutterBottom:!0,fontWeight:"bold",sx:{color:p.palette.secondary.main,textAlign:"center",mb:3,fontSize:{xs:"1.25rem",sm:"1.5rem"}},children:["🎯 Local Search - Find ",t===0?"Jobs":"Professionals"," ","Near You"]}),e.jsxs(h,{container:!0,spacing:3,alignItems:"center",children:[e.jsx(h,{item:!0,xs:12,md:5,children:e.jsxs(o,{sx:{position:"relative"},children:[e.jsx(Q,{fullWidth:!0,label:"Your Location",value:r,onChange:W=>s(W.target.value),placeholder:"City, State, Country",sx:{"& .MuiOutlinedInput-root":{borderRadius:3,backgroundColor:E(p.palette.background.default,.3),"& fieldset":{borderColor:p.palette.secondary.main,borderWidth:2},"&:hover fieldset":{borderColor:p.palette.secondary.light},"&.Mui-focused fieldset":{borderColor:p.palette.secondary.main}}},InputProps:{startAdornment:e.jsx(We,{position:"start",children:e.jsx(nt,{sx:{color:p.palette.secondary.main,fontSize:28}})}),endAdornment:e.jsx(We,{position:"end",children:e.jsx(xe,{title:"Use your current location",children:e.jsx(ne,{onClick:w,edge:"end",disabled:j,sx:{color:p.palette.secondary.main,"&:hover":{backgroundColor:E(p.palette.secondary.main,.1)}},children:j?e.jsx(Ae,{size:24,sx:{color:p.palette.secondary.main}}):e.jsx(ms,{sx:{fontSize:28}})})})})}}),A.length>0&&e.jsx(se,{elevation:12,sx:{mt:1,position:"absolute",zIndex:100,width:"100%",maxHeight:250,overflow:"auto",borderRadius:3,border:`2px solid ${E(p.palette.secondary.main,.3)}`,backgroundColor:p.palette.background.paper},children:e.jsx(Ke,{dense:!0,children:A.map(W=>e.jsxs(Be,{button:!0,onClick:()=>{s(W.description)},sx:{py:1.5,"&:hover":{backgroundColor:E(p.palette.secondary.main,.1)}},children:[e.jsx(Ze,{sx:{minWidth:36},children:e.jsx(nt,{fontSize:"small",sx:{color:p.palette.secondary.main}})}),e.jsx(Ie,{primary:W.description,sx:{"& .MuiTypography-root":{color:p.palette.text.primary,fontWeight:500}}})]},W.id))})})]})}),e.jsx(h,{item:!0,xs:12,md:4,children:e.jsx(Q,{fullWidth:!0,label:`Search for ${t===0?"jobs":"workers"}`,value:n,onChange:W=>i(W.target.value),placeholder:t===0?"Job title, keywords":"Skills, name, title",sx:{"& .MuiOutlinedInput-root":{borderRadius:3,backgroundColor:E(p.palette.background.default,.3),"& fieldset":{borderColor:p.palette.secondary.main,borderWidth:2},"&:hover fieldset":{borderColor:p.palette.secondary.light},"&.Mui-focused fieldset":{borderColor:p.palette.secondary.main}}},InputProps:{startAdornment:e.jsx(We,{position:"start",children:e.jsx(dt,{sx:{color:p.palette.secondary.main,fontSize:28}})})}})}),e.jsx(h,{item:!0,xs:8,md:2,children:e.jsxs(o,{children:[e.jsxs(a,{variant:"body2",gutterBottom:!0,fontWeight:"bold",sx:{color:p.palette.secondary.main,textAlign:"center"},children:["Radius: ",c," miles"]}),e.jsx(Yr,{value:c,onChange:(W,R)=>d(R),min:5,max:100,step:5,sx:{"& .MuiSlider-thumb":{backgroundColor:p.palette.secondary.main,border:`3px solid ${p.palette.secondary.main}`,width:24,height:24},"& .MuiSlider-track":{backgroundColor:p.palette.secondary.main,height:6},"& .MuiSlider-rail":{backgroundColor:E(p.palette.secondary.main,.3),height:6}}})]})}),e.jsx(h,{item:!0,xs:4,md:1,children:e.jsx(P,{fullWidth:!0,variant:"contained",onClick:()=>b(1),disabled:j,sx:{py:2.5,borderRadius:3,backgroundColor:p.palette.secondary.main,color:p.palette.secondary.contrastText,fontWeight:"bold","&:hover":{backgroundColor:p.palette.secondary.dark,transform:"translateY(-2px)",boxShadow:`0 8px 25px ${E(p.palette.secondary.main,.4)}`}},startIcon:j?e.jsx(Ae,{size:20}):e.jsx(dt,{}),children:"Search"})})]}),e.jsx(o,{sx:{mt:2,display:"flex",justifyContent:"center"},children:e.jsx(P,{variant:"text",startIcon:e.jsx(Ns,{}),endIcon:k?e.jsx(qs,{}):e.jsx(nr,{}),onClick:()=>U(!k),sx:{color:p.palette.secondary.main,fontWeight:"bold"},children:"Advanced Filters"})}),e.jsxs(Gs,{in:k,children:[e.jsx(fe,{sx:{my:3}}),e.jsxs(h,{container:!0,spacing:3,children:[e.jsx(h,{item:!0,xs:12,md:4,children:e.jsxs(Ne,{fullWidth:!0,children:[e.jsx(Ye,{children:t===0?"Job Category":"Skill Category"}),e.jsxs(Ge,{value:x,onChange:W=>m(W.target.value),label:t===0?"Job Category":"Skill Category",sx:{borderRadius:2},children:[e.jsx(Z,{value:"",children:e.jsx("em",{children:"All Categories"})}),(t===0?y:g).map(W=>e.jsx(Z,{value:W.id,children:W.name},W.id))]})]})}),e.jsx(h,{item:!0,xs:12,md:4,children:e.jsxs(Ne,{fullWidth:!0,children:[e.jsx(Ye,{children:"Sort By"}),e.jsxs(Ge,{value:u,onChange:W=>v(W.target.value),label:"Sort By",sx:{borderRadius:2},children:[e.jsx(Z,{value:"relevance",children:"Relevance"}),e.jsx(Z,{value:"distance",children:"Distance"}),e.jsx(Z,{value:"newest",children:"Date (Newest First)"}),t===0?e.jsx(Z,{value:"salary",children:"Salary (Highest First)"}):e.jsx(Z,{value:"rating",children:"Rating (Highest First)"})]})]})}),e.jsx(h,{item:!0,xs:12,md:4,children:e.jsxs(te,{direction:"row",spacing:2,sx:{height:"100%",alignItems:"center"},children:[e.jsx(P,{variant:"text",startIcon:e.jsx(Nr,{}),onClick:C,sx:{fontWeight:"bold",color:p.palette.text.secondary},children:"Clear"}),e.jsx(P,{variant:"contained",onClick:()=>b(1),disabled:j,sx:{backgroundColor:p.palette.secondary.main,color:p.palette.secondary.contrastText,fontWeight:"bold"},startIcon:j?e.jsx(Ae,{size:20}):e.jsx(qc,{}),children:"Apply"})]})})]})]})]})},ph=({searchType:t,location:r,onGetStarted:s})=>{const n=ve(),i=t===0?['Try searching for "plumbing" or "electrical"',"Browse by job category using the filters","Expand your search radius","Check out featured opportunities below"]:['Try searching for specific skills like "carpenter" or "painter"',"Browse by skill category using the filters","Expand your search radius","Check out top professionals below"];return e.jsx(o,{sx:{textAlign:"center",py:8},children:e.jsxs(o,{sx:{background:`linear-gradient(135deg, ${E(n.palette.secondary.main,.15)} 0%, ${E(n.palette.secondary.main,.05)} 100%)`,borderRadius:4,p:{xs:4,sm:6,md:8},mb:6,border:`2px solid ${E(n.palette.secondary.main,.3)}`,position:"relative",overflow:"hidden"},children:[t===0?e.jsx(tt,{sx:{fontSize:100,color:n.palette.secondary.main,mb:3}}):e.jsx(Lt,{sx:{fontSize:100,color:n.palette.secondary.main,mb:3}}),e.jsx(a,{variant:"h3",gutterBottom:!0,fontWeight:"bold",sx:{fontSize:{xs:"1.75rem",sm:"2.25rem",md:"2.75rem"},color:n.palette.secondary.main,textShadow:`0 2px 4px ${E(n.palette.common.black,.3)}`},children:t===0?"🔍 No Jobs Found":"🔍 No Professionals Found"}),e.jsx(a,{variant:"h6",sx:{mb:4,maxWidth:700,mx:"auto",color:n.palette.text.primary,fontSize:{xs:"1rem",sm:"1.1rem",md:"1.25rem"},lineHeight:1.6,fontWeight:500},children:t===0?`We couldn't find any jobs matching your criteria in ${r||"your area"}. But don't worry - new opportunities are posted daily!`:`We couldn't find any professionals matching your criteria in ${r||"your area"}. Try adjusting your search parameters.`}),e.jsx(a,{variant:"h5",gutterBottom:!0,sx:{color:n.palette.secondary.main,fontWeight:"bold",mb:4},children:"💡 Try These Suggestions:"}),e.jsx(h,{container:!0,spacing:3,sx:{mb:6},children:i.map((c,d)=>e.jsx(h,{item:!0,xs:12,sm:6,children:e.jsxs(o,{sx:{p:3,height:"100%",borderRadius:3,backgroundColor:E(n.palette.background.paper,.8),border:`2px solid ${E(n.palette.secondary.main,.3)}`,transition:"all 0.3s ease","&:hover":{transform:"translateY(-4px)",borderColor:n.palette.secondary.main,backgroundColor:E(n.palette.background.paper,.9),boxShadow:`0 8px 25px ${E(n.palette.secondary.main,.3)}`}},children:[e.jsx(Ve,{sx:{color:n.palette.secondary.main,mb:2,fontSize:32}}),e.jsx(a,{variant:"body1",sx:{color:n.palette.text.primary,fontWeight:500,fontSize:"1rem",lineHeight:1.5},children:c})]})},d))}),e.jsx(P,{variant:"contained",size:"large",onClick:s,sx:{px:5,py:2.5,fontSize:"1.2rem",fontWeight:"bold",backgroundColor:n.palette.secondary.main,color:n.palette.secondary.contrastText,borderRadius:3,"&:hover":{backgroundColor:n.palette.secondary.dark,transform:"translateY(-3px)",boxShadow:`0 12px 30px ${E(n.palette.secondary.main,.5)}`}},children:t===0?"Browse All Jobs":"Browse All Professionals"})]})})},mh=()=>{const t=ve(),r=Oe(),s=Te(t.breakpoints.down("sm"));je(N=>N.auth.user);const[n,i]=l.useState(0),[c,d]=l.useState(""),[x,m]=l.useState([]),[u,v]=l.useState(50),[y,g]=l.useState(""),[j,b]=l.useState(""),[C,A]=l.useState("relevance"),[w,p]=l.useState(1),[k,U]=l.useState([]),[W,R]=l.useState({}),[K,_]=l.useState(!1),[O,T]=l.useState(null),[H,F]=l.useState(!1),[V,re]=l.useState(!1),[z,J]=l.useState([]),[f,M]=l.useState([]);l.useEffect(()=>{n===0?J([{id:"plumbing",name:"Plumbing & Water Systems"},{id:"electrical",name:"Electrical & Wiring"},{id:"carpentry",name:"Carpentry & Woodwork"},{id:"painting",name:"Painting & Decoration"}]):M([{id:"construction",name:"Construction & Building"},{id:"maintenance",name:"Maintenance & Repair"},{id:"design",name:"Design & Creative"},{id:"technology",name:"Technology & Smart Home"}])},[n]);const G=()=>{navigator.geolocation?(_(!0),re(!1),navigator.geolocation.getCurrentPosition(N=>{const q=["Accra, Ghana","Kumasi, Ghana","Tema, Ghana"],$=q[Math.floor(Math.random()*q.length)];d($),_(!1)},N=>{console.error("Error getting current location:",N),_(!1),re(!0)})):re(!0)},I=l.useCallback(Jl.debounce(N=>{if(!N||N.length<2){m([]);return}const q=["Accra, Ghana","Kumasi, Ghana","Tema, Ghana","Cape Coast, Ghana"].filter($=>$.toLowerCase().includes(N.toLowerCase())).map($=>({id:$,description:$}));m(q)},300),[]);l.useEffect(()=>{I(c)},[c,I]);const L=async(N=1)=>{if(!c){T("Please enter a location to search.");return}p(N),_(!0),T(null),F(!0);try{await new Promise(q=>setTimeout(q,1500)),U([]),R({currentPage:1,totalPages:1,totalItems:0})}catch(q){console.error("Error searching:",q),T("Something went wrong. Please try again.")}finally{_(!1)}};l.useEffect(()=>{G()},[]);const S=(N,q)=>{i(q),b(""),U([]),R({}),F(!1)},B=()=>{g(""),b(""),A("relevance"),v(50)},D=()=>{re(!1)};return e.jsx(o,{sx:{minHeight:"100vh",backgroundColor:t.palette.background.default},children:e.jsxs(ye,{maxWidth:"xl",sx:{py:4},children:[e.jsx(Fr,{children:e.jsx("title",{children:"Location-based Search | Kelmah"})}),e.jsxs(o,{sx:{mb:4,textAlign:"center"},children:[e.jsxs(a,{variant:"h2",component:"h1",gutterBottom:!0,fontWeight:"bold",sx:{color:t.palette.secondary.main,fontSize:{xs:"2rem",sm:"2.5rem",md:"3rem"},textShadow:`0 2px 4px ${E(t.palette.common.black,.3)}`,mb:2},children:["🌍 Find ",n===0?"Jobs":"Talent"," Near You"]}),e.jsx(a,{variant:"h5",sx:{maxWidth:800,mx:"auto",color:t.palette.text.primary,fontSize:{xs:"1.1rem",sm:"1.25rem",md:"1.5rem"},fontWeight:500,lineHeight:1.6},children:"Connect with local opportunities and professionals. Distance matters - find work and talent that's convenient for everyone."})]}),e.jsx(se,{sx:{mb:4,borderRadius:3,overflow:"hidden",border:`2px solid ${E(t.palette.secondary.main,.3)}`,backgroundColor:t.palette.background.paper},children:e.jsxs($t,{value:n,onChange:S,variant:s?"fullWidth":"standard",centered:!s,"aria-label":"search type tabs",sx:{backgroundColor:E(t.palette.secondary.main,.1),"& .MuiTabs-indicator":{backgroundColor:t.palette.secondary.main,height:4}},children:[e.jsx(Ce,{icon:e.jsx(tt,{}),label:"Find Jobs",iconPosition:"start",sx:{fontWeight:"bold",fontSize:"1.1rem",py:2}}),e.jsx(Ce,{icon:e.jsx(Lt,{}),label:"Find Talent",iconPosition:"start",sx:{fontWeight:"bold",fontSize:"1.1rem",py:2}})]})}),V&&!c&&e.jsx(xh,{onRetry:G,onManualEntry:D}),e.jsx(hh,{searchType:n,location:c,setLocation:d,keywords:y,setKeywords:g,distance:u,setDistance:v,category:j,setCategory:b,sortBy:C,setSortBy:A,categories:z,skills:f,loading:K,onSearch:L,onClearFilters:B,suggestedLocations:x,getCurrentLocation:G}),O&&e.jsx(be,{severity:"error",sx:{mb:3,borderRadius:2},onClose:()=>T(null),children:O}),K?e.jsx(o,{sx:{display:"flex",justifyContent:"center",py:8},children:e.jsx(Ae,{size:60})}):H&&k.length===0?e.jsx(Ni,{value:n,index:n,children:e.jsx(ph,{searchType:n,location:c,onGetStarted:()=>r(n===0?"/jobs":"/find-talents")})}):k.length>0?e.jsxs(Ni,{value:n,index:n,children:[e.jsxs(o,{sx:{mb:3,p:3,display:"flex",alignItems:"center",justifyContent:"space-between",background:`linear-gradient(135deg, ${E(t.palette.secondary.main,.1)} 0%, ${E(t.palette.secondary.main,.05)} 100%)`,borderRadius:3,border:`1px solid ${E(t.palette.secondary.main,.3)}`},children:[e.jsxs(a,{variant:"h6",fontWeight:"bold",children:[n===0?"📍":"👥"," ",W.totalItems||0," ","result",W.totalItems!==1?"s":""," found"]}),e.jsx(ee,{label:`Page ${W.currentPage||1}`,variant:"outlined"})]}),e.jsx(h,{container:!0,spacing:3,children:k.map(N=>e.jsx(h,{item:!0,xs:12,sm:6,md:n===0?12:4,children:n===0?e.jsx(uh,{job:N,showLocation:!0}):e.jsx(cl,{worker:N,showLocation:!0})},N.id))}),W.totalPages>1&&e.jsx(o,{sx:{mt:4,display:"flex",justifyContent:"center"},children:e.jsx(Gt,{count:W.totalPages,page:W.currentPage,onChange:(N,q)=>L(q),color:"primary"})})]}):null]})})},dl=({onSubmit:t,initialValues:r={}})=>{const[s,n]=l.useState(r.keyword||""),[i,c]=l.useState(r.location||""),[d,x]=l.useState(r.jobType||""),[m,u]=l.useState(r.category||""),[v,y]=l.useState(r.skills||[]),[g,j]=l.useState(""),b=["Web Development","Mobile Development","Design","Writing","Admin Support","Customer Service","Marketing","Accounting","Consulting","Legal"],C=["Full-time","Part-time","Contract","Freelance","Internship"],A=k=>{k.preventDefault(),t({keyword:s,location:i,jobType:d,category:m,skills:v})},w=()=>{g&&!v.includes(g)&&(y([...v,g]),j(""))},p=k=>{y(v.filter(U=>U!==k))};return e.jsx(se,{elevation:2,sx:{p:3,mb:4},children:e.jsx(o,{component:"form",onSubmit:A,children:e.jsxs(h,{container:!0,spacing:2,children:[e.jsx(h,{item:!0,xs:12,md:4,children:e.jsx(Q,{fullWidth:!0,label:"Keywords",variant:"outlined",value:s,onChange:k=>n(k.target.value),placeholder:"Job title, skills, or company"})}),e.jsx(h,{item:!0,xs:12,md:4,children:e.jsx(Q,{fullWidth:!0,label:"Location",variant:"outlined",value:i,onChange:k=>c(k.target.value),placeholder:"City, state, or remote"})}),e.jsx(h,{item:!0,xs:12,md:4,children:e.jsxs(Ne,{fullWidth:!0,variant:"outlined",children:[e.jsx(Ye,{children:"Job Type"}),e.jsxs(Ge,{value:d,onChange:k=>x(k.target.value),label:"Job Type",children:[e.jsx(Z,{value:"",children:"Any"}),C.map(k=>e.jsx(Z,{value:k,children:k},k))]})]})}),e.jsx(h,{item:!0,xs:12,md:4,children:e.jsxs(Ne,{fullWidth:!0,variant:"outlined",children:[e.jsx(Ye,{children:"Category"}),e.jsxs(Ge,{value:m,onChange:k=>u(k.target.value),label:"Category",children:[e.jsx(Z,{value:"",children:"Any"}),b.map(k=>e.jsx(Z,{value:k,children:k},k))]})]})}),e.jsxs(h,{item:!0,xs:12,md:8,children:[e.jsxs(o,{sx:{display:"flex",gap:1},children:[e.jsx(Q,{fullWidth:!0,label:"Skills",variant:"outlined",value:g,onChange:k=>j(k.target.value),placeholder:"Add relevant skills",onKeyPress:k=>{k.key==="Enter"&&(k.preventDefault(),w())}}),e.jsx(P,{variant:"outlined",onClick:w,sx:{minWidth:100},children:"Add Skill"})]}),e.jsx(o,{sx:{display:"flex",flexWrap:"wrap",gap:1,mt:1},children:v.map(k=>e.jsx(ee,{label:k,onDelete:()=>p(k),color:"primary",variant:"outlined"},k))})]}),e.jsx(h,{item:!0,xs:12,children:e.jsx(P,{type:"submit",variant:"contained",color:"primary",startIcon:e.jsx(Yc,{}),size:"large",sx:{px:4},children:"Search Jobs"})})]})})})};dl.propTypes={onSubmit:Y.func.isRequired,initialValues:Y.object};const gh=({job:t,onViewDetails:r})=>{if(!t)return null;const{id:s,title:n,description:i,budget:c,location:d,postedDate:x,deadline:m,category:u,skills:v=[],hirerName:y,hirerRating:g}=t,j=ot(),C=(je(gu)||[]).some(p=>p.id===s),A=()=>{j(C?wa(s):va(s))},w=()=>{if(c&&typeof c=="object"){const{min:p,max:k,currency:U}=c;return`${U} ${p} - ${k}`}return c!=null?`$${c}`:""};return e.jsxs(me,{sx:{mb:2,borderRadius:2,boxShadow:2},children:[e.jsxs(ce,{children:[e.jsxs(o,{sx:{display:"flex",justifyContent:"space-between",mb:1},children:[e.jsx(a,{variant:"h6",component:"div",children:n}),e.jsx(ee,{size:"small",label:u,color:"primary",variant:"outlined"})]}),e.jsxs(a,{variant:"body2",color:"text.secondary",sx:{mb:2},children:[i==null?void 0:i.substring(0,150),(i==null?void 0:i.length)>150?"...":""]}),e.jsxs(te,{direction:"row",spacing:2,sx:{mb:2},children:[e.jsxs(o,{sx:{display:"flex",alignItems:"center"},children:[e.jsx(ct,{fontSize:"small",color:"action",sx:{mr:.5}}),e.jsx(a,{variant:"body2",children:w()})]}),e.jsxs(o,{sx:{display:"flex",alignItems:"center"},children:[e.jsx(nt,{fontSize:"small",color:"action",sx:{mr:.5}}),e.jsx(a,{variant:"body2",children:d})]}),e.jsxs(o,{sx:{display:"flex",alignItems:"center"},children:[e.jsx(cs,{fontSize:"small",color:"action",sx:{mr:.5}}),e.jsx(a,{variant:"body2",children:new Date(x).toLocaleDateString()})]})]}),e.jsx(o,{sx:{display:"flex",flexWrap:"wrap",gap:.5,mb:2},children:v.map((p,k)=>e.jsx(ee,{label:p,size:"small",variant:"outlined",sx:{mr:.5,mb:.5}},k))}),e.jsx(fe,{sx:{my:1.5}}),e.jsxs(o,{sx:{display:"flex",alignItems:"center"},children:[e.jsx(we,{sx:{width:32,height:32,mr:1},children:y?y[0].toUpperCase():"H"}),e.jsx(a,{variant:"body2",children:y}),g&&e.jsxs(o,{sx:{display:"flex",alignItems:"center",ml:"auto"},children:[e.jsx(rt,{sx:{color:"gold",fontSize:18,mr:.5}}),e.jsx(a,{variant:"body2",children:g})]})]})]}),e.jsxs(wr,{children:[e.jsx(ne,{onClick:A,children:C?e.jsx(Kt,{color:"primary"}):e.jsx(or,{})}),e.jsx(P,{size:"small",variant:"contained",onClick:()=>r==null?void 0:r(s),fullWidth:!0,children:"View Details"})]})]})},bh=({jobs:t=[],loading:r=!1,filters:s={},onRemoveFilter:n,onSortChange:i,pagination:c={},onPageChange:d,showMap:x=!1,onToggleView:m,onSaveJob:u})=>{const v=ve(),y=Te(v.breakpoints.down("md")),g=(C,A)=>{d&&d(A)},j=C=>{i&&i(C.target.value)},b=()=>{var A;const C=[];return s.keyword&&C.push({key:"keyword",value:s.keyword}),(A=s.location)!=null&&A.address&&C.push({key:"location",value:s.location.address}),s.jobType&&C.push({key:"jobType",value:s.jobType}),(s.budgetMin||s.budgetMax)&&C.push({key:"budget",value:`$${s.budgetMin||0} - $${s.budgetMax||"Any"}`}),s.categories&&s.categories.length>0&&s.categories.forEach(w=>{C.push({key:"categories",value:w})}),s.skills&&s.skills.length>0&&s.skills.forEach(w=>{C.push({key:"skills",value:w})}),C.length===0?null:e.jsxs(o,{sx:{mb:3},children:[e.jsx(a,{variant:"subtitle2",sx:{mb:1},children:"Active Filters:"}),e.jsxs(o,{sx:{display:"flex",flexWrap:"wrap",gap:1},children:[C.map((w,p)=>e.jsx(ee,{label:w.value,onDelete:()=>n(w.key,w.value),size:"small",color:"primary",variant:"outlined"},`${w.key}-${p}`)),C.length>1&&e.jsx(ee,{label:"Clear All",onClick:()=>n("all"),size:"small",color:"secondary"})]})]})};return e.jsxs(o,{children:[e.jsx(se,{sx:{p:2,mb:3},children:e.jsxs(o,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",flexWrap:"wrap",gap:2},children:[e.jsx(a,{variant:"h6",children:r?"Searching...":`${c.totalItems||0} Results`}),e.jsxs(o,{sx:{display:"flex",alignItems:"center",gap:2},children:[e.jsxs(Ne,{size:"small",sx:{minWidth:120},children:[e.jsx(Ye,{id:"sort-select-label",children:"Sort By"}),e.jsxs(Ge,{labelId:"sort-select-label",value:s.sort||"relevance",label:"Sort By",onChange:j,disabled:r,children:[e.jsx(Z,{value:"relevance",children:"Relevance"}),e.jsx(Z,{value:"date",children:"Newest"}),e.jsx(Z,{value:"budget_high",children:"Budget (High to Low)"}),e.jsx(Z,{value:"budget_low",children:"Budget (Low to High)"})]})]}),e.jsx(P,{variant:"outlined",startIcon:e.jsx(Kc,{}),onClick:m,size:y?"small":"medium",children:x?"List View":"Map View"})]})]})}),b(),r&&e.jsx(h,{container:!0,spacing:3,sx:{my:2},children:Array.from(new Array(6)).map((C,A)=>e.jsx(h,{item:!0,xs:12,children:e.jsx(ie,{variant:"rectangular",height:150,sx:{borderRadius:2}})},A))}),!r&&t.length===0&&e.jsx(be,{severity:"info",sx:{mb:3},children:"No jobs found matching your search criteria. Try adjusting your filters."}),!r&&t.length>0&&e.jsx(h,{container:!0,spacing:3,children:t.map(C=>e.jsx(h,{item:!0,xs:12,children:e.jsx(gh,{job:C,onViewDetails:()=>window.location.href=`/jobs/${C.id}`})},C.id))}),!r&&c.totalPages>1&&e.jsx(o,{sx:{display:"flex",justifyContent:"center",mt:4},children:e.jsx(Gt,{count:c.totalPages,page:c.page,onChange:g,color:"primary",disabled:r})})]})},jh=({jobs:t=[],centerLocation:r=null,radius:s=50,loading:n=!1,onToggleView:i})=>e.jsxs(o,{sx:{position:"relative",height:"70vh",borderRadius:1,overflow:"hidden"},children:[e.jsx(se,{sx:{p:2,position:"absolute",top:16,right:16,zIndex:10},children:e.jsx(P,{variant:"outlined",startIcon:e.jsx(vo,{}),onClick:i,children:"List View"})}),n?e.jsx(o,{sx:{display:"flex",justifyContent:"center",alignItems:"center",height:"100%",width:"100%",backgroundColor:"rgba(0,0,0,0.05)"},children:e.jsx(Ae,{})}):e.jsx(o,{sx:{height:"100%",width:"100%",backgroundColor:"rgba(0,0,0,0.05)",display:"flex",justifyContent:"center",alignItems:"center"},children:e.jsx(a,{variant:"body1",color:"text.secondary",children:"Map view implementation requires Google Maps API integration"})})]}),fh=({suggestions:t=[],onSuggestionSelected:r,onClose:s})=>{const n=i=>{switch(i){case"location":return e.jsx(nt,{color:"action"});case"job":return e.jsx(tt,{color:"action"});case"skill":return e.jsx(Ls,{color:"action"});default:return e.jsx(dt,{color:"action"})}};return e.jsx(Xc,{onClickAway:s,children:e.jsx(se,{elevation:3,sx:{position:"absolute",width:"100%",zIndex:10,mt:1,maxHeight:400,overflow:"auto"},children:t.length===0?e.jsx(o,{sx:{p:2,textAlign:"center"},children:e.jsx(a,{variant:"body2",color:"text.secondary",children:"No suggestions found"})}):e.jsx(Ke,{sx:{py:0},children:t.map((i,c)=>e.jsxs(Be,{button:!0,onClick:()=>r(i),divider:c<t.length-1,children:[e.jsx(Ze,{sx:{minWidth:40},children:n(i.type)}),e.jsx(Ie,{primary:i.text,secondary:i.subText})]},`${i.type}-${c}`))})})})},yh=()=>e.jsx(o,{children:e.jsx(a,{variant:"h6",children:"SEO"})}),vh=he(o)(({theme:t})=>({padding:t.spacing(3,0,8),backgroundColor:t.palette.background.default,color:t.palette.text.primary,minHeight:"calc(100vh - 64px)"})),wh=()=>{var re;const t=ve(),r=Zt(),s=Oe();Te(t.breakpoints.down("md"));const[n,i]=l.useState({}),[c,d]=l.useState([]),[x,m]=l.useState({page:1,limit:10,totalItems:0,totalPages:0}),[u,v]=l.useState("relevance"),[y,g]=l.useState(!1),[j,b]=l.useState(null),[C,A]=l.useState(!1),[w,p]=l.useState(!1),[k,U]=l.useState([]);l.useEffect(()=>{const z=new URLSearchParams(r.search),J={};for(const[f,M]of z.entries())if(f==="page")J.page=parseInt(M,10)||1;else if(f==="limit")J.limit=parseInt(M,10)||10;else if(f==="sort")v(M);else if(f==="categories"||f==="skills")J[f]=M.split(",").filter(Boolean);else if(f==="location")try{J.location=JSON.parse(decodeURIComponent(M))}catch{J.location={address:M}}else f==="budgetMin"||f==="budgetMax"||f==="distance"?J[f]=parseFloat(M):J[f]=M;i(J),Object.keys(J).length>0&&J.page!==x.page&&R(J)},[r.search]);const W=async z=>{if(!z||z.length<2){U([]),p(!1);return}try{const J=await pe.get(`${vt}/jobs/search/suggestions`,{params:{query:z}});J.data.success?(U(J.data.data||[]),p(!0)):(U([]),p(!1))}catch(J){console.error("Error fetching search suggestions:",J),U([]),p(!1)}};l.useEffect(()=>{const z=setTimeout(()=>{n.keyword&&W(n.keyword)},300);return()=>{clearTimeout(z)}},[n.keyword]);const R=async(z=n)=>{var J,f,M;g(!0),b(null);try{const G={page:z.page||1,limit:z.limit||10,sort:u};z.keyword&&(G.keyword=z.keyword),z.jobType&&(G.jobType=z.jobType),z.experienceLevel&&(G.experienceLevel=z.experienceLevel),z.budgetMin&&(G.minBudget=z.budgetMin),z.budgetMax&&(G.maxBudget=z.budgetMax),z.categories&&z.categories.length>0&&(G.categories=z.categories.join(",")),z.skills&&z.skills.length>0&&(G.skills=z.skills.join(",")),z.location&&z.location.coordinates&&(G.latitude=z.location.coordinates.latitude,G.longitude=z.location.coordinates.longitude,G.radius=z.distance||50);const I=await pe.get("/api/search",{params:G});if(I.data.success){const L=(Array.isArray(I.data.data),I.data.data);d(L);const S=((J=I.data.meta)==null?void 0:J.pagination)||{};m({page:S.page||G.page,limit:S.limit||G.limit,totalItems:S.total||0,totalPages:S.totalPages||1})}else b(I.data.message||"Failed to search jobs"),d([])}catch(G){console.error("Error searching jobs:",G),b(((M=(f=G.response)==null?void 0:f.data)==null?void 0:M.message)||"An error occurred while searching for jobs"),d([])}finally{g(!1)}},K=z=>{const J={...z,page:1};i(J),_(J),R(J)},_=z=>{const J=new URLSearchParams;Object.entries(z).forEach(([f,M])=>{M==null||M===""||(f==="location"&&typeof M=="object"?J.set(f,encodeURIComponent(JSON.stringify(M))):Array.isArray(M)?M.length>0&&J.set(f,M.join(",")):J.set(f,M.toString()))}),u!=="relevance"&&J.set("sort",u),s({pathname:"/search",search:J.toString()},{replace:!0})},O=z=>{const J={...n,page:z};i(J),_(J),R(J)},T=z=>{v(z);const J={...n};_(J),R(J)},H=(z,J)=>{const f={...n};z==="all"?(Object.keys(f).forEach(M=>{M!=="page"&&M!=="limit"&&delete f[M]}),f.page=1):z==="categories"||z==="skills"?f[z]&&Array.isArray(f[z])?(f[z]=f[z].filter(M=>M!==J),f[z].length===0&&delete f[z]):delete f[z]:z==="budget"?(delete f.budgetMin,delete f.budgetMax):z==="location"?(delete f.location,delete f.distance):delete f[z],f.page=1,i(f),_(f),R(f)},F=()=>{A(!C)},V=async z=>{var J;try{await pe.post(`${vt}/jobs/${z}/save`,{},{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}}),d(f=>f.map(M=>M.id===z?{...M,isSaved:!0}:M))}catch(f){console.error("Error saving job:",f),((J=f.response)==null?void 0:J.status)===401&&s("/login",{state:{from:r,message:"Please log in to save jobs"}})}};return e.jsxs(vh,{children:[e.jsx(yh,{title:"Job Search | Find Your Perfect Match",description:"Search for jobs by location, skills, experience level, and more. Find your perfect match with our advanced job search tools."}),e.jsxs(ye,{maxWidth:"lg",children:[e.jsx(dl,{onSearch:K,initialFilters:n}),w&&k.length>0&&e.jsx(fh,{suggestions:k,onSuggestionSelected:z=>{p(!1),z.type==="location"&&z.data?K({...n,location:z.data}):K({...n,keyword:z.text})},onClose:()=>p(!1)}),j&&e.jsx(be,{severity:"error",sx:{mb:3},children:j}),C?e.jsx(jh,{jobs:c,centerLocation:((re=n.location)==null?void 0:re.coordinates)||null,radius:n.distance||50,loading:y,onToggleView:F}):e.jsx(bh,{jobs:c,loading:y,filters:n,onRemoveFilter:H,onSortChange:T,pagination:x,onPageChange:O,showMap:C,onToggleView:F,onSaveJob:V})]})]})};class Ch{constructor(){this.defaultCenter=[5.6037,-.187],this.watchId=null,this.locationCache=new Map,this.vocationalCategories=["Carpentry","Masonry","Plumbing","Electrical","Painting","Roofing","Tiling","Welding","HVAC","Landscaping","Security","Cleaning","Catering","Tailoring","Mechanics"]}async getCurrentLocation(r={}){const s={enableHighAccuracy:!0,timeout:15e3,maximumAge:6e4,...r};return new Promise((n,i)=>{if(!navigator.geolocation){i(new Error("Geolocation is not supported by this browser"));return}navigator.geolocation.getCurrentPosition(c=>{const d={latitude:c.coords.latitude,longitude:c.coords.longitude,accuracy:c.coords.accuracy,timestamp:c.timestamp};n(d)},c=>{let d="Unknown location error";switch(c.code){case c.PERMISSION_DENIED:d="Location access denied. Please enable location services.";break;case c.POSITION_UNAVAILABLE:d="Location information unavailable. Check your internet connection.";break;case c.TIMEOUT:d="Location request timed out. Please try again.";break}i(new Error(d))},s)})}async searchJobsNearLocation(r={}){try{const{latitude:s,longitude:n,radius:i=25,category:c,skills:d,budget:x,page:m=1,limit:u=20}=r,v={page:m,limit:u,latitude:s,longitude:n,radius:i,status:"open",visibility:"public"};c&&(v.category=c),d&&(v.skills=d.join(",")),x&&(v.minBudget=x[0],v.maxBudget=x[1]);const y=await Xe.get(`${vt}/jobs/search/location`,{params:v,headers:this.getAuthHeaders()});return this.transformJobsForMap(y.data.data||[])}catch(s){return console.warn("Jobs API unavailable, using enhanced mock data:",s.message),this.generateEnhancedJobMockData(r)}}async searchWorkersNearLocation(r={}){try{const{latitude:s,longitude:n,radius:i=25,category:c,skills:d,rating:x,page:m=1,limit:u=20}=r,v={page:m,limit:u,latitude:s,longitude:n,radius:i,available:!0};c&&(v.category=c),d&&(v.skills=d.join(",")),x&&(v.minRating=x);const y=await Xe.get(`${vt}/workers/search/location`,{params:v,headers:this.getAuthHeaders()});return this.transformWorkersForMap(y.data.data||[])}catch(s){return console.warn("Workers API unavailable, using enhanced mock data:",s.message),this.generateEnhancedWorkerMockData(r)}}transformJobsForMap(r){return r.map(s=>{var n;return{id:s._id||s.id,title:s.title,description:s.description,category:s.category,skills:s.skills||[],budget:s.budget,paymentType:s.paymentType,coordinates:this.extractCoordinates(s),hirer:s.hirer,type:"job",color:"#FFD700",urgent:s.urgent||!1,verified:((n=s.hirer)==null?void 0:n.verified)||!1,createdAt:s.createdAt,distance:s.distance}})}transformWorkersForMap(r){return r.map(s=>{var n,i,c,d,x;return{id:s._id||s.id,name:`${s.firstName} ${s.lastName}`,title:((n=s.profile)==null?void 0:n.title)||((i=s.skills)==null?void 0:i[0])||"Skilled Worker",bio:((c=s.profile)==null?void 0:c.bio)||s.description,category:((d=s.profile)==null?void 0:d.category)||this.getCategoryFromSkills(s.skills),skills:s.skills||[],hourlyRate:(x=s.profile)==null?void 0:x.hourlyRate,rating:s.rating||0,reviewCount:s.reviewCount||0,coordinates:this.extractCoordinates(s),profileImage:s.profileImage,type:"worker",color:"#1a1a1a",verified:s.verified||!1,online:s.isOnline||!1,distance:s.distance,availability:s.availability}})}extractCoordinates(r){var s;return r.coordinates?{latitude:r.coordinates.latitude||r.coordinates.lat||r.coordinates[1],longitude:r.coordinates.longitude||r.coordinates.lng||r.coordinates[0]}:(s=r.location)!=null&&s.coordinates?{latitude:r.location.coordinates.latitude||r.location.coordinates[1],longitude:r.location.coordinates.longitude||r.location.coordinates[0]}:this.generateCoordinatesFromLocation(r.location)}generateEnhancedJobMockData(r){const{latitude:s,longitude:n,radius:i=25}=r,c={latitude:s||5.6037,longitude:n||-.187},d=[],x={Carpentry:["Custom Cabinet Installation","Wooden Deck Construction","Kitchen Renovation","Furniture Repair"],Masonry:["Brick Wall Construction","Stone Patio Installation","Chimney Repair","Retaining Wall Building"],Plumbing:["Bathroom Plumbing Installation","Pipe Leak Repair","Drain Cleaning Service","Water Heater Installation"],Electrical:["House Rewiring","Security System Installation","LED Lighting Setup","Generator Installation"],Painting:["Interior House Painting","Commercial Building Painting","Texture Wall Finishing","Exterior Home Painting"]};for(let m=0;m<50;m++){const u=this.vocationalCategories[m%this.vocationalCategories.length],v=x[u]||[`${u} Service`],y=v[m%v.length],g=this.generateNearbyCoordinates(c,i);d.push({id:`job-${m+1}`,title:y,description:`Professional ${u.toLowerCase()} services needed. High-quality work required with experience in residential/commercial projects.`,category:u,skills:this.getSkillsForCategory(u),budget:Math.floor(Math.random()*5e3)+500,paymentType:Math.random()>.5?"fixed":"hourly",coordinates:g,hirer:{firstName:"John",lastName:`Hirer${m+1}`,verified:Math.random()>.3},type:"job",color:"#FFD700",urgent:Math.random()>.8,verified:Math.random()>.3,createdAt:new Date(Date.now()-Math.random()*30*24*60*60*1e3),distance:this.calculateDistance(c.latitude,c.longitude,g.latitude,g.longitude)})}return d.sort((m,u)=>m.distance-u.distance)}generateEnhancedWorkerMockData(r){const{latitude:s,longitude:n,radius:i=25}=r,c={latitude:s||5.6037,longitude:n||-.187},d=[],x=["Kwame Asante","Ama Osei","Kofi Mensah","Akosua Yeboah","Yaw Boateng","Efua Darko","Kweku Adjei","Abena Owusu","Nana Frimpong","Afia Sarpong"];for(let m=0;m<40;m++){const u=this.vocationalCategories[m%this.vocationalCategories.length],v=x[m%x.length],y=this.generateNearbyCoordinates(c,i);d.push({id:`worker-${m+1}`,name:v,title:`Professional ${u} Specialist`,bio:`Experienced ${u.toLowerCase()} professional with 5+ years in residential and commercial projects. Licensed and insured.`,category:u,skills:this.getSkillsForCategory(u),hourlyRate:Math.floor(Math.random()*50)+15,rating:3+Math.random()*2,reviewCount:Math.floor(Math.random()*100)+5,coordinates:y,profileImage:`https://via.placeholder.com/150/FFD700/000000?text=${v.split(" ")[0][0]}${v.split(" ")[1][0]}`,type:"worker",color:"#1a1a1a",verified:Math.random()>.4,online:Math.random()>.6,distance:this.calculateDistance(c.latitude,c.longitude,y.latitude,y.longitude),availability:Math.random()>.3?"available":"busy"})}return d.sort((m,u)=>m.distance-u.distance)}getSkillsForCategory(r){return{Carpentry:["Cabinet Making","Furniture Building","Framing","Finish Carpentry"],Masonry:["Bricklaying","Stone Work","Concrete","Block Work"],Plumbing:["Pipe Installation","Drain Cleaning","Water Systems","Gas Lines"],Electrical:["Wiring","Circuit Installation","Lighting","Safety Systems"],Painting:["Interior Painting","Exterior Painting","Spray Painting","Wall Prep"]}[r]||[r]}generateNearbyCoordinates(r,s){const n=s/111.32,i=Math.random(),c=Math.random(),d=n*Math.sqrt(i),x=2*Math.PI*c,m=d*Math.cos(x),u=d*Math.sin(x);return{latitude:r.latitude+m,longitude:r.longitude+u}}getAuthHeaders(){const r=localStorage.getItem("token");return r?{Authorization:`Bearer ${r}`}:{}}async reverseGeocode(r,s){var i,c,d,x,m,u,v;const n=`reverse_${r}_${s}`;if(this.locationCache.has(n))return this.locationCache.get(n);try{const y=await Xe.get("https://nominatim.openstreetmap.org/reverse",{params:{lat:r,lon:s,format:"json",addressdetails:1,zoom:18}}),g={address:y.data.display_name,city:((i=y.data.address)==null?void 0:i.city)||((c=y.data.address)==null?void 0:c.town)||((d=y.data.address)==null?void 0:d.village),state:((x=y.data.address)==null?void 0:x.state)||((m=y.data.address)==null?void 0:m.region),country:(u=y.data.address)==null?void 0:u.country,postcode:(v=y.data.address)==null?void 0:v.postcode,coordinates:{latitude:r,longitude:s}};return this.locationCache.set(n,g),g}catch(y){throw console.error("Reverse geocoding error:",y),new Error("Failed to get address for location")}}async geocodeAddress(r){const s=`forward_${r}`;if(this.locationCache.has(s))return this.locationCache.get(s);try{const i=(await Xe.get("https://nominatim.openstreetmap.org/search",{params:{q:r,format:"json",addressdetails:1,limit:5,countrycodes:"gh"}})).data.map(c=>{var d,x,m,u,v;return{address:c.display_name,coordinates:{latitude:parseFloat(c.lat),longitude:parseFloat(c.lon)},city:((d=c.address)==null?void 0:d.city)||((x=c.address)==null?void 0:x.town),state:(m=c.address)==null?void 0:m.state,country:(u=c.address)==null?void 0:u.country,postcode:(v=c.address)==null?void 0:v.postcode,boundingBox:c.boundingbox}});return i.length>0&&this.locationCache.set(s,i),i}catch(n){throw console.error("Geocoding error:",n),new Error("Failed to find coordinates for address")}}calculateDistance(r,s,n,i,c="km"){const d=c==="km"?6371:3959,x=this.toRadians(n-r),m=this.toRadians(i-s),u=Math.sin(x/2)*Math.sin(x/2)+Math.cos(this.toRadians(r))*Math.cos(this.toRadians(n))*Math.sin(m/2)*Math.sin(m/2),v=2*Math.atan2(Math.sqrt(u),Math.sqrt(1-u));return d*v}toRadians(r){return r*(Math.PI/180)}filterLocationsByRadius(r,s,n){return s.filter(i=>i.coordinates?this.calculateDistance(r.latitude,r.longitude,i.coordinates.latitude,i.coordinates.longitude)<=n:!1).map(i=>({...i,distance:this.calculateDistance(r.latitude,r.longitude,i.coordinates.latitude,i.coordinates.longitude)})).sort((i,c)=>i.distance-c.distance)}formatDistance(r,s="km"){return r<1?s==="km"?`${Math.round(r*1e3)}m`:`${Math.round(r*5280)}ft`:`${r.toFixed(1)}${s}`}getCategoryFromSkills(r){if(!r||r.length===0)return"General";const s=r[0].toLowerCase();for(const n of this.vocationalCategories)if(s.includes(n.toLowerCase()))return n;return"General"}generateCoordinatesFromLocation(r){const s={accra:{latitude:5.6037,longitude:-.187},kumasi:{latitude:6.6885,longitude:-1.6244},tamale:{latitude:9.4034,longitude:-.8424},"cape coast":{latitude:5.1053,longitude:-1.2466},sekondi:{latitude:4.9344,longitude:-1.7167}};if(r!=null&&r.city){const n=r.city.toLowerCase();if(s[n])return s[n]}return s.accra}clearCache(){this.locationCache.clear()}getVocationalCategories(){return this.vocationalCategories}}const Pt=new Ch;delete Hn.Icon.Default.prototype._getIconUrl;Hn.Icon.Default.mergeOptions({iconRetinaUrl:"https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.7.1/images/marker-icon-2x.png",iconUrl:"https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.7.1/images/marker-icon.png",shadowUrl:"https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.7.1/images/marker-shadow.png"});const Oi=(t,r="",s=!1,n=!1)=>{const i=()=>t==="job"?"#FFD700":t==="worker"?s?"#4CAF50":"#1a1a1a":"#FFD700",c=()=>t==="job"?"💼":t==="worker"?{Carpentry:"🔨",Masonry:"🧱",Plumbing:"🔧",Electrical:"⚡",Painting:"🎨",Welding:"🔥",HVAC:"❄️",Security:"🛡️",Cleaning:"🧽",Landscaping:"🌱"}[r]||"👷":"📍",d=i(),x=c(),m=t==="user"?32:28,u=`
    <div style="
      position: relative;
      background: linear-gradient(135deg, ${d} 0%, ${d}dd 100%);
      width: ${m}px;
      height: ${m}px;
      border-radius: 50%;
      border: 3px solid #ffffff;
      box-shadow: 0 4px 12px rgba(0,0,0,0.4), 0 0 0 2px ${d}33;
      display: flex;
      align-items: center;
      justify-content: center;
      color: ${t==="job"?"#000000":"#ffffff"};
      font-weight: bold;
      font-size: ${t==="user"?"16px":"14px"};
      transform: scale(1);
      transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
      cursor: pointer;
      animation: ${t==="user"?"pulse 2s infinite":"none"};
    ">
      ${x}
      ${n?'<div style="position: absolute; top: -2px; right: -2px; background: #4CAF50; border-radius: 50%; width: 12px; height: 12px; border: 2px solid white;">✓</div>':""}
      ${s&&t==="worker"?'<div style="position: absolute; bottom: -2px; right: -2px; background: #4CAF50; border-radius: 50%; width: 10px; height: 10px; border: 2px solid white;"></div>':""}
    </div>
    <style>
      @keyframes pulse {
        0% { box-shadow: 0 4px 12px rgba(0,0,0,0.4), 0 0 0 2px ${d}33, 0 0 0 0px ${d}44; }
        50% { box-shadow: 0 4px 12px rgba(0,0,0,0.4), 0 0 0 2px ${d}33, 0 0 0 8px ${d}22; }
        100% { box-shadow: 0 4px 12px rgba(0,0,0,0.4), 0 0 0 2px ${d}33, 0 0 0 0px ${d}44; }
      }
    </style>
  `;return Hn.divIcon({html:u,className:"vocational-marker",iconSize:[m,m],iconAnchor:[m/2,m/2],popupAnchor:[0,-m/2]})},kh=({onLocationUpdate:t,onZoomChange:r,centerOnUser:s,setCenterOnUser:n,isLocating:i,setIsLocating:c})=>{const d=Fl();return l.useEffect(()=>(d.on("moveend",()=>{const x=d.getCenter(),m=d.getZoom();t({latitude:x.lat,longitude:x.lng}),r(m)}),d.on("zoomend",()=>{r(d.getZoom())}),()=>{d.off("moveend"),d.off("zoomend")}),[d,t,r]),l.useEffect(()=>{s&&(c(!0),Pt.getCurrentLocation().then(x=>{d.flyTo([x.latitude,x.longitude],15,{duration:2,easeLinearity:.25}),n(!1)}).catch(x=>{console.error("Location error:",x)}).finally(()=>{c(!1)}))},[s,d,n,c]),null},Ji=({marker:t,onViewDetails:r,onContact:s})=>{var i,c;const n=ve();return t.type==="job"?e.jsxs(o,{sx:{minWidth:280,maxWidth:320,p:2,bgcolor:n.palette.background.paper,color:n.palette.text.primary},children:[e.jsxs(o,{sx:{display:"flex",alignItems:"flex-start",mb:2},children:[e.jsx(we,{sx:{bgcolor:n.palette.secondary.main,color:n.palette.secondary.contrastText,mr:2,width:48,height:48},children:e.jsx(dr,{})}),e.jsxs(o,{sx:{flex:1,minWidth:0},children:[e.jsx(a,{variant:"h6",sx:{fontWeight:"bold",color:n.palette.secondary.main,mb:.5,overflow:"hidden",textOverflow:"ellipsis"},children:t.title}),e.jsx(ee,{label:t.category,size:"small",sx:{bgcolor:n.palette.secondary.main,color:n.palette.secondary.contrastText,mb:1}})]}),t.verified&&e.jsx(xe,{title:"Verified Hirer",children:e.jsx(xr,{sx:{color:"#4CAF50",ml:1}})})]}),e.jsxs(a,{variant:"body2",sx:{mb:2,color:n.palette.text.secondary},children:[(i=t.description)==null?void 0:i.substring(0,120),"..."]}),e.jsxs(o,{sx:{display:"flex",alignItems:"center",gap:2,mb:2,flexWrap:"wrap"},children:[e.jsxs(o,{sx:{display:"flex",alignItems:"center",gap:.5},children:[e.jsx(ct,{fontSize:"small",sx:{color:n.palette.secondary.main}}),e.jsxs(a,{variant:"body2",sx:{fontWeight:"medium"},children:["GHS ",(c=t.budget)==null?void 0:c.toLocaleString()]})]}),t.distance&&e.jsxs(o,{sx:{display:"flex",alignItems:"center",gap:.5},children:[e.jsx(nt,{fontSize:"small",color:"action"}),e.jsx(a,{variant:"caption",children:Pt.formatDistance(t.distance)})]}),t.urgent&&e.jsx(ee,{label:"URGENT",size:"small",sx:{bgcolor:"#FF5722",color:"white",fontSize:"0.7rem",animation:"pulse 1.5s infinite"}})]}),t.skills&&e.jsxs(o,{sx:{mb:2},children:[t.skills.slice(0,3).map((d,x)=>e.jsx(ee,{label:d,size:"small",variant:"outlined",sx:{mr:.5,mb:.5,borderColor:n.palette.secondary.main,color:n.palette.secondary.main}},x)),t.skills.length>3&&e.jsx(ee,{label:`+${t.skills.length-3} more`,size:"small",variant:"outlined",sx:{mr:.5,mb:.5,borderColor:n.palette.secondary.main,color:n.palette.secondary.main}})]}),e.jsxs(o,{sx:{display:"flex",gap:1},children:[e.jsx(P,{variant:"contained",size:"small",onClick:()=>r(t),sx:{flex:1},children:"View Details"}),e.jsx(P,{variant:"outlined",size:"small",onClick:()=>s(t),sx:{flex:1,borderColor:n.palette.secondary.main,color:n.palette.secondary.main},children:"Contact"})]})]}):e.jsxs(o,{sx:{minWidth:280,maxWidth:320,p:2,bgcolor:n.palette.background.paper,color:n.palette.text.primary},children:[e.jsxs(o,{sx:{display:"flex",alignItems:"flex-start",mb:2},children:[e.jsx(we,{src:t.profileImage,sx:{bgcolor:n.palette.primary.main,mr:2,width:48,height:48,border:`2px solid ${n.palette.secondary.main}`},children:e.jsx(Lt,{})}),e.jsxs(o,{sx:{flex:1,minWidth:0},children:[e.jsx(a,{variant:"h6",sx:{fontWeight:"bold",color:n.palette.secondary.main,mb:.5},children:t.name}),e.jsx(a,{variant:"body2",sx:{color:n.palette.text.secondary,mb:1},children:t.title}),e.jsx(ee,{label:t.category,size:"small",sx:{bgcolor:n.palette.primary.main,color:n.palette.primary.contrastText}})]}),e.jsxs(o,{sx:{display:"flex",flexDirection:"column",alignItems:"center"},children:[t.verified&&e.jsx(xe,{title:"Verified Worker",children:e.jsx(xr,{sx:{color:"#4CAF50",mb:.5}})}),t.online&&e.jsx(xe,{title:"Online Now",children:e.jsx(o,{sx:{width:8,height:8,borderRadius:"50%",bgcolor:"#4CAF50",animation:"pulse 2s infinite"}})})]})]}),e.jsxs(o,{sx:{display:"flex",alignItems:"center",gap:2,mb:2,flexWrap:"wrap"},children:[t.rating>0&&e.jsxs(o,{sx:{display:"flex",alignItems:"center",gap:.5},children:[e.jsx(Qe,{value:t.rating,readOnly:!0,size:"small"}),e.jsxs(a,{variant:"caption",children:["(",t.reviewCount,")"]})]}),t.hourlyRate&&e.jsxs(o,{sx:{display:"flex",alignItems:"center",gap:.5},children:[e.jsx(ct,{fontSize:"small",sx:{color:n.palette.secondary.main}}),e.jsxs(a,{variant:"body2",sx:{fontWeight:"medium"},children:["GHS ",t.hourlyRate,"/hr"]})]}),t.distance&&e.jsxs(o,{sx:{display:"flex",alignItems:"center",gap:.5},children:[e.jsx(nt,{fontSize:"small",color:"action"}),e.jsx(a,{variant:"caption",children:Pt.formatDistance(t.distance)})]})]}),t.bio&&e.jsxs(a,{variant:"body2",sx:{mb:2,color:n.palette.text.secondary,overflow:"hidden",textOverflow:"ellipsis"},children:[t.bio.substring(0,100),"..."]}),t.skills&&e.jsx(o,{sx:{mb:2},children:t.skills.slice(0,3).map((d,x)=>e.jsx(ee,{label:d,size:"small",variant:"outlined",sx:{mr:.5,mb:.5,borderColor:n.palette.secondary.main,color:n.palette.secondary.main}},x))}),e.jsxs(o,{sx:{display:"flex",gap:1},children:[e.jsx(P,{variant:"contained",size:"small",onClick:()=>r(t),sx:{flex:1},children:"View Profile"}),e.jsx(P,{variant:"outlined",size:"small",onClick:()=>s(t),sx:{flex:1,borderColor:n.palette.secondary.main,color:n.palette.secondary.main},children:"Message"})]})]})},Sh=({center:t=[5.6037,-.187],zoom:r=12,markers:s=[],onMarkerClick:n=()=>{},onMapClick:i=()=>{},showUserLocation:c=!0,showSearchRadius:d=!1,searchRadius:x=5,height:m="400px",className:u="",controls:v={location:!0,zoom:!0,layers:!0,fullscreen:!0}})=>{const y=ve(),[g,j]=l.useState(t),[b,C]=l.useState(r),[A,w]=l.useState(null),[p,k]=l.useState(!1),[U,W]=l.useState(!1),[R,K]=l.useState(!1),[_,O]=l.useState("osm"),T=l.useRef(),H={osm:{url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",attribution:"© OpenStreetMap contributors"},dark:{url:"https://{s}.basemaps.cartocdn.com/dark_all/{z}/{x}/{y}{r}.png",attribution:"© CARTO"},satellite:{url:"https://server.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer/tile/{z}/{y}/{x}",attribution:"© Esri"}};l.useEffect(()=>{c&&Pt.getCurrentLocation().then(f=>{w(f)}).catch(f=>{console.warn("Could not get user location:",f.message)})},[c]);const F=l.useCallback(()=>{W(!0)},[]),V=l.useCallback(()=>{T.current&&T.current.setZoom(T.current.getZoom()+1)},[]),re=l.useCallback(()=>{T.current&&T.current.setZoom(T.current.getZoom()-1)},[]),z=l.useCallback(()=>{K(!R)},[R]),J=l.useCallback(()=>{const f=Object.keys(H),G=(f.indexOf(_)+1)%f.length;O(f[G])},[_,H]);return e.jsx(ge.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},transition:{duration:.5,ease:"easeOut"},children:e.jsxs(o,{sx:{position:"relative",height:m,width:"100%",borderRadius:2,overflow:"hidden",border:`2px solid ${y.palette.secondary.main}33`,boxShadow:"0 8px 32px rgba(255, 215, 0, 0.1)",...R&&{position:"fixed",top:0,left:0,right:0,bottom:0,zIndex:9999,height:"100vh",borderRadius:0,border:"none"}},className:u,children:[e.jsxs(Zi,{center:g,zoom:b,style:{height:"100%",width:"100%"},ref:T,scrollWheelZoom:!0,doubleClickZoom:!0,touchZoom:!0,whenCreated:f=>{T.current=f},children:[e.jsx(eo,{url:H[_].url,attribution:H[_].attribution}),e.jsx(kh,{onLocationUpdate:j,onZoomChange:C,centerOnUser:U,setCenterOnUser:W,isLocating:p,setIsLocating:k}),A&&c&&e.jsxs(e.Fragment,{children:[e.jsx(Wn,{position:[A.latitude,A.longitude],icon:Oi("user"),children:e.jsx(Tn,{children:e.jsx(Ji,{marker:{title:"Your Location",type:"user"}})})}),d&&e.jsx(Rl,{center:[A.latitude,A.longitude],radius:x*1e3,pathOptions:{color:y.palette.secondary.main,fillColor:y.palette.secondary.main,fillOpacity:.1,weight:2,dashArray:"5, 5"}})]}),s.map((f,M)=>e.jsx(Wn,{position:[f.coordinates.latitude,f.coordinates.longitude],icon:Oi(f.type,f.category,f.online,f.verified),eventHandlers:{click:()=>n(f)},children:e.jsx(Tn,{children:e.jsx(Ji,{marker:f,onViewDetails:n,onContact:G=>console.log("Contact:",G)})})},f.id||M))]}),e.jsx(o,{sx:{position:"absolute",top:16,right:16,zIndex:1e3},children:e.jsxs(Bt,{children:[v.location&&e.jsx(ge.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},transition:{delay:.1},children:e.jsx(xe,{title:"Find my location",children:e.jsx(as,{size:"small",onClick:F,disabled:p,sx:{mb:1,display:"block",bgcolor:y.palette.secondary.main,color:y.palette.secondary.contrastText,"&:hover":{bgcolor:y.palette.secondary.dark,transform:"scale(1.1)"},transition:"all 0.3s ease"},children:p?e.jsx(Ae,{size:20,color:"inherit"}):e.jsx(ms,{})})})}),v.zoom&&e.jsx(ge.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},transition:{delay:.2},children:e.jsxs(se,{sx:{mb:1,bgcolor:y.palette.background.paper,border:`1px solid ${y.palette.secondary.main}33`},children:[e.jsx(xe,{title:"Zoom in",children:e.jsx(ne,{onClick:V,size:"small",sx:{color:y.palette.secondary.main,"&:hover":{bgcolor:y.palette.secondary.main+"11"}},children:e.jsx(Qc,{})})}),e.jsx(xe,{title:"Zoom out",children:e.jsx(ne,{onClick:re,size:"small",sx:{color:y.palette.secondary.main,"&:hover":{bgcolor:y.palette.secondary.main+"11"}},children:e.jsx(Zc,{})})})]})}),v.layers&&e.jsx(ge.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},transition:{delay:.3},children:e.jsx(xe,{title:"Change map style",children:e.jsx(as,{size:"small",onClick:J,sx:{mb:1,display:"block",bgcolor:y.palette.background.paper,color:y.palette.secondary.main,border:`1px solid ${y.palette.secondary.main}33`,"&:hover":{bgcolor:y.palette.secondary.main+"11",transform:"scale(1.1)"},transition:"all 0.3s ease"},children:e.jsx(ed,{})})})}),v.fullscreen&&e.jsx(ge.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},transition:{delay:.4},children:e.jsx(xe,{title:R?"Exit fullscreen":"Fullscreen",children:e.jsx(as,{size:"small",onClick:z,sx:{bgcolor:y.palette.background.paper,color:y.palette.secondary.main,border:`1px solid ${y.palette.secondary.main}33`,"&:hover":{bgcolor:y.palette.secondary.main+"11",transform:"scale(1.1)"},transition:"all 0.3s ease"},children:R?e.jsx(td,{}):e.jsx(rd,{})})})})]})}),e.jsx(Bt,{children:p&&e.jsx(ge.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:20},children:e.jsx(be,{severity:"info",sx:{position:"absolute",bottom:16,left:16,right:16,zIndex:1e3,bgcolor:y.palette.background.paper,border:`1px solid ${y.palette.secondary.main}33`},children:e.jsxs(o,{sx:{display:"flex",alignItems:"center",gap:1},children:[e.jsx(Ae,{size:16}),"Getting your location..."]})})})})]})})},Ah=({value:t="",onChange:r=()=>{},onLocationSelect:s=()=>{},placeholder:n="Enter location or address",showCurrentLocation:i=!0,showRecentLocations:c=!0,autoFocus:d=!1,fullWidth:x=!0,variant:m="outlined",size:u="medium",disabled:v=!1,helperText:y="",error:g=!1})=>{const[j,b]=l.useState(t),[C,A]=l.useState([]),[w,p]=l.useState([]),[k,U]=l.useState(!1),[W,R]=l.useState(!1),[K,_]=l.useState(-1),[O,T]=l.useState(null),[H,F]=l.useState(!1),V=l.useRef(),re=l.useRef();l.useEffect(()=>{if(c){const S=localStorage.getItem("recentLocations");if(S)try{p(JSON.parse(S))}catch(B){console.warn("Failed to parse recent locations:",B)}}},[c]),l.useEffect(()=>{i&&Pt.getCurrentLocation().then(S=>{Pt.reverseGeocode(S.latitude,S.longitude).then(B=>{T({...S,address:B.address,city:B.city,state:B.state})}).catch(B=>{T(S)})}).catch(S=>{console.warn("Could not get current location:",S)})},[i]);const z=l.useCallback(async S=>{if(!S||S.length<3){A([]),U(!1);return}try{const B=await Pt.geocodeAddress(S);A(B.slice(0,5))}catch(B){console.error("Search error:",B),A([])}finally{U(!1)}},[]),J=S=>{const B=S.target.value;b(B),r(B),re.current&&clearTimeout(re.current),B.length>=3?(U(!0),R(!0),re.current=setTimeout(()=>{z(B)},300)):(A([]),R(B.length>0||w.length>0)),_(-1)},f=(S,B="search")=>{b(S.address),R(!1),_(-1),(B==="search"||B==="current")&&M(S),s(S),r(S.address)},M=S=>{if(!c)return;const B=[S,...w.filter(D=>D.address!==S.address)].slice(0,5);p(B),localStorage.setItem("recentLocations",JSON.stringify(B))},G=()=>{R(j.length>0||w.length>0||O)},I=()=>{setTimeout(()=>{R(!1),_(-1)},150)},L=()=>{var S;b(""),A([]),R(!1),r(""),(S=V.current)==null||S.focus()};return e.jsxs(o,{sx:{position:"relative",width:x?"100%":"auto"},children:[e.jsx(Q,{ref:V,fullWidth:x,variant:m,size:u,value:j,onChange:J,onFocus:G,onBlur:I,placeholder:n,disabled:v,error:g,helperText:y,autoFocus:d,InputProps:{startAdornment:e.jsx(We,{position:"start",children:e.jsx(dt,{color:"action"})}),endAdornment:e.jsxs(We,{position:"end",children:[k&&e.jsx(Ae,{size:20}),j&&!k&&e.jsx(ne,{size:"small",onClick:L,children:e.jsx(Nr,{})})]})}}),W&&e.jsx(se,{sx:{position:"absolute",top:"100%",left:0,right:0,zIndex:1300,maxHeight:300,overflow:"auto",mt:1,boxShadow:3},children:e.jsxs(Ke,{disablePadding:!0,children:[O&&e.jsxs(Be,{button:!0,onClick:()=>f(O,"current"),sx:{py:1.5},children:[e.jsx(Ze,{children:H?e.jsx(Ae,{size:20}):e.jsx(ms,{color:"primary"})}),e.jsx(Ie,{primary:"Current Location",secondary:O.address||"Getting location...",primaryTypographyProps:{fontWeight:"medium"}})]}),C.map((S,B)=>e.jsxs(Be,{button:!0,onClick:()=>f(S,"search"),sx:{py:1.5},children:[e.jsx(Ze,{children:e.jsx(nt,{color:"action"})}),e.jsx(Ie,{primary:S.address,secondary:`${S.city||""} ${S.state||""}`})]},`suggestion-${B}`)),w.length>0&&(C.length>0||O)&&e.jsx(fe,{}),w.map((S,B)=>e.jsxs(Be,{button:!0,onClick:()=>f(S,"recent"),sx:{py:1},children:[e.jsx(Ze,{children:e.jsx(sd,{color:"action",fontSize:"small"})}),e.jsx(Ie,{primary:S.address,secondary:S.city,primaryTypographyProps:{fontSize:"0.875rem"},secondaryTypographyProps:{fontSize:"0.75rem"}})]},`recent-${B}`)),!k&&j.length>=3&&C.length===0&&e.jsx(Be,{children:e.jsx(Ie,{primary:"No locations found",secondary:"Try a different search term",primaryTypographyProps:{color:"text.secondary"}})})]})})]})},Ph=({onSearch:t=()=>{},onFilterChange:r=()=>{},onLocationChange:s=()=>{},searchResults:n=[],loading:i=!1,searchType:c="jobs",userLocation:d=null,isVisible:x=!0,onClose:m=()=>{}})=>{const u=ve(),v=Te(u.breakpoints.down("md")),[y,g]=l.useState(""),[j,b]=l.useState(""),[C,A]=l.useState(25),[w,p]=l.useState({budget:[500,1e4],rating:0,experience:"",availability:"",urgent:!1,verified:!1}),[k,U]=l.useState(!1),[W,R]=l.useState([]),[K,_]=l.useState([]),[O,T]=l.useState("distance"),H=Pt.getVocationalCategories(),F={Carpentry:["Cabinet Making","Furniture Building","Framing","Finish Carpentry","Wood Restoration"],Masonry:["Bricklaying","Stone Work","Concrete Work","Block Work","Tile Installation"],Plumbing:["Pipe Installation","Drain Cleaning","Water Systems","Gas Lines","Bathroom Renovation"],Electrical:["House Wiring","Circuit Installation","Lighting Systems","Generator Installation","Security Systems"],Painting:["Interior Painting","Exterior Painting","Spray Painting","Wall Preparation","Decorative Finishes"],Welding:["Arc Welding","Gas Welding","Metal Fabrication","Repair Welding","Structural Welding"],HVAC:["Air Conditioning","Heating Systems","Ventilation","Refrigeration","Duct Installation"],Roofing:["Roof Installation","Roof Repair","Gutter Installation","Waterproofing","Insulation"],Landscaping:["Garden Design","Tree Maintenance","Irrigation Systems","Lawn Care","Hardscaping"],Security:["CCTV Installation","Alarm Systems","Access Control","Security Consultation","Guard Services"]},V=[{value:"distance",label:"Distance"},{value:"rating",label:"Rating"},{value:"price",label:"Price"},{value:"recent",label:"Most Recent"}],re=l.useCallback(()=>{const L={query:y,location:j,radius:C,type:c,filters:{...w,categories:W,skills:K,sortBy:O}};t(L)},[y,j,C,c,w,W,K,O,t]);l.useEffect(()=>{r({...w,categories:W,skills:K,radius:C,sortBy:O})},[w,W,K,C,O,r]);const z=L=>{b(L.address),s(L)},J=L=>{R(S=>{const B=S.includes(L)?S.filter(D=>D!==L):[...S,L];return B.length===0?_([]):_(D=>D.filter(N=>B.some(q=>{var $;return($=F[q])==null?void 0:$.includes(N)}))),B})},f=()=>{if(W.length===0)return[];const L=new Set;return W.forEach(S=>{F[S]&&F[S].forEach(B=>L.add(B))}),Array.from(L)},M=({item:L,onClick:S})=>{var B,D;return e.jsx(ge.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.3},children:e.jsx(me,{sx:{mb:1.5,cursor:"pointer",bgcolor:u.palette.background.paper,border:`1px solid ${u.palette.secondary.main}22`,"&:hover":{boxShadow:"0 4px 20px rgba(255, 215, 0, 0.3)",borderColor:u.palette.secondary.main,transform:"translateY(-2px)"},transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)"},onClick:()=>S(L),children:e.jsx(ce,{sx:{p:2},children:e.jsxs(o,{sx:{display:"flex",alignItems:"flex-start",gap:2},children:[e.jsx(we,{src:L.profileImage,sx:{bgcolor:L.type==="job"?u.palette.secondary.main:u.palette.primary.main,color:L.type==="job"?u.palette.secondary.contrastText:u.palette.primary.contrastText,width:48,height:48,border:`2px solid ${u.palette.secondary.main}33`},children:L.type==="job"?e.jsx(dr,{}):e.jsx(Lt,{})}),e.jsxs(o,{sx:{flex:1,minWidth:0},children:[e.jsxs(o,{sx:{display:"flex",alignItems:"flex-start",justifyContent:"space-between",mb:1},children:[e.jsx(a,{variant:"subtitle2",sx:{fontWeight:"bold",color:u.palette.secondary.main,overflow:"hidden",textOverflow:"ellipsis"},children:L.title||L.name}),e.jsxs(o,{sx:{display:"flex",alignItems:"center",gap:.5,ml:1},children:[L.verified&&e.jsx(xr,{sx:{color:"#4CAF50",fontSize:16}}),L.urgent&&e.jsx(ee,{label:"URGENT",size:"small",sx:{bgcolor:"#FF5722",color:"white",fontSize:"0.6rem",height:20}}),L.online&&e.jsx(o,{sx:{width:8,height:8,borderRadius:"50%",bgcolor:"#4CAF50"}})]})]}),e.jsxs(a,{variant:"body2",color:"text.secondary",sx:{mb:1.5,lineHeight:1.3},children:[(B=L.description||L.bio)==null?void 0:B.substring(0,100),"..."]}),e.jsxs(o,{sx:{display:"flex",alignItems:"center",gap:2,mb:1,flexWrap:"wrap"},children:[L.rating>0&&e.jsxs(o,{sx:{display:"flex",alignItems:"center",gap:.5},children:[e.jsx(Qe,{value:L.rating,readOnly:!0,size:"small"}),e.jsxs(a,{variant:"caption",children:["(",L.reviewCount||0,")"]})]}),(L.budget||L.hourlyRate)&&e.jsxs(o,{sx:{display:"flex",alignItems:"center",gap:.5},children:[e.jsx(ct,{fontSize:"small",sx:{color:u.palette.secondary.main}}),e.jsxs(a,{variant:"body2",sx:{fontWeight:"medium"},children:["GHS"," ",((D=L.budget)==null?void 0:D.toLocaleString())||`${L.hourlyRate}/hr`]})]}),L.distance&&e.jsxs(o,{sx:{display:"flex",alignItems:"center",gap:.5},children:[e.jsx(nt,{fontSize:"small",color:"action"}),e.jsx(a,{variant:"caption",children:Pt.formatDistance(L.distance)})]})]}),L.skills&&L.skills.length>0&&e.jsxs(o,{children:[L.skills.slice(0,3).map((N,q)=>e.jsx(ee,{label:N,size:"small",variant:"outlined",sx:{mr:.5,mb:.5,borderColor:u.palette.secondary.main+"66",color:u.palette.secondary.main,fontSize:"0.7rem",height:24}},q)),L.skills.length>3&&e.jsx(ee,{label:`+${L.skills.length-3}`,size:"small",variant:"outlined",sx:{mr:.5,mb:.5,borderColor:u.palette.secondary.main+"66",color:u.palette.secondary.main,fontSize:"0.7rem",height:24}})]})]})]})})})})},G=()=>e.jsxs(o,{sx:{p:2.5},children:[e.jsx(Q,{fullWidth:!0,placeholder:`Search ${c==="jobs"?"vocational jobs":"skilled workers"}...`,value:y,onChange:L=>g(L.target.value),onKeyPress:L=>L.key==="Enter"&&re(),InputProps:{startAdornment:e.jsx(We,{position:"start",children:e.jsx(dt,{sx:{color:u.palette.secondary.main}})}),endAdornment:e.jsx(We,{position:"end",children:e.jsx(P,{variant:"contained",size:"small",onClick:re,disabled:i,sx:{bgcolor:u.palette.secondary.main,color:u.palette.secondary.contrastText,"&:hover":{bgcolor:u.palette.secondary.dark}},children:i?"Searching...":"Search"})})},sx:{mb:2,"& .MuiOutlinedInput-root":{borderRadius:2,"& fieldset":{borderColor:u.palette.secondary.main+"44"}}}}),e.jsx(Ah,{value:j,onChange:b,onLocationSelect:z,placeholder:"Enter location or area",sx:{mb:2}}),e.jsxs(o,{sx:{mb:2},children:[e.jsxs(a,{variant:"body2",sx:{mb:1,color:u.palette.secondary.main,fontWeight:"medium"},children:["Search Radius: ",C," km"]}),e.jsx(Yr,{value:C,onChange:(L,S)=>A(S),min:1,max:100,step:1,marks:[{value:5,label:"5km"},{value:25,label:"25km"},{value:50,label:"50km"},{value:100,label:"100km"}],sx:{color:u.palette.secondary.main,"& .MuiSlider-thumb":{backgroundColor:u.palette.secondary.main},"& .MuiSlider-track":{backgroundColor:u.palette.secondary.main},"& .MuiSlider-rail":{backgroundColor:u.palette.secondary.main+"33"}}})]}),e.jsxs(Ne,{fullWidth:!0,sx:{mb:2},children:[e.jsx(Ye,{sx:{color:u.palette.secondary.main},children:"Sort by"}),e.jsx(Ge,{value:O,label:"Sort by",onChange:L=>T(L.target.value),sx:{"& .MuiOutlinedInput-notchedOutline":{borderColor:u.palette.secondary.main+"44"}},children:V.map(L=>e.jsx(Z,{value:L.value,children:L.label},L.value))})]}),e.jsx(P,{fullWidth:!0,variant:"outlined",startIcon:k?e.jsx(ad,{}):e.jsx(nd,{}),onClick:()=>U(!k),sx:{mb:2,borderColor:u.palette.secondary.main,color:u.palette.secondary.main,"&:hover":{borderColor:u.palette.secondary.dark,bgcolor:u.palette.secondary.main+"11"}},children:k?"Hide Advanced Filters":"Show Advanced Filters"}),e.jsx(Gs,{in:k,children:e.jsxs(o,{sx:{mt:2},children:[e.jsx(a,{variant:"subtitle2",sx:{mb:1.5,color:u.palette.secondary.main,fontWeight:"bold"},children:"Vocational Categories"}),e.jsx(o,{sx:{mb:3},children:H.map(L=>e.jsx(ee,{label:L,onClick:()=>J(L),color:W.includes(L)?"secondary":"default",variant:W.includes(L)?"filled":"outlined",size:"small",sx:{mr:1,mb:1,transition:"all 0.3s ease","&:hover":{transform:"scale(1.05)"}}},L))}),W.length>0&&e.jsxs(e.Fragment,{children:[e.jsx(a,{variant:"subtitle2",sx:{mb:1.5,color:u.palette.secondary.main,fontWeight:"bold"},children:"Specific Skills"}),e.jsx(Os,{multiple:!0,options:f(),value:K,onChange:(L,S)=>_(S),renderInput:L=>e.jsx(Q,{...L,placeholder:"Select skills",variant:"outlined",size:"small"}),renderTags:(L,S)=>L.map((B,D)=>e.jsx(ee,{label:B,...S({index:D}),size:"small",color:"secondary"},B)),sx:{mb:3}})]}),e.jsxs(a,{variant:"subtitle2",sx:{mb:1,color:u.palette.secondary.main,fontWeight:"bold"},children:[c==="jobs"?"Budget":"Hourly Rate"," Range: GHS"," ",w.budget[0]," - GHS ",w.budget[1]]}),e.jsx(Yr,{value:w.budget,onChange:(L,S)=>p({...w,budget:S}),min:0,max:2e4,step:100,valueLabelDisplay:"auto",sx:{mb:3,color:u.palette.secondary.main}}),e.jsx(a,{variant:"subtitle2",sx:{mb:1,color:u.palette.secondary.main,fontWeight:"bold"},children:"Minimum Rating"}),e.jsx(Qe,{value:w.rating,onChange:(L,S)=>p({...w,rating:S}),sx:{mb:3}}),e.jsxs(o,{sx:{display:"flex",gap:1,flexWrap:"wrap"},children:[e.jsx(ee,{label:"Verified Only",onClick:()=>p({...w,verified:!w.verified}),color:w.verified?"secondary":"default",variant:w.verified?"filled":"outlined",icon:e.jsx(xr,{}),size:"small"}),c==="jobs"&&e.jsx(ee,{label:"Urgent Jobs",onClick:()=>p({...w,urgent:!w.urgent}),color:w.urgent?"error":"default",variant:w.urgent?"filled":"outlined",icon:e.jsx(Tt,{}),size:"small"})]})]})})]}),I=()=>{var L;return e.jsxs(o,{sx:{p:2.5},children:[e.jsxs(o,{sx:{display:"flex",alignItems:"center",justifyContent:"space-between",mb:2},children:[e.jsxs(a,{variant:"h6",sx:{color:u.palette.secondary.main,fontWeight:"bold"},children:["Results (",n.length,")"]}),n.length>0&&e.jsxs(a,{variant:"caption",color:"text.secondary",children:["Sorted by ",(L=V.find(S=>S.value===O))==null?void 0:L.label]})]}),i?e.jsx(o,{sx:{py:4},children:[...Array(3)].map((S,B)=>e.jsx(me,{sx:{mb:1.5},children:e.jsx(ce,{children:e.jsxs(o,{sx:{display:"flex",gap:2},children:[e.jsx(ie,{variant:"circular",width:48,height:48}),e.jsxs(o,{sx:{flex:1},children:[e.jsx(ie,{variant:"text",width:"60%",height:24}),e.jsx(ie,{variant:"text",width:"80%",height:20}),e.jsx(ie,{variant:"text",width:"40%",height:20})]})]})})},B))}):n.length===0?e.jsxs(o,{sx:{textAlign:"center",py:6},children:[e.jsx(o,{sx:{fontSize:48,mb:2,opacity:.3},children:c==="jobs"?"💼":"👷"}),e.jsxs(a,{variant:"h6",color:"text.secondary",sx:{mb:1},children:["No ",c==="jobs"?"jobs":"workers"," found"]}),e.jsx(a,{variant:"body2",color:"text.secondary",children:"Try adjusting your search criteria or expanding the search radius"})]}):e.jsx(o,{sx:{maxHeight:v?400:500,overflow:"auto"},children:e.jsx(Bt,{children:n.map((S,B)=>e.jsx(M,{item:S,onClick:()=>console.log("Selected:",S)},S.id||B))})})]})};return x?v?e.jsx(xo,{anchor:"bottom",open:x,onClose:m,PaperProps:{sx:{height:"85vh",borderTopLeftRadius:16,borderTopRightRadius:16,bgcolor:u.palette.background.default}},children:e.jsxs(o,{sx:{position:"relative",height:"100%",overflow:"hidden"},children:[e.jsxs(se,{sx:{display:"flex",alignItems:"center",justifyContent:"space-between",p:2,borderBottom:`1px solid ${u.palette.secondary.main}33`,bgcolor:u.palette.background.paper},children:[e.jsxs(a,{variant:"h6",sx:{color:u.palette.secondary.main,fontWeight:"bold"},children:["Find"," ",c==="jobs"?"Vocational Jobs":"Skilled Workers"]}),e.jsx(ne,{onClick:m,sx:{color:u.palette.secondary.main},children:e.jsx(vr,{})})]}),e.jsxs(o,{sx:{height:"calc(100% - 64px)",overflow:"auto"},children:[e.jsx(G,{}),e.jsx(fe,{sx:{borderColor:u.palette.secondary.main+"33"}}),e.jsx(I,{})]})]})}):e.jsx(ge.div,{initial:{x:-400,opacity:0},animate:{x:0,opacity:1},exit:{x:-400,opacity:0},transition:{duration:.5,ease:"easeOut"},children:e.jsxs(se,{sx:{position:"absolute",top:16,left:16,width:420,maxHeight:"calc(100vh - 32px)",zIndex:1e3,overflow:"hidden",display:"flex",flexDirection:"column",bgcolor:u.palette.background.default,border:`2px solid ${u.palette.secondary.main}33`,borderRadius:3,boxShadow:"0 8px 32px rgba(255, 215, 0, 0.2)"},elevation:8,children:[e.jsxs(o,{sx:{display:"flex",alignItems:"center",justifyContent:"space-between",p:2.5,borderBottom:`1px solid ${u.palette.secondary.main}33`,bgcolor:u.palette.background.paper},children:[e.jsxs(a,{variant:"h6",sx:{color:u.palette.secondary.main,fontWeight:"bold"},children:["Find ",c==="jobs"?"Vocational Jobs":"Skilled Workers"]}),e.jsx(ne,{onClick:m,sx:{color:u.palette.secondary.main},children:e.jsx(vr,{})})]}),e.jsxs(o,{sx:{flex:1,overflow:"auto"},children:[e.jsx(G,{}),e.jsx(fe,{sx:{borderColor:u.palette.secondary.main+"33"}}),e.jsx(I,{})]})]})}):null},Dh=()=>{const t=ve(),r=Oe(),s=Te(t.breakpoints.down("md")),[n,i]=l.useState([5.6037,-.187]),[c,d]=l.useState(null),[x,m]=l.useState([]),[u,v]=l.useState("jobs"),[y,g]=l.useState(!1),[j,b]=l.useState(null),[C,A]=l.useState(!0),[w,p]=l.useState(!0),[k,U]=l.useState({radius:25,categories:[],budget:[0,1e4],rating:0}),[W,R]=l.useState(null),[K,_]=l.useState(0);l.useEffect(()=>{(async()=>{try{A(!0);const L=await Pt.getCurrentLocation();d(L),i([L.latitude,L.longitude]),await O(u,L)}catch(L){console.warn("Could not get user location:",L),b("Could not access your location. Using default area (Accra, Ghana)."),await O(u,{latitude:5.6037,longitude:-.187})}finally{A(!1)}})()},[]);const O=async(I,L,S=k)=>{if(L){g(!0),b(null);try{const B={latitude:L.latitude,longitude:L.longitude,radius:S.radius,category:S.categories.length>0?S.categories[0]:null,skills:S.categories.length>1?S.categories:null,budget:S.budget,rating:S.rating,page:1,limit:100};let D=[];I==="jobs"?D=await Pt.searchJobsNearLocation(B):D=await Pt.searchWorkersNearLocation(B),m(D),_(D.length)}catch(B){console.error("Search error:",B),b(`Failed to load ${I}. Please try again.`),m([]),_(0)}finally{g(!1)}}},T=l.useCallback((I,L)=>{if(L!==null){v(L);const S=W||c;S&&O(L,S)}},[W,c,k]),H=l.useCallback(async I=>{const L=W||c||{latitude:n[0],longitude:n[1]},S={...I,latitude:L.latitude,longitude:L.longitude};g(!0),b(null);try{let B=[];if(I.type==="jobs"?B=await Pt.searchJobsNearLocation(S):B=await Pt.searchWorkersNearLocation(S),I.query){const D=I.query.toLowerCase();B=B.filter(N=>{var q,$,de,Pe,qe;return((q=N.title)==null?void 0:q.toLowerCase().includes(D))||(($=N.name)==null?void 0:$.toLowerCase().includes(D))||((de=N.description)==null?void 0:de.toLowerCase().includes(D))||((Pe=N.category)==null?void 0:Pe.toLowerCase().includes(D))||((qe=N.skills)==null?void 0:qe.some(at=>at.toLowerCase().includes(D)))})}m(B),_(B.length)}catch(B){console.error("Search error:",B),b("Search failed. Please try again.")}finally{g(!1)}},[W,c,n]),F=l.useCallback(I=>{U(I)},[]),V=l.useCallback(I=>{R(I),I.coordinates&&(i([I.coordinates.latitude,I.coordinates.longitude]),O(u,I.coordinates,k))},[u,k]),re=l.useCallback(I=>{I.type==="job"?r(`/jobs/${I.id}`):I.type==="worker"&&r(`/profiles/user/${I.id}`)},[r]),z=l.useCallback(()=>{const I=W||c;I&&O(u,I,k)},[W,c,u,k]),J=l.useCallback(async()=>{try{g(!0);const I=await Pt.getCurrentLocation();d(I),R(null),i([I.latitude,I.longitude]),await O(u,I,k)}catch{b("Could not get your location. Please enable location services.")}},[u,k]),f=()=>{b(null)},M=()=>u==="jobs"?"Vocational Jobs":"Skilled Workers",G=Pt.getVocationalCategories();return e.jsxs(o,{sx:{minHeight:"100vh",bgcolor:t.palette.background.default,position:"relative"},children:[e.jsx(id,{open:C,sx:{zIndex:9999,bgcolor:"rgba(26, 26, 26, 0.9)"},children:e.jsx(ge.div,{initial:{scale:.8,opacity:0},animate:{scale:1,opacity:1},transition:{duration:.5},children:e.jsxs(o,{sx:{textAlign:"center",color:t.palette.secondary.main},children:[e.jsx(Ae,{color:"inherit",size:60,sx:{mb:2}}),e.jsx(a,{variant:"h6",sx:{mb:1},children:"Initializing Map"}),e.jsxs(a,{variant:"body2",children:["Finding ",M()," near you..."]})]})})}),e.jsx(se,{sx:{position:"sticky",top:0,zIndex:1100,bgcolor:t.palette.background.paper,borderBottom:`2px solid ${t.palette.secondary.main}33`,p:2},children:e.jsxs(ye,{maxWidth:!1,children:[e.jsxs(o,{sx:{display:"flex",alignItems:"center",justifyContent:"space-between",flexWrap:"wrap",gap:2},children:[e.jsxs(o,{children:[e.jsx(a,{variant:"h5",sx:{color:t.palette.secondary.main,fontWeight:"bold",mb:.5},children:"Kelmah Map Search"}),e.jsx(a,{variant:"body2",sx:{color:t.palette.text.secondary},children:"Find skilled workers and vocational jobs near you"})]}),e.jsxs(si,{value:u,exclusive:!0,onChange:T,size:"small",sx:{bgcolor:t.palette.background.default,"& .MuiToggleButton-root":{border:`1px solid ${t.palette.secondary.main}33`,color:t.palette.text.primary,"&.Mui-selected":{bgcolor:t.palette.secondary.main,color:t.palette.secondary.contrastText,"&:hover":{bgcolor:t.palette.secondary.dark}}}},children:[e.jsxs(Dr,{value:"jobs",children:[e.jsx(tt,{sx:{mr:1}}),"Jobs (",x.filter(I=>I.type==="job").length,")"]}),e.jsxs(Dr,{value:"workers",children:[e.jsx(Lt,{sx:{mr:1}}),"Workers (",x.filter(I=>I.type==="worker").length,")"]})]}),e.jsxs(o,{sx:{display:"flex",gap:1},children:[e.jsx(P,{variant:"outlined",size:"small",startIcon:e.jsx(Jr,{}),onClick:z,disabled:y,sx:{borderColor:t.palette.secondary.main,color:t.palette.secondary.main},children:"Refresh"}),!s&&e.jsxs(P,{variant:"outlined",size:"small",startIcon:e.jsx(Ha,{}),onClick:()=>p(!w),sx:{borderColor:t.palette.secondary.main,color:t.palette.secondary.main},children:[w?"Hide":"Show"," Filters"]})]})]}),e.jsx(o,{sx:{mt:2,display:"flex",gap:1,flexWrap:"wrap"},children:G.slice(0,6).map(I=>e.jsx(ee,{label:I,size:"small",onClick:()=>{const L={...k,categories:k.categories.includes(I)?k.categories.filter(B=>B!==I):[...k.categories,I]};U(L);const S=W||c;S&&O(u,S,L)},color:k.categories.includes(I)?"secondary":"default",sx:{transition:"all 0.3s ease","&:hover":{transform:"scale(1.05)"}}},I))})]})}),e.jsxs(o,{sx:{position:"relative",height:"calc(100vh - 140px)"},children:[e.jsx(Sh,{center:n,zoom:12,markers:x,onMarkerClick:re,showUserLocation:!0,showSearchRadius:!0,searchRadius:k.radius,height:"100%",controls:{location:!0,zoom:!0,layers:!0,fullscreen:!s}}),e.jsx(Bt,{children:w&&e.jsx(Ph,{onSearch:H,onFilterChange:F,onLocationChange:V,searchResults:x,loading:y,searchType:u,userLocation:c,isVisible:w,onClose:()=>p(!1)})}),s&&e.jsxs(o,{sx:{position:"absolute",bottom:16,right:16,zIndex:1e3},children:[e.jsx(Bt,{children:!w&&e.jsx(ge.div,{initial:{scale:0,opacity:0},animate:{scale:1,opacity:1},exit:{scale:0,opacity:0},transition:{duration:.3},children:e.jsx(as,{color:"secondary",onClick:()=>p(!0),sx:{mb:1,display:"block"},children:e.jsx(dt,{})})})}),e.jsx(as,{color:"primary",size:"medium",onClick:J,disabled:y,sx:{bgcolor:t.palette.background.paper,color:t.palette.secondary.main,border:`2px solid ${t.palette.secondary.main}`,"&:hover":{bgcolor:t.palette.secondary.main+"11"}},children:y?e.jsx(Ae,{size:24}):e.jsx(ms,{})})]}),e.jsx(Bt,{children:K>0&&!y&&e.jsx(ge.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:20},style:{position:"absolute",bottom:s?16:32,left:"50%",transform:"translateX(-50%)",zIndex:1e3},children:e.jsx(se,{sx:{px:3,py:1.5,bgcolor:t.palette.background.paper,border:`1px solid ${t.palette.secondary.main}33`,borderRadius:3,boxShadow:"0 4px 20px rgba(255, 215, 0, 0.2)"},children:e.jsxs(a,{variant:"body2",sx:{fontWeight:"medium",color:t.palette.secondary.main},children:[K," ",M()," found",W&&` near ${W.city||"selected area"}`]})})})}),e.jsx(Bt,{children:y&&!C&&e.jsx(ge.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},children:e.jsxs(se,{sx:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",zIndex:1e3,p:3,textAlign:"center",bgcolor:t.palette.background.paper,border:`2px solid ${t.palette.secondary.main}33`},children:[e.jsx(Ae,{sx:{color:t.palette.secondary.main,mb:2}}),e.jsxs(a,{variant:"body2",sx:{color:t.palette.text.primary},children:["Searching for ",M(),"..."]})]})})})]}),e.jsx(Wt,{open:!!j,autoHideDuration:6e3,onClose:f,anchorOrigin:{vertical:"top",horizontal:"center"},children:e.jsx(be,{onClose:f,severity:"warning",sx:{width:"100%",bgcolor:t.palette.background.paper,border:`1px solid ${t.palette.secondary.main}33`},children:j})})]})},Ui={message:e.jsx(Ot,{}),job:e.jsx(tt,{}),contract:e.jsx(Ln,{}),default:e.jsx(yr,{})},Ih=({notification:t})=>e.jsxs(Be,{sx:r=>({backgroundColor:r.palette.background.paper,mb:1.5,borderRadius:2,border:`2px solid ${r.palette.secondary.main}`,boxShadow:"inset 0 0 8px rgba(255, 215, 0, 0.5)",transition:"box-shadow 0.3s ease-in-out, border-color 0.3s ease-in-out","&:hover":{boxShadow:"0 0 12px rgba(255, 215, 0, 0.3), inset 0 0 8px rgba(255, 215, 0, 0.5)",borderColor:r.palette.secondary.light,backgroundColor:E(r.palette.primary.main,.05)}}),secondaryAction:e.jsx(a,{variant:"caption",color:"text.secondary",sx:{pr:1},children:Hs(new Date(t.date),{addSuffix:!0})}),children:[e.jsx(Ze,{children:e.jsx(we,{sx:{bgcolor:t.read?"action.disabled":"primary.main",color:"#fff"},children:Ui[t.type]||Ui.default})}),e.jsx(Ie,{primary:t.message,secondary:t.link?e.jsx(Fe,{to:t.link,style:{textDecoration:"none",color:"inherit"},children:e.jsx(a,{variant:"body2",color:"primary.main",sx:{"&:hover":{textDecoration:"underline"}},children:"View Details"})}):null}),!t.read&&e.jsx(ee,{label:"New",color:"success",size:"small",sx:{ml:2,fontWeight:"bold"}})]}),Rh=()=>{const{notifications:t,loading:r,unreadCount:s,markAllAsRead:n,clearAllNotifications:i}=Kr(),[c,d]=l.useState("all"),x=(u,v)=>{d(v)},m=t.filter(u=>c==="all"||u.type===c).sort((u,v)=>new Date(v.date)-new Date(u.date));return e.jsxs(ye,{maxWidth:"md",sx:{py:4},children:[e.jsxs(o,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:4},children:[e.jsxs(o,{sx:{display:"flex",alignItems:"center"},children:[e.jsx(yr,{sx:{fontSize:36,mr:1.5,color:"secondary.main"}}),e.jsx(a,{variant:"h4",fontWeight:"bold",children:"Notifications"})]}),e.jsxs(o,{children:[e.jsx(P,{variant:"outlined",onClick:n,disabled:s===0,sx:{mr:1},children:"Mark All as Read"}),e.jsx(P,{onClick:i,color:"error",variant:"outlined",disabled:t.length===0,children:"Clear All"})]})]}),e.jsx(o,{sx:{mb:3},children:e.jsxs(a,{variant:"body2",color:"text.secondary",children:["Showing ",m.length," of ",t.length," ","notifications"]})}),e.jsxs(se,{elevation:0,sx:u=>({p:2,backgroundColor:E(u.palette.primary.main,.7),backdropFilter:"blur(10px)",borderRadius:u.spacing(2),border:`2px solid ${u.palette.secondary.main}`,boxShadow:"inset 0 0 8px rgba(255, 215, 0, 0.5)",transition:"box-shadow 0.3s ease-in-out, border-color 0.3s ease-in-out","&:hover":{boxShadow:"0 0 12px rgba(255, 215, 0, 0.3), inset 0 0 8px rgba(255, 215, 0, 0.5)",borderColor:u.palette.secondary.light}}),children:[e.jsxs($t,{value:c,onChange:x,indicatorColor:"secondary",textColor:"secondary",sx:{mb:3},children:[e.jsx(Ce,{label:"All",value:"all"}),e.jsx(Ce,{label:"Messages",value:"message"}),e.jsx(Ce,{label:"Jobs",value:"job"}),e.jsx(Ce,{label:"Contracts",value:"contract"})]}),r?e.jsx(o,{sx:{p:2},children:Array.from(new Array(4)).map((u,v)=>e.jsx(ie,{variant:"rectangular",height:72,sx:{mb:2,borderRadius:2}},v))}):m.length>0?e.jsx(Ke,{sx:{p:0},children:m.map(u=>e.jsx(Ih,{notification:u},u.id))}):e.jsx(o,{sx:{textAlign:"center",p:5,bgcolor:"background.paper",borderRadius:2},children:e.jsx(a,{variant:"h6",color:"text.secondary",children:"You're all caught up!"})})]})]})},Fh=()=>{const[t,r]=l.useState(""),[s,n]=l.useState(""),[i,c]=l.useState(!1),[d,x]=l.useState(!1),[m,u]=l.useState({}),[v,y]=l.useState(!1),[g,j]=l.useState(""),[b,C]=l.useState(""),[A,w]=l.useState(!0);l.useEffect(()=>{el().catch(()=>{C("Cannot connect to the server")});const W=setTimeout(()=>{w(!1)},3e3);return()=>clearTimeout(W)},[]);const p=ot(),k=Oe();je(cu),je(du);const U=async W=>{W.preventDefault(),u({}),j("");let R=!0;const K={};if(t.trim()?/\S+@\S+\.\S+/.test(t)||(K.email="Please enter a valid email address",R=!1):(K.email="Email address is required",R=!1),s?s.length<6&&(K.password="Password must be at least 6 characters",R=!1):(K.password="Password is required",R=!1),!R){u(K);return}y(!0);try{const _=await p(Is({email:t,password:s}));Is.fulfilled.match(_)?k("/dashboard"):j(_.payload||_.error.message||"Login failed. Please check your credentials.")}catch(_){console.error("Login error:",_),j("Login failed. Please check your credentials and try again.")}finally{y(!1)}};return e.jsx(o,{sx:{minHeight:"100vh",maxHeight:"100vh",display:"flex",alignItems:"center",justifyContent:"center",px:{xs:1,sm:2},py:{xs:1,sm:2},overflow:"hidden"},children:e.jsx(ye,{maxWidth:"sm",sx:{height:"100%",display:"flex",alignItems:"center"},children:e.jsx(ge.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.4,ease:"easeOut"},style:{width:"100%"},children:e.jsxs(se,{elevation:12,sx:{p:{xs:2,sm:3,md:4},width:"100%",maxWidth:420,mx:"auto",borderRadius:{xs:3,sm:4},background:"linear-gradient(145deg, rgba(38, 38, 38, 0.95) 0%, rgba(28, 28, 28, 0.98) 100%)",boxShadow:{xs:"0 6px 24px 0 rgba(0,0,0,0.25)",sm:"0 8px 32px 0 rgba(0,0,0,0.3)"},border:{xs:"1px solid rgba(255,215,0,0.2)",sm:"2px solid rgba(255,215,0,0.3)"},backdropFilter:"blur(20px)",position:"relative",overflow:"hidden",maxHeight:{xs:"95vh",sm:"auto"},"&::before":{content:'""',position:"absolute",top:0,left:0,right:0,height:{xs:"2px",sm:"3px"},background:"linear-gradient(90deg, #FFD700 0%, #FFC000 50%, #FFD700 100%)",animation:"shimmer 2s ease-in-out infinite","@keyframes shimmer":{"0%":{opacity:.5},"50%":{opacity:1},"100%":{opacity:.5}}}},children:[e.jsxs(te,{spacing:{xs:1.5,sm:2},alignItems:"center",sx:{mb:{xs:2,sm:3}},children:[e.jsx(ge.div,{initial:{scale:.8,opacity:0},animate:{scale:1,opacity:1},transition:{duration:.4,delay:.1},children:e.jsx(o,{sx:{width:{xs:45,sm:55},height:{xs:45,sm:55},borderRadius:"50%",background:"linear-gradient(135deg, #FFD700 0%, #FFC000 100%)",display:"flex",alignItems:"center",justifyContent:"center",boxShadow:"0 4px 15px rgba(255,215,0,0.3)"},children:e.jsx(dr,{sx:{fontSize:{xs:22,sm:28},color:"#000"}})})}),e.jsx(ge.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{duration:.4,delay:.2},style:{textAlign:"center"},children:e.jsxs(te,{spacing:.5,alignItems:"center",children:[e.jsx(a,{variant:"h4",component:"h1",sx:{color:"#FFD700",fontWeight:800,fontSize:{xs:"1.4rem",sm:"1.6rem"},letterSpacing:.3,textShadow:"0 2px 10px rgba(255,215,0,0.3)",lineHeight:1.1},children:"Welcome Back"}),e.jsx(a,{variant:"body2",sx:{color:"rgba(255,255,255,0.8)",fontSize:{xs:"0.8rem",sm:"0.85rem"},textAlign:"center"},children:"Access Kelmah - Ghana's Skilled Trades Platform"})]})})]}),A&&e.jsx(qn,{in:A,timeout:800,children:e.jsxs(o,{sx:{mb:{xs:1.5,sm:2},p:{xs:1,sm:1.5},borderRadius:1.5,background:"linear-gradient(135deg, rgba(255,215,0,0.08) 0%, rgba(255,215,0,0.03) 100%)",border:"1px solid rgba(255,215,0,0.15)",display:"flex",alignItems:"center",gap:1},children:[e.jsx(od,{sx:{color:"#FFD700",fontSize:{xs:16,sm:18},flexShrink:0}}),e.jsx(a,{variant:"caption",sx:{color:"#FFD700",fontWeight:600,fontSize:{xs:"0.7rem",sm:"0.75rem"},lineHeight:1.2},children:"Secure & Protected Login"})]})}),(b||g)&&e.jsx(ge.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},transition:{duration:.2},children:e.jsx(be,{severity:"error",sx:{mb:{xs:1.5,sm:2},borderRadius:1.5,fontSize:{xs:"0.75rem",sm:"0.8rem"},py:{xs:.5,sm:1},"& .MuiAlert-message":{fontWeight:500}},children:b||g})}),e.jsx(ge.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{duration:.4,delay:.3},children:e.jsx(o,{component:"form",onSubmit:U,noValidate:!0,children:e.jsxs(te,{spacing:{xs:1.8,sm:2.2},children:[e.jsx(Q,{label:"Email",variant:"outlined",fullWidth:!0,required:!0,size:"small",type:"email",autoComplete:"email",error:!!m.email,helperText:m.email,value:t,onChange:W=>r(W.target.value),InputProps:{startAdornment:e.jsx(We,{position:"start",children:e.jsx(ld,{sx:{color:"rgba(255,215,0,0.7)",fontSize:{xs:18,sm:20}}})}),sx:{fontSize:{xs:"0.9rem",sm:"1rem"},fontWeight:500,color:"white",background:"rgba(255,255,255,0.04)",borderRadius:1.5,minHeight:{xs:"44px",sm:"48px"},"& .MuiOutlinedInput-notchedOutline":{borderColor:"rgba(255,215,0,0.25)",borderWidth:1.5},"&:hover .MuiOutlinedInput-notchedOutline":{borderColor:"rgba(255,215,0,0.4)"},"&.Mui-focused .MuiOutlinedInput-notchedOutline":{borderColor:"#FFD700",boxShadow:"0 0 0 2px rgba(255,215,0,0.1)"}}},InputLabelProps:{sx:{color:"rgba(255,215,0,0.8)",fontWeight:600,fontSize:{xs:"0.85rem",sm:"0.9rem"},"&.Mui-focused":{color:"#FFD700"}}},FormHelperTextProps:{sx:{fontSize:{xs:"0.7rem",sm:"0.75rem"},mt:.5}}}),e.jsx(Q,{label:"Password",variant:"outlined",fullWidth:!0,required:!0,size:"small",type:d?"text":"password",autoComplete:"current-password",error:!!m.password,helperText:m.password,value:s,onChange:W=>n(W.target.value),InputProps:{startAdornment:e.jsx(We,{position:"start",children:e.jsx(cd,{sx:{color:"rgba(255,215,0,0.7)",fontSize:{xs:18,sm:20}}})}),endAdornment:e.jsx(We,{position:"end",children:e.jsx(ne,{onClick:()=>x(!d),edge:"end",size:"small",sx:{color:"rgba(255,215,0,0.7)",minWidth:"36px",minHeight:"36px"},children:d?e.jsx($n,{fontSize:"small"}):e.jsx(Et,{fontSize:"small"})})}),sx:{fontSize:{xs:"0.9rem",sm:"1rem"},fontWeight:500,color:"white",background:"rgba(255,255,255,0.04)",borderRadius:1.5,minHeight:{xs:"44px",sm:"48px"},"& .MuiOutlinedInput-notchedOutline":{borderColor:"rgba(255,215,0,0.25)",borderWidth:1.5},"&:hover .MuiOutlinedInput-notchedOutline":{borderColor:"rgba(255,215,0,0.4)"},"&.Mui-focused .MuiOutlinedInput-notchedOutline":{borderColor:"#FFD700",boxShadow:"0 0 0 2px rgba(255,215,0,0.1)"}}},InputLabelProps:{sx:{color:"rgba(255,215,0,0.8)",fontWeight:600,fontSize:{xs:"0.85rem",sm:"0.9rem"},"&.Mui-focused":{color:"#FFD700"}}},FormHelperTextProps:{sx:{fontSize:{xs:"0.7rem",sm:"0.75rem"},mt:.5}}}),e.jsxs(o,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",py:.5},children:[e.jsx(ft,{control:e.jsx(wo,{checked:i,onChange:W=>c(W.target.checked),size:"small",sx:{color:"rgba(255,215,0,0.7)","&.Mui-checked":{color:"#FFD700"},p:.5}}),label:e.jsx(a,{sx:{color:"rgba(255,255,255,0.9)",fontWeight:500,fontSize:{xs:"0.8rem",sm:"0.85rem"}},children:"Remember me"}),sx:{m:0}}),e.jsx(et,{component:Fe,to:"/forgot-password",variant:"body2",sx:{color:"#FFD700",fontWeight:600,textDecoration:"none",fontSize:{xs:"0.8rem",sm:"0.85rem"},"&:hover":{color:"#FFC000",textDecoration:"underline"}},children:"Forgot password?"})]}),e.jsx(ge.div,{whileHover:{scale:1.01},whileTap:{scale:.99},children:e.jsx(P,{type:"submit",fullWidth:!0,variant:"contained",disabled:v,sx:{fontWeight:700,fontSize:{xs:"1rem",sm:"1.1rem"},py:{xs:1.3,sm:1.5},minHeight:{xs:"44px",sm:"48px"},background:"linear-gradient(135deg, #FFD700 0%, #FFC000 100%)",color:"#000",boxShadow:"0 4px 16px rgba(255,215,0,0.2)",borderRadius:1.5,textTransform:"none","&:hover":{background:"linear-gradient(135deg, #FFC000 0%, #FFB000 100%)",boxShadow:"0 6px 20px rgba(255,215,0,0.3)"},"&:disabled":{background:"rgba(255,215,0,0.3)",color:"rgba(0,0,0,0.5)"}},children:v?e.jsxs(te,{direction:"row",alignItems:"center",spacing:1,children:[e.jsx(Ae,{size:16,sx:{color:"#000"}}),e.jsx(a,{sx:{fontSize:"inherit",fontWeight:"inherit"},children:"Signing In..."})]}):"Sign In to Kelmah"})})]})})}),e.jsx(ge.div,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.4,delay:.5},children:e.jsxs(te,{spacing:{xs:2,sm:2.5},alignItems:"center",sx:{mt:{xs:2.5,sm:3}},children:[e.jsxs(a,{variant:"body2",sx:{color:"rgba(255,255,255,0.9)",textAlign:"center",fontSize:{xs:"0.8rem",sm:"0.85rem"},fontWeight:500},children:["New to Kelmah?"," ",e.jsx(et,{component:Fe,to:"/register",variant:"body2",sx:{color:"#FFD700",fontWeight:700,textDecoration:"none",fontSize:"inherit","&:hover":{color:"#FFC000",textDecoration:"underline"}},children:"Create account"})]}),e.jsx(fe,{sx:{width:"100%",borderColor:"rgba(255,215,0,0.25)","& .MuiDivider-wrapper":{px:1.5}},children:e.jsx(a,{variant:"caption",sx:{color:"#FFD700",fontWeight:600,fontSize:{xs:"0.7rem",sm:"0.75rem"},letterSpacing:.3},children:"OR CONTINUE WITH"})}),e.jsxs(h,{container:!0,spacing:1.5,sx:{width:"100%"},children:[e.jsx(h,{item:!0,xs:6,children:e.jsx(ge.div,{whileHover:{scale:1.01},whileTap:{scale:.99},children:e.jsx(P,{fullWidth:!0,variant:"outlined",startIcon:e.jsx(Co,{sx:{fontSize:{xs:16,sm:18}}}),onClick:()=>{window.location.href=`${Js}/api/auth/google`},sx:{py:{xs:1,sm:1.2},minHeight:{xs:"38px",sm:"42px"},fontWeight:600,fontSize:{xs:"0.8rem",sm:"0.85rem"},background:"rgba(255,255,255,0.95)",color:"#4285F4",borderColor:"#4285F4",borderWidth:1.5,borderRadius:1.5,textTransform:"none","&:hover":{background:"#4285F4",color:"#fff",borderColor:"#4285F4",borderWidth:1.5}},children:"Google"})})}),e.jsx(h,{item:!0,xs:6,children:e.jsx(ge.div,{whileHover:{scale:1.01},whileTap:{scale:.99},children:e.jsx(P,{fullWidth:!0,variant:"outlined",startIcon:e.jsx(ko,{sx:{fontSize:{xs:16,sm:18}}}),onClick:()=>{window.location.href=`${Js}/api/auth/linkedin`},sx:{py:{xs:1,sm:1.2},minHeight:{xs:"38px",sm:"42px"},fontWeight:600,fontSize:{xs:"0.8rem",sm:"0.85rem"},background:"rgba(255,255,255,0.95)",color:"#0077B5",borderColor:"#0077B5",borderWidth:1.5,borderRadius:1.5,textTransform:"none","&:hover":{background:"#0077B5",color:"#fff",borderColor:"#0077B5",borderWidth:1.5}},children:"LinkedIn"})})})]})]})})]})})})})},Wh="/assets/Good%20job%20clip-B02mP4Wo.jpeg",Th="/assets/planner%20clip-DKGyP0Jk.jpeg",Hi=[Wh,Th],Xr=({children:t})=>{const r=ve(),s=Te(r.breakpoints.down("sm")),n=Te(r.breakpoints.down("md")),[i,c]=l.useState(0);l.useEffect(()=>{const m=setInterval(()=>{c(u=>(u+1)%Hi.length)},5e3);return()=>clearInterval(m)},[]);const d=[{icon:e.jsx(xr,{sx:{fontSize:{xs:20,sm:24},color:"#FFD700"}}),title:"Verified Professionals",description:"All workers are vetted and verified"},{icon:e.jsx(Va,{sx:{fontSize:{xs:20,sm:24},color:"#FFD700"}}),title:"Skilled Trades",description:"Plumbing, electrical, carpentry & more"},{icon:e.jsx(So,{sx:{fontSize:{xs:20,sm:24},color:"#FFD700"}}),title:"Quality Work",description:"Guaranteed professional results"}],x=["Plumber","Electrician","Carpenter","Mason","Welder","Painter"];return e.jsxs(o,{sx:{minHeight:"100vh",width:"100vw",position:"relative",display:"flex",alignItems:"center",justifyContent:"center",backgroundColor:"#000",py:{xs:2,sm:3,md:4},px:{xs:1,sm:2},overflowY:"auto",overflowX:"hidden"},children:[e.jsx(o,{sx:{position:"fixed",top:0,left:0,width:"100vw",height:"100vh",zIndex:0,backgroundImage:`url(${gx})`,backgroundSize:"cover",backgroundPosition:"center",filter:"blur(3px) brightness(0.7)","&::after":{content:'""',position:"absolute",top:0,left:0,width:"100%",height:"100%",background:`linear-gradient(135deg, 
              rgba(0,0,0,0.8) 0%, 
              rgba(0,0,0,0.4) 40%, 
              rgba(255,215,0,0.05) 50%, 
              rgba(0,0,0,0.4) 60%, 
              rgba(0,0,0,0.8) 100%)`,zIndex:1}}}),e.jsx(o,{sx:{position:"fixed",top:0,left:0,width:"100%",height:"100%",zIndex:1,pointerEvents:"none",display:{xs:"none",sm:"block"},"&::before":{content:'""',position:"absolute",top:"20%",left:"10%",width:"300px",height:"300px",borderRadius:"50%",background:"radial-gradient(circle, rgba(255,215,0,0.1) 0%, transparent 70%)",animation:"float 6s ease-in-out infinite"},"&::after":{content:'""',position:"absolute",bottom:"20%",right:"10%",width:"200px",height:"200px",borderRadius:"50%",background:"radial-gradient(circle, rgba(255,215,0,0.08) 0%, transparent 70%)",animation:"float 4s ease-in-out infinite reverse"},"@keyframes float":{"0%, 100%":{transform:"translateY(0px) scale(1)"},"50%":{transform:"translateY(-20px) scale(1.05)"}}}}),e.jsx(ye,{maxWidth:"lg",sx:{position:"relative",zIndex:2,width:"100%",px:{xs:1,sm:2,md:3}},children:e.jsx(ge.div,{initial:{opacity:0,y:50},animate:{opacity:1,y:0},transition:{duration:.8,ease:"easeOut"},children:e.jsxs(se,{elevation:12,sx:{display:"flex",flexDirection:{xs:"column",md:"row"},width:"100%",maxWidth:{xs:"100%",sm:"90%",md:"none"},mx:"auto",overflow:"hidden",borderRadius:{xs:4,sm:5,md:6},background:"linear-gradient(145deg, rgba(20, 20, 20, 0.95) 0%, rgba(30, 30, 30, 0.98) 100%)",boxShadow:{xs:"0 12px 40px rgba(0,0,0,0.3)",sm:"0 16px 50px rgba(0,0,0,0.35)",md:"0 20px 60px rgba(0,0,0,0.4)"},backdropFilter:"blur(20px)",border:{xs:"1px solid rgba(255,215,0,0.15)",sm:"1px solid rgba(255,215,0,0.2)"},minHeight:{xs:"auto",md:650},position:"relative","&::before":{content:'""',position:"absolute",top:0,left:0,right:0,height:{xs:"3px",sm:"4px"},background:"linear-gradient(90deg, #FFD700 0%, #FFC000 50%, #FFD700 100%)",zIndex:3}},children:[!s&&e.jsxs(o,{sx:{flex:1,display:"flex",flexDirection:"column",justifyContent:"space-between",p:{xs:2,sm:3,md:4},background:`linear-gradient(135deg, 
                    rgba(40,40,40,0.9) 0%, 
                    rgba(30,30,30,0.95) 50%, 
                    rgba(25,25,25,0.98) 100%)`,borderRight:n?"none":"1px solid rgba(255,215,0,0.15)",color:r.palette.primary.contrastText,position:"relative",minWidth:{xs:"auto",md:380,lg:420},minHeight:{xs:"auto",md:650},overflow:"hidden"},children:[e.jsx(ge.div,{initial:{opacity:0,y:30},animate:{opacity:1,y:0},transition:{duration:.8,delay:.2},children:e.jsxs(te,{spacing:{xs:2,sm:3},alignItems:"center",sx:{textAlign:"center"},children:[e.jsx(o,{sx:{width:{xs:60,sm:70,md:80},height:{xs:60,sm:70,md:80},borderRadius:"50%",background:"linear-gradient(135deg, #FFD700 0%, #FFC000 100%)",display:"flex",alignItems:"center",justifyContent:"center",boxShadow:"0 8px 25px rgba(255,215,0,0.3)"},children:e.jsx(ki,{sx:{fontSize:{xs:28,sm:32,md:40},color:"#000"}})}),e.jsxs(te,{spacing:1,alignItems:"center",children:[e.jsx(a,{variant:"h3",component:"h1",sx:{fontWeight:800,letterSpacing:1,color:r.palette.secondary.main,fontSize:{xs:"1.5rem",sm:"1.75rem",md:"2rem",lg:"2.2rem"},textShadow:"0 2px 15px rgba(255,215,0,0.3)",lineHeight:1.2},children:"Welcome to Kelmah"}),e.jsx(a,{variant:"h6",sx:{color:"rgba(255,255,255,0.9)",fontWeight:500,fontSize:{xs:"0.9rem",sm:"1rem",md:"1.1rem"}},children:"Ghana's Premier Skilled Trades Platform"}),e.jsx(a,{variant:"body1",sx:{color:"rgba(255,255,255,0.8)",maxWidth:{xs:250,sm:280,md:320},lineHeight:1.5,fontSize:{xs:"0.85rem",sm:"0.9rem",md:"1rem"}},children:"Connect with verified skilled workers and find quality trade services across Ghana"})]})]})}),e.jsx(ge.div,{initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},transition:{duration:.8,delay:.4},children:e.jsx(o,{sx:{flex:1,display:"flex",alignItems:"center",justifyContent:"center",position:"relative",my:{xs:2,sm:3}},children:e.jsxs(o,{sx:{width:{xs:"160px",sm:"200px",md:"240px",lg:"280px"},height:{xs:"160px",sm:"200px",md:"240px",lg:"280px"},position:"relative",borderRadius:"50%",overflow:"hidden",boxShadow:"0 15px 40px rgba(0,0,0,0.3)",border:{xs:"2px solid rgba(255,215,0,0.3)",md:"3px solid rgba(255,215,0,0.3)"}},children:[e.jsx(o,{sx:{position:"absolute",inset:{xs:"-15px",md:"-20px"},borderRadius:"50%",background:"radial-gradient(circle, rgba(255,215,0,0.15) 0%, transparent 70%)",animation:"pulse 3s ease-in-out infinite","@keyframes pulse":{"0%, 100%":{opacity:.7,transform:"scale(1)"},"50%":{opacity:1,transform:"scale(1.05)"}}}}),Hi.map((m,u)=>e.jsx(ge.img,{src:m,alt:"Professional worker",initial:{opacity:0},animate:{opacity:i===u?1:0},transition:{duration:1},style:{position:"absolute",width:"100%",height:"100%",objectFit:"cover",borderRadius:"50%"}},m))]})})}),e.jsx(ge.div,{initial:{opacity:0,y:30},animate:{opacity:1,y:0},transition:{duration:.8,delay:.6},children:e.jsx(te,{spacing:{xs:1.5,sm:2},children:d.map((m,u)=>e.jsx(ge.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{duration:.5,delay:.8+u*.1},children:e.jsxs(o,{sx:{display:"flex",alignItems:"center",p:{xs:1.5,sm:2},borderRadius:{xs:1.5,sm:2},background:"rgba(255,215,0,0.05)",border:"1px solid rgba(255,215,0,0.1)",transition:"all 0.3s ease","&:hover":{background:"rgba(255,215,0,0.1)",border:"1px solid rgba(255,215,0,0.2)",transform:"translateX(5px)"}},children:[e.jsx(o,{sx:{mr:{xs:1.5,sm:2},flexShrink:0},children:m.icon}),e.jsxs(o,{sx:{minWidth:0},children:[e.jsx(a,{variant:"subtitle2",sx:{color:"#FFD700",fontWeight:700,mb:.5,fontSize:{xs:"0.8rem",sm:"0.85rem",md:"0.9rem"}},children:m.title}),e.jsx(a,{variant:"caption",sx:{color:"rgba(255,255,255,0.8)",fontSize:{xs:"0.7rem",sm:"0.75rem",md:"0.8rem"},lineHeight:1.3},children:m.description})]})]})},m.title))})}),e.jsx(ge.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.8,delay:1},children:e.jsxs(te,{spacing:2,alignItems:"center",sx:{textAlign:"center"},children:[e.jsx(a,{variant:"body2",sx:{color:"rgba(255,255,255,0.7)",fontWeight:600,fontSize:{xs:"0.8rem",sm:"0.85rem"}},children:"Popular Trades"}),e.jsx(o,{sx:{display:"flex",flexWrap:"wrap",gap:{xs:.5,sm:1},justifyContent:"center",maxWidth:"100%"},children:x.map((m,u)=>e.jsx(ge.div,{initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},transition:{duration:.3,delay:1.2+u*.1},children:e.jsx(ee,{label:m,size:"small",sx:{backgroundColor:"rgba(255,215,0,0.15)",color:"#FFD700",fontSize:{xs:"0.65rem",sm:"0.7rem",md:"0.75rem"},fontWeight:600,border:"1px solid rgba(255,215,0,0.3)",height:{xs:"24px",sm:"28px"},"&:hover":{backgroundColor:"rgba(255,215,0,0.25)",transform:"scale(1.05)"},transition:"all 0.2s ease"}})},m))})]})})]}),s&&e.jsx(ge.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6},children:e.jsxs(te,{spacing:1,alignItems:"center",sx:{textAlign:"center",p:1.5,background:"linear-gradient(135deg, rgba(40,40,40,0.8) 0%, rgba(30,30,30,0.9) 100%)",borderBottom:"1px solid rgba(255,215,0,0.1)"},children:[e.jsx(o,{sx:{width:35,height:35,borderRadius:"50%",background:"linear-gradient(135deg, #FFD700 0%, #FFC000 100%)",display:"flex",alignItems:"center",justifyContent:"center",boxShadow:"0 4px 15px rgba(255,215,0,0.3)"},children:e.jsx(ki,{sx:{fontSize:18,color:"#000"}})}),e.jsxs(te,{spacing:.5,alignItems:"center",children:[e.jsx(a,{variant:"h5",sx:{fontWeight:800,color:"#FFD700",fontSize:"1.4rem",textShadow:"0 2px 10px rgba(255,215,0,0.3)"},children:"Kelmah"}),e.jsx(a,{variant:"body2",sx:{color:"rgba(255,255,255,0.8)",fontSize:"0.85rem"},children:"Ghana's Skilled Trades Platform"})]}),e.jsx(o,{sx:{display:"flex",flexWrap:"wrap",gap:.5,justifyContent:"center"},children:["Verified","Skilled","Quality"].map(m=>e.jsx(ee,{label:m,size:"small",sx:{backgroundColor:"rgba(255,215,0,0.15)",color:"#FFD700",fontSize:"0.65rem",fontWeight:600,height:"22px"}},m))})]})}),e.jsx(o,{sx:{flex:1,display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",p:{xs:2,sm:3,md:4},minWidth:{xs:"auto",md:450,lg:500},backgroundColor:"transparent",minHeight:{xs:"auto",md:650}},children:e.jsx(ge.div,{initial:{opacity:0,x:s?0:30},animate:{opacity:1,x:0},transition:{duration:.8,delay:.3},style:{width:"100%",maxWidth:s?"100%":"480px"},children:t})})]})})})]})};Xr.propTypes={children:Y.node.isRequired};const Eh=()=>{var s;const r=(s=Zt().state)==null?void 0:s.registered;return e.jsxs(Xr,{children:[r&&e.jsx(be,{severity:"success",sx:{mb:2},children:"Registration successful! Please check your email to verify your account."}),e.jsx(Fh,{})]})},Mh=()=>{const t=ve(),r=Te(t.breakpoints.down("sm"));Te(t.breakpoints.down("md"));const s=["Choose Your Path","Personal Details","Account Security","Confirmation"],[n,i]=l.useState(0),[c,d]=l.useState("worker"),[x,m]=l.useState(""),[u,v]=l.useState(""),[y,g]=l.useState(""),[j,b]=l.useState(""),[C,A]=l.useState(""),[w,p]=l.useState(""),[k,U]=l.useState(""),[W,R]=l.useState(!1),[K,_]=l.useState(""),[O,T]=l.useState(!1),[H,F]=l.useState(!1),[V,re]=l.useState(0),{register:z}=ut(),J=Oe(),f=q=>{let $=0;return q.length>=8&&$++,/[A-Z]/.test(q)&&$++,/[a-z]/.test(q)&&$++,/[0-9]/.test(q)&&$++,/[^A-Za-z0-9]/.test(q)&&$++,$},M=()=>{L()&&(n===s.length-1?S():i(q=>q+1))},G=()=>{i(q=>q-1)},I=q=>{A(q),re(f(q))},L=()=>{let q=!0;return _(""),n===1?((!x.trim()||!u.trim()||!y.trim()||!j.trim())&&(_("Please fill out all required fields"),q=!1),/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(y)||(_("Please enter a valid email address"),q=!1),/^(\+233|0)[0-9]{9}$/.test(j.replace(/\s/g,""))||(_("Please enter a valid Ghana phone number"),q=!1)):n===2&&((!C||!w)&&(_("Please fill out all password fields"),q=!1),C!==w&&(_("Passwords do not match"),q=!1),C.length<8&&(_("Password must be at least 8 characters long"),q=!1),V<3&&(_("Please choose a stronger password with uppercase, lowercase, numbers, and symbols"),q=!1),c==="hirer"&&!k.trim()&&(_("Please enter your company name"),q=!1),H||(_("You must accept the terms and conditions to continue"),q=!1)),q},S=async()=>{if(L())try{T(!0);const q={firstName:x.trim(),lastName:u.trim(),email:y.trim().toLowerCase(),phone:j.replace(/\s/g,""),password:C,role:c,...c==="hirer"&&{companyName:k.trim()},acceptTerms:H};await z(q),J("/login",{state:{registered:!0,message:`Welcome to Kelmah! Please check your email to verify your account and start ${c==="worker"?"finding work":"hiring skilled workers"}.`}})}catch(q){console.error("Registration error:",q),_(q.message||"Registration failed. Please try again.")}finally{T(!1)}},B=()=>V<=2?"error":V<=3?"warning":"success",D=()=>V<=2?"Weak":V<=3?"Medium":"Strong",N=q=>{switch(q){case 0:return e.jsx(ge.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},children:e.jsx(ye,{maxWidth:"md",sx:{px:{xs:1,sm:2}},children:e.jsxs(te,{spacing:{xs:1.5,sm:2},alignItems:"center",children:[e.jsx(a,{variant:"h6",sx:{textAlign:"center",color:"#FFD700",fontWeight:700,fontSize:{xs:"1rem",sm:"1.1rem"},mb:{xs:1,sm:1.5}},children:"What brings you to Kelmah?"}),e.jsxs(h,{container:!0,spacing:{xs:1.5,sm:2},sx:{maxWidth:{xs:"100%",sm:500}},children:[e.jsx(h,{item:!0,xs:12,sm:6,children:e.jsx(ge.div,{whileHover:{scale:r?1:1.02},whileTap:{scale:.98},children:e.jsx(me,{elevation:c==="worker"?12:4,sx:{p:{xs:1.5,sm:2},borderRadius:{xs:2,sm:3},border:c==="worker"?"2px solid #FFD700":"1px solid rgba(255,215,0,0.3)",background:c==="worker"?"linear-gradient(135deg, rgba(255, 215, 0, 0.15) 0%, rgba(255, 215, 0, 0.05) 100%)":"rgba(38,38,38,0.8)",boxShadow:c==="worker"?"0 8px 32px rgba(255,215,0,0.25)":"0 4px 16px rgba(0,0,0,0.2)",cursor:"pointer",transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)",backdropFilter:"blur(10px)",position:"relative",overflow:"hidden",minHeight:{xs:"auto",sm:"280px"},"&:hover":{border:"3px solid #FFD700",boxShadow:"0 12px 40px rgba(255,215,0,0.3)"},"&::before":c==="worker"?{content:'""',position:"absolute",top:0,left:0,right:0,height:"4px",background:"linear-gradient(90deg, #FFD700, #FFC000)"}:{}},onClick:()=>d("worker"),children:e.jsxs(te,{spacing:{xs:2,sm:3},alignItems:"center",sx:{textAlign:"center"},children:[e.jsx(o,{sx:{width:{xs:60,sm:80},height:{xs:60,sm:80},borderRadius:"50%",background:"linear-gradient(135deg, #FFD700 0%, #FFC000 100%)",display:"flex",alignItems:"center",justifyContent:"center",boxShadow:"0 8px 25px rgba(255,215,0,0.3)"},children:e.jsx(So,{sx:{fontSize:{xs:30,sm:40},color:"#000"}})}),e.jsxs(te,{spacing:1,alignItems:"center",children:[e.jsx(a,{variant:"h5",sx:{fontWeight:700,color:"#FFD700",fontSize:{xs:"1.1rem",sm:"1.25rem"}},children:"I'm a Skilled Worker"}),e.jsx(a,{variant:"body1",sx:{color:"rgba(255,255,255,0.9)",fontSize:{xs:"0.9rem",sm:"1rem"},lineHeight:1.4},children:"I'm a tradesperson looking for work opportunities"})]}),e.jsx(o,{sx:{display:"flex",flexWrap:"wrap",gap:.5,justifyContent:"center"},children:["Plumber","Electrician","Carpenter","Mason"].map($=>e.jsx(ee,{label:$,size:"small",sx:{backgroundColor:"rgba(255,215,0,0.2)",color:"#FFD700",fontWeight:600,fontSize:{xs:"0.7rem",sm:"0.75rem"}}},$))}),e.jsx(ft,{value:"worker",control:e.jsx(sr,{checked:c==="worker",sx:{color:"#FFD700","&.Mui-checked":{color:"#FFD700"}}}),label:"",sx:{mt:1}})]})})})}),e.jsx(h,{item:!0,xs:12,md:6,children:e.jsx(ge.div,{whileHover:{scale:r?1:1.02},whileTap:{scale:.98},children:e.jsx(me,{elevation:c==="hirer"?12:4,sx:{p:{xs:2,sm:3},borderRadius:{xs:3,sm:4},border:c==="hirer"?"3px solid #FFD700":"2px solid rgba(255,215,0,0.3)",background:c==="hirer"?"linear-gradient(135deg, rgba(255, 215, 0, 0.15) 0%, rgba(255, 215, 0, 0.05) 100%)":"rgba(38,38,38,0.8)",boxShadow:c==="hirer"?"0 8px 32px rgba(255,215,0,0.25)":"0 4px 16px rgba(0,0,0,0.2)",cursor:"pointer",transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)",backdropFilter:"blur(10px)",position:"relative",overflow:"hidden",minHeight:{xs:"auto",sm:"280px"},"&:hover":{border:"3px solid #FFD700",boxShadow:"0 12px 40px rgba(255,215,0,0.3)"},"&::before":c==="hirer"?{content:'""',position:"absolute",top:0,left:0,right:0,height:"4px",background:"linear-gradient(90deg, #FFD700, #FFC000)"}:{}},onClick:()=>d("hirer"),children:e.jsxs(te,{spacing:{xs:2,sm:3},alignItems:"center",sx:{textAlign:"center"},children:[e.jsx(o,{sx:{width:{xs:60,sm:80},height:{xs:60,sm:80},borderRadius:"50%",background:"linear-gradient(135deg, #FFD700 0%, #FFC000 100%)",display:"flex",alignItems:"center",justifyContent:"center",boxShadow:"0 8px 25px rgba(255,215,0,0.3)"},children:e.jsx(dt,{sx:{fontSize:{xs:30,sm:40},color:"#000"}})}),e.jsxs(te,{spacing:1,alignItems:"center",children:[e.jsx(a,{variant:"h5",sx:{fontWeight:700,color:"#FFD700",fontSize:{xs:"1.1rem",sm:"1.25rem"}},children:"I Need Skilled Workers"}),e.jsx(a,{variant:"body1",sx:{color:"rgba(255,255,255,0.9)",fontSize:{xs:"0.9rem",sm:"1rem"},lineHeight:1.4},children:"I want to hire qualified professionals for my projects"})]}),e.jsx(o,{sx:{display:"flex",flexWrap:"wrap",gap:.5,justifyContent:"center"},children:["Home Repairs","Construction","Maintenance","Renovation"].map($=>e.jsx(ee,{label:$,size:"small",sx:{backgroundColor:"rgba(255,215,0,0.2)",color:"#FFD700",fontWeight:600,fontSize:{xs:"0.7rem",sm:"0.75rem"}}},$))}),e.jsx(ft,{value:"hirer",control:e.jsx(sr,{checked:c==="hirer",sx:{color:"#FFD700","&.Mui-checked":{color:"#FFD700"}}}),label:"",sx:{mt:1}})]})})})})]})]})})});case 1:return e.jsx(ge.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},transition:{duration:.5},children:e.jsx(ye,{maxWidth:"sm",sx:{px:{xs:1,sm:2}},children:e.jsxs(te,{spacing:3,alignItems:"center",children:[e.jsx(a,{variant:"h6",sx:{textAlign:"center",color:"#FFD700",fontWeight:600,fontSize:{xs:"1.1rem",sm:"1.25rem"}},children:"Tell us about yourself"}),e.jsxs(te,{spacing:{xs:1.5,sm:2},sx:{width:"100%"},children:[e.jsxs(h,{container:!0,spacing:{xs:1.5,sm:2},children:[e.jsx(h,{item:!0,xs:12,sm:6,children:e.jsx(Q,{label:"First Name",variant:"outlined",fullWidth:!0,required:!0,size:"small",value:x,onChange:$=>m($.target.value),InputProps:{startAdornment:e.jsx(We,{position:"start",children:e.jsx(Lt,{sx:{color:"rgba(255,215,0,0.7)",fontSize:{xs:16,sm:18}}})}),sx:{color:"white",fontSize:{xs:"0.85rem",sm:"0.9rem"},minHeight:{xs:"38px",sm:"42px"},"& .MuiOutlinedInput-notchedOutline":{borderColor:"rgba(255,215,0,0.3)",borderWidth:{xs:1.5,sm:2}},"&:hover .MuiOutlinedInput-notchedOutline":{borderColor:"rgba(255,215,0,0.5)"},"&.Mui-focused .MuiOutlinedInput-notchedOutline":{borderColor:"#FFD700"}}},InputLabelProps:{sx:{color:"rgba(255,215,0,0.8)",fontSize:{xs:"0.9rem",sm:"1rem"}}}})}),e.jsx(h,{item:!0,xs:12,sm:6,children:e.jsx(Q,{label:"Last Name",variant:"outlined",fullWidth:!0,required:!0,value:u,onChange:$=>v($.target.value),InputProps:{startAdornment:e.jsx(We,{position:"start",children:e.jsx(Lt,{sx:{color:"rgba(255,215,0,0.7)",fontSize:{xs:20,sm:24}}})}),sx:{color:"white",fontSize:{xs:"1rem",sm:"1.1rem"},minHeight:{xs:"52px",sm:"56px"},"& .MuiOutlinedInput-notchedOutline":{borderColor:"rgba(255,215,0,0.3)",borderWidth:{xs:1.5,sm:2}},"&:hover .MuiOutlinedInput-notchedOutline":{borderColor:"rgba(255,215,0,0.5)"},"&.Mui-focused .MuiOutlinedInput-notchedOutline":{borderColor:"#FFD700"}}},InputLabelProps:{sx:{color:"rgba(255,215,0,0.8)",fontSize:{xs:"0.9rem",sm:"1rem"}}}})})]}),e.jsx(Q,{label:"Email Address",variant:"outlined",fullWidth:!0,required:!0,type:"email",value:y,onChange:$=>g($.target.value),InputProps:{startAdornment:e.jsx(We,{position:"start",children:e.jsx(dd,{sx:{color:"rgba(255,215,0,0.7)",fontSize:{xs:20,sm:24}}})}),sx:{color:"white",fontSize:{xs:"1rem",sm:"1.1rem"},minHeight:{xs:"52px",sm:"56px"},"& .MuiOutlinedInput-notchedOutline":{borderColor:"rgba(255,215,0,0.3)",borderWidth:{xs:1.5,sm:2}},"&:hover .MuiOutlinedInput-notchedOutline":{borderColor:"rgba(255,215,0,0.5)"},"&.Mui-focused .MuiOutlinedInput-notchedOutline":{borderColor:"#FFD700"}}},InputLabelProps:{sx:{color:"rgba(255,215,0,0.8)",fontSize:{xs:"0.9rem",sm:"1rem"}}}}),e.jsx(Q,{label:"Phone Number (+233 or 0)",variant:"outlined",fullWidth:!0,required:!0,value:j,onChange:$=>b($.target.value),placeholder:"e.g., +233 24 123 4567 or 024 123 4567",InputProps:{startAdornment:e.jsx(We,{position:"start",children:e.jsx(Ao,{sx:{color:"rgba(255,215,0,0.7)",fontSize:{xs:20,sm:24}}})}),sx:{color:"white",fontSize:{xs:"1rem",sm:"1.1rem"},minHeight:{xs:"52px",sm:"56px"},"& .MuiOutlinedInput-notchedOutline":{borderColor:"rgba(255,215,0,0.3)",borderWidth:{xs:1.5,sm:2}},"&:hover .MuiOutlinedInput-notchedOutline":{borderColor:"rgba(255,215,0,0.5)"},"&.Mui-focused .MuiOutlinedInput-notchedOutline":{borderColor:"#FFD700"}}},InputLabelProps:{sx:{color:"rgba(255,215,0,0.8)",fontSize:{xs:"0.9rem",sm:"1rem"}}}})]})]})})});case 2:return e.jsx(ge.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},transition:{duration:.5},children:e.jsx(ye,{maxWidth:"sm",sx:{px:{xs:1,sm:2}},children:e.jsxs(te,{spacing:3,alignItems:"center",children:[e.jsx(a,{variant:"h6",sx:{textAlign:"center",color:"#FFD700",fontWeight:600,fontSize:{xs:"1.1rem",sm:"1.25rem"}},children:"Secure your account"}),e.jsxs(te,{spacing:{xs:2.5,sm:3},sx:{width:"100%"},children:[c==="hirer"&&e.jsx(Q,{label:"Company/Organization Name",variant:"outlined",fullWidth:!0,required:!0,value:k,onChange:$=>U($.target.value),InputProps:{startAdornment:e.jsx(We,{position:"start",children:e.jsx(ri,{sx:{color:"rgba(255,215,0,0.7)",fontSize:{xs:20,sm:24}}})}),sx:{color:"white",fontSize:{xs:"1rem",sm:"1.1rem"},minHeight:{xs:"52px",sm:"56px"},"& .MuiOutlinedInput-notchedOutline":{borderColor:"rgba(255,215,0,0.3)",borderWidth:{xs:1.5,sm:2}},"&:hover .MuiOutlinedInput-notchedOutline":{borderColor:"rgba(255,215,0,0.5)"},"&.Mui-focused .MuiOutlinedInput-notchedOutline":{borderColor:"#FFD700"}}},InputLabelProps:{sx:{color:"rgba(255,215,0,0.8)",fontSize:{xs:"0.9rem",sm:"1rem"}}}}),e.jsx(Q,{label:"Password",variant:"outlined",fullWidth:!0,required:!0,type:W?"text":"password",value:C,onChange:$=>I($.target.value),InputProps:{endAdornment:e.jsx(We,{position:"end",children:e.jsx(ne,{onClick:()=>R(!W),edge:"end",size:r?"small":"medium",sx:{color:"rgba(255,215,0,0.7)",minWidth:{xs:"40px",sm:"48px"}},children:W?e.jsx($n,{}):e.jsx(Et,{})})}),sx:{color:"white",fontSize:{xs:"1rem",sm:"1.1rem"},minHeight:{xs:"52px",sm:"56px"},"& .MuiOutlinedInput-notchedOutline":{borderColor:"rgba(255,215,0,0.3)",borderWidth:{xs:1.5,sm:2}},"&:hover .MuiOutlinedInput-notchedOutline":{borderColor:"rgba(255,215,0,0.5)"},"&.Mui-focused .MuiOutlinedInput-notchedOutline":{borderColor:"#FFD700"}}},InputLabelProps:{sx:{color:"rgba(255,215,0,0.8)",fontSize:{xs:"0.9rem",sm:"1rem"}}}}),C&&e.jsxs(o,{sx:{display:"flex",alignItems:"center",gap:1,justifyContent:"center"},children:[e.jsx(a,{variant:"caption",sx:{color:"rgba(255,255,255,0.7)",fontSize:{xs:"0.75rem",sm:"0.8rem"}},children:"Strength:"}),e.jsx(ee,{label:D(),size:"small",color:B(),sx:{fontSize:{xs:"0.65rem",sm:"0.7rem"}}})]}),e.jsx(Q,{label:"Confirm Password",variant:"outlined",fullWidth:!0,required:!0,type:W?"text":"password",value:w,onChange:$=>p($.target.value),InputProps:{endAdornment:e.jsx(We,{position:"end",children:e.jsx(ne,{onClick:()=>R(!W),edge:"end",size:r?"small":"medium",sx:{color:"rgba(255,215,0,0.7)",minWidth:{xs:"40px",sm:"48px"}},children:W?e.jsx($n,{}):e.jsx(Et,{})})}),sx:{color:"white",fontSize:{xs:"1rem",sm:"1.1rem"},minHeight:{xs:"52px",sm:"56px"},"& .MuiOutlinedInput-notchedOutline":{borderColor:"rgba(255,215,0,0.3)",borderWidth:{xs:1.5,sm:2}},"&:hover .MuiOutlinedInput-notchedOutline":{borderColor:"rgba(255,215,0,0.5)"},"&.Mui-focused .MuiOutlinedInput-notchedOutline":{borderColor:"#FFD700"}}},InputLabelProps:{sx:{color:"rgba(255,215,0,0.8)",fontSize:{xs:"0.9rem",sm:"1rem"}}}}),e.jsx(ft,{control:e.jsx(wo,{checked:H,onChange:$=>F($.target.checked),size:r?"small":"medium",sx:{color:"#FFD700","&.Mui-checked":{color:"#FFD700"},alignSelf:"flex-start",mt:.5}}),label:e.jsxs(a,{variant:"body2",sx:{color:"rgba(255,255,255,0.9)",fontSize:{xs:"0.85rem",sm:"0.9rem"},lineHeight:1.4},children:["I agree to the"," ",e.jsx(et,{href:"/terms",sx:{color:"#FFD700",fontWeight:600,textDecoration:"none","&:hover":{textDecoration:"underline"}},children:"Terms of Service"})," ","and"," ",e.jsx(et,{href:"/privacy",sx:{color:"#FFD700",fontWeight:600,textDecoration:"none","&:hover":{textDecoration:"underline"}},children:"Privacy Policy"})]}),sx:{alignItems:"flex-start",mt:1}})]})]})})});case 3:return e.jsx(ge.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},transition:{duration:.5},children:e.jsx(ye,{maxWidth:"sm",sx:{px:{xs:1,sm:2}},children:e.jsxs(te,{spacing:3,alignItems:"center",sx:{textAlign:"center"},children:[e.jsx(Ve,{sx:{fontSize:{xs:60,sm:80},color:"#FFD700"}}),e.jsxs(te,{spacing:2,alignItems:"center",children:[e.jsx(a,{variant:"h5",sx:{color:"#FFD700",fontWeight:700,fontSize:{xs:"1.25rem",sm:"1.5rem"}},children:"Ready to Join Kelmah!"}),e.jsx(a,{variant:"body1",sx:{color:"rgba(255,255,255,0.9)",fontSize:{xs:"0.95rem",sm:"1rem"},maxWidth:400},children:"Please review your information before creating your account"})]}),e.jsx(me,{sx:{background:"rgba(50,50,50,0.8)",borderRadius:{xs:2,sm:3},p:{xs:2,sm:3},width:"100%",maxWidth:500},children:e.jsxs(h,{container:!0,spacing:2,sx:{textAlign:"left"},children:[e.jsxs(h,{item:!0,xs:12,sm:6,children:[e.jsx(a,{variant:"subtitle2",sx:{color:"#FFD700",fontWeight:600,fontSize:{xs:"0.8rem",sm:"0.85rem"}},children:"Account Type:"}),e.jsx(a,{variant:"body1",sx:{color:"white",mb:2,fontSize:{xs:"0.9rem",sm:"1rem"}},children:c==="worker"?"🔨 Skilled Worker":"🏢 Service Hirer"})]}),e.jsxs(h,{item:!0,xs:12,sm:6,children:[e.jsx(a,{variant:"subtitle2",sx:{color:"#FFD700",fontWeight:600,fontSize:{xs:"0.8rem",sm:"0.85rem"}},children:"Name:"}),e.jsxs(a,{variant:"body1",sx:{color:"white",mb:2,fontSize:{xs:"0.9rem",sm:"1rem"}},children:[x," ",u]})]}),e.jsxs(h,{item:!0,xs:12,sm:6,children:[e.jsx(a,{variant:"subtitle2",sx:{color:"#FFD700",fontWeight:600,fontSize:{xs:"0.8rem",sm:"0.85rem"}},children:"Email:"}),e.jsx(a,{variant:"body1",sx:{color:"white",mb:2,fontSize:{xs:"0.9rem",sm:"1rem"},wordBreak:"break-word"},children:y})]}),e.jsxs(h,{item:!0,xs:12,sm:6,children:[e.jsx(a,{variant:"subtitle2",sx:{color:"#FFD700",fontWeight:600,fontSize:{xs:"0.8rem",sm:"0.85rem"}},children:"Phone:"}),e.jsx(a,{variant:"body1",sx:{color:"white",mb:2,fontSize:{xs:"0.9rem",sm:"1rem"}},children:j})]}),c==="hirer"&&e.jsxs(h,{item:!0,xs:12,children:[e.jsx(a,{variant:"subtitle2",sx:{color:"#FFD700",fontWeight:600,fontSize:{xs:"0.8rem",sm:"0.85rem"}},children:"Company:"}),e.jsx(a,{variant:"body1",sx:{color:"white",mb:2,fontSize:{xs:"0.9rem",sm:"1rem"}},children:k})]})]})}),e.jsx(o,{sx:{background:"linear-gradient(135deg, rgba(255,215,0,0.1) 0%, rgba(255,215,0,0.05) 100%)",borderRadius:{xs:1.5,sm:2},p:{xs:2,sm:2.5},border:"1px solid rgba(255,215,0,0.2)",width:"100%",maxWidth:500},children:e.jsx(a,{variant:"body2",sx:{color:"rgba(255,255,255,0.8)",fontSize:{xs:"0.85rem",sm:"0.9rem"},lineHeight:1.5},children:"By creating your account, you're joining Ghana's most trusted platform for skilled trades and professional services."})})]})})});default:return"Unknown step"}};return e.jsx(o,{sx:{minHeight:"100vh",maxHeight:"100vh",display:"flex",alignItems:"center",justifyContent:"center",px:{xs:.5,sm:2},py:{xs:.5,sm:2},overflow:"hidden"},children:e.jsx(ye,{maxWidth:"md",sx:{height:"100%",display:"flex",alignItems:"center",px:{xs:.5,sm:2}},children:e.jsx(ge.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.4},style:{width:"100%"},children:e.jsxs(se,{elevation:12,sx:{p:{xs:1.5,sm:2.5,md:3},width:"100%",maxWidth:{xs:"100%",sm:500,md:700},mx:"auto",borderRadius:{xs:2,sm:3},background:"linear-gradient(145deg, rgba(38, 38, 38, 0.95) 0%, rgba(28, 28, 28, 0.98) 100%)",boxShadow:{xs:"0 4px 20px 0 rgba(0,0,0,0.25)",sm:"0 6px 24px 0 rgba(0,0,0,0.3)"},border:{xs:"1px solid rgba(255,215,0,0.2)",sm:"2px solid rgba(255,215,0,0.3)"},backdropFilter:"blur(20px)",position:"relative",overflow:"hidden",maxHeight:{xs:"98vh",sm:"auto"},"&::before":{content:'""',position:"absolute",top:0,left:0,right:0,height:{xs:"2px",sm:"3px"},background:"linear-gradient(90deg, #FFD700 0%, #FFC000 50%, #FFD700 100%)"}},children:[e.jsxs(te,{spacing:{xs:1,sm:1.5},alignItems:"center",sx:{mb:{xs:1.5,sm:2}},children:[e.jsx(ge.div,{initial:{scale:.8,opacity:0},animate:{scale:1,opacity:1},transition:{duration:.4},children:e.jsx(o,{sx:{width:{xs:35,sm:45},height:{xs:35,sm:45},borderRadius:"50%",background:"linear-gradient(135deg, #FFD700 0%, #FFC000 100%)",display:"flex",alignItems:"center",justifyContent:"center",boxShadow:"0 4px 15px rgba(255,215,0,0.3)"},children:e.jsx(tt,{sx:{fontSize:{xs:18,sm:24},color:"#000"}})})}),e.jsxs(te,{spacing:.5,alignItems:"center",sx:{textAlign:"center"},children:[e.jsx(a,{variant:"h5",component:"h1",sx:{color:"#FFD700",fontWeight:800,fontSize:{xs:"1.2rem",sm:"1.4rem"},letterSpacing:.3,textShadow:"0 2px 10px rgba(255,215,0,0.3)",lineHeight:1.1},children:"Join Kelmah"}),e.jsx(a,{variant:"body2",sx:{color:"rgba(255,255,255,0.8)",fontWeight:500,fontSize:{xs:"0.75rem",sm:"0.8rem"}},children:"Connect with Ghana's skilled trade professionals"})]})]}),e.jsx(us,{activeStep:n,alternativeLabel:!r,orientation:"horizontal",sx:{mb:{xs:1.5,sm:2},"& .MuiStepLabel-label":{color:"rgba(255,255,255,0.7)",fontWeight:600,fontSize:{xs:"0.65rem",sm:"0.75rem"},"&.Mui-active":{color:"#FFD700",fontWeight:700},"&.Mui-completed":{color:"#FFD700"}},"& .MuiStepIcon-root":{color:"rgba(255,255,255,0.3)",fontSize:{xs:"1rem",sm:"1.2rem"},"&.Mui-active":{color:"#FFD700"},"&.Mui-completed":{color:"#FFD700"}},"& .MuiStepConnector-line":{borderColor:"rgba(255,215,0,0.3)"}},children:s.map(q=>e.jsx(xs,{children:e.jsx(hs,{children:r?"":q})},q))}),K&&e.jsx(ge.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},transition:{duration:.2},children:e.jsx(be,{severity:"error",sx:{mb:{xs:1,sm:1.5},borderRadius:1.5,backgroundColor:"rgba(244, 67, 54, 0.1)",border:"1px solid rgba(244, 67, 54, 0.3)",fontSize:{xs:"0.7rem",sm:"0.75rem"},py:{xs:.5,sm:.75},"& .MuiAlert-message":{fontWeight:500,color:"#ff6b6b"}},children:K})}),e.jsx(o,{sx:{minHeight:{xs:"45vh",sm:"300px"},maxHeight:{xs:"50vh",sm:"auto"},overflow:"auto",mb:{xs:1,sm:2}},children:N(n)}),e.jsxs(te,{direction:"row",justifyContent:"space-between",spacing:1.5,sx:{mt:{xs:1,sm:2}},children:[e.jsx(P,{disabled:n===0,onClick:G,variant:"outlined",size:"small",sx:{fontWeight:600,fontSize:{xs:"0.8rem",sm:"0.85rem"},px:{xs:2,sm:3},py:{xs:1,sm:1.2},minHeight:{xs:"36px",sm:"40px"},borderColor:n===0?"rgba(255,215,0,0.3)":"#FFD700",color:n===0?"rgba(255,215,0,0.5)":"#FFD700",borderWidth:1.5,borderRadius:1.5,"&:hover":{background:n===0?"transparent":"rgba(255,215,0,0.1)",borderColor:n===0?"rgba(255,215,0,0.3)":"#FFD700",borderWidth:1.5},"&:disabled":{borderColor:"rgba(255,215,0,0.2)",color:"rgba(255,215,0,0.4)"}},children:"Back"}),e.jsx(ge.div,{whileHover:{scale:r?1:1.02},whileTap:{scale:.98},children:e.jsx(P,{variant:"contained",onClick:M,disabled:O,size:"small",sx:{fontWeight:700,fontSize:{xs:"0.8rem",sm:"0.85rem"},px:{xs:2,sm:3},py:{xs:1,sm:1.2},minHeight:{xs:"36px",sm:"40px"},background:"linear-gradient(135deg, #FFD700 0%, #FFC000 100%)",color:"#000",borderRadius:1.5,boxShadow:"0 3px 12px rgba(255,215,0,0.2)",textTransform:"none","&:hover":{background:"linear-gradient(135deg, #FFC000 0%, #FFB000 100%)",boxShadow:"0 4px 16px rgba(255,215,0,0.3)"},"&:disabled":{background:"rgba(255,215,0,0.3)",color:"rgba(0,0,0,0.5)"}},children:O?e.jsxs(te,{direction:"row",alignItems:"center",spacing:.5,children:[e.jsx(Ae,{size:14,sx:{color:"#000"}}),e.jsx(a,{sx:{fontSize:"inherit",fontWeight:"inherit"},children:"Creating..."})]}):n===s.length-1?"Create Account":"Continue"})})]}),e.jsxs(te,{spacing:{xs:1.5,sm:2},alignItems:"center",sx:{mt:{xs:2,sm:2.5}},children:[e.jsxs(a,{variant:"body2",sx:{fontSize:{xs:"0.75rem",sm:"0.8rem"},color:"rgba(255,255,255,0.9)",textAlign:"center"},children:["Already have an account?"," ",e.jsx(et,{component:Fe,to:"/login",variant:"body2",sx:{color:"#FFD700",fontWeight:700,textDecoration:"none",fontSize:"inherit","&:hover":{color:"#FFC000",textDecoration:"underline"}},children:"Sign in"})]}),e.jsx(fe,{sx:{width:"100%",borderColor:"rgba(255,215,0,0.25)","& .MuiDivider-wrapper":{px:1}},children:e.jsx(a,{variant:"caption",sx:{color:"#FFD700",fontWeight:600,fontSize:{xs:"0.65rem",sm:"0.7rem"},letterSpacing:.3},children:"OR SIGN UP WITH"})}),e.jsxs(h,{container:!0,spacing:1,sx:{maxWidth:300},children:[e.jsx(h,{item:!0,xs:6,children:e.jsx(ge.div,{whileHover:{scale:r?1:1.02},whileTap:{scale:.98},children:e.jsx(P,{fullWidth:!0,variant:"outlined",startIcon:e.jsx(Co,{sx:{fontSize:{xs:14,sm:16}}}),size:"small",sx:{py:{xs:.8,sm:1},minHeight:{xs:"32px",sm:"36px"},fontWeight:600,fontSize:{xs:"0.7rem",sm:"0.75rem"},background:"rgba(255,255,255,0.95)",color:"#4285F4",borderColor:"#4285F4",borderWidth:1.5,borderRadius:1.5,textTransform:"none","&:hover":{background:"#4285F4",color:"#fff",borderColor:"#4285F4",borderWidth:1.5}},children:"Google"})})}),e.jsx(h,{item:!0,xs:6,children:e.jsx(ge.div,{whileHover:{scale:r?1:1.02},whileTap:{scale:.98},children:e.jsx(P,{fullWidth:!0,variant:"outlined",startIcon:e.jsx(ko,{sx:{fontSize:{xs:14,sm:16}}}),size:"small",sx:{py:{xs:.8,sm:1},minHeight:{xs:"32px",sm:"36px"},fontWeight:600,fontSize:{xs:"0.7rem",sm:"0.75rem"},background:"rgba(255,255,255,0.95)",color:"#0077B5",borderColor:"#0077B5",borderWidth:1.5,borderRadius:1.5,textTransform:"none","&:hover":{background:"#0077B5",color:"#fff",borderColor:"#0077B5",borderWidth:1.5}},children:"LinkedIn"})})})]})]})]})})})})},zh=()=>e.jsx(Xr,{children:e.jsx(Mh,{})}),Lh={search:async(t,r={})=>{try{const s=await pe.get(`${vt}/search`,{params:{q:t,...r}});return s.data.results||s.data}catch(s){throw console.error("Search error:",s),s}},searchWorkers:async(t={})=>{try{const r=await pe.get(`${vt}/search/workers`,{params:t});return r.data.results||r.data}catch(r){throw console.error("Worker search error:",r),r}},searchJobs:async t=>(await pe.get(`${vt}/jobs/search`,{params:t})).data,getSuggestions:async t=>{if(!t||t.trim()==="")return[];try{const r=await pe.get(`${vt}/search/suggestions`,{params:{q:t}});return r.data.suggestions||r.data}catch(r){return console.error("Suggestions error:",r),[]}},getPopularTerms:async(t=5)=>{try{const r=await pe.get(`${vt}/search/popular`,{params:{limit:t}});return r.data.terms||r.data}catch(r){return console.error("Popular terms error:",r),[]}},getCategories:async()=>(await pe.get(`${vt}/jobs/categories`)).data,getSkills:async()=>(await pe.get(`${vt}/jobs/skills`)).data,getSearchSuggestions:async t=>(await pe.get(`${vt}/jobs/suggestions`,{params:{keyword:t}})).data,getPopularSearches:async()=>(await pe.get(`${vt}/jobs/popular-searches`)).data};he(se)(({theme:t})=>({height:"100%",borderRadius:t.spacing(2),overflow:"hidden",backgroundColor:E(t.palette.primary.main,.7),backdropFilter:"blur(10px)",border:`2px solid ${t.palette.secondary.main}`,boxShadow:"inset 0 0 8px rgba(255, 215, 0, 0.5)",transition:"box-shadow 0.3s ease-in-out, border-color 0.3s ease-in-out","&:hover":{boxShadow:"0 0 12px rgba(255, 215, 0, 0.3), inset 0 0 8px rgba(255, 215, 0, 0.5)",borderColor:t.palette.secondary.light},display:"flex",flexDirection:"column"}));he(Be)(({theme:t,selected:r})=>({padding:t.spacing(2),backgroundColor:r?E(t.palette.secondary.main,.1):"transparent",borderLeft:r?`3px solid ${t.palette.secondary.main}`:"3px solid transparent",transition:"all 0.2s ease","&:hover":{backgroundColor:E(t.palette.secondary.main,.05)}}));he(mt)(({theme:t})=>({"& .MuiBadge-badge":{backgroundColor:t.palette.success.main,color:t.palette.success.main,boxShadow:`0 0 0 2px ${t.palette.background.paper}`,"&::after":{position:"absolute",top:0,left:0,width:"100%",height:"100%",borderRadius:"50%",animation:"ripple 1.2s infinite ease-in-out",border:"1px solid currentColor",content:'""'}},"@keyframes ripple":{"0%":{transform:"scale(.8)",opacity:1},"100%":{transform:"scale(2.4)",opacity:0}}}));he(Q)(({theme:t})=>({margin:t.spacing(2),"& .MuiOutlinedInput-root":{borderRadius:t.spacing(3),backgroundColor:E(t.palette.common.white,.05),"& fieldset":{borderColor:E(t.palette.secondary.main,.3)},"&:hover fieldset":{borderColor:E(t.palette.secondary.main,.5)},"&.Mui-focused fieldset":{borderColor:t.palette.secondary.main}},"& .MuiInputBase-input":{color:t.palette.common.white}}));he(P)(({theme:t})=>({color:t.palette.secondary.main,borderColor:E(t.palette.secondary.main,.5),"&:hover":{borderColor:t.palette.secondary.main,backgroundColor:E(t.palette.secondary.main,.1)}}));he(Ce)(({theme:t})=>({color:E(t.palette.common.white,.7),"&.Mui-selected":{color:t.palette.secondary.main}}));he(Be)(({theme:t,active:r})=>({borderRadius:t.shape.borderRadius,transition:"background-color 0.2s ease",cursor:"pointer",marginBottom:t.spacing(.5),backgroundColor:r?t.palette.action.selected:"transparent","&:hover":{backgroundColor:r?t.palette.action.selected:t.palette.action.hover}}));he(mt)(({theme:t})=>({"& .MuiBadge-badge":{right:-3,top:0,backgroundColor:t.palette.primary.main,color:t.palette.primary.contrastText,fontSize:10,minWidth:20,height:20,padding:"0 6px"}}));he("div")(({theme:t,status:r})=>{const s={online:t.palette.success.main,away:t.palette.warning.main,offline:t.palette.grey[400]};return{width:12,height:12,borderRadius:"50%",backgroundColor:s[r]||s.offline,border:`2px solid ${t.palette.background.paper}`,position:"absolute",bottom:0,right:0}});Y.func.isRequired,Y.string;he(o)(({theme:t})=>({marginTop:t.spacing(1),display:"flex",flexWrap:"wrap",gap:t.spacing(1)}));he(se)(({theme:t})=>({padding:t.spacing(1),display:"flex",alignItems:"center",gap:t.spacing(1),borderRadius:t.spacing(1),background:"rgba(255, 255, 255, 0.08)",border:"1px solid rgba(255, 255, 255, 0.12)","&:hover":{background:"rgba(255, 255, 255, 0.12)"},maxWidth:"100%",overflow:"hidden"}));he(o)(({theme:t})=>({width:150,height:100,borderRadius:t.spacing(1),overflow:"hidden",position:"relative",cursor:"pointer","&:hover":{"& .overlay":{opacity:1}}}));he(o)(({theme:t})=>({position:"absolute",top:0,left:0,right:0,bottom:0,background:"rgba(0, 0, 0, 0.5)",display:"flex",justifyContent:"center",alignItems:"center",opacity:0,transition:"opacity 0.2s ease-in-out"}));he(a)({overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",maxWidth:"150px"});he(se)(({theme:t,isOwn:r})=>({position:"relative",padding:t.spacing(1.5,2),borderRadius:t.spacing(2),maxWidth:"80%",width:"auto",wordBreak:"break-word",backgroundColor:r?E(t.palette.primary.main,.15):E(t.palette.background.paper,.7),color:t.palette.text.primary,borderBottomLeftRadius:r?void 0:4,borderBottomRightRadius:r?4:void 0,boxShadow:t.shadows[1],"&::after":{content:'""',position:"absolute",bottom:0,[r?"right":"left"]:-8,width:12,height:12,backgroundColor:r?E(t.palette.primary.main,.15):E(t.palette.background.paper,.7),clipPath:r?"polygon(0 0, 100% 100%, 100% 0)":"polygon(0 100%, 100% 0, 0 0)"}}));he(a)(({theme:t})=>({fontSize:"0.7rem",color:t.palette.text.secondary,marginTop:t.spacing(.5),textAlign:"right"}));he(o)(({theme:t})=>({display:"flex",alignItems:"center",justifyContent:"flex-end",marginTop:t.spacing(.5)}));Y.shape({id:Y.string.isRequired,content:Y.string.isRequired,type:Y.string,createdAt:Y.string.isRequired,isRead:Y.bool,sender:Y.object,attachments:Y.array,encrypted:Y.bool,replyTo:Y.object,conversation:Y.object}).isRequired,Y.bool.isRequired,Y.bool,Y.func,Y.func,Y.func,Y.func;const $h=Jt`
  0%, 60%, 100% {
    transform: translateY(0);
  }
  30% {
    transform: translateY(-4px);
  }
`;he(o)(({theme:t})=>({display:"flex",alignItems:"flex-end",marginBottom:t.spacing(1)}));he(o)(({theme:t})=>({padding:t.spacing(1,2),marginLeft:t.spacing(1),backgroundColor:t.palette.background.paper,borderRadius:t.spacing(2),borderBottomLeftRadius:4,boxShadow:t.shadows[1],display:"flex",alignItems:"center"}));he(o)(({theme:t,delay:r})=>({width:8,height:8,backgroundColor:t.palette.mode==="dark"?t.palette.grey[500]:t.palette.grey[700],borderRadius:"50%",margin:t.spacing(0,.25),animation:`${$h} 1.5s infinite ${r}s`}));Y.shape({id:Y.string,name:Y.string,avatar:Y.string});Y.string.isRequired;he(o)(({theme:t})=>({display:"flex",flexDirection:"column",height:"100%",overflow:"hidden"}));he(o)(({theme:t})=>({flexGrow:1,overflow:"auto",padding:t.spacing(2),display:"flex",flexDirection:"column"}));he(se)(({theme:t,variant:r})=>({padding:t.spacing(1.5),maxWidth:"70%",width:"fit-content",marginBottom:t.spacing(1),borderRadius:r==="sender"?t.spacing(2,0,2,2):t.spacing(0,2,2,2),backgroundColor:r==="sender"?t.palette.primary.light:t.palette.background.dark,color:r==="sender"?t.palette.primary.contrastText:"#fff",boxShadow:t.shadows[1],position:"relative"}));he(a)(({theme:t})=>({fontSize:"0.7rem",color:t.palette.text.secondary,marginTop:t.spacing(.5),textAlign:"right"}));he(o)(({theme:t})=>({textAlign:"center",margin:t.spacing(1,0),padding:t.spacing(.5,1),backgroundColor:t.palette.primary.main,borderRadius:t.spacing(1),color:t.palette.primary.contrastText,fontSize:"0.875rem"}));he(o)(({theme:t})=>({marginTop:t.spacing(1),display:"flex",flexWrap:"wrap",gap:t.spacing(1)}));he(se)(({theme:t})=>({display:"flex",alignItems:"center",padding:t.spacing(1),backgroundColor:t.palette.background.default,borderRadius:t.spacing(1),cursor:"pointer","&:hover":{backgroundColor:t.palette.action.hover}}));he(o)(({theme:t})=>({display:"flex",alignItems:"center",marginTop:t.spacing(1),padding:t.spacing(1),backgroundColor:t.palette.background.default,borderRadius:t.shape.borderRadius}));he("img")(({theme:t})=>({maxWidth:"100%",maxHeight:200,borderRadius:t.shape.borderRadius,marginTop:t.spacing(1)}));he(o)(({theme:t})=>({display:"flex",alignItems:"center",margin:t.spacing(2,0),color:t.palette.text.secondary,"&::before, &::after":{content:'""',flex:1,borderBottom:`1px solid ${t.palette.divider}`},"& > span":{padding:t.spacing(0,2),fontSize:"0.8rem"}}));he(o)(({theme:t})=>({display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",height:"100%",padding:t.spacing(3),textAlign:"center"}));he(se)(({theme:t})=>({display:"flex",alignItems:"center",padding:t.spacing(1,2),marginTop:t.spacing(2),boxShadow:t.shadows[2]}));he(Q)(({theme:t})=>({flex:1,"& .MuiOutlinedInput-root":{borderRadius:t.shape.borderRadius,backgroundColor:t.palette.background.paper,"& fieldset":{borderColor:"transparent"},"&:hover fieldset":{borderColor:t.palette.divider},"&.Mui-focused fieldset":{borderColor:t.palette.primary.main}}}));he(ne)(({theme:t})=>({marginRight:t.spacing(1)}));he(ne)(({theme:t})=>({marginRight:t.spacing(1)}));he(ne)(({theme:t})=>({backgroundColor:t.palette.primary.main,color:t.palette.primary.contrastText,"&:hover":{backgroundColor:t.palette.primary.dark},"&.Mui-disabled":{backgroundColor:t.palette.action.disabledBackground,color:t.palette.action.disabled},transition:t.transitions.create(["background-color","box-shadow"],{duration:t.transitions.duration.short})}));he("label")(({theme:t})=>({display:"flex",cursor:"pointer"}));he(o)(({theme:t})=>({display:"flex",flexWrap:"wrap",gap:t.spacing(1),marginTop:t.spacing(1)}));he(o)(({theme:t})=>({display:"flex",alignItems:"center",backgroundColor:t.palette.grey[100],borderRadius:t.shape.borderRadius,padding:t.spacing(.5,1),position:"relative"}));he(ne)(({theme:t})=>({padding:t.spacing(.25),position:"absolute",top:-8,right:-8,backgroundColor:t.palette.error.main,color:t.palette.error.contrastText,"&:hover":{backgroundColor:t.palette.error.dark},boxShadow:t.shadows[1],zIndex:1}));const Bh=()=>{const{user:t}=ut(),{search:r}=Zt(),s=Oe(),n=ve(),i=Te(n.breakpoints.down("md"));Te(n.breakpoints.down("lg"));const[c,d]=l.useState([]),[x,m]=l.useState(null),[u,v]=l.useState([]),[y,g]=l.useState(""),[j,b]=l.useState([]),[C,A]=l.useState(!0),[w,p]=l.useState(!1),[k,U]=l.useState(new Set),[W,R]=l.useState(0),[K,_]=l.useState("all"),[O,T]=l.useState(null),[H,F]=l.useState(!1);l.useState(!1);const[V,re]=l.useState(""),[z,J]=l.useState(!1),[f,M]=l.useState([]);l.useState(!1),l.useState(0);const[G,I]=l.useState({open:!1,message:"",severity:"info"});l.useState(!1);const L=l.useRef(null),S=l.useRef(null),B=l.useRef(null);l.useRef(null);const D=[{id:"1",type:"direct",participants:[{id:t==null?void 0:t.id,name:(t==null?void 0:t.firstName)||"You",avatar:t==null?void 0:t.profileImage},{id:"2",name:"John Carpenter",avatar:"/api/placeholder/40/40",status:"online"}],lastMessage:{id:"1",text:"Hey, I saw your carpentry work. Are you available for a kitchen renovation project?",sender:"2",timestamp:new Date(Date.now()-1e3*60*15),status:"delivered"},unreadCount:2,isArchived:!1,isPinned:!0,jobRelated:{id:"job-1",title:"Kitchen Renovation"}},{id:"2",type:"direct",participants:[{id:t==null?void 0:t.id,name:(t==null?void 0:t.firstName)||"You",avatar:t==null?void 0:t.profileImage},{id:"3",name:"Sarah Wilson",avatar:"/api/placeholder/40/40",status:"offline"}],lastMessage:{id:"2",text:"Thank you for the excellent plumbing work! I've left a 5-star review.",sender:"3",timestamp:new Date(Date.now()-1e3*60*60*2),status:"read"},unreadCount:0,isArchived:!1,isPinned:!1,jobRelated:{id:"job-2",title:"Bathroom Plumbing Repair"}},{id:"3",type:"direct",participants:[{id:t==null?void 0:t.id,name:(t==null?void 0:t.firstName)||"You",avatar:t==null?void 0:t.profileImage},{id:"4",name:"Mike Johnson",avatar:"/api/placeholder/40/40",status:"online"}],lastMessage:{id:"3",text:"When can you start the electrical work?",sender:t==null?void 0:t.id,timestamp:new Date(Date.now()-1e3*60*60*24),status:"read"},unreadCount:0,isArchived:!1,isPinned:!1,jobRelated:{id:"job-3",title:"House Rewiring Project"}}],N={1:[{id:"1",text:"Hi there! I saw your profile and I'm impressed with your carpentry skills.",sender:"2",timestamp:new Date(Date.now()-1e3*60*60),status:"read",type:"text"},{id:"2",text:"Thank you! I'd be happy to help with your project. What kind of work are you looking for?",sender:t==null?void 0:t.id,timestamp:new Date(Date.now()-1e3*60*45),status:"read",type:"text"},{id:"3",text:"I need a complete kitchen renovation. Custom cabinets, countertops, the works.",sender:"2",timestamp:new Date(Date.now()-1e3*60*30),status:"read",type:"text"},{id:"4",text:"Here are some photos of my previous kitchen projects for reference.",sender:t==null?void 0:t.id,timestamp:new Date(Date.now()-1e3*60*25),status:"read",type:"text",attachments:[{type:"image",url:"/api/placeholder/300/200",name:"kitchen1.jpg"},{type:"image",url:"/api/placeholder/300/200",name:"kitchen2.jpg"}]},{id:"5",text:"Wow, these look amazing! Exactly what I had in mind. What's your availability?",sender:"2",timestamp:new Date(Date.now()-1e3*60*15),status:"delivered",type:"text"}]};l.useEffect(()=>{t&&(async()=>{A(!0);try{p(!0),d(D);const Re=D.reduce((_e,it)=>_e+it.unreadCount,0);R(Re),A(!1)}catch(Re){console.error("Failed to initialize messaging:",Re),qe("Failed to connect to messaging service","error"),A(!1)}})();const le=new URLSearchParams(r).get("conversation");if(le){const Re=D.find(_e=>_e.id===le);Re&&(m(Re),v(N[le]||[]))}},[t,r]),l.useEffect(()=>{let X=c;if(y.trim()){const oe=y.toLowerCase();X=X.filter(le=>{var _e,it;const Re=le.participants.find(bt=>bt.id!==(t==null?void 0:t.id));return(Re==null?void 0:Re.name.toLowerCase().includes(oe))||((_e=le.lastMessage)==null?void 0:_e.text.toLowerCase().includes(oe))||((it=le.jobRelated)==null?void 0:it.title.toLowerCase().includes(oe))})}switch(K){case"unread":X=X.filter(oe=>oe.unreadCount>0);break;case"archived":X=X.filter(oe=>oe.isArchived);break;case"pinned":X=X.filter(oe=>oe.isPinned);break;case"job-related":X=X.filter(oe=>oe.jobRelated);break;default:X=X.filter(oe=>!oe.isArchived);break}X.sort((oe,le)=>{var Re,_e;return oe.isPinned&&!le.isPinned?-1:!oe.isPinned&&le.isPinned?1:new Date((Re=le.lastMessage)==null?void 0:Re.timestamp)-new Date((_e=oe.lastMessage)==null?void 0:_e.timestamp)}),b(X)},[c,y,K,t]),l.useEffect(()=>{var X;(X=L.current)==null||X.scrollIntoView({behavior:"smooth"})},[u]);const q=l.useCallback(X=>{m(X),v(N[X.id]||[]),X.unreadCount>0&&(d(oe=>oe.map(le=>le.id===X.id?{...le,unreadCount:0}:le)),R(oe=>oe-X.unreadCount)),s(`/messages?conversation=${X.id}`,{replace:!0})},[s]),$=l.useCallback(async()=>{if(!V.trim()&&f.length===0||!x)return;const X={id:Date.now().toString(),text:V.trim(),sender:t==null?void 0:t.id,timestamp:new Date,status:"sending",type:f.length>0?"mixed":"text",attachments:f.map(oe=>({type:oe.type.startsWith("image/")?"image":"file",url:URL.createObjectURL(oe),name:oe.name,size:oe.size}))};v(oe=>[...oe,X]),re(""),M([]),d(oe=>oe.map(le=>{var Re;return le.id===x.id?{...le,lastMessage:{...X,text:X.text||`Sent ${(Re=X.attachments)==null?void 0:Re.length} file(s)`}}:le}));try{await new Promise(oe=>setTimeout(oe,1e3)),v(oe=>oe.map(le=>le.id===X.id?{...le,status:"delivered"}:le))}catch(oe){console.error("Failed to send message:",oe),v(le=>le.map(Re=>Re.id===X.id?{...Re,status:"failed"}:Re)),qe("Failed to send message","error")}},[V,f,x,t]),de=l.useCallback(()=>{z||J(!0),B.current&&clearTimeout(B.current),B.current=setTimeout(()=>{J(!1)},2e3)},[z]),Pe=l.useCallback(X=>{const oe=Array.from(X.target.files),le=oe.filter(Re=>Re.size<=10*1024*1024);le.length!==oe.length&&qe("Some files were too large (max 10MB)","warning"),M(Re=>[...Re,...le])},[]),qe=(X,oe="info")=>{I({open:!0,message:X,severity:oe})},at=X=>X==null?void 0:X.participants.find(oe=>oe.id!==(t==null?void 0:t.id)),xt=X=>{const oe=new Date(X);return Ul(oe)?wt(oe,"HH:mm"):Hl(oe)?"Yesterday":wt(oe,"MMM dd")},kt=X=>{switch(X.status){case"sending":return e.jsx(Tt,{sx:{fontSize:16,color:"rgba(255,255,255,0.5)"}});case"delivered":return e.jsx(fo,{sx:{fontSize:16,color:"rgba(255,255,255,0.7)"}});case"read":return e.jsx(pd,{sx:{fontSize:16,color:"#4CAF50"}});case"failed":return e.jsx(vr,{sx:{fontSize:16,color:"#F44336"}});default:return null}},er=()=>e.jsxs(se,{sx:{height:"100%",background:"linear-gradient(135deg, rgba(20,20,20,0.98) 0%, rgba(30,30,30,0.98) 100%)",border:"1px solid rgba(255,215,0,0.2)",borderRadius:3,overflow:"hidden",display:"flex",flexDirection:"column"},children:[e.jsxs(o,{sx:{p:2,borderBottom:"1px solid rgba(255,215,0,0.1)",background:"linear-gradient(135deg, rgba(255,215,0,0.1) 0%, rgba(255,215,0,0.05) 100%)"},children:[e.jsxs(te,{direction:"row",alignItems:"center",justifyContent:"space-between",sx:{mb:2},children:[e.jsx(a,{variant:"h6",sx:{color:"#FFD700",fontWeight:700,fontSize:{xs:"1.1rem",sm:"1.25rem"}},children:"Messages"}),e.jsxs(te,{direction:"row",spacing:1,children:[e.jsx(mt,{badgeContent:W,color:"error",children:e.jsx(ne,{size:"small",onClick:()=>F(!0),sx:{color:"#FFD700",background:E("#FFD700",.1),"&:hover":{background:E("#FFD700",.2)}},children:e.jsx(Dt,{})})}),e.jsx(ne,{size:"small",onClick:X=>T(X.currentTarget),sx:{color:"rgba(255,255,255,0.7)","&:hover":{color:"#FFD700",background:E("#FFD700",.1)}},children:e.jsx(Ur,{})})]})]}),e.jsx(Q,{fullWidth:!0,size:"small",placeholder:"Search conversations...",value:y,onChange:X=>g(X.target.value),sx:{"& .MuiOutlinedInput-root":{backgroundColor:"rgba(255,255,255,0.05)",borderRadius:2,"& fieldset":{borderColor:"rgba(255,215,0,0.3)"},"&:hover fieldset":{borderColor:"rgba(255,215,0,0.5)"},"&.Mui-focused fieldset":{borderColor:"#FFD700"}},"& .MuiInputBase-input":{color:"#fff","&::placeholder":{color:"rgba(255,255,255,0.5)"}}},InputProps:{startAdornment:e.jsx(We,{position:"start",children:e.jsx(dt,{sx:{color:"rgba(255,255,255,0.5)"}})})}}),e.jsx(te,{direction:"row",spacing:1,sx:{mt:2,overflowX:"auto",pb:1},children:[{value:"all",label:"All"},{value:"unread",label:"Unread"},{value:"pinned",label:"Pinned"},{value:"job-related",label:"Jobs"},{value:"archived",label:"Archived"}].map(X=>e.jsx(ee,{label:X.label,clickable:!0,size:"small",onClick:()=>_(X.value),sx:{backgroundColor:K===X.value?E("#FFD700",.2):"rgba(255,255,255,0.05)",color:K===X.value?"#FFD700":"rgba(255,255,255,0.7)",border:`1px solid ${K===X.value?"rgba(255,215,0,0.5)":"rgba(255,255,255,0.1)"}`,"&:hover":{backgroundColor:E("#FFD700",.1),color:"#FFD700"},flexShrink:0}},X.value))})]}),e.jsxs(o,{sx:{flex:1,overflow:"auto"},children:[e.jsx(Bt,{children:j.map((X,oe)=>{var _e,it,bt,ht,Ut;const le=at(X),Re=(x==null?void 0:x.id)===X.id;return e.jsx(ge.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},transition:{duration:.2,delay:oe*.05},children:e.jsx(o,{onClick:()=>q(X),sx:{p:2,cursor:"pointer",borderBottom:"1px solid rgba(255,255,255,0.05)",background:Re?"linear-gradient(135deg, rgba(255,215,0,0.1) 0%, rgba(255,215,0,0.05) 100%)":"transparent",borderLeft:Re?"3px solid #FFD700":"3px solid transparent",transition:"all 0.2s ease","&:hover":{background:"rgba(255,255,255,0.03)"}},children:e.jsxs(te,{direction:"row",spacing:2,alignItems:"flex-start",children:[e.jsx(mt,{overlap:"circular",anchorOrigin:{vertical:"bottom",horizontal:"right"},badgeContent:(le==null?void 0:le.status)==="online"?e.jsx(o,{sx:{width:12,height:12,borderRadius:"50%",backgroundColor:"#4CAF50",border:"2px solid rgba(20,20,20,0.98)"}}):null,children:e.jsx(we,{src:le==null?void 0:le.avatar,sx:{width:48,height:48,bgcolor:E("#FFD700",.2),color:"#FFD700",fontSize:"1.2rem",fontWeight:600},children:(_e=le==null?void 0:le.name)==null?void 0:_e.charAt(0)})}),e.jsxs(o,{sx:{flex:1,minWidth:0},children:[e.jsxs(te,{direction:"row",alignItems:"center",justifyContent:"space-between",sx:{mb:.5},children:[e.jsxs(a,{variant:"subtitle1",sx:{color:"#fff",fontWeight:600,fontSize:"0.95rem",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",flex:1},children:[le==null?void 0:le.name,X.isPinned&&e.jsx(rt,{sx:{fontSize:16,color:"#FFD700",ml:.5}})]}),e.jsx(a,{variant:"caption",sx:{color:"rgba(255,255,255,0.5)",fontSize:"0.75rem",flexShrink:0,ml:1},children:xt((it=X.lastMessage)==null?void 0:it.timestamp)})]}),X.jobRelated&&e.jsx(ee,{label:X.jobRelated.title,size:"small",sx:{backgroundColor:E("#2196F3",.2),color:"#2196F3",fontSize:"0.7rem",height:"20px",mb:.5}}),e.jsxs(te,{direction:"row",alignItems:"center",justifyContent:"space-between",children:[e.jsxs(a,{variant:"body2",sx:{color:"rgba(255,255,255,0.7)",fontSize:"0.85rem",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",flex:1},children:[((bt=X.lastMessage)==null?void 0:bt.sender)===(t==null?void 0:t.id)&&"You: ",((ht=X.lastMessage)==null?void 0:ht.text)||"No messages yet"]}),e.jsxs(te,{direction:"row",alignItems:"center",spacing:.5,children:[((Ut=X.lastMessage)==null?void 0:Ut.sender)===(t==null?void 0:t.id)&&kt(X.lastMessage),X.unreadCount>0&&e.jsx(mt,{badgeContent:X.unreadCount,color:"error",sx:{"& .MuiBadge-badge":{fontSize:"0.7rem",minWidth:"18px",height:"18px"}}})]})]})]})]})})},X.id)})}),j.length===0&&e.jsxs(o,{sx:{p:4,textAlign:"center"},children:[e.jsx(a,{variant:"h6",sx:{color:"rgba(255,255,255,0.5)",mb:1},children:"No conversations found"}),e.jsx(a,{variant:"body2",sx:{color:"rgba(255,255,255,0.3)"},children:y?"Try adjusting your search":"Start a new conversation"})]})]})]}),hr=()=>{var oe;if(!x)return e.jsx(se,{sx:{height:"100%",display:"flex",alignItems:"center",justifyContent:"center",background:"linear-gradient(135deg, rgba(20,20,20,0.98) 0%, rgba(30,30,30,0.98) 100%)",border:"1px solid rgba(255,215,0,0.2)",borderRadius:3},children:e.jsxs(o,{textAlign:"center",children:[e.jsx(o,{sx:{width:120,height:120,borderRadius:"50%",background:"linear-gradient(135deg, rgba(255,215,0,0.1) 0%, rgba(255,215,0,0.05) 100%)",display:"flex",alignItems:"center",justifyContent:"center",mx:"auto",mb:3},children:e.jsx(ds,{sx:{fontSize:48,color:"rgba(255,215,0,0.5)"}})}),e.jsx(a,{variant:"h6",sx:{color:"#FFD700",fontWeight:600,mb:1},children:"Select a conversation"}),e.jsx(a,{variant:"body1",sx:{color:"rgba(255,255,255,0.5)",maxWidth:"300px",mx:"auto"},children:"Choose a conversation from the list to start chatting with clients and colleagues."})]})});const X=at(x);return e.jsxs(se,{sx:{height:"100%",display:"flex",flexDirection:"column",background:"linear-gradient(135deg, rgba(20,20,20,0.98) 0%, rgba(30,30,30,0.98) 100%)",border:"1px solid rgba(255,215,0,0.2)",borderRadius:3,overflow:"hidden"},children:[e.jsx(Vn,{position:"static",elevation:0,sx:{background:"linear-gradient(135deg, rgba(255,215,0,0.1) 0%, rgba(255,215,0,0.05) 100%)",borderBottom:"1px solid rgba(255,215,0,0.2)"},children:e.jsxs(Oa,{children:[i&&e.jsx(ne,{edge:"start",color:"inherit",onClick:()=>m(null),sx:{mr:2,color:"#FFD700"},children:e.jsx(Rr,{})}),e.jsx(mt,{overlap:"circular",anchorOrigin:{vertical:"bottom",horizontal:"right"},badgeContent:(X==null?void 0:X.status)==="online"?e.jsx(o,{sx:{width:12,height:12,borderRadius:"50%",backgroundColor:"#4CAF50",border:"2px solid rgba(20,20,20,0.98)"}}):null,children:e.jsx(we,{src:X==null?void 0:X.avatar,sx:{width:40,height:40,bgcolor:E("#FFD700",.2),color:"#FFD700",mr:2},children:(oe=X==null?void 0:X.name)==null?void 0:oe.charAt(0)})}),e.jsxs(o,{sx:{flex:1},children:[e.jsx(a,{variant:"h6",sx:{color:"#FFD700",fontWeight:600,fontSize:"1.1rem"},children:X==null?void 0:X.name}),x.jobRelated&&e.jsxs(a,{variant:"caption",sx:{color:"rgba(255,255,255,0.7)",fontSize:"0.75rem"},children:["Job: ",x.jobRelated.title]}),k.size>0&&e.jsx(a,{variant:"caption",sx:{color:"#4CAF50",fontSize:"0.75rem",fontStyle:"italic"},children:"typing..."})]}),e.jsxs(te,{direction:"row",spacing:1,children:[e.jsx(xe,{title:"Voice call",children:e.jsx(ne,{size:"small",sx:{color:"rgba(255,255,255,0.7)","&:hover":{color:"#FFD700",background:E("#FFD700",.1)}},children:e.jsx(Ao,{})})}),e.jsx(xe,{title:"Video call",children:e.jsx(ne,{size:"small",sx:{color:"rgba(255,255,255,0.7)","&:hover":{color:"#FFD700",background:E("#FFD700",.1)}},children:e.jsx(Bn,{})})}),e.jsx(xe,{title:"More options",children:e.jsx(ne,{size:"small",onClick:le=>T(le.currentTarget),sx:{color:"rgba(255,255,255,0.7)","&:hover":{color:"#FFD700",background:E("#FFD700",.1)}},children:e.jsx(Ur,{})})})]})]})}),e.jsxs(o,{sx:{flex:1,overflow:"auto",p:2,background:"linear-gradient(135deg, rgba(10,10,10,0.5) 0%, rgba(20,20,20,0.5) 100%)"},children:[e.jsx(Bt,{children:u.map((le,Re)=>{var bt;const _e=le.sender===(t==null?void 0:t.id),it=!_e&&(Re===0||u[Re-1].sender!==le.sender);return e.jsx(ge.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},transition:{duration:.3},children:e.jsxs(o,{sx:{display:"flex",justifyContent:_e?"flex-end":"flex-start",mb:2,alignItems:"flex-end"},children:[!_e&&it&&e.jsx(we,{src:X==null?void 0:X.avatar,sx:{width:32,height:32,mr:1,bgcolor:E("#FFD700",.2),color:"#FFD700",fontSize:"0.9rem"},children:(bt=X==null?void 0:X.name)==null?void 0:bt.charAt(0)}),!_e&&!it&&e.jsx(o,{sx:{width:32,mr:1}}),e.jsx(o,{sx:{maxWidth:{xs:"85%",sm:"70%"},minWidth:"120px"},children:e.jsxs(se,{sx:{p:1.5,borderRadius:3,background:_e?"linear-gradient(135deg, #FFD700 0%, #FFC000 100%)":"linear-gradient(135deg, rgba(60,60,60,0.8) 0%, rgba(80,80,80,0.8) 100%)",color:_e?"#000":"#fff",border:`1px solid ${_e?"rgba(255,215,0,0.3)":"rgba(255,255,255,0.1)"}`,position:"relative","&::before":_e?{content:'""',position:"absolute",bottom:0,right:-8,width:0,height:0,borderLeft:"8px solid #FFD700",borderTop:"8px solid transparent",borderBottom:"8px solid transparent"}:{content:'""',position:"absolute",bottom:0,left:-8,width:0,height:0,borderRight:"8px solid rgba(60,60,60,0.8)",borderTop:"8px solid transparent",borderBottom:"8px solid transparent"}},children:[le.text&&e.jsx(a,{variant:"body2",sx:{fontSize:"0.9rem",lineHeight:1.4,wordBreak:"break-word"},children:le.text}),le.attachments&&le.attachments.length>0&&e.jsx(o,{sx:{mt:le.text?1:0},children:le.attachments.map((ht,Ut)=>e.jsx(o,{sx:{mb:1},children:ht.type==="image"?e.jsx("img",{src:ht.url,alt:ht.name,style:{maxWidth:"100%",maxHeight:"200px",borderRadius:"8px",cursor:"pointer"}}):e.jsx(se,{sx:{p:1,background:"rgba(0,0,0,0.2)",borderRadius:2,cursor:"pointer"},children:e.jsxs(te,{direction:"row",alignItems:"center",spacing:1,children:[e.jsx($s,{}),e.jsxs(o,{sx:{flex:1,minWidth:0},children:[e.jsx(a,{variant:"caption",sx:{display:"block",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:ht.name}),e.jsxs(a,{variant:"caption",sx:{opacity:.7},children:[(ht.size/1024/1024).toFixed(2)," ","MB"]})]})]})})},Ut))}),e.jsxs(te,{direction:"row",alignItems:"center",justifyContent:"space-between",sx:{mt:.5},children:[e.jsx(a,{variant:"caption",sx:{opacity:.7,fontSize:"0.7rem"},children:wt(new Date(le.timestamp),"HH:mm")}),_e&&e.jsx(o,{sx:{ml:1},children:kt(le)})]})]})})]})},le.id)})}),e.jsx("div",{ref:L})]}),e.jsxs(o,{sx:{p:2,borderTop:"1px solid rgba(255,215,0,0.2)",background:"linear-gradient(135deg, rgba(30,30,30,0.95) 0%, rgba(40,40,40,0.95) 100%)"},children:[f.length>0&&e.jsx(o,{sx:{mb:2},children:e.jsx(te,{direction:"row",spacing:1,sx:{overflowX:"auto",pb:1},children:f.map((le,Re)=>e.jsxs(se,{sx:{p:1,borderRadius:2,background:"rgba(255,215,0,0.1)",border:"1px solid rgba(255,215,0,0.3)",minWidth:"120px",position:"relative"},children:[e.jsx(ne,{size:"small",onClick:()=>M(_e=>_e.filter((it,bt)=>bt!==Re)),sx:{position:"absolute",top:-8,right:-8,background:"#F44336",color:"#fff",width:20,height:20,"&:hover":{background:"#D32F2F"}},children:e.jsx(vr,{sx:{fontSize:12}})}),le.type.startsWith("image/")?e.jsx("img",{src:URL.createObjectURL(le),alt:le.name,style:{width:"100%",height:"60px",objectFit:"cover",borderRadius:"4px"}}):e.jsxs(te,{direction:"row",alignItems:"center",spacing:1,children:[e.jsx($s,{sx:{color:"#FFD700"}}),e.jsx(a,{variant:"caption",sx:{color:"#fff",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",flex:1},children:le.name})]})]},Re))})}),e.jsxs(te,{direction:"row",alignItems:"flex-end",spacing:1,children:[e.jsx("input",{ref:S,type:"file",multiple:!0,accept:"image/*,.pdf,.doc,.docx,.txt",style:{display:"none"},onChange:Pe}),e.jsx(xe,{title:"Attach files",children:e.jsx(ne,{onClick:()=>{var le;return(le=S.current)==null?void 0:le.click()},sx:{color:"rgba(255,255,255,0.7)","&:hover":{color:"#FFD700",background:E("#FFD700",.1)}},children:e.jsx(Po,{})})}),e.jsx(Q,{fullWidth:!0,multiline:!0,maxRows:4,placeholder:"Type a message...",value:V,onChange:le=>{re(le.target.value),de()},onKeyPress:le=>{le.key==="Enter"&&!le.shiftKey&&(le.preventDefault(),$())},sx:{"& .MuiOutlinedInput-root":{backgroundColor:"rgba(255,255,255,0.05)",borderRadius:3,"& fieldset":{borderColor:"rgba(255,215,0,0.3)"},"&:hover fieldset":{borderColor:"rgba(255,215,0,0.5)"},"&.Mui-focused fieldset":{borderColor:"#FFD700"}},"& .MuiInputBase-input":{color:"#fff","&::placeholder":{color:"rgba(255,255,255,0.5)"}}}}),e.jsx(xe,{title:"Send message",children:e.jsx(ne,{onClick:$,disabled:!V.trim()&&f.length===0,sx:{background:"linear-gradient(135deg, #FFD700 0%, #FFC000 100%)",color:"#000","&:hover":{background:"linear-gradient(135deg, #FFC000 0%, #FFB300 100%)"},"&:disabled":{background:"rgba(255,255,255,0.1)",color:"rgba(255,255,255,0.3)"}},children:e.jsx(ds,{})})})]})]})]})};return C?e.jsx(o,{sx:{height:"calc(100vh - 64px)",display:"flex",alignItems:"center",justifyContent:"center",background:"linear-gradient(135deg, #1a1a1a 0%, #2d2d2d 100%)"},children:e.jsx(Ae,{sx:{color:"#FFD700"}})}):e.jsxs(o,{sx:{height:"calc(100vh - 64px)",p:{xs:1,sm:2,md:3},background:"linear-gradient(135deg, #1a1a1a 0%, #2d2d2d 100%)"},children:[e.jsx(h,{container:!0,spacing:2,sx:{height:"100%"},children:i?x?e.jsx(h,{item:!0,xs:12,children:e.jsx(hr,{})}):e.jsx(h,{item:!0,xs:12,children:e.jsx(er,{})}):e.jsxs(e.Fragment,{children:[e.jsx(h,{item:!0,md:4,lg:3,children:e.jsx(er,{})}),e.jsx(h,{item:!0,md:8,lg:9,children:e.jsx(hr,{})})]})}),e.jsxs(Xt,{anchorEl:O,open:!!O,onClose:()=>T(null),children:[e.jsxs(Z,{onClick:()=>T(null),children:[e.jsx(Ze,{children:e.jsx(ud,{})}),e.jsx(Ie,{children:"Conversation Info"})]}),e.jsxs(Z,{onClick:()=>T(null),children:[e.jsx(Ze,{children:e.jsx(xd,{})}),e.jsx(Ie,{children:"Archive"})]}),e.jsxs(Z,{onClick:()=>T(null),children:[e.jsx(Ze,{children:e.jsx(hd,{})}),e.jsx(Ie,{children:"Block User"})]}),e.jsx(fe,{}),e.jsxs(Z,{onClick:()=>T(null),sx:{color:"#F44336"},children:[e.jsx(Ze,{children:e.jsx(Ct,{sx:{color:"#F44336"}})}),e.jsx(Ie,{children:"Delete Conversation"})]})]}),e.jsxs(Ee,{open:H,onClose:()=>F(!1),maxWidth:"sm",fullWidth:!0,PaperProps:{sx:{background:"linear-gradient(135deg, rgba(30,30,30,0.98) 0%, rgba(40,40,40,0.98) 100%)",border:"1px solid rgba(255,215,0,0.2)"}},children:[e.jsx(Me,{sx:{color:"#FFD700"},children:"Start New Conversation"}),e.jsx(ze,{children:e.jsx(Q,{autoFocus:!0,margin:"dense",label:"Search users...",fullWidth:!0,variant:"outlined",sx:{"& .MuiOutlinedInput-root":{backgroundColor:"rgba(255,255,255,0.05)","& fieldset":{borderColor:"rgba(255,215,0,0.3)"},"&:hover fieldset":{borderColor:"rgba(255,215,0,0.5)"},"&.Mui-focused fieldset":{borderColor:"#FFD700"}},"& .MuiInputBase-input":{color:"#fff"},"& .MuiInputLabel-root":{color:"rgba(255,255,255,0.7)"}}})}),e.jsxs(Le,{children:[e.jsx(P,{onClick:()=>F(!1),sx:{color:"rgba(255,255,255,0.7)"},children:"Cancel"}),e.jsx(P,{onClick:()=>F(!1),sx:{background:"linear-gradient(135deg, #FFD700 0%, #FFC000 100%)",color:"#000","&:hover":{background:"linear-gradient(135deg, #FFC000 0%, #FFB300 100%)"}},children:"Start Chat"})]})]}),e.jsx(Wt,{open:G.open,autoHideDuration:4e3,onClose:()=>I(X=>({...X,open:!1})),anchorOrigin:{vertical:"top",horizontal:"center"},children:e.jsx(be,{onClose:()=>I(X=>({...X,open:!1})),severity:G.severity,sx:{width:"100%"},children:G.message})})]})},_h=he(se)(({theme:t})=>({borderRadius:t.shape.borderRadius*2,boxShadow:"0 4px 20px rgba(0, 0, 0, 0.08)",overflow:"hidden"})),Nh=he(me)(({theme:t})=>({borderRadius:t.shape.borderRadius*1.5,boxShadow:"0 2px 12px rgba(0, 0, 0, 0.05)",marginBottom:t.spacing(3),border:"1px solid",borderColor:t.palette.divider})),Oh=he(me)(({theme:t})=>({borderRadius:t.shape.borderRadius,boxShadow:"none",border:"1px solid",borderColor:t.palette.divider,marginBottom:t.spacing(2)})),Gi=he(P)(({theme:t})=>({borderRadius:t.shape.borderRadius*4,padding:t.spacing(1.2,4),fontWeight:600}));function Jh(){var J;const{id:t}=Cr(),r=Oe();ut();const s=ve(),[n,i]=l.useState(0),c=["Job Overview","Your Proposal","Milestones","Review & Submit"],[d,x]=l.useState(null),[m,u]=l.useState(!0),[v,y]=l.useState(!1),[g,j]=l.useState(null),[b,C]=l.useState(!1),[A,w]=l.useState({coverLetter:"",proposedBudget:"",currency:"GHS",estimatedDuration:"",attachments:[],milestoneProposal:[]}),[p,k]=l.useState({title:"",description:"",amount:"",estimatedDays:""}),[U,W]=l.useState({});l.useEffect(()=>{(async()=>{try{u(!0);const M=await Qt.getJobById(t);x(M.data),w(G=>({...G,proposedBudget:M.data.budget,currency:M.data.currency||"GHS"})),j(null)}catch(M){j(M.message||"Failed to fetch job details")}finally{u(!1)}})()},[t]);const R=f=>{const{name:M,value:G}=f.target;w(I=>({...I,[M]:G})),U[M]&&W(I=>({...I,[M]:null}))},K=f=>{const{name:M,value:G}=f.target;k(I=>({...I,[M]:G}))},_=()=>{const f={};if(p.title||(f.milestoneTitle="Title is required"),p.amount||(f.milestoneAmount="Amount is required"),Object.keys(f).length>0){W({...U,...f});return}w(M=>({...M,milestoneProposal:[...M.milestoneProposal,{...p}]})),k({title:"",description:"",amount:"",estimatedDays:""})},O=f=>{w(M=>({...M,milestoneProposal:M.milestoneProposal.filter((G,I)=>I!==f)}))},T=f=>{const G=Array.from(f.target.files).map(I=>({file:I,name:I.name,size:I.size,type:I.type}));w(I=>({...I,attachments:[...I.attachments,...G]}))},H=f=>{w(M=>({...M,attachments:M.attachments.filter((G,I)=>I!==f)}))},F=()=>{const f=re(n);if(Object.keys(f).length>0){W(f);return}i(M=>M+1)},V=()=>{i(f=>f-1)},re=f=>{const M={};switch(f){case 0:break;case 1:A.coverLetter||(M.coverLetter="Cover letter is required"),A.proposedBudget||(M.proposedBudget="Proposed budget is required");break;case 2:A.milestoneProposal.length>0&&A.milestoneProposal.reduce((I,L)=>I+parseFloat(L.amount||0),0)!==parseFloat(A.proposedBudget)&&(M.milestones=`Milestone amounts should total to the proposed budget (${A.proposedBudget} ${A.currency})`);break}return M},z=async()=>{let f={};for(let M=0;M<c.length;M++){const G=re(M);f={...f,...G}}if(Object.keys(f).length>0){W(f);for(let M=0;M<c.length;M++)if(Object.keys(re(M)).length>0){i(M);break}return}try{let M=[];if(A.attachments.length>0){y(!0);try{const I=new FormData;A.attachments.forEach((S,B)=>{I.append(`file${B}`,S.file)}),M=(await pe.post("/api/uploads",I,{headers:{"Content-Type":"multipart/form-data"}})).data.files.map((S,B)=>({fileName:A.attachments[B].name,fileSize:A.attachments[B].size,fileType:A.attachments[B].type,fileUrl:S.url,fileId:S.id}))}catch(I){j("Failed to upload attachments. "+(I.message||"")),y(!1);return}}const G={...A,attachments:M};await Qt.applyForJob(t,G),C(!0),setTimeout(()=>{r("/dashboard/applications")},2e3)}catch(M){j(M.message||"Failed to submit application")}finally{y(!1)}};return m?e.jsx(o,{sx:{display:"flex",justifyContent:"center",py:4},children:e.jsx(Ae,{color:"primary"})}):g&&!d?e.jsxs(o,{sx:{py:3},children:[e.jsx(be,{severity:"error",sx:{mb:2},children:g}),e.jsx(P,{startIcon:e.jsx(Rr,{}),onClick:()=>r("/jobs"),variant:"outlined",children:"Back to Jobs"})]}):b?e.jsxs(o,{sx:{py:3},children:[e.jsx(be,{severity:"success",sx:{mb:2},children:"Your application has been submitted successfully!"}),e.jsx(a,{variant:"body1",sx:{mb:2},children:"The job poster will review your application and get back to you."}),e.jsx(P,{variant:"contained",color:"primary",onClick:()=>r("/dashboard/applications"),children:"View My Applications"})]}):e.jsxs(o,{sx:{py:3},children:[e.jsx(P,{startIcon:e.jsx(Rr,{}),onClick:()=>r(`/jobs/${t}`),sx:{mb:3},children:"Back to Job Details"}),e.jsx(a,{variant:"h4",component:"h1",gutterBottom:!0,fontWeight:700,color:"primary",children:"Apply for Job"}),e.jsxs(_h,{elevation:3,sx:{mt:3,overflow:"hidden"},children:[e.jsx(o,{sx:{p:3,pb:2,bgcolor:s.palette.background.default,borderBottom:"1px solid",borderColor:s.palette.divider},children:e.jsx(us,{activeStep:n,alternativeLabel:!0,children:c.map(f=>e.jsx(xs,{children:e.jsx(hs,{children:f})},f))})}),e.jsxs(o,{sx:{p:3},children:[n===0&&e.jsxs(o,{children:[e.jsx(a,{variant:"h6",gutterBottom:!0,children:"Job Overview"}),e.jsx(Nh,{children:e.jsxs(ce,{children:[e.jsx(a,{variant:"h5",sx:{mb:2,fontWeight:600},children:d==null?void 0:d.title}),e.jsxs(h,{container:!0,spacing:2,sx:{mb:2},children:[e.jsxs(h,{item:!0,xs:12,sm:6,children:[e.jsxs(o,{sx:{display:"flex",alignItems:"center",mb:1},children:[e.jsx(Ja,{color:"primary",sx:{mr:1}}),e.jsxs(a,{variant:"body2",children:[e.jsx("strong",{children:"Posted by:"})," ",(d==null?void 0:d.hirerName)||"Anonymous Client"]})]}),e.jsxs(o,{sx:{display:"flex",alignItems:"center",mb:1},children:[e.jsx(_s,{color:"primary",sx:{mr:1}}),e.jsxs(a,{variant:"body2",children:[e.jsx("strong",{children:"Category:"})," ",d==null?void 0:d.category]})]})]}),e.jsxs(h,{item:!0,xs:12,sm:6,children:[e.jsxs(o,{sx:{display:"flex",alignItems:"center",mb:1},children:[e.jsx(md,{color:"primary",sx:{mr:1}}),e.jsxs(a,{variant:"body2",children:[e.jsx("strong",{children:"Budget:"})," ",d==null?void 0:d.budget," ",d==null?void 0:d.currency]})]}),e.jsxs(o,{sx:{display:"flex",alignItems:"center",mb:1},children:[e.jsx(Tt,{color:"primary",sx:{mr:1}}),e.jsxs(a,{variant:"body2",children:[e.jsx("strong",{children:"Duration:"})," ",(d==null?void 0:d.duration)||"Not specified"," days"]})]})]})]}),e.jsx(a,{variant:"subtitle1",sx:{fontWeight:600,mb:1},children:"Job Description"}),e.jsx(a,{variant:"body2",sx:{mb:2,whiteSpace:"pre-line"},children:d==null?void 0:d.description}),((J=d==null?void 0:d.skills)==null?void 0:J.length)>0&&e.jsxs(o,{sx:{mt:2},children:[e.jsx(a,{variant:"subtitle1",sx:{fontWeight:600,mb:1},children:"Skills Required"}),e.jsx(o,{sx:{display:"flex",flexWrap:"wrap",gap:1},children:d.skills.map((f,M)=>e.jsx(ee,{label:f,size:"small",color:"primary",variant:"outlined"},M))})]})]})})]}),n===1&&e.jsxs(o,{children:[e.jsx(a,{variant:"h6",gutterBottom:!0,children:"Your Proposal"}),e.jsxs(h,{container:!0,spacing:3,children:[e.jsx(h,{item:!0,xs:12,children:e.jsx(Q,{name:"coverLetter",label:"Cover Letter",fullWidth:!0,multiline:!0,rows:6,value:A.coverLetter,onChange:R,error:!!U.coverLetter,helperText:U.coverLetter||"Introduce yourself and explain why you are the right person for this job",variant:"outlined"})}),e.jsx(h,{item:!0,xs:12,sm:6,children:e.jsx(Q,{name:"proposedBudget",label:"Your Proposed Budget",fullWidth:!0,type:"number",value:A.proposedBudget,onChange:R,error:!!U.proposedBudget,helperText:U.proposedBudget,InputProps:{startAdornment:e.jsx(We,{position:"start",children:A.currency})},variant:"outlined"})}),e.jsx(h,{item:!0,xs:12,sm:6,children:e.jsx(Q,{name:"estimatedDuration",label:"Estimated Duration (days)",fullWidth:!0,type:"number",value:A.estimatedDuration,onChange:R,error:!!U.estimatedDuration,helperText:U.estimatedDuration,variant:"outlined"})}),e.jsxs(h,{item:!0,xs:12,children:[e.jsx(a,{variant:"subtitle1",sx:{mb:1},children:"Attachments"}),e.jsxs(o,{sx:{display:"flex",flexDirection:"column",gap:2},children:[e.jsxs(P,{variant:"outlined",component:"label",startIcon:e.jsx(Po,{}),sx:{width:"fit-content"},children:["Add File",e.jsx("input",{type:"file",multiple:!0,hidden:!0,onChange:T})]}),A.attachments.length>0&&e.jsx(Ke,{children:A.attachments.map((f,M)=>e.jsx(Be,{secondaryAction:e.jsx(ne,{edge:"end",onClick:()=>H(M),children:e.jsx(Ct,{})}),children:e.jsx(Ie,{primary:f.name,secondary:`${(f.size/1024).toFixed(1)} KB`})},M))})]})]})]})]}),n===2&&e.jsxs(o,{children:[e.jsx(a,{variant:"h6",gutterBottom:!0,children:"Proposed Milestones"}),e.jsx(a,{variant:"body2",paragraph:!0,color:"text.secondary",children:"Break down the project into milestones to structure the work and payments."}),e.jsxs(h,{container:!0,spacing:2,sx:{mb:3},children:[e.jsx(h,{item:!0,xs:12,sm:6,children:e.jsx(Q,{name:"title",label:"Milestone Title",fullWidth:!0,value:p.title,onChange:K,error:!!U.milestoneTitle,helperText:U.milestoneTitle,variant:"outlined"})}),e.jsx(h,{item:!0,xs:12,sm:6,children:e.jsx(Q,{name:"amount",label:"Amount",fullWidth:!0,type:"number",value:p.amount,onChange:K,error:!!U.milestoneAmount,helperText:U.milestoneAmount,InputProps:{startAdornment:e.jsx(We,{position:"start",children:A.currency})},variant:"outlined"})}),e.jsx(h,{item:!0,xs:12,sm:6,children:e.jsx(Q,{name:"estimatedDays",label:"Estimated Days",fullWidth:!0,type:"number",value:p.estimatedDays,onChange:K,variant:"outlined"})}),e.jsx(h,{item:!0,xs:12,sm:6,children:e.jsx(o,{sx:{display:"flex",height:"100%",alignItems:"center"},children:e.jsx(P,{variant:"contained",startIcon:e.jsx(Dt,{}),onClick:_,sx:{mt:{xs:0,sm:1}},children:"Add Milestone"})})}),e.jsx(h,{item:!0,xs:12,children:e.jsx(Q,{name:"description",label:"Milestone Description",fullWidth:!0,multiline:!0,rows:3,value:p.description,onChange:K,variant:"outlined"})})]}),A.milestoneProposal.length>0?e.jsxs(o,{children:[e.jsx(a,{variant:"subtitle1",sx:{mb:2},children:"Your Milestones"}),U.milestones&&e.jsx(be,{severity:"error",sx:{mb:2},children:U.milestones}),A.milestoneProposal.map((f,M)=>e.jsx(Oh,{sx:{mb:2},children:e.jsxs(ce,{sx:{py:2},children:[e.jsxs(o,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsxs(a,{variant:"subtitle1",fontWeight:600,children:[M+1,". ",f.title]}),e.jsxs(o,{children:[e.jsx(ee,{label:`${f.amount} ${A.currency}`,color:"primary",size:"small",sx:{mr:1}}),f.estimatedDays&&e.jsx(ee,{label:`${f.estimatedDays} days`,color:"secondary",variant:"outlined",size:"small"}),e.jsx(ne,{size:"small",onClick:()=>O(M),sx:{ml:1},children:e.jsx(Ct,{fontSize:"small"})})]})]}),f.description&&e.jsx(a,{variant:"body2",color:"text.secondary",sx:{mt:1},children:f.description})]})},M)),e.jsxs(o,{sx:{display:"flex",justifyContent:"space-between",mt:3},children:[e.jsx(a,{variant:"subtitle1",children:"Total:"}),e.jsxs(a,{variant:"subtitle1",fontWeight:600,color:"primary",children:[A.milestoneProposal.reduce((f,M)=>f+parseFloat(M.amount||0),0)," ",A.currency]})]})]}):e.jsx(be,{severity:"info",sx:{mt:2},children:"Breaking your work into milestones can increase your chances of getting hired."})]}),n===3&&e.jsxs(o,{children:[e.jsx(a,{variant:"h6",gutterBottom:!0,children:"Review Your Application"}),e.jsxs(ks,{defaultExpanded:!0,children:[e.jsx(Ss,{expandIcon:e.jsx(nr,{}),children:e.jsx(a,{variant:"subtitle1",fontWeight:600,children:"Cover Letter"})}),e.jsx(As,{children:e.jsx(a,{variant:"body2",whiteSpace:"pre-line",children:A.coverLetter})})]}),e.jsxs(ks,{children:[e.jsx(Ss,{expandIcon:e.jsx(nr,{}),children:e.jsx(a,{variant:"subtitle1",fontWeight:600,children:"Budget & Duration"})}),e.jsx(As,{children:e.jsxs(h,{container:!0,spacing:2,children:[e.jsx(h,{item:!0,xs:12,sm:6,children:e.jsxs(a,{variant:"body2",children:[e.jsx("strong",{children:"Proposed Budget:"})," ",A.proposedBudget," ",A.currency]})}),e.jsx(h,{item:!0,xs:12,sm:6,children:e.jsxs(a,{variant:"body2",children:[e.jsx("strong",{children:"Estimated Duration:"})," ",A.estimatedDuration||"Not specified"," ","days"]})})]})})]}),e.jsxs(ks,{children:[e.jsx(Ss,{expandIcon:e.jsx(nr,{}),children:e.jsxs(a,{variant:"subtitle1",fontWeight:600,children:["Milestones (",A.milestoneProposal.length,")"]})}),e.jsx(As,{children:A.milestoneProposal.length>0?e.jsx(Ke,{children:A.milestoneProposal.map((f,M)=>e.jsx(Be,{divider:M<A.milestoneProposal.length-1,children:e.jsx(Ie,{primary:`${M+1}. ${f.title} (${f.amount} ${A.currency})`,secondary:f.description})},M))}):e.jsx(a,{variant:"body2",color:"text.secondary",children:"No milestones proposed."})})]}),e.jsxs(ks,{children:[e.jsx(Ss,{expandIcon:e.jsx(nr,{}),children:e.jsxs(a,{variant:"subtitle1",fontWeight:600,children:["Attachments (",A.attachments.length,")"]})}),e.jsx(As,{children:A.attachments.length>0?e.jsx(Ke,{children:A.attachments.map((f,M)=>e.jsx(Be,{divider:M<A.attachments.length-1,children:e.jsx(Ie,{primary:f.name,secondary:`${(f.size/1024).toFixed(1)} KB`})},M))}):e.jsx(a,{variant:"body2",color:"text.secondary",children:"No files attached."})})]}),g&&e.jsx(be,{severity:"error",sx:{mt:3},children:g})]}),e.jsxs(o,{sx:{display:"flex",justifyContent:"space-between",mt:4},children:[e.jsx(P,{variant:"outlined",onClick:V,disabled:n===0,sx:{borderRadius:s.shape.borderRadius*4},children:"Back"}),e.jsx(o,{children:n===c.length-1?e.jsx(Gi,{variant:"contained",color:"primary",onClick:z,disabled:v,endIcon:v?e.jsx(Ae,{size:20,color:"inherit"}):e.jsx(ds,{}),children:v?"Submitting...":"Submit Application"}):e.jsx(Gi,{variant:"contained",color:"primary",onClick:F,children:"Next"})})]})]})]})]})}const In=he(se)(({theme:t})=>({padding:t.spacing(4),borderRadius:t.spacing(2),background:"rgba(26, 26, 26, 0.8)",backdropFilter:"blur(10px)",border:"1px solid rgba(255, 215, 0, 0.1)"})),Uh=he(P)(({theme:t})=>({borderRadius:t.spacing(1),padding:t.spacing(1.5,3),fontWeight:"bold",transition:"all 0.3s ease","&:hover":{transform:"translateY(-2px)",boxShadow:"0 4px 8px rgba(0, 0, 0, 0.2)"}})),Hh=he(ee)(({theme:t})=>({margin:t.spacing(.5),background:"rgba(255, 215, 0, 0.2)",color:"#FFD700",borderColor:"rgba(255, 215, 0, 0.5)","&:hover":{background:"rgba(255, 215, 0, 0.3)"}})),Gh=he(o)(({theme:t})=>({display:"flex",alignItems:"center",padding:t.spacing(1.5),borderRadius:t.spacing(1),background:"rgba(255, 255, 255, 0.05)",cursor:"pointer",transition:"all 0.2s ease","&:hover":{background:"rgba(255, 255, 255, 0.1)"}})),Vh=()=>{const{search:t}=Zt(),{id:r}=Cr(),s=Oe(),n=ot(),i=je(hu),c=je(zo),d=je(Lo),[x,m]=l.useState(!1),[u,v]=l.useState(!1);l.useEffect(()=>{n(ya(r))},[n,r]),l.useEffect(()=>{new URLSearchParams(t).get("apply")==="true"&&v(!0)},[t]);const y=()=>{v(!0)},g=()=>{v(!1)},j=()=>{s(`/messages?participantId=${i.hirer.id}`)},b=()=>{m(!x)},C=()=>{navigator.share?navigator.share({title:i.title,text:`Check out this job: ${i.title}`,url:window.location.href}):alert("Share feature not supported in your browser")};return c?e.jsx(ye,{maxWidth:"lg",children:e.jsxs(o,{sx:{mt:4},children:[e.jsx(ie,{variant:"text",width:"30%",height:40}),e.jsx(ie,{variant:"rectangular",height:60,width:"20%",sx:{my:2}}),e.jsxs(h,{container:!0,spacing:4,children:[e.jsx(h,{item:!0,xs:12,md:8,children:e.jsx(ie,{variant:"rectangular",height:300})}),e.jsxs(h,{item:!0,xs:12,md:4,children:[e.jsx(ie,{variant:"rectangular",height:200}),e.jsx(ie,{variant:"text",width:"80%",sx:{mt:2}})]})]})]})}):d?e.jsx(o,{sx:{minHeight:"80vh",display:"flex",justifyContent:"center",alignItems:"center"},children:e.jsx(be,{severity:"error",children:d})}):i?e.jsx(o,{sx:{minHeight:"100vh",py:8,px:2,background:"#1a1a1a"},children:e.jsxs(ye,{maxWidth:"lg",children:[e.jsx(ge.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{duration:.3},children:e.jsx(P,{startIcon:e.jsx(Rr,{}),onClick:()=>s("/jobs"),sx:{mb:3,color:"#FFD700","&:hover":{background:"rgba(255, 215, 0, 0.1)"}},children:"Back to Jobs"})}),e.jsxs(h,{container:!0,spacing:4,children:[e.jsx(h,{item:!0,xs:12,md:8,children:e.jsx(ge.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},children:e.jsxs(In,{elevation:3,children:[e.jsxs(o,{sx:{mb:3},children:[e.jsx(o,{sx:{width:"100%",height:300,mb:3,borderRadius:2,overflow:"hidden"},children:e.jsx("iframe",{title:"Job Location",src:`https://maps.google.com/maps?q=${encodeURIComponent(i.location)}&output=embed`,width:"100%",height:"100%",style:{border:0},allowFullScreen:!0,loading:"lazy"})}),e.jsx(a,{variant:"h3",component:"h1",sx:A=>({mb:2,background:`linear-gradient(45deg, ${A.palette.secondary.main}, ${A.palette.secondary.dark})`,WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent",fontWeight:"bold"}),children:i.title}),e.jsxs(o,{sx:{display:"flex",flexWrap:"wrap",gap:2,mb:2},children:[e.jsxs(o,{sx:{display:"flex",alignItems:"center"},children:[e.jsx(nt,{sx:{color:"#FFD700",mr:.5}}),e.jsx(a,{variant:"body1",sx:{color:"#fff"},children:i.location})]}),e.jsxs(o,{sx:{display:"flex",alignItems:"center"},children:[e.jsx(gd,{sx:{color:"#FFD700",mr:.5}}),e.jsx(a,{variant:"body1",sx:{color:"#fff"},children:i.category})]}),e.jsxs(o,{sx:{display:"flex",alignItems:"center"},children:[e.jsx(ct,{sx:{color:"#FFD700",mr:.5}}),e.jsxs(a,{variant:"body1",sx:{color:"#fff"},children:["$",i.minRate," - $",i.maxRate," /"," ",i.rateType==="hourly"?"hr":"fixed"]})]}),e.jsxs(o,{sx:{display:"flex",alignItems:"center"},children:[e.jsx(Tt,{sx:{color:"#FFD700",mr:.5}}),e.jsxs(a,{variant:"body1",sx:{color:"#fff"},children:["Posted: ",i.postedDate]})]}),e.jsxs(o,{sx:{display:"flex",alignItems:"center"},children:[e.jsx(dr,{sx:{color:"#FFD700",mr:.5}}),e.jsxs(a,{variant:"body1",sx:{color:"#fff"},children:[i.applicants," Applicants"]})]})]}),e.jsx(ee,{label:i.status,sx:{background:i.status==="Open"?"rgba(76, 175, 80, 0.2)":"rgba(255, 152, 0, 0.2)",color:i.status==="Open"?"#4caf50":"#ff9800",fontWeight:"bold"}})]}),e.jsx(fe,{sx:{borderColor:"rgba(255, 255, 255, 0.1)",my:3}}),e.jsxs(o,{sx:{mb:4},children:[e.jsx(a,{variant:"h5",sx:{color:"#FFD700",mb:2,fontWeight:"medium"},children:"Description"}),e.jsx(a,{variant:"body1",sx:{color:"#fff",whiteSpace:"pre-line",mb:3},children:i.description}),e.jsxs(o,{sx:{mt:3},children:[e.jsx(a,{variant:"h6",sx:{color:"#FFD700",mb:1},children:"Required Skills"}),e.jsx(o,{sx:{display:"flex",flexWrap:"wrap",gap:1},children:(i.skills||[]).map((A,w)=>e.jsx(Hh,{label:A},w))})]})]}),e.jsx(fe,{sx:{borderColor:"rgba(255, 255, 255, 0.1)",my:3}}),i.images&&i.images.length>0&&e.jsxs(o,{sx:{mb:4},children:[e.jsx(a,{variant:"h5",sx:{color:"#FFD700",mb:2,fontWeight:"medium"},children:"Project Images"}),e.jsx(h,{container:!0,spacing:2,children:i.images.map((A,w)=>e.jsx(h,{item:!0,xs:12,sm:6,md:4,children:e.jsx(o,{component:"img",src:A,alt:`Job image ${w+1}`,sx:{width:"100%",height:200,objectFit:"cover",borderRadius:2,transition:"transform 0.3s ease",cursor:"pointer","&:hover":{transform:"scale(1.03)"}}})},w))})]}),e.jsx(fe,{sx:{borderColor:"rgba(255, 255, 255, 0.1)",my:3}}),e.jsxs(o,{children:[e.jsx(P,{variant:"outlined",startIcon:e.jsx(Ot,{}),sx:{mr:2,mt:2},onClick:j,children:"Message Hirer"}),e.jsx(a,{variant:"h5",sx:{color:"#FFD700",mb:2,fontWeight:"medium"},children:"Deadline"}),e.jsxs(o,{sx:{display:"flex",alignItems:"center"},children:[e.jsx(Tt,{sx:{color:"#FFD700",mr:1}}),e.jsxs(a,{variant:"body1",sx:{color:"#fff"},children:["Complete by: ",i.deadline]})]})]})]})})}),e.jsx(h,{item:!0,xs:12,md:4,children:e.jsxs(ge.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.2},children:[e.jsxs(In,{elevation:3,sx:{mb:3},children:[e.jsx(a,{variant:"h5",sx:{color:"#FFD700",mb:3,fontWeight:"medium"},children:"Apply Now"}),e.jsx(Uh,{variant:"contained",fullWidth:!0,size:"large",onClick:y,startIcon:e.jsx(bd,{}),sx:{mb:2,background:"linear-gradient(45deg, #FFD700, #FFA500)",color:"#000"},children:"Apply for this Job"}),e.jsxs(o,{sx:{display:"flex",gap:1,mt:2},children:[e.jsx(ne,{onClick:b,sx:{color:x?"#FFD700":"rgba(255, 255, 255, 0.7)","&:hover":{background:"rgba(255, 215, 0, 0.1)"}},children:x?e.jsx(Kt,{}):e.jsx(or,{})}),e.jsx(ne,{onClick:C,sx:{color:"rgba(255, 255, 255, 0.7)","&:hover":{background:"rgba(255, 215, 0, 0.1)",color:"#FFD700"}},children:e.jsx(ls,{})})]})]}),e.jsxs(In,{elevation:3,children:[e.jsx(a,{variant:"h5",sx:{color:"#FFD700",mb:3,fontWeight:"medium"},children:"About the Client"}),e.jsxs(Gh,{onClick:()=>s(`/profile/${i.hirer.id}`),children:[e.jsx(we,{src:i.hirer.avatar,alt:i.hirer.name,sx:{width:56,height:56,mr:2}}),e.jsxs(o,{children:[e.jsx(a,{variant:"h6",sx:{color:"#FFD700"},children:i.hirer.name}),e.jsxs(o,{sx:{display:"flex",alignItems:"center"},children:[e.jsx(rt,{sx:{color:"#FFD700",fontSize:18,mr:.5}}),e.jsx(a,{variant:"body2",sx:{color:"#fff",mr:1},children:i.hirer.rating.toFixed(1)}),e.jsxs(a,{variant:"body2",sx:{color:"rgba(255, 255, 255, 0.7)"},children:["(",i.hirer.reviews," reviews)"]})]}),e.jsxs(a,{variant:"body2",sx:{color:"rgba(255, 255, 255, 0.7)",mt:.5},children:[i.hirer.jobsPosted," jobs posted"]})]})]})]})]})})]}),i&&e.jsx(Jh,{open:u,onClose:g,jobId:i.id,jobTitle:i.title})]})}):null};function qh(){const{userId:t}=Cr(),[r,s]=l.useState(null),[n,i]=l.useState([]),[c,d]=l.useState(null),[x,m]=l.useState("overview"),[u,v]=l.useState(!0),[y,g]=l.useState(null);l.useEffect(()=>{j(),b()},[t]);const j=async()=>{try{const C=await pe.get(`/api/users/${t}`);s(C.data)}catch(C){console.error("Error fetching user data:",C),g("Error fetching user profile")}},b=async()=>{try{const C=await pe.get(`/api/reviews/user/${t}`);i(C.data.reviews),d(C.data.ratings)}catch(C){console.error("Error fetching reviews:",C),g("Error fetching reviews")}finally{v(!1)}};return u?e.jsx(ye,{maxWidth:"lg",sx:{mt:4,mb:4},children:e.jsxs(h,{container:!0,spacing:3,children:[e.jsx(h,{item:!0,xs:12,md:4,children:e.jsx(se,{sx:{p:3},children:e.jsxs(o,{sx:{display:"flex",flexDirection:"column",alignItems:"center"},children:[e.jsx(ie,{variant:"circular",width:120,height:120}),e.jsx(ie,{variant:"text",width:"60%",sx:{mt:2}}),e.jsx(ie,{variant:"text",width:"40%"}),e.jsx(ie,{variant:"rectangular",width:"100%",height:200,sx:{mt:2}}),e.jsx(ie,{variant:"text",width:"50%",sx:{mt:2}}),e.jsx(ie,{variant:"rectangular",width:"100%",height:80,sx:{mt:1}})]})})}),e.jsx(h,{item:!0,xs:12,md:8,children:e.jsxs(se,{sx:{p:3},children:[e.jsx(ie,{variant:"rectangular",width:"30%",height:40}),e.jsx(o,{sx:{mt:2},children:Array.from(new Array(5)).map((C,A)=>e.jsx(ie,{variant:"text",width:"100%",sx:{mb:1}},A))})]})})]})}):y?e.jsx(ye,{maxWidth:"lg",sx:{mt:4},children:e.jsx(be,{severity:"error",children:y})}):e.jsxs(ye,{maxWidth:"lg",sx:{mt:4,mb:4},children:[e.jsx(Fr,{children:e.jsxs("title",{children:[(r==null?void 0:r.username)||"User Profile"," | Kelmah"]})}),e.jsxs(h,{container:!0,spacing:3,children:[e.jsx(h,{item:!0,xs:12,md:4,children:e.jsx(se,{sx:{p:3},children:e.jsxs(o,{sx:{display:"flex",flexDirection:"column",alignItems:"center"},children:[e.jsx(we,{sx:{width:120,height:120,mb:2},children:e.jsx(Lt,{sx:{fontSize:60}})}),e.jsx(a,{variant:"h5",gutterBottom:!0,children:r.username}),e.jsx(a,{variant:"body1",color:"text.secondary",gutterBottom:!0,children:r.role==="worker"?"Freelancer":"Client"}),c&&e.jsxs(o,{sx:{display:"flex",alignItems:"center",mb:2},children:[e.jsx(Qe,{value:c.average_rating,readOnly:!0,precision:.1}),e.jsxs(a,{variant:"body2",color:"text.secondary",sx:{ml:1},children:["(",c.total_ratings," reviews)"]})]}),e.jsxs(o,{sx:{width:"100%",mt:2},children:[r.location&&e.jsxs(o,{sx:{display:"flex",alignItems:"center",mb:1},children:[e.jsx(nt,{color:"action",sx:{mr:1}}),e.jsx(a,{variant:"body2",children:r.location})]}),r.location&&e.jsx(o,{sx:{width:"100%",height:200,borderRadius:2,overflow:"hidden",mt:2},children:e.jsx("iframe",{title:"User Location",src:`https://maps.google.com/maps?q=${encodeURIComponent(r.location)}&output=embed`,width:"100%",height:"100%",style:{border:0},allowFullScreen:!0,loading:"lazy"})}),e.jsxs(o,{sx:{display:"flex",alignItems:"center",mb:1},children:[e.jsx(Kn,{color:"action",sx:{mr:1}}),e.jsxs(a,{variant:"body2",children:["Member since"," ",wt(new Date(r.created_at),"MMMM yyyy")]})]})]}),r.skills&&e.jsxs(o,{sx:{mt:2,width:"100%"},children:[e.jsx(a,{variant:"subtitle2",gutterBottom:!0,children:"Skills"}),e.jsx(o,{sx:{display:"flex",flexWrap:"wrap",gap:1},children:r.skills.split(",").map((C,A)=>e.jsx(ee,{label:C.trim(),size:"small"},A))})]})]})})}),e.jsx(h,{item:!0,xs:12,md:8,children:e.jsxs(se,{sx:{mb:3},children:[e.jsxs($t,{value:x,onChange:(C,A)=>m(A),sx:{borderBottom:1,borderColor:"divider"},children:[e.jsx(Ce,{label:"Overview",value:"overview"}),e.jsx(Ce,{label:"Reviews",value:"reviews"}),e.jsx(Ce,{label:"Portfolio",value:"portfolio"})]}),e.jsxs(o,{sx:{p:3},children:[x==="overview"&&e.jsxs(e.Fragment,{children:[e.jsx(a,{variant:"h6",gutterBottom:!0,children:"About"}),e.jsx(a,{variant:"body1",paragraph:!0,children:r.bio||"No bio provided"})]}),x==="reviews"&&e.jsx(o,{children:n.length>0?e.jsx(Ke,{children:n.map(C=>e.jsxs(Be,{alignItems:"flex-start",children:[e.jsx(Vs,{children:e.jsx(we,{src:C.reviewer.avatar})}),e.jsx(Ie,{primary:e.jsx(Qe,{value:C.rating,readOnly:!0,size:"small"}),secondary:e.jsxs(e.Fragment,{children:[e.jsx(a,{component:"span",variant:"body2",color:"text.primary",children:C.reviewer.name})," — "+C.comment]})})]},C.id||C._id))}):e.jsx(a,{children:"No reviews yet."})}),x==="portfolio"&&e.jsx(o,{children:r.portfolio&&r.portfolio.length>0?e.jsx(h,{container:!0,spacing:2,children:r.portfolio.map((C,A)=>e.jsx(h,{item:!0,xs:12,sm:6,md:4,children:e.jsx(se,{elevation:3,sx:{overflow:"hidden"},children:e.jsx("img",{src:C.url,alt:C.title||"Portfolio Item",style:{width:"100%",display:"block"}})})},A))}):e.jsx(a,{children:"No portfolio items available."})})]})]})})]})]})}class Yh{async getProfile(){try{return(await He.get("/profile")).data.data}catch(r){throw console.error("Error fetching profile:",r),r}}async updateProfile(r){try{return(await He.put("/profile",r)).data.data}catch(s){throw console.error("Error updating profile:",s),s}}async uploadProfilePicture(r){try{const s=new FormData;return s.append("profilePicture",r),(await He.post("/profile/picture",s,{headers:{"Content-Type":"multipart/form-data"}})).data.data}catch(s){throw console.error("Error uploading profile picture:",s),s}}async updateSkills(r){try{return(await He.put("/profile/skills",{skills:r})).data.data}catch(s){throw console.error("Error updating skills:",s),s}}async updateEducation(r){try{return(await He.put("/profile/education",{education:r})).data.data}catch(s){throw console.error("Error updating education:",s),s}}async updateExperience(r){try{return(await He.put("/profile/experience",{experience:r})).data.data}catch(s){throw console.error("Error updating experience:",s),s}}async updatePreferences(r){try{return(await He.put("/profile/preferences",{preferences:r})).data.data}catch(s){throw console.error("Error updating preferences:",s),s}}async getStatistics(){try{return(await He.get("/profile/statistics")).data.data}catch(r){throw console.error("Error fetching statistics:",r),r}}async getActivity(r={}){try{return(await He.get("/profile/activity",{params:r})).data.data}catch(s){throw console.error("Error fetching activity:",s),s}}}const gr=new Yh,Kh={profile:null,loading:!1,error:null},Xh=Vt({name:"profile",initialState:Kh,reducers:{setLoading(t,r){t.loading=r.payload},setError(t,r){t.error=r.payload},setProfile(t,r){t.profile=r.payload,t.error=null}}}),{setLoading:jt,setError:br,setProfile:Zr}=Xh.actions,ul=t=>t.profile.profile,xl=t=>t.profile.loading,hl=t=>t.profile.error,Qs=()=>ut(),ui=()=>{const t=ot(),{isAuthenticated:r}=Qs(),[s,n]=l.useState(null),[i,c]=l.useState([]),d=l.useCallback(async()=>{try{t(jt(!0));const C=await gr.getProfile();return t(Zr(C)),C}catch(C){throw t(br(C.message)),C}finally{t(jt(!1))}},[t]),x=l.useCallback(async C=>{try{t(jt(!0));const A=await gr.updateProfile(C);return t(Zr(A)),A}catch(A){throw t(br(A.message)),A}finally{t(jt(!1))}},[t]),m=l.useCallback(async C=>{try{t(jt(!0));const A=await gr.uploadProfilePicture(C);return await d(),A}catch(A){throw t(br(A.message)),A}finally{t(jt(!1))}},[t,d]),u=l.useCallback(async C=>{try{t(jt(!0));const A=await gr.updateSkills(C);return t(Zr(A)),A}catch(A){throw t(br(A.message)),A}finally{t(jt(!1))}},[t]),v=l.useCallback(async C=>{try{t(jt(!0));const A=await gr.updateEducation(C);return t(Zr(A)),A}catch(A){throw t(br(A.message)),A}finally{t(jt(!1))}},[t]),y=l.useCallback(async C=>{try{t(jt(!0));const A=await gr.updateExperience(C);return t(Zr(A)),A}catch(A){throw t(br(A.message)),A}finally{t(jt(!1))}},[t]),g=l.useCallback(async C=>{try{t(jt(!0));const A=await gr.updatePreferences(C);return t(Zr(A)),A}catch(A){throw t(br(A.message)),A}finally{t(jt(!1))}},[t]),j=l.useCallback(async()=>{try{t(jt(!0));const C=await gr.getStatistics();return n(C),C}catch(C){throw t(br(C.message)),C}finally{t(jt(!1))}},[t]),b=l.useCallback(async(C={})=>{try{t(jt(!0));const A=await gr.getActivity(C);return c(A),A}catch(A){throw t(br(A.message)),A}finally{t(jt(!1))}},[t]);return l.useEffect(()=>{r&&(d(),j(),b())},[r,d,j,b]),{loadProfile:d,updateProfile:x,uploadProfilePicture:m,updateSkills:u,updateEducation:v,updateExperience:y,updatePreferences:g,loadStatistics:j,loadActivity:b,statistics:s,activity:i}},Qh=({size:t=120,editable:r=!0})=>{const{uploadProfilePicture:s}=ui(),[n,i]=l.useState(!1),[c,d]=l.useState(!1),[x,m]=l.useState(null),[u,v]=l.useState(null),y=b=>{const C=b.target.files[0];if(C){m(C);const A=new FileReader;A.onloadend=()=>{v(A.result)},A.readAsDataURL(C),d(!0)}},g=async()=>{if(x)try{i(!0),await s(x),d(!1),m(null),v(null)}catch(b){console.error("Error uploading profile picture:",b)}finally{i(!1)}},j=async()=>{try{i(!0),await s(null),d(!1),m(null),v(null)}catch(b){console.error("Error removing profile picture:",b)}finally{i(!1)}};return e.jsxs(o,{sx:{position:"relative",width:t,height:t},children:[e.jsx(we,{src:u,sx:{width:t,height:t,border:"2px solid",borderColor:"primary.main"}}),r&&e.jsxs(e.Fragment,{children:[e.jsx("input",{type:"file",accept:"image/*",style:{display:"none"},id:"profile-picture-input",onChange:y}),e.jsx("label",{htmlFor:"profile-picture-input",children:e.jsx(xe,{title:"Change profile picture",children:e.jsx(ne,{component:"span",sx:{position:"absolute",bottom:0,right:0,bgcolor:"background.paper","&:hover":{bgcolor:"action.hover"}},children:e.jsx(zn,{})})})})]}),e.jsxs(Ee,{open:c,onClose:()=>d(!1),children:[e.jsx(Me,{children:"Update Profile Picture"}),e.jsx(ze,{children:e.jsxs(o,{sx:{display:"flex",flexDirection:"column",alignItems:"center",gap:2,pt:2},children:[e.jsx(we,{src:u,sx:{width:200,height:200}}),n&&e.jsx(Ae,{size:24,sx:{position:"absolute"}})]})}),e.jsxs(Le,{children:[e.jsx(P,{onClick:()=>d(!1),disabled:n,children:"Cancel"}),e.jsx(P,{onClick:j,color:"error",startIcon:e.jsx(Ct,{}),disabled:n,children:"Remove"}),e.jsx(P,{onClick:g,variant:"contained",disabled:n,children:"Upload"})]})]})]})},Zh=()=>{var W,R,K,_,O;const{updateProfile:t,updateSkills:r,updateEducation:s,updateExperience:n,updatePreferences:i,statistics:c,activity:d}=ui(),x=je(ul),m=je(xl),u=je(hl),[v,y]=l.useState(0),[g,j]=l.useState(!1),[b,C]=l.useState({firstName:"",lastName:"",email:"",phone:"",bio:"",location:""}),A=(T,H)=>{y(H)},w=()=>{C({firstName:x.firstName||"",lastName:x.lastName||"",email:x.email||"",phone:x.phone||"",bio:x.bio||"",location:x.location||""}),j(!0)},p=async()=>{try{await t(b),j(!1)}catch(T){console.error("Error updating profile:",T)}},k=()=>{j(!1)},U=T=>{const{name:H,value:F}=T.target;C(V=>({...V,[H]:F}))};return m?e.jsx(ye,{maxWidth:"lg",sx:{py:4},children:e.jsx(h,{container:!0,spacing:3,children:e.jsx(h,{item:!0,xs:12,children:e.jsx(se,{sx:{p:3},children:e.jsxs(o,{sx:{display:"flex",gap:3,alignItems:"center"},children:[e.jsx(ie,{variant:"circular",width:150,height:150}),e.jsxs(o,{sx:{flex:1},children:[e.jsx(ie,{width:"40%",height:32,sx:{mb:1}}),e.jsx(ie,{width:"30%",height:24,sx:{mb:1}}),e.jsx(ie,{width:"50%",height:24})]})]})})})})}):e.jsx(ye,{maxWidth:"lg",sx:{py:4},children:e.jsxs(h,{container:!0,spacing:3,children:[e.jsx(h,{item:!0,xs:12,children:e.jsx(se,{sx:{p:3},children:e.jsxs(o,{sx:{display:"flex",gap:3,alignItems:"center"},children:[e.jsx(Qh,{size:150}),e.jsxs(o,{sx:{flex:1},children:[u&&e.jsx(be,{severity:"error",sx:{mb:2},children:u}),g?e.jsxs(o,{sx:{display:"flex",flexDirection:"column",gap:2},children:[e.jsxs(h,{container:!0,spacing:2,children:[e.jsx(h,{item:!0,xs:12,sm:6,children:e.jsx(Q,{fullWidth:!0,label:"First Name",name:"firstName",value:b.firstName,onChange:U})}),e.jsx(h,{item:!0,xs:12,sm:6,children:e.jsx(Q,{fullWidth:!0,label:"Last Name",name:"lastName",value:b.lastName,onChange:U})})]}),e.jsx(Q,{fullWidth:!0,label:"Email",name:"email",type:"email",value:b.email,onChange:U}),e.jsx(Q,{fullWidth:!0,label:"Phone",name:"phone",value:b.phone,onChange:U}),e.jsx(Q,{fullWidth:!0,label:"Location",name:"location",value:b.location,onChange:U}),e.jsx(Q,{fullWidth:!0,label:"Bio",name:"bio",multiline:!0,rows:4,value:b.bio,onChange:U}),e.jsxs(o,{sx:{display:"flex",gap:2,justifyContent:"flex-end"},children:[e.jsx(P,{onClick:k,children:"Cancel"}),e.jsx(P,{variant:"contained",onClick:p,children:"Save"})]})]}):e.jsxs(e.Fragment,{children:[e.jsxs(a,{variant:"h4",gutterBottom:!0,children:[x.firstName," ",x.lastName]}),e.jsx(a,{variant:"body1",color:"text.secondary",gutterBottom:!0,children:x.email}),x.phone&&e.jsx(a,{variant:"body1",color:"text.secondary",gutterBottom:!0,children:x.phone}),x.location&&e.jsx(a,{variant:"body1",color:"text.secondary",gutterBottom:!0,children:x.location}),x.bio&&e.jsx(a,{variant:"body1",sx:{mt:2},children:x.bio}),e.jsx(P,{startIcon:e.jsx(ur,{}),onClick:w,sx:{mt:2},children:"Edit Profile"})]})]})]})})}),e.jsx(h,{item:!0,xs:12,children:e.jsxs(se,{sx:{p:3},children:[e.jsxs($t,{value:v,onChange:A,children:[e.jsx(Ce,{label:"Skills"}),e.jsx(Ce,{label:"Education"}),e.jsx(Ce,{label:"Experience"}),e.jsx(Ce,{label:"Preferences"}),e.jsx(Ce,{label:"Activity"})]}),e.jsxs(o,{sx:{mt:3},children:[v===0&&e.jsxs(o,{children:[e.jsx(a,{variant:"h6",gutterBottom:!0,children:"Skills"}),e.jsxs(o,{sx:{display:"flex",flexWrap:"wrap",gap:1},children:[(W=x.skills)==null?void 0:W.map((T,H)=>e.jsx(ee,{label:T,onDelete:()=>{const F=x.skills.filter((V,re)=>re!==H);r(F)}},H)),e.jsx(ee,{icon:e.jsx(Dt,{}),label:"Add Skill",onClick:()=>{const T=prompt("Enter skill:");T&&r([...x.skills,T])},color:"primary",variant:"outlined"})]})]}),v===1&&e.jsxs(o,{children:[e.jsx(a,{variant:"h6",gutterBottom:!0,children:"Education"}),e.jsx(Ke,{children:(R=x.education)==null?void 0:R.map((T,H)=>e.jsxs(Rt.Fragment,{children:[e.jsxs(Be,{children:[e.jsx(Ie,{primary:T.degree,secondary:`${T.institution} • ${T.year}`}),e.jsx(ne,{onClick:()=>{const F=x.education.filter((V,re)=>re!==H);s(F)},children:e.jsx(Ct,{})})]}),H<x.education.length-1&&e.jsx(fe,{})]},H))}),e.jsx(P,{startIcon:e.jsx(Dt,{}),onClick:()=>{const T=prompt("Enter degree:"),H=prompt("Enter institution:"),F=prompt("Enter year:");T&&H&&F&&s([...x.education,{degree:T,institution:H,year:F}])},children:"Add Education"})]}),v===2&&e.jsxs(o,{children:[e.jsx(a,{variant:"h6",gutterBottom:!0,children:"Experience"}),e.jsx(Ke,{children:(K=x.experience)==null?void 0:K.map((T,H)=>e.jsxs(Rt.Fragment,{children:[e.jsxs(Be,{children:[e.jsx(Ie,{primary:T.title,secondary:`${T.company} • ${T.duration}`}),e.jsx(ne,{onClick:()=>{const F=x.experience.filter((V,re)=>re!==H);n(F)},children:e.jsx(Ct,{})})]}),H<x.experience.length-1&&e.jsx(fe,{})]},H))}),e.jsx(P,{startIcon:e.jsx(Dt,{}),onClick:()=>{const T=prompt("Enter job title:"),H=prompt("Enter company:"),F=prompt("Enter duration:");T&&H&&F&&n([...x.experience,{title:T,company:H,duration:F}])},children:"Add Experience"})]}),v===3&&e.jsxs(o,{children:[e.jsx(a,{variant:"h6",gutterBottom:!0,children:"Preferences"}),e.jsxs(h,{container:!0,spacing:2,children:[e.jsxs(h,{item:!0,xs:12,sm:6,children:[e.jsx(a,{variant:"subtitle1",gutterBottom:!0,children:"Job Preferences"}),e.jsx(Q,{fullWidth:!0,label:"Preferred Job Type",value:((_=x.preferences)==null?void 0:_.jobType)||"",onChange:T=>{i({...x.preferences,jobType:T.target.value})}})]}),e.jsxs(h,{item:!0,xs:12,sm:6,children:[e.jsx(a,{variant:"subtitle1",gutterBottom:!0,children:"Location Preferences"}),e.jsx(Q,{fullWidth:!0,label:"Preferred Location",value:((O=x.preferences)==null?void 0:O.location)||"",onChange:T=>{i({...x.preferences,location:T.target.value})}})]})]})]}),v===4&&e.jsxs(o,{children:[e.jsx(a,{variant:"h6",gutterBottom:!0,children:"Recent Activity"}),e.jsx(Ke,{children:d.map((T,H)=>e.jsxs(Rt.Fragment,{children:[e.jsx(Be,{children:e.jsx(Ie,{primary:T.title,secondary:new Date(T.date).toLocaleDateString()})}),H<d.length-1&&e.jsx(fe,{})]},H))})]})]})]})}),c&&e.jsx(h,{item:!0,xs:12,children:e.jsxs(se,{sx:{p:3},children:[e.jsx(a,{variant:"h6",gutterBottom:!0,children:"Statistics"}),e.jsxs(h,{container:!0,spacing:3,children:[e.jsx(h,{item:!0,xs:12,sm:4,children:e.jsxs(o,{sx:{textAlign:"center"},children:[e.jsx(a,{variant:"h4",color:"primary",children:c.jobsApplied}),e.jsx(a,{variant:"body2",color:"text.secondary",children:"Jobs Applied"})]})}),e.jsx(h,{item:!0,xs:12,sm:4,children:e.jsxs(o,{sx:{textAlign:"center"},children:[e.jsx(a,{variant:"h4",color:"primary",children:c.interviews}),e.jsx(a,{variant:"body2",color:"text.secondary",children:"Interviews"})]})}),e.jsx(h,{item:!0,xs:12,sm:4,children:e.jsxs(o,{sx:{textAlign:"center"},children:[e.jsx(a,{variant:"h4",color:"primary",children:c.offers}),e.jsx(a,{variant:"body2",color:"text.secondary",children:"Job Offers"})]})})]})]})})]})})},Un=Xe.create({baseURL:yt.USER_SERVICE,timeout:3e4,headers:{"Content-Type":"application/json"}}),Ar=Xe.create({baseURL:yt.JOB_SERVICE,timeout:3e4,headers:{"Content-Type":"application/json"}});[Un,Ar].forEach(t=>{t.interceptors.request.use(r=>{const s=localStorage.getItem("kelmah_auth_token");return s&&(r.headers.Authorization=`Bearer ${s}`),r},r=>Promise.reject(r))});const Lr={profile:{id:"hirer-001",firstName:"Sarah",lastName:"Mitchell",email:"sarah.mitchell@example.com",phone:"+233 24 567 8901",company:"Mitchell Construction Ltd",location:"Accra, Greater Accra",bio:"We are a leading construction company specializing in residential and commercial projects.",avatar:"/api/placeholder/150/150",rating:4.8,reviewsCount:28,verified:!0},jobs:{active:[{id:"job-h1",title:"Kitchen Renovation - Custom Cabinets",description:"Looking for an experienced carpenter to build custom kitchen cabinets.",category:"Carpentry",location:"Accra, Greater Accra",budget:5500,currency:"GH₵",status:"active",applicationsCount:12,applications:[{id:"app-h1",workerId:"7a1f417c-e2e2-4210-9824-08d5fac336ac",workerName:"Tony Gate",workerRating:4.8,proposedRate:5200,status:"pending",appliedAt:new Date(Date.now()-1e3*60*60*24*3)}]}],completed:[{id:"job-h3",title:"Residential Plumbing Installation",description:"Complete plumbing installation for a new 3-bedroom house.",category:"Plumbing",status:"completed",finalPayment:8500,applications:[]}]},savedWorkers:[{id:"worker-s1",name:"Alice Brown",rating:4.8,experience:"4 years"},{id:"worker-s2",name:"Bob Green",rating:4.9,experience:"6 years"}]},Es={async getProfile(){try{return(await Un.get("/api/users/me/profile")).data}catch(t){return console.warn("User service unavailable for hirer profile, using mock data:",t.message),Lr.profile}},async updateProfile(t){try{return(await Un.put("/api/users/me/profile",t)).data}catch(r){return console.warn("User service unavailable for profile update, simulating success:",r.message),{...Lr.profile,...t,updatedAt:new Date}}},async getJobs(t="active"){try{return(await Ar.get("/api/jobs/my-jobs",{params:{status:t,role:"hirer"}})).data}catch(r){return console.warn(`Job service unavailable for hirer jobs (${t}), using mock data:`,r.message),Lr.jobs[t]||[]}},async createJob(t){try{return(await Ar.post("/api/jobs",t)).data}catch(r){return console.warn("Job service unavailable for job creation, simulating success:",r.message),{id:`job-${Date.now()}`,...t,status:t.status||"draft",createdAt:new Date,applicationsCount:0}}},async updateJob(t,r){try{return(await Ar.put(`/api/jobs/${t}`,r)).data}catch(s){return console.warn("Job service unavailable for job update, simulating success:",s.message),{id:t,...r,updatedAt:new Date}}},async deleteJob(t){try{return await Ar.delete(`/api/jobs/${t}`),{success:!0,message:"Job deleted successfully"}}catch(r){return console.warn("Job service unavailable for job deletion, simulating success:",r.message),{success:!0,message:"Job deleted successfully (mock)"}}},async publishJob(t){try{return(await Ar.post(`/api/jobs/${t}/publish`)).data}catch(r){return console.warn("Job service unavailable for job publishing, simulating success:",r.message),{id:t,status:"active",publishedAt:new Date}}},async getJobApplications(t,r="pending"){try{return(await Ar.get(`/api/jobs/${t}/applications`,{params:{status:r}})).data}catch(s){console.warn(`Job service unavailable for applications (${t}), using mock data:`,s.message);const i=[...Lr.jobs.active,...Lr.jobs.completed].find(c=>c.id===t);return(i==null?void 0:i.applications)||[]}},async updateApplicationStatus(t,r,s,n=""){try{return(await Ar.put(`/api/jobs/${t}/applications/${r}`,{status:s,feedback:n})).data}catch(i){return console.warn("Job service unavailable for application status update, simulating success:",i.message),{id:r,status:s,feedback:n,updatedAt:new Date,message:"Application status updated successfully (mock)"}}},async searchWorkers(t){try{const r=[{id:"worker-w1",name:"John Doe",rating:4.5,experience:"5 years",hourlyRate:50,skills:["Carpentry","Furniture Making"],location:"Accra, Ghana"},{id:"worker-w2",name:"Jane Smith",rating:4.9,experience:"3 years",hourlyRate:60,skills:["Plumbing","Installation"],location:"Kumasi, Ghana"}];return{workers:r,pagination:{currentPage:1,totalPages:1,totalItems:r.length}}}catch(r){return console.warn("Worker search unavailable, using mock data:",r.message),{workers:[],pagination:{currentPage:1,totalPages:1,totalItems:0}}}},async getSavedWorkers(){try{return Lr.savedWorkers}catch(t){return console.warn("Saved workers unavailable, using mock data:",t.message),Lr.savedWorkers}},async saveWorker(t){try{return{workerId:t,message:"Worker saved successfully (mock)"}}catch(r){return console.warn("Save worker unavailable, simulating success:",r.message),{workerId:t,message:"Worker saved successfully (mock)"}}},async unsaveWorker(t){try{return{workerId:t,message:"Worker unsaved successfully (mock)"}}catch(r){return console.warn("Unsave worker unavailable, simulating success:",r.message),{workerId:t,message:"Worker unsaved successfully (mock)"}}},async releaseMilestonePayment(t,r,s){try{return{jobId:t,milestoneId:r,amount:s,totalPaid:s,message:"Payment released successfully (mock)"}}catch(n){return console.warn("Payment release unavailable, simulating success:",n.message),{jobId:t,milestoneId:r,amount:s,totalPaid:s,message:"Payment released successfully (mock)"}}},async createWorkerReview(t,r,s){try{return{workerId:t,jobId:r,reviewData:s,message:"Review created successfully (mock)"}}catch(n){return console.warn("Review creation unavailable, simulating success:",n.message),{workerId:t,jobId:r,reviewData:s,message:"Review created successfully (mock)"}}}},ep=({application:t,isSelected:r,onSelect:s})=>{const n=ve();return e.jsx(me,{onClick:()=>s(t),sx:{mb:2,cursor:"pointer",borderLeft:r?`4px solid ${n.palette.primary.main}`:"none",backgroundColor:r?n.palette.action.selected:n.palette.background.paper},children:e.jsxs(ce,{children:[e.jsxs(o,{sx:{display:"flex",alignItems:"center",mb:1},children:[e.jsx(we,{src:t.workerAvatar,sx:{mr:2}}),e.jsxs(o,{children:[e.jsx(a,{variant:"h6",children:t.workerName}),e.jsx(Qe,{value:t.workerRating,precision:.5,readOnly:!0,size:"small"})]})]}),e.jsx(a,{variant:"body2",color:"text.secondary",noWrap:!0,children:t.coverLetter})]})})};function tp(){const t=ve(),r=Te(t.breakpoints.down("md")),s=Oe(),{user:n,token:i}=Qs(),c=je(H=>H.hirer.jobs.active),[d,x]=l.useState("pending"),[m,u]=l.useState([]),[v,y]=l.useState(!0),[g,j]=l.useState(null),[b,C]=l.useState(null),[A,w]=l.useState(!1),[p,k]=l.useState(""),[U,W]=l.useState(!1),[R,K]=l.useState("");l.useEffect(()=>{(async()=>{if(y(!0),c&&c.length>0)try{const V=(await Promise.all(c.map(re=>Es.getJobApplications(re.id,d)))).flat();u(V),V.length>0?C(V[0]):C(null)}catch{j("Failed to fetch applications")}else u([]),C(null);y(!1)})()},[d,c]);const _=async()=>{if(b){W(!0);try{await Es.updateApplicationStatus(b.jobId,b.id,R,p),w(!1),k("");const H=m.filter(F=>F.id!==b.id);u(H),C(H.length>0?H[0]:null)}catch{j("Failed to update application status.")}finally{W(!1)}}},O=H=>{K(H),w(!0)},T=async()=>{if(b){_r.initialize(n.id,i);try{const H=await _r.createDirectConversation(b.workerId);s(`/messages/${H.id}`)}catch(H){console.error("Error creating direct conversation:",H),j("Unable to start chat. Please try again later.")}}};return e.jsxs(ye,{maxWidth:"xl",sx:{mt:4,mb:4},children:[e.jsx(Fr,{children:e.jsx("title",{children:"Application Management | Kelmah"})}),e.jsx(a,{variant:"h4",gutterBottom:!0,children:"Job Applications"}),e.jsx(se,{sx:{display:"flex",flexDirection:r?"column":"row",height:r?"auto":"calc(100vh - 200px)",overflow:"hidden"},children:e.jsxs(h,{container:!0,children:[e.jsxs(h,{item:!0,xs:12,md:4,sx:{borderRight:r?"none":`1px solid ${t.palette.divider}`,borderBottom:r?`1px solid ${t.palette.divider}`:"none",display:"flex",flexDirection:"column",flex:"0 0 auto"},children:[e.jsxs($t,{value:d,onChange:(H,F)=>x(F),sx:{borderBottom:`1px solid ${t.palette.divider}`},centered:!0,children:[e.jsx(Ce,{label:"Pending",value:"pending"}),e.jsx(Ce,{label:"Accepted",value:"accepted"}),e.jsx(Ce,{label:"Rejected",value:"rejected"})]}),e.jsxs(o,{sx:{flex:"1 1 auto",overflowY:"auto",p:2},children:[v&&Array.from(new Array(4)).map((H,F)=>e.jsx(ie,{variant:"rectangular",height:80,sx:{mb:2,borderRadius:2}},F)),g&&e.jsx(be,{severity:"error",sx:{mb:2},children:g}),!v&&m.length===0&&!g&&e.jsx(a,{color:"text.secondary",sx:{textAlign:"center",mt:4},children:"No applications found for this status."}),!v&&m.length>0&&m.map(H=>e.jsx(ep,{application:H,isSelected:(b==null?void 0:b.id)===H.id,onSelect:C},H.id))]})]}),e.jsx(h,{item:!0,xs:12,md:8,sx:{p:3,overflowY:"auto",flex:"1 1 auto"},children:b?e.jsxs(e.Fragment,{children:[e.jsxs(o,{sx:{display:"flex",alignItems:"center",mb:2},children:[e.jsx(we,{src:b.workerAvatar,sx:{width:60,height:60,mr:2}}),e.jsxs("div",{children:[e.jsx(a,{variant:"h5",children:b.workerName}),e.jsx(Qe,{value:b.workerRating,readOnly:!0})]})]}),e.jsx(fe,{sx:{my:2}}),e.jsx(a,{variant:"h6",children:"Cover Letter"}),e.jsx(a,{variant:"body1",paragraph:!0,children:b.coverLetter}),e.jsx(fe,{sx:{my:2}}),e.jsxs(o,{sx:{display:"flex",justifyContent:"space-around"},children:[e.jsx(P,{startIcon:e.jsx(Ot,{}),onClick:T,children:"Message"}),e.jsx(P,{color:"success",variant:"contained",startIcon:e.jsx(Ve,{}),onClick:()=>O("accepted"),children:"Accept"}),e.jsx(P,{color:"error",variant:"outlined",startIcon:e.jsx(ps,{}),onClick:()=>O("rejected"),children:"Reject"})]})]}):e.jsx(se,{sx:{p:4,textAlign:"center",background:"transparent"},elevation:0,children:e.jsx(a,{variant:"h6",color:"text.secondary",children:"Select an application to view details."})})})]})}),e.jsxs(Ee,{open:A,onClose:()=>w(!1),fullWidth:!0,maxWidth:"sm",children:[e.jsx(Me,{children:"Confirm Action"}),e.jsxs(ze,{children:[e.jsxs(a,{children:["You are about to ",R," this application."]}),R==="rejected"&&e.jsx(Q,{label:"Feedback (Optional)",multiline:!0,rows:4,fullWidth:!0,value:p,onChange:H=>k(H.target.value),sx:{mt:2}})]}),e.jsxs(Le,{children:[e.jsx(P,{onClick:()=>w(!1),children:"Cancel"}),e.jsx(P,{onClick:_,color:R==="accepted"?"success":"error",variant:"contained",disabled:U,children:U?e.jsx(Ae,{size:24}):`Confirm ${R}`})]})]})]})}const rp={active:{label:"Active",color:"primary",icon:e.jsx(jd,{})},pending:{label:"Pending",color:"warning",icon:e.jsx(fd,{})},completed:{label:"Completed",color:"success",icon:e.jsx(Ve,{})},dispute:{label:"In Dispute",color:"error",icon:e.jsx(yd,{})}},sp=he(se)(({theme:t})=>({p:t.spacing(3),display:"flex",flexDirection:"column",height:"100%",borderRadius:t.shape.borderRadius,backgroundColor:E(t.palette.primary.main,.7),backdropFilter:"blur(10px)",border:`2px solid ${t.palette.secondary.main}`,boxShadow:"inset 0 0 8px rgba(255, 215, 0, 0.5)",transition:"transform 0.2s ease-in-out, box-shadow 0.3s ease-in-out, border-color 0.3s ease-in-out","&:hover":{transform:"translateY(-5px)",boxShadow:"0 4px 20px rgba(255, 215, 0, 0.3), inset 0 0 8px rgba(255, 215, 0, 0.5)",borderColor:t.palette.secondary.light}})),pl=({contract:t})=>{const{id:r,title:s,hirer:n,value:i,amountPaid:c,endDate:d,status:x}=t,m=rp[x]||{label:"Unknown",color:"default",icon:e.jsx(e.Fragment,{})},u=i>0?c/i*100:0;return e.jsxs(sp,{children:[e.jsxs(te,{direction:"row",justifyContent:"space-between",alignItems:"center",mb:2,children:[e.jsxs(te,{direction:"row",alignItems:"center",spacing:1.5,children:[e.jsx(we,{src:n.avatar,sx:{width:40,height:40}}),e.jsxs(o,{children:[e.jsx(a,{variant:"body2",color:"text.secondary",children:"Contract with"}),e.jsx(a,{variant:"subtitle2",fontWeight:"bold",children:n.name})]})]}),e.jsx(ee,{icon:m.icon,label:m.label,color:m.color,size:"small",sx:{fontWeight:"bold"}})]}),e.jsx(a,{variant:"h6",component:"h3",fontWeight:"bold",sx:{mb:2,flexGrow:1,lineHeight:1.4},children:s}),e.jsxs(o,{mb:2,children:[e.jsxs(te,{direction:"row",justifyContent:"space-between",alignItems:"center",mb:.5,children:[e.jsx(a,{variant:"caption",color:"text.secondary",children:"Paid"}),e.jsx(a,{variant:"caption",color:"text.secondary",children:"Total"})]}),e.jsx(lr,{variant:"determinate",value:u,sx:{height:10,borderRadius:5,mb:.5},color:m.color}),e.jsxs(te,{direction:"row",justifyContent:"space-between",alignItems:"center",children:[e.jsxs(a,{variant:"subtitle2",fontWeight:"bold",children:["$",c.toFixed(2)]}),e.jsxs(a,{variant:"subtitle2",fontWeight:"bold",children:["$",i.toFixed(2)]})]})]}),e.jsxs(te,{direction:"row",justifyContent:"space-between",alignItems:"center",mt:1,children:[e.jsxs(a,{variant:"caption",color:"text.secondary",children:["Ends: ",Hs(new Date(d),{addSuffix:!0})]}),e.jsx(P,{component:Fe,to:`/contracts/${r}`,variant:"contained",size:"small",children:"View Contract"})]})]})};pl.propTypes={contract:Y.shape({id:Y.any.isRequired,title:Y.string.isRequired,hirer:Y.shape({name:Y.string,avatar:Y.string}).isRequired,value:Y.number.isRequired,amountPaid:Y.number.isRequired,endDate:Y.string.isRequired,status:Y.oneOf(["active","pending","completed","dispute"]).isRequired}).isRequired};const ml=()=>{const{contracts:t,loading:r,error:s}=ix(),[n,i]=l.useState(0),c=(x,m)=>{i(m)},d=l.useMemo(()=>{if(r)return[];const m=["all","active","pending","completed","dispute"][n];return m==="all"?t:t.filter(u=>u.status===m)},[t,n,r]);return e.jsxs(ye,{maxWidth:"xl",sx:{py:4,bgcolor:"background.default",color:"text.primary"},children:[e.jsxs(o,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:4},children:[e.jsxs(o,{sx:{display:"flex",alignItems:"center"},children:[e.jsx(_n,{sx:{fontSize:36,mr:1.5,color:"secondary.main"}}),e.jsx(a,{variant:"h4",fontWeight:"bold",children:"Contract Management"})]}),e.jsx(P,{component:Fe,to:"/contracts/create",startIcon:e.jsx(Dt,{}),variant:"contained",color:"secondary",sx:{fontWeight:"bold"},children:"New Contract"})]}),e.jsx(o,{sx:{mb:3},children:e.jsxs(a,{variant:"body2",color:"text.secondary",children:["Showing ",d.length," of ",t.length," contracts"]})}),e.jsx(se,{elevation:0,sx:x=>({mb:4,p:2,backgroundColor:E(x.palette.primary.main,.7),backdropFilter:"blur(10px)",borderRadius:x.spacing(2),border:`2px solid ${x.palette.secondary.main}`,boxShadow:"inset 0 0 8px rgba(255, 215, 0, 0.5)",transition:"box-shadow 0.3s ease-in-out, border-color 0.3s ease-in-out","&:hover":{boxShadow:"0 0 12px rgba(255, 215, 0, 0.3), inset 0 0 8px rgba(255, 215, 0, 0.5)",borderColor:x.palette.secondary.light}}),children:e.jsxs($t,{value:n,onChange:c,indicatorColor:"secondary",textColor:"secondary",variant:"scrollable",scrollButtons:"auto","aria-label":"contract status tabs",sx:{"& .MuiTab-root":{fontWeight:"600"}},children:[e.jsx(Ce,{label:`All (${t.length})`}),e.jsx(Ce,{label:`Active (${t.filter(x=>x.status==="active").length})`}),e.jsx(Ce,{label:`Pending (${t.filter(x=>x.status==="pending").length})`}),e.jsx(Ce,{label:`Completed (${t.filter(x=>x.status==="completed").length})`}),e.jsx(Ce,{label:`Disputes (${t.filter(x=>x.status==="dispute").length})`})]})}),r?e.jsx(h,{container:!0,spacing:3,children:Array.from({length:8}).map((x,m)=>e.jsx(h,{item:!0,xs:12,sm:6,md:4,lg:3,children:e.jsx(ie,{variant:"rectangular",height:200,sx:{borderRadius:2}})},m))}):s?e.jsx(be,{severity:"error",sx:{mt:3},children:s}):e.jsx(h,{container:!0,spacing:3,children:d.length>0?d.map(x=>e.jsx(h,{item:!0,xs:12,sm:6,md:4,lg:3,children:e.jsx(pl,{contract:x})},x.id)):e.jsx(h,{item:!0,xs:12,children:e.jsx(o,{sx:{textAlign:"center",p:5,mt:4,bgcolor:"background.paper",borderRadius:2},children:e.jsx(a,{variant:"h6",color:"text.secondary",children:"No contracts found in this category."})})})})]})},ap=l.forwardRef(function(r,s){return e.jsx(be,{elevation:6,ref:s,variant:"filled",...r})}),xi=({open:t,message:r,severity:s="info",duration:n=5e3,onClose:i,action:c=null,title:d=null,vertical:x="bottom",horizontal:m="center",fullWidth:u=!1})=>e.jsx(Wt,{open:t,autoHideDuration:n,onClose:i,anchorOrigin:{vertical:x,horizontal:m},sx:{width:u?"100%":"auto","& .MuiPaper-root":{width:u?"100%":"auto",maxWidth:u?"100%":600}},children:e.jsxs(ap,{onClose:i,severity:s,sx:{width:"100%","& .MuiAlert-message":{width:"100%"}},children:[d&&e.jsx(a,{variant:"subtitle1",component:"div",sx:{fontWeight:"bold",mb:.5},children:d}),e.jsx(a,{variant:"body2",children:r}),c&&e.jsx(o,{sx:{mt:1,display:"flex",justifyContent:"flex-end",width:"100%"},children:typeof c=="function"?e.jsx(P,{color:"inherit",size:"small",onClick:c,children:"DISMISS"}):c})]})});xi.propTypes={open:Y.bool.isRequired,message:Y.string.isRequired,severity:Y.oneOf(["success","info","warning","error"]),duration:Y.number,onClose:Y.func.isRequired,action:Y.oneOfType([Y.node,Y.func]),title:Y.string,vertical:Y.oneOf(["top","bottom"]),horizontal:Y.oneOf(["left","center","right"]),fullWidth:Y.bool};const Vi={draft:"default",pending:"warning",active:"success",completed:"info",cancelled:"error",disputed:"error"},np=()=>{var J;const{contractId:t}=Cr(),r=ot(),s=Oe(),n=Zt(),i=je($u),c=je(f=>Bu(f,t)),d=je(Bo),x=je(_o),[m,u]=l.useState(!1),[v,y]=l.useState(""),[g,j]=l.useState(!1),[b,C]=l.useState({reason:"",description:""}),[A,w]=l.useState(!1),[p,k]=l.useState(""),[U,W]=l.useState({open:!1,message:"",severity:"info"});l.useEffect(()=>{r(Pa(t)),r(Fa(t))},[r,t]),l.useEffect(()=>{var f;if((f=n.state)!=null&&f.toast){const{message:M,severity:G}=n.state.toast;W({open:!0,message:M,severity:G}),s(n.pathname,{replace:!0})}},[n,s]);const R=f=>f?new Date(f).toLocaleDateString():"N/A",K=()=>{s("/contracts")},_=()=>{s(`/contracts/${t}/edit`)},O=()=>{r(Ta({contractId:t,reason:v})).unwrap().then(()=>{u(!1),y(""),W({open:!0,message:"Contract cancelled successfully",severity:"success"})}).catch(f=>{W({open:!0,message:f||"Failed to cancel contract",severity:"error"})})},T=()=>{r(Ia({contractId:t,signatureData:{signature:p}})).unwrap().then(()=>{w(!1),k(""),W({open:!0,message:"Contract signed successfully",severity:"success"})}).catch(f=>{W({open:!0,message:f||"Failed to sign contract",severity:"error"})})},H=()=>{r(Ra(t)).unwrap().then(()=>{W({open:!0,message:"Contract sent for signature",severity:"success"})}).catch(f=>{W({open:!0,message:f||"Failed to send contract for signature",severity:"error"})})},F=f=>{r(Wa({contractId:t,milestoneId:f})).unwrap().then(()=>{W({open:!0,message:"Milestone marked as completed",severity:"success"})}).catch(M=>{W({open:!0,message:M||"Failed to complete milestone",severity:"error"})})},V=()=>{r(Ea({contractId:t,disputeData:b})).unwrap().then(()=>{j(!1),C({reason:"",description:""}),W({open:!0,message:"Dispute submitted successfully",severity:"success"})}).catch(f=>{W({open:!0,message:f||"Failed to submit dispute",severity:"error"})})},re=()=>{window.open(`/api/contracts/${t}/download`,"_blank")},z=()=>{if(!c||c.length===0)return 0;const f=c.filter(M=>M.status==="completed").length;return Math.round(f/c.length*100)};return d.currentContract||!i?e.jsx(ye,{maxWidth:"lg",sx:{mt:4,mb:8},children:e.jsx(o,{sx:{display:"flex",justifyContent:"center",my:4},children:e.jsx(Ae,{})})}):e.jsxs(ye,{maxWidth:"lg",sx:{mt:4,mb:8},children:[x.currentContract&&e.jsxs(be,{severity:"error",sx:{mb:3},children:["Error loading contract: ",x.currentContract]}),e.jsxs(o,{sx:{display:"flex",alignItems:"center",mb:3},children:[e.jsx(P,{startIcon:e.jsx(Rr,{}),onClick:K,variant:"outlined",color:"secondary",sx:{mr:2,borderWidth:2},children:"Back to Contracts"}),e.jsx(a,{variant:"h4",sx:{color:"secondary.main"},children:"Contract Details"})]}),e.jsxs(h,{container:!0,spacing:3,children:[e.jsx(h,{item:!0,xs:12,children:e.jsxs(se,{elevation:0,sx:f=>({p:3,mb:4,backgroundColor:E(f.palette.primary.main,.7),backdropFilter:"blur(10px)",borderRadius:f.spacing(2),border:`2px solid ${f.palette.secondary.main}`,boxShadow:"inset 0 0 8px rgba(255, 215, 0, 0.5)",transition:"box-shadow 0.3s ease-in-out, border-color 0.3s ease-in-out","&:hover":{boxShadow:"0 0 12px rgba(255, 215, 0, 0.3), inset 0 0 8px rgba(255, 215, 0, 0.5)",borderColor:f.palette.secondary.light}}),children:[e.jsxs(o,{sx:{display:"flex",justifyContent:"space-between",mb:2},children:[e.jsx(a,{variant:"h5",children:i.title}),e.jsx(ee,{label:i.status.charAt(0).toUpperCase()+i.status.slice(1),color:Vi[i.status]||"default"})]}),e.jsx(fe,{sx:{my:2}}),e.jsxs(h,{container:!0,spacing:2,children:[e.jsxs(h,{item:!0,xs:12,sm:6,children:[e.jsx(a,{variant:"subtitle2",color:"text.secondary",children:"Client"}),e.jsx(a,{variant:"body1",gutterBottom:!0,children:i.clientName||"N/A"}),e.jsx(a,{variant:"subtitle2",color:"text.secondary",children:"Worker"}),e.jsx(a,{variant:"body1",gutterBottom:!0,children:i.workerName||"N/A"}),e.jsx(a,{variant:"subtitle2",color:"text.secondary",children:"Contract Value"}),e.jsxs(a,{variant:"body1",gutterBottom:!0,children:["$",((J=i.value)==null?void 0:J.toFixed(2))||"0.00"]})]}),e.jsxs(h,{item:!0,xs:12,sm:6,children:[e.jsx(a,{variant:"subtitle2",color:"text.secondary",children:"Start Date"}),e.jsx(a,{variant:"body1",gutterBottom:!0,children:R(i.startDate)}),e.jsx(a,{variant:"subtitle2",color:"text.secondary",children:"End Date"}),e.jsx(a,{variant:"body1",gutterBottom:!0,children:R(i.endDate)}),e.jsx(a,{variant:"subtitle2",color:"text.secondary",children:"Created On"}),e.jsx(a,{variant:"body1",gutterBottom:!0,children:R(i.createdAt)})]})]}),e.jsx(fe,{sx:{my:2}}),e.jsxs(o,{sx:{display:"flex",gap:1,flexWrap:"wrap"},children:[i.status==="draft"&&e.jsxs(e.Fragment,{children:[e.jsx(P,{variant:"outlined",startIcon:e.jsx(ur,{}),onClick:_,children:"Edit"}),e.jsx(P,{variant:"outlined",startIcon:e.jsx(ds,{}),onClick:H,children:"Send for Signature"}),e.jsx(P,{variant:"outlined",color:"error",startIcon:e.jsx(Ct,{}),onClick:()=>u(!0),children:"Delete"})]}),i.status==="pending"&&e.jsxs(e.Fragment,{children:[e.jsx(P,{variant:"outlined",startIcon:e.jsx(vd,{}),onClick:()=>w(!0),children:"Sign Contract"}),e.jsx(P,{variant:"outlined",color:"error",startIcon:e.jsx(ps,{}),onClick:()=>u(!0),children:"Decline"})]}),i.status==="active"&&e.jsxs(e.Fragment,{children:[e.jsx(P,{variant:"outlined",color:"error",startIcon:e.jsx(jo,{}),onClick:()=>j(!0),children:"Raise Dispute"}),e.jsx(P,{variant:"outlined",startIcon:e.jsx(Si,{}),onClick:re,children:"Download"})]}),["completed","cancelled","disputed"].includes(i.status)&&e.jsx(P,{variant:"outlined",startIcon:e.jsx(Si,{}),onClick:re,children:"Download"})]})]})}),e.jsx(h,{item:!0,xs:12,children:e.jsxs(se,{elevation:0,sx:f=>({p:3,mb:4,backgroundColor:E(f.palette.primary.main,.7),backdropFilter:"blur(10px)",borderRadius:f.spacing(2),border:`2px solid ${f.palette.secondary.main}`,boxShadow:"inset 0 0 8px rgba(255, 215, 0, 0.5)",transition:"box-shadow 0.3s ease-in-out, border-color 0.3s ease-in-out","&:hover":{boxShadow:"0 0 12px rgba(255, 215, 0, 0.3), inset 0 0 8px rgba(255, 215, 0, 0.5)",borderColor:f.palette.secondary.light}}),children:[e.jsx(a,{variant:"h6",gutterBottom:!0,children:"Contract Details"}),e.jsx(fe,{sx:{mb:2}}),e.jsx(a,{variant:"body1",children:i.description||"No detailed description provided."})]})}),e.jsx(h,{item:!0,xs:12,children:e.jsxs(se,{elevation:0,sx:f=>({p:3,mb:4,backgroundColor:E(f.palette.primary.main,.7),backdropFilter:"blur(10px)",borderRadius:f.spacing(2),border:`2px solid ${f.palette.secondary.main}`,boxShadow:"inset 0 0 8px rgba(255, 215, 0, 0.5)",transition:"box-shadow 0.3s ease-in-out, border-color 0.3s ease-in-out","&:hover":{boxShadow:"0 0 12px rgba(255, 215, 0, 0.3), inset 0 0 8px rgba(255, 215, 0, 0.5)",borderColor:f.palette.secondary.light}}),children:[e.jsxs(o,{sx:{display:"flex",justifyContent:"space-between",mb:2},children:[e.jsx(a,{variant:"h6",children:"Milestones"}),e.jsxs(a,{variant:"subtitle1",children:["Progress: ",z(),"%"]})]}),e.jsx(fe,{sx:{mb:2}}),d.milestones?e.jsx(o,{sx:{display:"flex",justifyContent:"center",my:4},children:e.jsx(Ae,{})}):c.length===0?e.jsx(a,{variant:"body1",sx:{textAlign:"center",py:3},children:"No milestones defined for this contract."}):e.jsxs(e.Fragment,{children:[e.jsx(us,{activeStep:c.filter(f=>f.status==="completed").length,alternativeLabel:!0,children:c.map(f=>e.jsx(xs,{completed:f.status==="completed",children:e.jsx(hs,{children:f.title})},f.id))}),e.jsx(Ke,{sx:{mt:3},children:c.map(f=>{var M;return e.jsx(me,{sx:{mb:2},children:e.jsxs(ce,{children:[e.jsxs(o,{sx:{display:"flex",justifyContent:"space-between",mb:1},children:[e.jsx(a,{variant:"h6",children:f.title}),e.jsx(ee,{label:f.status.charAt(0).toUpperCase()+f.status.slice(1),color:Vi[f.status]||"default",size:"small"})]}),e.jsx(a,{variant:"body2",color:"text.secondary",gutterBottom:!0,children:f.description}),e.jsxs(o,{sx:{display:"flex",justifyContent:"space-between",mt:2},children:[e.jsxs(a,{variant:"body2",children:[e.jsx("strong",{children:"Due Date:"})," ",R(f.dueDate)]}),e.jsxs(a,{variant:"body2",children:[e.jsx("strong",{children:"Amount:"})," $",((M=f.amount)==null?void 0:M.toFixed(2))||"0.00"]})]}),i.status==="active"&&f.status==="pending"&&e.jsx(o,{sx:{display:"flex",justifyContent:"flex-end",mt:2},children:e.jsx(P,{variant:"outlined",size:"small",startIcon:e.jsx(wd,{}),onClick:()=>F(f.id),children:"Complete"})})]})},f.id)})})]})]})})]}),e.jsxs(Ee,{open:m,onClose:()=>u(!1),children:[e.jsx(Me,{children:i.status==="draft"?"Delete Contract":"Cancel Contract"}),e.jsxs(ze,{children:[e.jsx(ns,{children:i.status==="draft"?"Are you sure you want to delete this draft contract? This action cannot be undone.":"Please provide a reason for cancelling this contract. This action cannot be undone."}),i.status!=="draft"&&e.jsx(Q,{autoFocus:!0,margin:"dense",label:"Reason for cancellation",fullWidth:!0,multiline:!0,rows:3,value:v,onChange:f=>y(f.target.value)})]}),e.jsxs(Le,{children:[e.jsx(P,{onClick:()=>u(!1),children:"Cancel"}),e.jsx(P,{onClick:O,color:"error",disabled:i.status!=="draft"&&!v,children:i.status==="draft"?"Delete":"Cancel Contract"})]})]}),e.jsxs(Ee,{open:A,onClose:()=>w(!1),children:[e.jsx(Me,{children:"Sign Contract"}),e.jsxs(ze,{children:[e.jsx(ns,{children:"By signing this contract, you agree to all terms and conditions outlined in the document."}),e.jsx(Q,{autoFocus:!0,margin:"dense",label:"Your Name (as signature)",fullWidth:!0,value:p,onChange:f=>k(f.target.value)})]}),e.jsxs(Le,{children:[e.jsx(P,{onClick:()=>w(!1),children:"Cancel"}),e.jsx(P,{onClick:T,color:"primary",disabled:!p,children:"Sign Contract"})]})]}),e.jsxs(Ee,{open:g,onClose:()=>j(!1),children:[e.jsx(Me,{children:"Raise a Dispute"}),e.jsxs(ze,{children:[e.jsx(ns,{children:"Please provide details about the issue you're experiencing with this contract."}),e.jsx(Q,{margin:"dense",label:"Dispute Reason",fullWidth:!0,value:b.reason,onChange:f=>C({...b,reason:f.target.value}),sx:{mb:2}}),e.jsx(Q,{label:"Detailed Description",fullWidth:!0,multiline:!0,rows:4,value:b.description,onChange:f=>C({...b,description:f.target.value})})]}),e.jsxs(Le,{children:[e.jsx(P,{onClick:()=>j(!1),children:"Cancel"}),e.jsx(P,{onClick:V,color:"primary",disabled:!b.reason||!b.description,children:"Submit Dispute"})]})]}),e.jsx(xi,{open:U.open,message:U.message,severity:U.severity,onClose:()=>W({...U,open:!1}),fullWidth:!0})]})},ip={title:"",description:"",clientName:"",workerName:"",startDate:null,endDate:null,value:"",milestones:[{title:"",description:"",dueDate:null,amount:""}],templateId:""},op=()=>{const t=ot(),r=Oe(),s=je(_u),n=je(Bo),i=je(_o),[c,d]=l.useState(ip),[x,m]=l.useState(0),[u,v]=l.useState({}),[y,g]=l.useState(!1),[j,b]=l.useState(!1),[C,A]=l.useState({open:!1,message:"",severity:"info"}),[w,p]=l.useState(!1);l.useEffect(()=>{t(Ma())},[t]),l.useEffect(()=>{const f=M=>{w&&(M.preventDefault(),M.returnValue="")};return window.addEventListener("beforeunload",f),()=>window.removeEventListener("beforeunload",f)},[w]);const k=["Basic Details","Parties","Contract Terms","Milestones","Review"],U=f=>{p(!0);const{name:M,value:G}=f.target;d(I=>({...I,[M]:G}))},W=(f,M)=>{p(!0),d(G=>({...G,[f]:M}))},R=(f,M,G)=>{p(!0);const I=[...c.milestones];I[f]={...I[f],[M]:G},d(L=>({...L,milestones:I}))},K=()=>{p(!0),d(f=>({...f,milestones:[...f.milestones,{title:"",description:"",dueDate:null,amount:""}]}))},_=f=>{p(!0);const M=[...c.milestones];M.splice(f,1),d(G=>({...G,milestones:M}))},O=f=>{p(!0);const{value:M}=f.target;if(d(G=>({...G,templateId:M})),M){const G=s.find(I=>I.id===M);G&&d(I=>({...I,title:G.title||I.title,description:G.description||I.description}))}},T=()=>{const f={};switch(x){case 0:c.title.trim()||(f.title="Title is required"),c.description.trim()||(f.description="Description is required");break;case 1:c.clientName.trim()||(f.clientName="Client name is required"),c.workerName.trim()||(f.workerName="Worker name is required");break;case 2:c.startDate||(f.startDate="Start date is required"),c.endDate||(f.endDate="End date is required"),c.endDate&&c.startDate&&c.endDate<c.startDate&&(f.endDate="End date must be after start date"),c.value?(isNaN(c.value)||parseFloat(c.value)<=0)&&(f.value="Contract value must be a positive number"):f.value="Contract value is required";break;case 3:const M={};let G=0;c.milestones.forEach((I,L)=>{const S={};I.title.trim()||(S.title="Title is required"),I.dueDate||(S.dueDate="Due date is required"),I.amount?isNaN(I.amount)||parseFloat(I.amount)<=0?S.amount="Amount must be a positive number":G+=parseFloat(I.amount):S.amount="Amount is required",Object.keys(S).length>0&&(M[L]=S)}),Object.keys(M).length>0&&(f.milestones=M),G!==parseFloat(c.value)&&(f.totalAmount=`Milestone amounts (${G}) must equal contract value (${c.value})`);break}return v(f),Object.keys(f).length===0},H=()=>{T()&&m(f=>f+1)},F=()=>{m(f=>f-1)},V=()=>{T()&&t(Da(c)).unwrap().then(f=>{r(`/contracts/${f.id}`,{state:{toast:{open:!0,message:"Contract created successfully",severity:"success"}}})}).catch(f=>{A({open:!0,message:f||"Failed to create contract",severity:"error"})})},re=()=>{w?b(!0):r("/contracts")},z=f=>f?new Date(f).toLocaleDateString():"",J=f=>{switch(f){case 0:return e.jsxs(h,{container:!0,spacing:3,children:[e.jsx(h,{item:!0,xs:12,children:e.jsxs(Ne,{fullWidth:!0,variant:"outlined",margin:"normal",children:[e.jsx(Ye,{id:"template-label",children:"Contract Template (Optional)"}),e.jsxs(Ge,{labelId:"template-label",id:"templateId",name:"templateId",value:c.templateId,onChange:O,label:"Contract Template (Optional)",children:[e.jsx(Z,{value:"",children:e.jsx("em",{children:"No template"})}),s.map(M=>e.jsx(Z,{value:M.id,children:M.title},M.id))]}),e.jsx(Cd,{children:"Select a template to pre-fill contract details"})]})}),e.jsx(h,{item:!0,xs:12,children:e.jsx(Q,{required:!0,fullWidth:!0,id:"title",name:"title",label:"Contract Title",value:c.title,onChange:U,error:!!u.title,helperText:u.title||"Enter a descriptive title for the contract"})}),e.jsx(h,{item:!0,xs:12,children:e.jsx(Q,{required:!0,fullWidth:!0,id:"description",name:"description",label:"Contract Description",value:c.description,onChange:U,multiline:!0,rows:4,error:!!u.description,helperText:u.description||"Provide a detailed description of the contract scope and deliverables"})})]});case 1:return e.jsxs(h,{container:!0,spacing:3,children:[e.jsx(h,{item:!0,xs:12,md:6,children:e.jsx(Q,{required:!0,fullWidth:!0,id:"clientName",name:"clientName",label:"Client Name",value:c.clientName,onChange:U,error:!!u.clientName,helperText:u.clientName||"Enter the client name or company"})}),e.jsx(h,{item:!0,xs:12,md:6,children:e.jsx(Q,{required:!0,fullWidth:!0,id:"workerName",name:"workerName",label:"Worker Name",value:c.workerName,onChange:U,error:!!u.workerName,helperText:u.workerName||"Enter the worker name or company"})})]});case 2:return e.jsx($a,{dateAdapter:Ba,children:e.jsxs(h,{container:!0,spacing:3,children:[e.jsx(h,{item:!0,xs:12,md:6,children:e.jsx(en,{label:"Start Date *",value:c.startDate,onChange:M=>W("startDate",M),renderInput:M=>e.jsx(Q,{...M,fullWidth:!0,error:!!u.startDate,helperText:u.startDate||"Select contract start date"})})}),e.jsx(h,{item:!0,xs:12,md:6,children:e.jsx(en,{label:"End Date *",value:c.endDate,onChange:M=>W("endDate",M),renderInput:M=>e.jsx(Q,{...M,fullWidth:!0,error:!!u.endDate,helperText:u.endDate||"Select contract end date"}),minDate:c.startDate})}),e.jsx(h,{item:!0,xs:12,children:e.jsx(Q,{required:!0,fullWidth:!0,id:"value",name:"value",label:"Contract Value",value:c.value,onChange:U,type:"number",InputProps:{startAdornment:e.jsx(We,{position:"start",children:"$"})},error:!!u.value,helperText:u.value||"Enter the total contract value"})})]})});case 3:return e.jsx(h,{container:!0,spacing:3,children:e.jsxs(h,{item:!0,xs:12,children:[e.jsxs(o,{sx:{display:"flex",justifyContent:"space-between",mb:2},children:[e.jsx(a,{variant:"h6",children:"Define Milestones"}),e.jsx(P,{variant:"outlined",startIcon:e.jsx(Dt,{}),onClick:K,children:"Add Milestone"})]}),u.totalAmount&&e.jsx(be,{severity:"error",sx:{mb:2},children:u.totalAmount}),c.milestones.map((M,G)=>{var I,L,S,B,D,N,q,$;return e.jsxs(se,{sx:{p:2,mb:2},children:[e.jsxs(o,{sx:{display:"flex",justifyContent:"space-between",mb:1},children:[e.jsxs(a,{variant:"subtitle1",children:["Milestone ",G+1]}),c.milestones.length>1&&e.jsx(ne,{color:"error",onClick:()=>_(G),size:"small",children:e.jsx(Ct,{})})]}),e.jsxs(h,{container:!0,spacing:2,children:[e.jsx(h,{item:!0,xs:12,children:e.jsx(Q,{required:!0,fullWidth:!0,label:"Milestone Title",value:M.title,onChange:de=>R(G,"title",de.target.value),error:(L=(I=u.milestones)==null?void 0:I[G])==null?void 0:L.title,helperText:((B=(S=u.milestones)==null?void 0:S[G])==null?void 0:B.title)||"Enter milestone title"})}),e.jsx(h,{item:!0,xs:12,children:e.jsx(Q,{fullWidth:!0,label:"Description",value:M.description,onChange:de=>R(G,"description",de.target.value),multiline:!0,rows:2})}),e.jsx(h,{item:!0,xs:12,md:6,children:e.jsx($a,{dateAdapter:Ba,children:e.jsx(en,{label:"Due Date *",value:M.dueDate,onChange:de=>R(G,"dueDate",de),renderInput:de=>{var Pe,qe,at,xt;return e.jsx(Q,{...de,fullWidth:!0,error:(qe=(Pe=u.milestones)==null?void 0:Pe[G])==null?void 0:qe.dueDate,helperText:((xt=(at=u.milestones)==null?void 0:at[G])==null?void 0:xt.dueDate)||"Select milestone due date"})},minDate:c.startDate,maxDate:c.endDate})})}),e.jsx(h,{item:!0,xs:12,md:6,children:e.jsx(Q,{required:!0,fullWidth:!0,label:"Amount",value:M.amount,onChange:de=>R(G,"amount",de.target.value),type:"number",InputProps:{startAdornment:e.jsx(We,{position:"start",children:"$"})},error:(N=(D=u.milestones)==null?void 0:D[G])==null?void 0:N.amount,helperText:(($=(q=u.milestones)==null?void 0:q[G])==null?void 0:$.amount)||"Enter the milestone payment amount"})})]})]},G)}),c.milestones.length===0&&e.jsx(o,{sx:{textAlign:"center",py:3},children:e.jsx(a,{variant:"body1",color:"text.secondary",children:'No milestones defined. Click "Add Milestone" to create one.'})})]})});case 4:return e.jsxs(h,{container:!0,spacing:3,children:[e.jsx(h,{item:!0,xs:12,children:e.jsxs(se,{sx:{p:3},children:[e.jsx(a,{variant:"h6",gutterBottom:!0,children:"Contract Summary"}),e.jsx(fe,{sx:{mb:2}}),e.jsxs(h,{container:!0,spacing:2,children:[e.jsxs(h,{item:!0,xs:12,md:6,children:[e.jsx(a,{variant:"subtitle2",color:"text.secondary",children:"Title"}),e.jsx(a,{variant:"body1",gutterBottom:!0,children:c.title})]}),e.jsxs(h,{item:!0,xs:12,md:6,children:[e.jsx(a,{variant:"subtitle2",color:"text.secondary",children:"Value"}),e.jsxs(a,{variant:"body1",gutterBottom:!0,children:["$",parseFloat(c.value).toFixed(2)]})]}),e.jsxs(h,{item:!0,xs:12,md:6,children:[e.jsx(a,{variant:"subtitle2",color:"text.secondary",children:"Client"}),e.jsx(a,{variant:"body1",gutterBottom:!0,children:c.clientName})]}),e.jsxs(h,{item:!0,xs:12,md:6,children:[e.jsx(a,{variant:"subtitle2",color:"text.secondary",children:"Worker"}),e.jsx(a,{variant:"body1",gutterBottom:!0,children:c.workerName})]}),e.jsxs(h,{item:!0,xs:12,md:6,children:[e.jsx(a,{variant:"subtitle2",color:"text.secondary",children:"Start Date"}),e.jsx(a,{variant:"body1",gutterBottom:!0,children:z(c.startDate)})]}),e.jsxs(h,{item:!0,xs:12,md:6,children:[e.jsx(a,{variant:"subtitle2",color:"text.secondary",children:"End Date"}),e.jsx(a,{variant:"body1",gutterBottom:!0,children:z(c.endDate)})]}),e.jsxs(h,{item:!0,xs:12,children:[e.jsx(a,{variant:"subtitle2",color:"text.secondary",children:"Description"}),e.jsx(a,{variant:"body1",paragraph:!0,children:c.description})]})]})]})}),e.jsx(h,{item:!0,xs:12,children:e.jsxs(se,{sx:{p:3},children:[e.jsx(a,{variant:"h6",gutterBottom:!0,children:"Milestones"}),e.jsx(fe,{sx:{mb:2}}),c.milestones.map((M,G)=>e.jsxs(o,{sx:{mb:2,pb:2,borderBottom:G<c.milestones.length-1?"1px dashed #ddd":"none"},children:[e.jsxs(o,{sx:{display:"flex",justifyContent:"space-between",mb:1},children:[e.jsx(a,{variant:"subtitle1",children:M.title}),e.jsxs(a,{variant:"subtitle1",children:["$",parseFloat(M.amount).toFixed(2)]})]}),e.jsx(a,{variant:"body2",color:"text.secondary",gutterBottom:!0,children:M.description}),e.jsxs(a,{variant:"body2",children:["Due: ",z(M.dueDate)]})]},G))]})})]});default:return null}};return e.jsxs(ye,{maxWidth:"lg",sx:{mt:4,mb:8},children:[i.createContract&&e.jsxs(be,{severity:"error",sx:{mb:3},children:["Error creating contract: ",i.createContract]}),e.jsxs(o,{sx:{display:"flex",alignItems:"center",mb:4},children:[e.jsx(P,{startIcon:e.jsx(Rr,{}),onClick:re,variant:"outlined",color:"secondary",sx:{mr:2,borderWidth:2},children:"Back to Contracts"}),e.jsx(a,{variant:"h4",sx:{color:"secondary.main"},children:"Create New Contract"})]}),e.jsx(se,{elevation:0,sx:f=>({p:3,mb:4,backgroundColor:E(f.palette.primary.main,.7),backdropFilter:"blur(10px)",borderRadius:f.spacing(2),border:`2px solid ${f.palette.secondary.main}`,boxShadow:"inset 0 0 8px rgba(255, 215, 0, 0.5)",transition:"box-shadow 0.3s ease-in-out, border-color 0.3s ease-in-out","&:hover":{boxShadow:"0 0 12px rgba(255, 215, 0, 0.3), inset 0 0 8px rgba(255, 215, 0, 0.5)",borderColor:f.palette.secondary.light}}),children:e.jsx(us,{activeStep:x,alternativeLabel:!0,children:k.map(f=>e.jsx(xs,{children:e.jsx(hs,{children:f})},f))})}),e.jsx(se,{elevation:0,sx:f=>({p:3,mb:4,backgroundColor:E(f.palette.primary.main,.7),backdropFilter:"blur(10px)",borderRadius:f.spacing(2),border:`2px solid ${f.palette.secondary.main}`,boxShadow:"inset 0 0 8px rgba(255, 215, 0, 0.5)",transition:"box-shadow 0.3s ease-in-out, border-color 0.3s ease-in-out","&:hover":{boxShadow:"0 0 12px rgba(255, 215, 0, 0.3), inset 0 0 8px rgba(255, 215, 0, 0.5)",borderColor:f.palette.secondary.light}}),children:n.createContract?e.jsx(o,{sx:{display:"flex",justifyContent:"center",py:5},children:e.jsx(Ae,{})}):e.jsx(e.Fragment,{children:J(x)})}),e.jsxs(o,{sx:{display:"flex",justifyContent:"space-between"},children:[e.jsx(P,{variant:"outlined",color:"secondary",onClick:F,disabled:x===0,children:"Back"}),e.jsx(P,{variant:"contained",color:"secondary",onClick:()=>{x===k.length-1?T()&&g(!0):H()},children:x===k.length-1?"Create Contract":"Next"})]}),e.jsxs(Ee,{open:j,onClose:()=>b(!1),children:[e.jsx(Me,{children:"Discard changes?"}),e.jsx(ze,{children:e.jsx(ns,{children:"You have unsaved changes. Are you sure you want to leave and discard them?"})}),e.jsxs(Le,{children:[e.jsx(P,{onClick:()=>b(!1),children:"Cancel"}),e.jsx(P,{color:"error",onClick:()=>{b(!1),r("/contracts")},children:"Discard and Leave"})]})]}),e.jsxs(Ee,{open:y,onClose:()=>g(!1),children:[e.jsx(Me,{children:"Confirm Contract Creation"}),e.jsx(ze,{children:e.jsx(ns,{children:"Are you sure you want to create this contract? This action cannot be undone."})}),e.jsxs(Le,{children:[e.jsx(P,{onClick:()=>g(!1),children:"Cancel"}),e.jsx(P,{color:"primary",onClick:()=>{g(!1),V()},children:"Confirm"})]})]}),e.jsx(xi,{open:C.open,message:C.message,severity:C.severity,onClose:()=>A({...C,open:!1}),fullWidth:!0})]})},qi=[{label:"Job Details",icon:e.jsx(tt,{})},{label:"Description & Skills",icon:e.jsx($s,{})},{label:"Budget & Scope",icon:e.jsx(ct,{})},{label:"Location & Visibility",icon:e.jsx(nt,{})},{label:"Review & Publish",icon:e.jsx(Qn,{})}],Yi=({formData:t})=>{const r=ve();return e.jsxs(se,{elevation:3,sx:{p:3,position:"sticky",top:100,background:E(r.palette.background.default,.7),backdropFilter:"blur(10px)"},children:[e.jsx(a,{variant:"h5",gutterBottom:!0,children:"Job Preview"}),e.jsx(a,{variant:"h6",children:t.title||"Job Title"}),e.jsx(a,{variant:"subtitle1",color:"text.secondary",children:t.location||"Location"}),e.jsx(ee,{label:t.category||"Category",sx:{my:1}}),e.jsx(a,{variant:"body1",sx:{mt:2},children:t.description||"Job description will appear here."}),e.jsxs(o,{sx:{mt:2},children:[t.skills.map(s=>e.jsx(ee,{label:s,sx:{mr:1,mb:1}},s)),e.jsx(o,{sx:{mt:2},children:e.jsxs(a,{variant:"body2",children:[e.jsx("strong",{children:"Budget:"})," ",t.paymentType==="hourly"?`${t.budget.min||0} - ${t.budget.max||0} /hr`:`${t.budget.fixed||0}`]})}),e.jsx(o,{sx:{mt:1},children:e.jsxs(a,{variant:"body2",children:[e.jsx("strong",{children:"Expected Duration:"})," ",t.duration||"N/A"]})}),e.jsx(o,{sx:{mt:1},children:e.jsxs(a,{variant:"body2",children:[e.jsx("strong",{children:"Location:"})," ",t.locationType,t.locationType!=="remote"?` (${t.location||""})`:""]})}),e.jsx(o,{sx:{mt:1},children:e.jsxs(a,{variant:"body2",children:[e.jsx("strong",{children:"Requirements:"})," ",t.requirements||"N/A"]})})]})]})},lp=()=>{const t=Oe(),r=ot(),s=je(gs("jobs")),n=je(Ya("jobs")),[i,c]=l.useState(0),[d,x]=l.useState({title:"",category:"",skills:[],description:"",requirements:"",paymentType:"hourly",budget:{min:"",max:"",fixed:""},duration:"",locationType:"remote",location:""}),[m,u]=l.useState(!1),v=()=>c(w=>w+1),y=()=>c(w=>w-1),g=w=>{const{name:p,value:k}=w.target;if(p.includes(".")){const[U,W]=p.split(".");x(R=>({...R,[U]:{...R[U],[W]:k}}))}else x(U=>({...U,[p]:k}))},j=(w,p)=>{x(k=>({...k,skills:p}))},b=(w=!1)=>{r(Aa({...d,draft:w})).unwrap().then(()=>u(!0)).catch(()=>{})},C=()=>{switch(i){case 0:return!(d.title&&d.category);case 2:return d.paymentType==="hourly"?!(d.budget.min&&d.budget.max&&d.duration):!(d.budget.fixed&&d.duration);case 3:return!d.location;default:return!1}};if(m)return e.jsxs(ye,{maxWidth:"md",sx:{py:5,textAlign:"center"},children:[e.jsx(Ve,{color:"success",sx:{fontSize:80,mb:2}}),e.jsx(a,{variant:"h4",gutterBottom:!0,children:"Job Posted Successfully!"}),e.jsx(P,{variant:"contained",onClick:()=>t("/hirer/jobs"),sx:{mr:2},children:"Manage Jobs"}),e.jsx(P,{variant:"outlined",onClick:()=>{u(!1),c(0),x({title:"",category:"",skills:[],description:"",requirements:"",paymentType:"hourly",budget:{min:"",max:"",fixed:""},duration:"",locationType:"remote",location:""})},children:"Post Another Job"})]});const A=w=>{switch(w){case 0:return e.jsxs(e.Fragment,{children:[e.jsx(Q,{name:"title",label:"Job Title",value:d.title,onChange:g,fullWidth:!0,margin:"normal"}),e.jsxs(Ne,{fullWidth:!0,margin:"normal",children:[e.jsx(Ye,{children:"Category"}),e.jsx(Ge,{name:"category",value:d.category,label:"Category",onChange:g,children:["Web Development","Mobile Development","Design","Writing","Marketing"].map(p=>e.jsx(Z,{value:p,children:p},p))})]})]});case 1:return e.jsxs(e.Fragment,{children:[e.jsx(Q,{name:"description",label:"Job Description",value:d.description,onChange:g,multiline:!0,rows:6,fullWidth:!0,margin:"normal"}),e.jsx(Q,{name:"requirements",label:"Requirements",value:d.requirements,onChange:g,multiline:!0,rows:4,fullWidth:!0,margin:"normal"}),e.jsx(Os,{multiple:!0,freeSolo:!0,options:["Web Development","Mobile Development","Design","Writing","Marketing"],value:d.skills,onChange:j,renderTags:(p,k)=>p.map((U,W)=>e.jsx(ee,{label:U,...k({index:W})},U)),renderInput:p=>e.jsx(Q,{...p,label:"Skills",placeholder:"Add skill"}),sx:{mt:2}})]});case 2:return e.jsxs(e.Fragment,{children:[e.jsxs(Ne,{component:"fieldset",children:[e.jsx(a,{variant:"subtitle1",gutterBottom:!0,children:"Payment Type"}),e.jsxs(La,{row:!0,name:"paymentType",value:d.paymentType,onChange:g,children:[e.jsx(ft,{value:"hourly",control:e.jsx(sr,{}),label:"Hourly Rate"}),e.jsx(ft,{value:"fixed",control:e.jsx(sr,{}),label:"Fixed Price"})]})]}),e.jsxs(o,{sx:{display:"flex",flexWrap:"wrap",gap:2,mt:2},children:[d.paymentType==="hourly"?e.jsxs(e.Fragment,{children:[e.jsx(Q,{name:"budget.min",label:"Min Rate",value:d.budget.min,onChange:g,InputProps:{startAdornment:e.jsx(We,{position:"start",children:"$"})},fullWidth:!0,margin:"normal"}),e.jsx(Q,{name:"budget.max",label:"Max Rate",value:d.budget.max,onChange:g,InputProps:{startAdornment:e.jsx(We,{position:"start",children:"$"})},fullWidth:!0,margin:"normal"})]}):e.jsx(Q,{name:"budget.fixed",label:"Fixed Price",value:d.budget.fixed,onChange:g,InputProps:{startAdornment:e.jsx(We,{position:"start",children:"$"})},fullWidth:!0,margin:"normal"}),e.jsx(Q,{name:"duration",label:"Expected Duration",value:d.duration,onChange:g,placeholder:"e.g. 2 weeks",fullWidth:!0,margin:"normal"})]})]});case 3:return e.jsxs(e.Fragment,{children:[e.jsxs(Ne,{component:"fieldset",children:[e.jsx(a,{variant:"subtitle1",gutterBottom:!0,children:"Location Type"}),e.jsxs(La,{row:!0,name:"locationType",value:d.locationType,onChange:g,children:[e.jsx(ft,{value:"remote",control:e.jsx(sr,{}),label:"Remote"}),e.jsx(ft,{value:"onsite",control:e.jsx(sr,{}),label:"On-site"}),e.jsx(ft,{value:"hybrid",control:e.jsx(sr,{}),label:"Hybrid"})]})]}),e.jsx(Q,{name:"location",label:"Job Location",value:d.location,onChange:g,fullWidth:!0,margin:"normal"})]});case 4:return e.jsxs(e.Fragment,{children:[e.jsx(a,{variant:"h6",gutterBottom:!0,children:"Review & Publish"}),e.jsx(Yi,{formData:d})]});default:return null}};return e.jsxs(ye,{maxWidth:"lg",sx:{py:4},children:[n&&e.jsx(be,{severity:"error",sx:{mb:2},children:n}),e.jsx(Fr,{children:e.jsx("title",{children:"Post a Job | Kelmah"})}),e.jsxs(o,{sx:{mb:4},children:[e.jsx(a,{variant:"h4",component:"h1",gutterBottom:!0,children:"Post a Job"}),e.jsx(a,{variant:"body1",color:"text.secondary",children:"Create a detailed job posting to find the perfect talent for your project"})]}),e.jsx(us,{activeStep:i,sx:{mb:4},children:qi.map(w=>e.jsx(xs,{children:e.jsx(hs,{StepIconComponent:()=>w.icon,children:w.label})},w.label))}),e.jsxs(h,{container:!0,spacing:3,children:[e.jsx(h,{item:!0,xs:12,md:8,children:e.jsx(se,{sx:{p:3,mb:3},children:A(i)})}),e.jsx(h,{item:!0,xs:12,md:4,children:e.jsx(Yi,{formData:d})})]}),i!==5&&e.jsxs(o,{sx:{display:"flex",justifyContent:"space-between",mb:2},children:[e.jsx(P,{variant:"outlined",onClick:y,startIcon:e.jsx(Rr,{}),disabled:i===0,children:"Back"}),e.jsx(o,{children:i===qi.length-1?e.jsxs(e.Fragment,{children:[e.jsx(P,{variant:"outlined",onClick:()=>b(!0),startIcon:e.jsx(yo,{}),sx:{mr:1},disabled:s,children:"Save as Draft"}),e.jsx(P,{variant:"contained",onClick:()=>b(!1),endIcon:e.jsx(Qn,{}),disabled:s,color:"primary",children:s?e.jsx(Ae,{size:24}):"Post Job"})]}):e.jsx(P,{variant:"contained",onClick:v,endIcon:e.jsx(ti,{}),disabled:C(),children:"Next"})})]})]})},cp=({status:t})=>{const s=(n=>{switch(n){case"active":return{label:"Active",color:"success",icon:e.jsx(Ve,{})};case"paused":return{label:"Paused",color:"warning",icon:e.jsx(Do,{})};case"expired":return{label:"Expired",color:"error",icon:e.jsx(cs,{})};case"closed":return{label:"Closed",color:"error",icon:e.jsx(vr,{})};case"draft":return{label:"Draft",color:"default",icon:e.jsx(Ks,{})};default:return{label:"Unknown",color:"default",icon:null}}})(t);return e.jsx(ee,{icon:s.icon,label:s.label,color:s.color,size:"small",sx:{fontWeight:500}})},dp=()=>{const t=ve(),r=Oe(),s=ot(),n=Te(t.breakpoints.down("md")),i=je(D=>D.hirer.jobs),c=je(gs("jobs")),d=je(Ya("jobs")),x=l.useMemo(()=>Object.values(i).flat(),[i]);je(D=>D.auth);const[m,u]=l.useState(0),[v,y]=l.useState(""),[g,j]=l.useState(null),[b,C]=l.useState(null),[A,w]=l.useState(!1),[p,k]=l.useState(0),[U,W]=l.useState(10);l.useEffect(()=>{["active","draft","completed","cancelled","paused"].forEach(D=>{s(_t(D))})},[s]);const R=["all","active","paused","expired","closed","draft"],K=x.filter(D=>{const N=m===0||D.status===R[m],q=v===""||D.title.toLowerCase().includes(v.toLowerCase())||D.location.toLowerCase().includes(v.toLowerCase());return N&&q}),_=K.slice(p*U,p*U+U),O=(D,N)=>{u(N),k(0)},T=D=>{y(D.target.value),k(0)},H=()=>{r("/hirer/jobs/post")},F=D=>{r(`/jobs/edit/${D}`),J()},V=D=>{r(`/jobs/${D}`),J()},re=D=>{r(`/hirer/applications?jobId=${D}`),J()},z=(D,N)=>{j(D.currentTarget),C(N)},J=()=>{j(null)},f=D=>{b&&s(li({jobId:b.id,status:D})),J()},M=()=>{b&&(s(ci(b.id)),w(!1)),J()},G=()=>{w(!0),J()},I=()=>{w(!1)},L=(D,N)=>{k(N)},S=D=>{W(parseInt(D.target.value,10)),k(0)},B=()=>{["active","draft","completed","cancelled","paused"].forEach(D=>{s(_t(D))})};return e.jsxs(ye,{maxWidth:"lg",sx:{py:4},children:[e.jsxs(o,{sx:{mb:4},children:[e.jsxs(o,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",flexWrap:"wrap",gap:2},children:[e.jsx(a,{variant:"h4",gutterBottom:!0,fontWeight:"bold",children:"Job Management"}),e.jsx(P,{variant:"contained",color:"primary",startIcon:e.jsx(Dt,{}),onClick:H,size:n?"small":"medium",children:"Post a New Job"})]}),e.jsx(a,{variant:"body1",color:"text.secondary",children:"Manage your job postings and track applications"})]}),d&&e.jsx(be,{severity:"error",sx:{mb:3},children:d}),e.jsxs(se,{sx:{mb:4,borderRadius:2},children:[e.jsxs(o,{sx:{p:{xs:2,md:3},display:"flex",justifyContent:"space-between",alignItems:"center",flexWrap:"wrap",gap:2},children:[e.jsx(Q,{placeholder:"Search jobs...",value:v,onChange:T,size:n?"small":"medium",InputProps:{startAdornment:e.jsx(We,{position:"start",children:e.jsx(dt,{})})},sx:{width:{xs:"100%",sm:"auto"},minWidth:{sm:300}}}),e.jsx(o,{children:e.jsx(xe,{title:"Refresh Jobs",children:e.jsx(ne,{onClick:B,disabled:c,children:e.jsx(Jr,{})})})})]}),e.jsxs($t,{value:m,onChange:O,indicatorColor:"primary",textColor:"primary",variant:n?"scrollable":"fullWidth",scrollButtons:n?"auto":!1,sx:{borderBottom:1,borderColor:"divider","& .MuiTab-root":{textTransform:"none",fontWeight:500,fontSize:"0.9rem"}},children:[e.jsx(Ce,{label:e.jsxs(o,{sx:{display:"flex",alignItems:"center"},children:["All Jobs",x.length>0&&e.jsx(ee,{label:x.length,size:"small",sx:{ml:1,height:20,fontSize:"0.75rem"}})]})}),e.jsx(Ce,{label:e.jsxs(o,{sx:{display:"flex",alignItems:"center"},children:["Active",x.filter(D=>D.status==="active").length>0&&e.jsx(ee,{label:x.filter(D=>D.status==="active").length,size:"small",color:"success",sx:{ml:1,height:20,fontSize:"0.75rem"}})]})}),e.jsx(Ce,{label:e.jsxs(o,{sx:{display:"flex",alignItems:"center"},children:["Paused",x.filter(D=>D.status==="paused").length>0&&e.jsx(ee,{label:x.filter(D=>D.status==="paused").length,size:"small",color:"warning",sx:{ml:1,height:20,fontSize:"0.75rem"}})]})}),e.jsx(Ce,{label:e.jsxs(o,{sx:{display:"flex",alignItems:"center"},children:["Expired",x.filter(D=>D.status==="expired").length>0&&e.jsx(ee,{label:x.filter(D=>D.status==="expired").length,size:"small",color:"error",sx:{ml:1,height:20,fontSize:"0.75rem"}})]})}),e.jsx(Ce,{label:e.jsxs(o,{sx:{display:"flex",alignItems:"center"},children:["Closed",x.filter(D=>D.status==="closed").length>0&&e.jsx(ee,{label:x.filter(D=>D.status==="closed").length,size:"small",color:"error",sx:{ml:1,height:20,fontSize:"0.75rem"}})]})}),e.jsx(Ce,{label:e.jsxs(o,{sx:{display:"flex",alignItems:"center"},children:["Drafts",x.filter(D=>D.status==="draft").length>0&&e.jsx(ee,{label:x.filter(D=>D.status==="draft").length,size:"small",sx:{ml:1,height:20,fontSize:"0.75rem"}})]})})]}),e.jsx(o,{sx:{p:{xs:2,md:3}},children:c?e.jsx(o,{sx:{display:"flex",justifyContent:"center",p:4},children:e.jsx(Ae,{})}):K.length===0?e.jsxs(o,{sx:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",py:6},children:[e.jsx(kd,{sx:{fontSize:48,color:"text.secondary",mb:2}}),e.jsx(a,{variant:"h6",gutterBottom:!0,children:"No jobs found"}),e.jsx(a,{variant:"body2",color:"text.secondary",gutterBottom:!0,children:v?"No jobs match your search criteria. Try changing your search terms.":"You have no jobs in this category yet."}),e.jsx(P,{variant:"contained",startIcon:e.jsx(Dt,{}),onClick:H,sx:{mt:2},children:"Post a New Job"})]}):e.jsxs(e.Fragment,{children:[e.jsx(Hr,{sx:{overflowX:"auto"},children:e.jsxs(Gr,{sx:{minWidth:650},children:[e.jsx(Vr,{children:e.jsxs(It,{children:[e.jsx(ae,{children:"Job Title"}),e.jsx(ae,{children:"Status"}),e.jsx(ae,{children:"Applications"}),e.jsx(ae,{children:"Posted"}),e.jsx(ae,{children:"Expiry"}),e.jsx(ae,{align:"right",children:"Actions"})]})}),e.jsx(qr,{children:c?Array.from(new Array(U)).map((D,N)=>e.jsxs(It,{children:[e.jsx(ae,{children:e.jsx(ie,{})}),e.jsx(ae,{children:e.jsx(ie,{})}),e.jsx(ae,{children:e.jsx(ie,{})}),e.jsx(ae,{children:e.jsx(ie,{})}),e.jsx(ae,{children:e.jsx(ie,{})}),e.jsx(ae,{align:"right",children:e.jsx(ie,{})})]},`skeleton-${N}`)):_.map(D=>{var N;return e.jsxs(It,{sx:{"&:hover":{bgcolor:"action.hover"},cursor:"pointer"},children:[e.jsxs(ae,{onClick:()=>V(D.id),sx:{fontWeight:500},children:[D.title,e.jsxs(o,{sx:{display:"flex",mt:.5},children:[e.jsx(a,{variant:"caption",color:"text.secondary",sx:{mr:2},children:D.location}),e.jsxs(a,{variant:"caption",color:"text.secondary",children:["$",D.hourlyRate,"/hr"]})]})]}),e.jsx(ae,{children:e.jsx(cp,{status:D.status})}),e.jsx(ae,{children:e.jsx(mt,{badgeContent:((N=D.applications)==null?void 0:N.length)||0,color:"primary",max:999,showZero:!0,children:e.jsx(Bs,{color:"action"})})}),e.jsx(ae,{children:D.postedDate}),e.jsx(ae,{children:D.expiryDate}),e.jsx(ae,{align:"right",children:e.jsxs(o,{sx:{display:"flex",justifyContent:"flex-end"},children:[e.jsx(xe,{title:"View Applications",children:e.jsx(ne,{size:"small",onClick:()=>re(D.id),sx:{mr:1},children:e.jsx(Lt,{})})}),e.jsx(xe,{title:"View Job",children:e.jsx(ne,{size:"small",onClick:()=>V(D.id),sx:{mr:1},children:e.jsx(Et,{})})}),e.jsx(xe,{title:"Edit Job",children:e.jsx(ne,{size:"small",onClick:()=>F(D.id),sx:{mr:1},children:e.jsx(ur,{})})}),e.jsx(xe,{title:"More Options",children:e.jsx(ne,{size:"small",onClick:q=>z(q,D),children:e.jsx(Ur,{})})})]})})]},D.id)})})]})}),e.jsx(go,{rowsPerPageOptions:[5,10,25],component:"div",count:K.length,rowsPerPage:U,page:p,onPageChange:L,onRowsPerPageChange:S})]})})]}),e.jsxs(Xt,{anchorEl:g,open:!!g,onClose:J,children:[e.jsxs(Z,{onClick:()=>F(b==null?void 0:b.id),children:[e.jsx(ur,{fontSize:"small",sx:{mr:1}}),"Edit Job"]}),e.jsxs(Z,{onClick:()=>V(b==null?void 0:b.id),children:[e.jsx(Et,{fontSize:"small",sx:{mr:1}}),"View Job"]}),e.jsxs(Z,{onClick:()=>re(b==null?void 0:b.id),children:[e.jsx(Lt,{fontSize:"small",sx:{mr:1}}),"View Applications"]}),e.jsx(fe,{}),(b==null?void 0:b.status)!=="active"&&e.jsxs(Z,{onClick:()=>f("active"),children:[e.jsx(Ve,{fontSize:"small",sx:{mr:1,color:"success.main"}}),"Set as Active"]}),(b==null?void 0:b.status)!=="paused"&&e.jsxs(Z,{onClick:()=>f("paused"),children:[e.jsx(Do,{fontSize:"small",sx:{mr:1,color:"warning.main"}}),"Pause Job"]}),(b==null?void 0:b.status)!=="closed"&&e.jsxs(Z,{onClick:()=>f("closed"),children:[e.jsx(vr,{fontSize:"small",sx:{mr:1,color:"error.main"}}),"Close Job"]}),e.jsx(fe,{}),e.jsxs(Z,{onClick:G,sx:{color:"error.main"},children:[e.jsx(Ct,{fontSize:"small",sx:{mr:1}}),"Delete Job"]})]}),e.jsxs(Ee,{open:A,onClose:I,children:[e.jsx(Me,{children:"Delete Job"}),e.jsx(ze,{children:e.jsxs(ns,{children:['Are you sure you want to delete "',b==null?void 0:b.title,'"? This action cannot be undone.']})}),e.jsxs(Le,{children:[e.jsx(P,{onClick:I,children:"Cancel"}),e.jsx(P,{onClick:M,color:"error",variant:"contained",children:"Delete"})]})]})]})},Ue=({isAllowed:t,roles:r,redirectPath:s="/login",children:n,loading:i=!1})=>{ot();const{user:c,isAuthenticated:d}=je(m=>m.auth),x=Array.isArray(r)?d&&c&&r.includes(c.role):t;return i?e.jsx(o,{sx:{display:"flex",justifyContent:"center",alignItems:"center",height:"80vh"},children:e.jsx(Ae,{})}):x?n:e.jsx(ts,{to:s,replace:!0})};Ue.propTypes={isAllowed:Y.bool.isRequired,roles:Y.arrayOf(Y.string),redirectPath:Y.string,children:Y.node.isRequired,loading:Y.bool};const up=new Intl.NumberFormat("en-GH",{style:"currency",currency:"GHS"}),gl=({transactions:t=[],loading:r=!1,limit:s})=>{if(r)return e.jsx(o,{children:[...Array(s||3)].map((i,c)=>e.jsx(ie,{variant:"rectangular",height:60,sx:{mb:2,borderRadius:2}},c))});const n=s?t.slice(0,s):t;return!r&&n.length===0?e.jsxs(se,{sx:{p:3,borderRadius:2,textAlign:"center"},children:[e.jsx(a,{variant:"h6",fontWeight:"bold",sx:{mb:2},children:"Recent Transactions"}),e.jsx(a,{color:"text.secondary",children:"No transactions found."})]}):e.jsxs(se,{sx:{p:3,borderRadius:2},children:[e.jsx(a,{variant:"h6",fontWeight:"bold",sx:{mb:2},children:"Recent Transactions"}),e.jsx(Ke,{children:n.map((i,c)=>e.jsxs(Rt.Fragment,{children:[e.jsxs(Be,{children:[e.jsx(Ze,{children:e.jsx(xe,{title:i.type==="deposit"?"Money received":"Money spent",children:e.jsx(we,{sx:{bgcolor:i.type==="deposit"?"success.light":"error.light"},children:i.type==="deposit"?e.jsx(ai,{}):e.jsx(_a,{})})})}),e.jsx(Ie,{primary:i.title||i.description,secondary:wt(new Date(i.date),"d MMMM yyyy, hh:mm a")}),e.jsx(xe,{title:i.type==="deposit"?"Amount received":"Amount paid",children:e.jsx(a,{color:i.type==="deposit"?"success.main":"error.main",fontWeight:"bold",children:(i.type==="deposit"?"+":"-")+up.format(i.amount)})})]}),c<n.length-1&&e.jsx(fe,{variant:"inset",component:"li"})]},i.id))})]})};Jt`
  0% { transform: translateY(0px); }
  50% { transform: translateY(-20px); }
  100% { transform: translateY(0px); }
`;Jt`
  0% { transform: scale(1); }
  50% { transform: scale(1.05); }
  100% { transform: scale(1); }
`;Jt`
  0% { background-position: -1000px 0; }
  100% { background-position: 1000px 0; }
`;Jt`
  from { transform: rotate(0deg); }
  to { transform: rotate(360deg); }
`;Jt`
  from {
    opacity: 0;
    transform: translateY(20px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
`;Jt`
  0% { transform: rotate(0deg); }
  10% { transform: rotate(14deg); }
  20% { transform: rotate(-8deg); }
  30% { transform: rotate(14deg); }
  40% { transform: rotate(-4deg); }
  50% { transform: rotate(10deg); }
  60% { transform: rotate(0deg); }
  100% { transform: rotate(0deg); }
`;Jt`
  0% { background-position: 0% 50%; }
  50% { background-position: 100% 50%; }
  100% { background-position: 0% 50%; }
`;Jt`
  from {
    transform: translateX(-100%);
    opacity: 0;
  }
  to {
    transform: translateX(0);
    opacity: 1;
  }
`;Jt`
  0% {
    transform: scale(0.3);
    opacity: 0;
  }
  50% {
    transform: scale(1.05);
    opacity: 0.8;
  }
  70% { transform: scale(0.9); }
  100% {
    transform: scale(1);
    opacity: 1;
  }
`;const xp=Jt`
  0% {
    box-shadow: 0 0 5px rgba(255,215,0,0.2);
  }
  50% {
    box-shadow: 0 0 20px rgba(255,215,0,0.6);
  }
  100% {
    box-shadow: 0 0 5px rgba(255,215,0,0.2);
  }
`,hi=new Intl.NumberFormat("en-GH",{style:"currency",currency:"GHS"}),hp=({balance:t,onDepositClick:r,onWithdrawClick:s})=>e.jsxs(se,{elevation:4,sx:{p:3,borderRadius:2,background:"linear-gradient(to right, #28313b, #485461, #ffd700)",color:"white",border:"2px solid",borderColor:"secondary.main"},children:[e.jsxs(o,{sx:{display:"flex",alignItems:"center",mb:1},children:[e.jsx(Sd,{sx:{mr:1.5,fontSize:32,opacity:.9,color:"secondary.main"}}),e.jsx(a,{variant:"h6",sx:{opacity:.9,color:"secondary.main"},children:"Wallet Balance"})]}),e.jsx(a,{variant:"h3",fontWeight:"bold",sx:{my:1},children:hi.format(t)}),e.jsxs(o,{sx:{mt:3,display:"flex",gap:2},children:[e.jsx(P,{variant:"contained",color:"success",startIcon:e.jsx(ai,{}),onClick:r,children:"Deposit"}),e.jsx(P,{variant:"contained",color:"warning",startIcon:e.jsx(_a,{}),onClick:s,children:"Withdraw"})]})]}),pp=({methods:t})=>!t||t.length===0?e.jsxs(se,{sx:{p:3,borderRadius:2,textAlign:"center"},children:[e.jsx(a,{variant:"h6",fontWeight:"bold",sx:{mb:2},children:"Methods"}),e.jsx(a,{color:"text.secondary",children:"You have no methods saved."})]}):e.jsxs(se,{sx:{p:3,borderRadius:2},children:[e.jsxs(o,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:2},children:[e.jsx(a,{variant:"h6",fontWeight:"bold",children:"Methods"}),e.jsx(xe,{title:"Add method",children:e.jsx(P,{variant:"contained",color:"secondary",sx:{boxShadow:"0 2px 8px rgba(255,215,0,0.4)"},startIcon:e.jsx(Dt,{}),component:Fe,to:"/payment/methods",children:"Add"})})]}),e.jsx(h,{container:!0,spacing:2,children:t.map(r=>e.jsx(h,{item:!0,xs:12,md:6,children:e.jsxs(me,{variant:"outlined",sx:{p:1,position:"relative"},children:[r.isDefault&&e.jsx(xe,{title:"Default method",children:e.jsx(ee,{label:"Default",color:"primary",size:"small",sx:{position:"absolute",top:8,right:8}})}),e.jsxs(ce,{children:[e.jsxs(o,{sx:{display:"flex",alignItems:"center",mb:1},children:[e.jsx(xe,{title:r.type==="card"?"Card payment":"Mobile money",children:r.type==="card"?e.jsx(Pr,{sx:{mr:1.5,fontSize:30},color:"action"}):e.jsx(Ad,{sx:{mr:1.5,fontSize:30},color:"action"})}),e.jsx(a,{variant:"subtitle1",children:r.name})]}),e.jsx(a,{color:"text.secondary",sx:{ml:"38px"},children:r.cardNumber||r.phoneNumber}),e.jsxs(o,{sx:{mt:2,display:"flex",gap:1,justifyContent:"flex-end"},children:[e.jsx(xe,{title:"Edit this method",children:e.jsx(ne,{size:"small",children:e.jsx(ur,{})})}),e.jsx(xe,{title:"Delete this method",children:e.jsx(ne,{size:"small",color:"error",children:e.jsx(Ct,{})})})]})]})]})},r.id))})]}),mp=t=>{switch(t){case"Funded":return e.jsx(ee,{icon:e.jsx(Ve,{}),label:t,color:"success",size:"small",variant:"outlined"});case"Pending Release":return e.jsx(ee,{icon:e.jsx(Ks,{}),label:t,color:"warning",size:"small",variant:"outlined"});default:return e.jsx(ee,{icon:e.jsx(Io,{}),label:t,color:"default",size:"small",variant:"outlined"})}},gp=({escrows:t})=>!t||t.length===0?e.jsxs(se,{sx:{p:3,borderRadius:2,textAlign:"center"},children:[e.jsx(a,{variant:"h6",fontWeight:"bold",sx:{mb:2},children:"Active Escrows"}),e.jsx(a,{color:"text.secondary",children:"You have no active escrows."})]}):e.jsxs(se,{sx:{p:3,borderRadius:2},children:[e.jsxs(a,{variant:"h6",fontWeight:"bold",sx:{mb:2},children:["Active Escrows (",t.length,")"]}),e.jsx(h,{container:!0,spacing:3,children:t.map(r=>e.jsx(h,{item:!0,xs:12,md:6,children:e.jsx(me,{variant:"outlined",children:e.jsxs(ce,{children:[e.jsxs(o,{sx:{display:"flex",alignItems:"flex-start",gap:2},children:[e.jsx(we,{sx:{bgcolor:"transparent",color:r.status==="Funded"?"success.main":r.status==="Pending Release"?"warning.main":"text.secondary"},children:r.status==="Funded"?e.jsx(Ve,{}):r.status==="Pending Release"?e.jsx(Ks,{}):e.jsx(Io,{})}),e.jsxs(o,{sx:{flexGrow:1},children:[e.jsx(a,{variant:"body2",color:"text.secondary",children:r.otherParty}),e.jsx(a,{variant:"h6",component:"div",fontWeight:"bold",children:r.title})]}),mp(r.status)]}),e.jsx(a,{sx:{my:2,fontSize:24,fontWeight:"bold"},color:"primary.main",children:hi.format(r.amount)}),e.jsx(o,{sx:{display:"flex",justifyContent:"flex-end",gap:1,mt:1},children:e.jsx(xe,{title:"View escrow contract details",children:e.jsx(P,{variant:"contained",color:"secondary",size:"small",sx:{boxShadow:"0 2px 8px rgba(255,215,0,0.4)"},component:Fe,to:`/contracts/${r.contractId}`,children:"View Contract"})})})]})})},r.id))})]}),pa=({icon:t,count:r,label:s})=>e.jsxs(se,{elevation:2,sx:{p:2,borderRadius:2,textAlign:"center",transition:"transform 0.2s",animation:`${xp} 3s ease-in-out infinite`,border:"2px solid",borderColor:"secondary.main","&:hover":{transform:"scale(1.03)",boxShadow:"0 4px 20px rgba(255,215,0,0.3)"}},children:[e.jsx(t,{sx:{fontSize:28,mb:.5,color:"secondary.main"}}),e.jsx(a,{variant:"h5",fontWeight:"bold",sx:{color:"secondary.main"},children:r}),e.jsx(a,{variant:"caption",sx:{color:"text.secondary"},children:s})]}),bp=({bills:t,actionLoading:r,onPayBill:s})=>!t||t.length===0?e.jsxs(se,{sx:{p:3,borderRadius:2,textAlign:"center"},children:[e.jsx(a,{variant:"h6",fontWeight:"bold",sx:{mb:2},children:"Your Bills"}),e.jsx(a,{sx:{color:"text.secondary"},children:"You have no bills to pay at this time."})]}):e.jsxs(se,{sx:{p:3,borderRadius:2},children:[e.jsx(a,{variant:"h6",fontWeight:"bold",sx:{mb:2},children:"Your Bills"}),e.jsx(Ke,{children:t.map((n,i)=>e.jsxs(Rt.Fragment,{children:[e.jsxs(Be,{secondaryAction:n.status==="unpaid"?e.jsx(xe,{title:"Pay this bill",children:e.jsx(P,{variant:"contained",color:"secondary",size:"small",sx:{boxShadow:"0 2px 8px rgba(255,215,0,0.4)"},onClick:()=>s(n.id),disabled:r===n.id,children:r===n.id?e.jsx(Ae,{size:20}):"Pay"})}):null,children:[e.jsx(Ze,{children:n.status==="paid"?e.jsx(Ve,{color:"success"}):n.status==="unpaid"?e.jsx(Ks,{color:"warning"}):e.jsx(Ro,{color:"error"})}),e.jsx(Ie,{primary:n.title,secondary:`Due: ${wt(new Date(n.dueDate),"d MMMM yyyy")}`}),e.jsx(a,{fontWeight:"bold",color:n.status==="overdue"?"error.main":n.status==="paid"?"success.main":"text.primary",sx:{ml:2},children:hi.format(n.amount)}),e.jsx(ee,{label:n.status.charAt(0).toUpperCase()+n.status.slice(1),size:"small",color:n.status==="paid"?"success":n.status==="overdue"?"error":"warning",sx:{ml:1}})]}),i<t.length-1&&e.jsx(fe,{variant:"inset",component:"li"})]},n.id))})]}),bl=()=>{const{loading:t,error:r,walletBalance:s,transactions:n,paymentMethods:i,escrows:c,bills:d,actionLoading:x,payBill:m,addFunds:u,withdrawFunds:v,fetchTransactions:y}=Ka(),g=ve(),[j,b]=l.useState(0),[C,A]=l.useState(!1),[w,p]=l.useState(!1),[k,U]=l.useState(""),[W,R]=l.useState(""),[K,_]=l.useState(""),[O,T]=l.useState(""),[H,F]=l.useState("all"),V=()=>{z(1);const ke={};K&&(ke.startDate=K),O&&(ke.endDate=O),H!=="all"&&(ke.type=H),y(ke)},[re,z]=l.useState(1),J=5,f=Math.ceil(n.length/J),M=n.slice((re-1)*J,re*J),[G,I]=l.useState(""),[L,S]=l.useState(""),[B,D]=l.useState("all"),[N,q]=l.useState(""),[$,de]=l.useState(""),[Pe,qe]=l.useState("all"),[at,xt]=l.useState(1),kt=5,er=()=>{q(G),de(L),qe(B),xt(1)},hr=()=>{I(""),S(""),D("all"),q(""),de(""),qe("all"),xt(1)},X=d.filter(ke=>{let pt=!0;return N&&(pt=pt&&new Date(ke.dueDate)>=new Date(N)),$&&(pt=pt&&new Date(ke.dueDate)<=new Date($)),Pe!=="all"&&(pt=pt&&ke.status===Pe),pt}),oe=Math.ceil(X.length/kt),le=X.slice((at-1)*kt,at*kt),[Re,_e]=l.useState("all"),[it,bt]=l.useState("all"),[ht,Ut]=l.useState(1),bs=5,Xa=()=>{bt(Re),Ut(1)},Zs=c.filter(ke=>it==="all"||ke.status===it),ea=Math.ceil(Zs.length/bs),Qa=Zs.slice((ht-1)*bs,ht*bs),ta=()=>{U(""),R(""),A(!0)},ue=()=>A(!1),$e=()=>{U(""),R(""),p(!0)},gt=()=>p(!1),pr=(ke,pt)=>b(pt);return t?e.jsx(ye,{sx:{py:4},children:e.jsx(ie,{variant:"rectangular",height:300})}):r?e.jsx(ye,{sx:{py:4},children:e.jsx(be,{severity:"error",children:r})}):e.jsxs(ye,{maxWidth:"xl",sx:{py:4},children:[e.jsx(a,{variant:"h4",fontWeight:"bold",sx:{mb:1,color:"secondary.main"},children:"Payments"}),e.jsx(a,{color:"text.secondary",sx:{mb:4},children:"Manage your wallet, transactions, and payment methods."}),e.jsxs(h,{container:!0,spacing:4,children:[e.jsx(h,{item:!0,xs:12,lg:4,children:e.jsx(hp,{balance:s,onDepositClick:ta,onWithdrawClick:$e})}),e.jsxs(h,{item:!0,xs:12,lg:8,children:[e.jsxs(h,{container:!0,spacing:2,sx:{mb:3},children:[e.jsx(h,{item:!0,xs:3,children:e.jsx(pa,{icon:Ai,count:n.length,label:"Transactions"})}),e.jsx(h,{item:!0,xs:3,children:e.jsx(pa,{icon:Pr,count:i.length,label:"Methods"})}),e.jsx(h,{item:!0,xs:3,children:e.jsx(pa,{icon:Ln,count:c.length,label:"Escrows"})}),e.jsx(h,{item:!0,xs:3,children:e.jsx(pa,{icon:_n,count:d.length,label:"Bills"})})]}),e.jsx(o,{sx:{borderBottom:1,borderColor:"divider",mb:3},children:e.jsxs($t,{value:j,onChange:pr,"aria-label":"payment center tabs",indicatorColor:"secondary",textColor:"inherit",sx:{"& .MuiTab-root":{color:"text.secondary"},"& .Mui-selected":{color:"secondary.main"}},children:[e.jsx(Ce,{icon:e.jsx(Ai,{}),iconPosition:"start",label:"Transactions"}),e.jsx(Ce,{icon:e.jsx(Pr,{}),iconPosition:"start",label:"Payment Methods"}),e.jsx(Ce,{icon:e.jsx(Ln,{}),iconPosition:"start",label:"Active Escrows"}),e.jsx(Ce,{icon:e.jsx(_n,{}),iconPosition:"start",label:"Bills"})]})}),j===0&&e.jsxs(e.Fragment,{children:[e.jsxs(o,{sx:{mb:3,display:"flex",gap:2,alignItems:"center"},children:[e.jsx(xe,{title:"Transactions from this date",children:e.jsx(Q,{label:"From",type:"date",value:K,onChange:ke=>_(ke.target.value),InputLabelProps:{shrink:!0}})}),e.jsx(xe,{title:"Transactions up to this date",children:e.jsx(Q,{label:"To",type:"date",value:O,onChange:ke=>T(ke.target.value),InputLabelProps:{shrink:!0}})}),e.jsx(xe,{title:"Filter by type",children:e.jsxs(Ne,{sx:{minWidth:140},children:[e.jsx(Ye,{children:"Type"}),e.jsxs(Ge,{value:H,label:"Type",onChange:ke=>F(ke.target.value),children:[e.jsx(Z,{value:"all",children:"All"}),e.jsx(Z,{value:"deposit",children:"Deposit"}),e.jsx(Z,{value:"withdrawal",children:"Withdrawal"})]})]})}),e.jsx(xe,{title:"Filter",children:e.jsx(P,{variant:"outlined",onClick:V,children:"Filter"})})]}),e.jsx(gl,{transactions:M,loading:t}),f>1&&e.jsx(o,{sx:{mt:2,display:"flex",justifyContent:"center"},children:e.jsx(Gt,{count:f,page:re,onChange:(ke,pt)=>z(pt),color:"primary"})})]}),j===1&&e.jsx(pp,{methods:i}),j===2&&e.jsxs(e.Fragment,{children:[e.jsxs(o,{sx:{mb:3,display:"flex",gap:2,alignItems:"center"},children:[e.jsx(xe,{title:"Filter by status",children:e.jsxs(Ne,{sx:{minWidth:140},children:[e.jsx(Ye,{children:"Status"}),e.jsxs(Ge,{value:Re,label:"Status",onChange:ke=>_e(ke.target.value),children:[e.jsx(Z,{value:"all",children:"All"}),e.jsx(Z,{value:"Funded",children:"Funded"}),e.jsx(Z,{value:"Pending Release",children:"Pending Release"})]})]})}),e.jsx(xe,{title:"Filter",children:e.jsx(P,{variant:"outlined",onClick:Xa,children:"Filter"})})]}),e.jsx(gp,{escrows:Qa}),ea>1&&e.jsx(o,{sx:{mt:2,display:"flex",justifyContent:"center"},children:e.jsx(Gt,{count:ea,page:ht,onChange:(ke,pt)=>Ut(pt),color:"primary"})})]}),j===3&&e.jsxs(e.Fragment,{children:[e.jsxs(o,{sx:{mb:3,display:"flex",gap:2,alignItems:"center"},children:[e.jsx(xe,{title:"Bills from this date",children:e.jsx(Q,{label:"From",type:"date",value:G,onChange:ke=>I(ke.target.value),InputLabelProps:{shrink:!0}})}),e.jsx(xe,{title:"Bills up to this date",children:e.jsx(Q,{label:"To",type:"date",value:L,onChange:ke=>S(ke.target.value),InputLabelProps:{shrink:!0}})}),e.jsx(xe,{title:"Filter by status",children:e.jsxs(Ne,{sx:{minWidth:140},children:[e.jsx(Ye,{children:"Status"}),e.jsxs(Ge,{value:B,label:"Status",onChange:ke=>D(ke.target.value),children:[e.jsx(Z,{value:"all",children:"All"}),e.jsx(Z,{value:"paid",children:"Paid"}),e.jsx(Z,{value:"unpaid",children:"Unpaid"}),e.jsx(Z,{value:"overdue",children:"Overdue"})]})]})}),e.jsx(xe,{title:"Filter",children:e.jsx(P,{variant:"outlined",onClick:er,children:"Filter"})}),e.jsx(xe,{title:"Clear filters",children:e.jsx(P,{variant:"outlined",color:"secondary",onClick:hr,children:"Clear"})})]}),X.length>0&&e.jsx(o,{sx:{mb:2},children:e.jsxs(a,{variant:"body2",color:"text.secondary",children:["Showing ",(at-1)*kt+1," -"," ",Math.min(X.length,at*kt)," of"," ",X.length," bills"]})}),e.jsx(bp,{bills:le,actionLoading:x,onPayBill:m}),oe>1&&e.jsx(o,{sx:{mt:2,display:"flex",justifyContent:"center"},children:e.jsx(Gt,{count:oe,page:at,onChange:(ke,pt)=>xt(pt),color:"primary"})})]})]})]}),e.jsxs(Ee,{open:C,onClose:ue,fullWidth:!0,maxWidth:"xs",BackdropProps:{sx:{backgroundColor:"rgba(0, 0, 0, 0.85)",backdropFilter:"blur(4px)"}},PaperProps:{sx:{bgcolor:g.palette.grey[900],color:g.palette.text.primary,borderRadius:"24px",p:3,border:`2px solid ${g.palette.secondary.main}`,boxShadow:"0 0 16px rgba(255, 215, 0, 0.5)"}},children:[e.jsxs(Me,{sx:{display:"flex",alignItems:"center",gap:1,mb:1},children:[e.jsx(ai,{sx:{color:g.palette.secondary.main,fontSize:28}}),e.jsx(a,{variant:"h6",sx:{color:g.palette.secondary.main,fontWeight:"bold"},children:"Add Money"})]}),e.jsx(fe,{sx:{borderColor:g.palette.secondary.main,my:1,height:2}}),e.jsx(ze,{children:e.jsxs(o,{sx:{display:"flex",flexDirection:"column",gap:2,pt:1},children:[e.jsx(xe,{title:"Enter amount in Ghana Cedi",children:e.jsx(Q,{variant:"filled",label:"Amount (GHS)",type:"number",value:k,onChange:ke=>U(ke.target.value),fullWidth:!0,InputProps:{disableUnderline:!0},InputLabelProps:{sx:{color:g.palette.secondary.main}},sx:{bgcolor:g.palette.grey[800],borderRadius:1,p:1,color:g.palette.text.primary,border:`1px solid ${g.palette.secondary.main}`,boxShadow:"inset 0 0 8px rgba(255, 215, 0, 0.3)"}})}),e.jsx(xe,{title:"Choose a payment method",children:e.jsxs(Ne,{fullWidth:!0,children:[e.jsx(Ye,{sx:{color:g.palette.secondary.main},children:"Method"}),e.jsx(Ge,{variant:"filled",label:"Method",value:W,onChange:ke=>R(ke.target.value),inputProps:{disableUnderline:!0},sx:{bgcolor:g.palette.grey[800],borderRadius:1,p:"8px 12px",color:g.palette.text.primary,border:`1px solid ${g.palette.secondary.main}`,boxShadow:"inset 0 0 8px rgba(255, 215, 0, 0.3)"},children:i.map(ke=>e.jsx(Z,{value:ke.id,children:ke.name},ke.id))})]})})]})}),e.jsxs(Le,{children:[e.jsx(P,{onClick:ue,variant:"outlined",color:"secondary",sx:{borderWidth:2},children:"Cancel"}),e.jsx(P,{onClick:()=>{u(Number(k),W),ue()},variant:"contained",color:"secondary",startIcon:e.jsx(Dt,{}),disabled:!k||!W,sx:{boxShadow:"0 2px 8px rgba(255, 215, 0, 0.4)"},children:"Add"})]})]}),e.jsxs(Ee,{open:w,onClose:gt,fullWidth:!0,maxWidth:"xs",BackdropProps:{sx:{backgroundColor:"rgba(0, 0, 0, 0.85)",backdropFilter:"blur(4px)"}},PaperProps:{sx:{bgcolor:g.palette.grey[900],color:g.palette.text.primary,borderRadius:"24px",p:3,border:`2px solid ${g.palette.secondary.main}`,boxShadow:"0 0 16px rgba(255, 215, 0, 0.5)"}},children:[e.jsxs(Me,{sx:{display:"flex",alignItems:"center",gap:1,mb:1},children:[e.jsx(_a,{sx:{color:g.palette.secondary.main,fontSize:28}}),e.jsx(a,{variant:"h6",sx:{color:g.palette.secondary.main,fontWeight:"bold"},children:"Withdraw"})]}),e.jsx(fe,{sx:{borderColor:g.palette.secondary.main,my:1,height:2}}),e.jsx(ze,{children:e.jsxs(o,{sx:{display:"flex",flexDirection:"column",gap:2,pt:1},children:[e.jsx(xe,{title:"Enter amount to withdraw",children:e.jsx(Q,{variant:"filled",label:"Amount (GHS)",type:"number",value:k,onChange:ke=>U(ke.target.value),fullWidth:!0,InputProps:{disableUnderline:!0},InputLabelProps:{sx:{color:g.palette.secondary.main}},sx:{bgcolor:g.palette.grey[800],borderRadius:1,p:1,color:g.palette.text.primary,border:`1px solid ${g.palette.secondary.main}`,boxShadow:"inset 0 0 8px rgba(255, 215, 0, 0.3)"}})}),e.jsx(xe,{title:"Choose a withdrawal method",children:e.jsxs(Ne,{fullWidth:!0,children:[e.jsx(Ye,{sx:{color:g.palette.secondary.main},children:"Method"}),e.jsx(Ge,{variant:"filled",label:"Method",value:W,onChange:ke=>R(ke.target.value),inputProps:{disableUnderline:!0},sx:{bgcolor:g.palette.grey[800],borderRadius:1,p:"8px 12px",color:g.palette.text.primary,border:`1px solid ${g.palette.secondary.main}`,boxShadow:"inset 0 0 8px rgba(255, 215, 0, 0.3)"},children:i.map(ke=>e.jsx(Z,{value:ke.id,children:ke.name},ke.id))})]})})]})}),e.jsxs(Le,{children:[e.jsx(P,{onClick:gt,variant:"outlined",color:"secondary",sx:{borderWidth:2},children:"Cancel"}),e.jsx(P,{onClick:()=>{v(Number(k),W),gt()},variant:"contained",color:"secondary",startIcon:e.jsx(_a,{}),disabled:!k||!W,sx:{boxShadow:"0 2px 8px rgba(255, 215, 0, 0.4)"},children:"Withdraw"})]})]})]})},Ki=new Intl.NumberFormat("en-GH",{style:"currency",currency:"GHS"}),jp=()=>{const{bills:t,loading:r,payBill:s,actionLoading:n,error:i}=Ka(),[c,d]=l.useState(""),[x,m]=l.useState(""),[u,v]=l.useState("all"),[y,g]=l.useState(""),[j,b]=l.useState(""),[C,A]=l.useState("all"),[w,p]=l.useState(1),k=5,[U,W]=l.useState(!1),[R,K]=l.useState(null),[_,O]=l.useState(0),T=()=>{g(c),b(x),A(u),p(1)},H=()=>{d(""),m(""),v("all"),g(""),b(""),A("all"),p(1)},F=t.filter(G=>{let I=!0;return y&&(I=I&&new Date(G.dueDate)>=new Date(y)),j&&(I=I&&new Date(G.dueDate)<=new Date(j)),C!=="all"&&(I=I&&G.status===C),I}),V=Math.ceil(F.length/k),re=F.slice((w-1)*k,w*k),z=G=>{K(G),W(!0),O(0)},J=()=>{W(!1),K(null),O(0)},f=async()=>{O(1),await s(R.id),O(2),setTimeout(J,1e3)},M=G=>{switch(G){case"paid":return e.jsx(ee,{icon:e.jsx(Ms,{}),label:"Paid",color:"success",size:"small"});case"unpaid":return e.jsx(ee,{icon:e.jsx(Pd,{}),label:"Unpaid",color:"warning",size:"small"});case"overdue":return e.jsx(ee,{icon:e.jsx(Ro,{}),label:"Overdue",color:"error",size:"small"});default:return e.jsx(ee,{label:G,size:"small"})}};return e.jsx(ye,{maxWidth:"lg",sx:{py:4},children:e.jsxs(se,{sx:{p:4,borderRadius:2,background:"linear-gradient(to right, #28313b, #485461, #ffd700)",color:"white",border:"2px solid",borderColor:"secondary.main"},children:[e.jsx(a,{variant:"h4",fontWeight:"bold",sx:{mb:3,color:"secondary.main"},children:"Your Bills"}),e.jsxs(o,{sx:{mb:3,display:"flex",gap:2,alignItems:"center"},children:[e.jsx(xe,{title:"Filter bills due on or after this date",children:e.jsx(Q,{label:"From",type:"date",value:c,onChange:G=>d(G.target.value),InputLabelProps:{shrink:!0}})}),e.jsx(xe,{title:"Filter bills due on or before this date",children:e.jsx(Q,{label:"To",type:"date",value:x,onChange:G=>m(G.target.value),InputLabelProps:{shrink:!0}})}),e.jsx(xe,{title:"Filter by bill status",children:e.jsxs(Ne,{sx:{minWidth:140},children:[e.jsx(Ye,{children:"Status"}),e.jsxs(Ge,{value:u,label:"Status",onChange:G=>v(G.target.value),children:[e.jsx(Z,{value:"all",children:"All"}),e.jsx(Z,{value:"paid",children:"Paid"}),e.jsx(Z,{value:"unpaid",children:"Unpaid"}),e.jsx(Z,{value:"overdue",children:"Overdue"})]})]})}),e.jsx(xe,{title:"Apply filters",children:e.jsx(P,{variant:"outlined",color:"secondary",sx:{borderWidth:2},onClick:T,children:"Filter"})}),e.jsx(xe,{title:"Clear filters",children:e.jsx(P,{variant:"outlined",color:"secondary",sx:{borderWidth:2},onClick:H,children:"Clear"})})]}),i&&e.jsx(be,{severity:"error",sx:{mb:2},children:i}),r?e.jsx(a,{children:"Loading bills..."}):F.length===0?e.jsx(a,{color:"text.secondary",children:"No bills match your filter criteria."}):F.length>0&&e.jsx(o,{sx:{mb:2},children:e.jsxs(a,{variant:"body2",color:"text.secondary",children:["Showing ",(w-1)*k+1," -"," ",Math.min(F.length,w*k)," of"," ",F.length," bills"]})}),r?e.jsx(a,{children:"Loading bills..."}):F.length===0?e.jsx(a,{color:"text.secondary",children:"No bills match your filter criteria."}):e.jsx(Ke,{children:re.map((G,I)=>e.jsxs(Rt.Fragment,{children:[e.jsxs(Be,{children:[e.jsx(Ie,{primary:e.jsx(a,{variant:"subtitle1",fontWeight:"medium",children:G.title}),secondary:`Due: ${new Date(G.dueDate).toLocaleDateString("en-GH",{day:"numeric",month:"long",year:"numeric"})}`}),e.jsxs(o,{sx:{display:"flex",alignItems:"center",gap:2},children:[M(G.status),e.jsx(a,{variant:"h6",fontWeight:"medium",children:Ki.format(G.amount)}),(G.status==="unpaid"||G.status==="overdue")&&e.jsx(o,{children:e.jsx(xe,{title:"Pay this bill",children:e.jsx(P,{variant:"contained",color:"secondary",size:"small",sx:{boxShadow:"0 2px 8px rgba(255,215,0,0.4)"},startIcon:e.jsx(Ds,{sx:{color:"common.white"}}),disabled:n===G.id,onClick:()=>z(G),children:n===G.id?e.jsx(Ae,{size:16,color:"inherit"}):"Pay"})})})]})]}),I<re.length-1&&e.jsx(fe,{component:"li"})]},G.id))}),V>1&&e.jsx(o,{sx:{mt:2,display:"flex",justifyContent:"center"},children:e.jsx(Gt,{count:V,page:w,onChange:(G,I)=>p(I),color:"secondary"})}),e.jsxs(Ee,{open:U,onClose:J,maxWidth:"xs",fullWidth:!0,BackdropProps:{sx:{backgroundColor:"rgba(0, 0, 0, 0.7)",backdropFilter:"blur(4px)"}},PaperProps:{sx:{bgcolor:"grey.900",color:"text.primary",borderRadius:2,border:"2px solid",borderColor:"secondary.main",boxShadow:"0 0 16px rgba(255,215,0,0.5)"}},children:[e.jsxs(Me,{sx:{display:"flex",alignItems:"center",gap:1},children:[e.jsx(Ds,{sx:{color:"secondary.main",fontSize:28}})," ","Confirm Payment"]}),e.jsx(ze,{dividers:!0,children:R&&e.jsxs(o,{sx:{display:"flex",flexDirection:"column",gap:1},children:[e.jsxs(a,{children:["You're about to pay"," ",e.jsx("strong",{children:Ki.format(R.amount)})," ","for:"]}),e.jsxs(a,{variant:"subtitle1",fontWeight:"medium",children:["“",R.title,"”"]})]})}),e.jsxs(Le,{children:[e.jsx(P,{onClick:J,variant:"outlined",color:"secondary",sx:{borderWidth:2},disabled:_===1,children:"Cancel"}),e.jsx(P,{variant:"contained",color:"secondary",onClick:f,disabled:_===1,startIcon:_===1?e.jsx(Ae,{size:16,color:"inherit"}):e.jsx(Ds,{sx:{color:"common.white"}}),sx:{boxShadow:"0 2px 8px rgba(255,215,0,0.4)"},children:_===1?"Processing...":"Confirm"})]})]})]})})},fp=()=>{const[t,r]=l.useState([]),[s,n]=l.useState(!1),[i,c]=l.useState(null),[d,x]=l.useState(!1),[m,u]=l.useState(!1),[v,y]=l.useState(!1),[g,j]=l.useState(!1),[b,C]=l.useState({cardNumber:"",expiryMonth:"",expiryYear:"",cardholderName:"",cvv:""}),[A,w]=l.useState({provider:"MTN",phoneNumber:"",name:""}),[p,k]=l.useState({bankName:"",accountNumber:"",accountName:"",branchCode:""}),[U,W]=l.useState(null);je(z=>z.auth.user);const R=ve(),K=async()=>{n(!0);try{const z=await At.getPaymentMethods();r(z)}catch(z){c(z.message||"Failed to load payment methods")}finally{n(!1)}};l.useEffect(()=>{K()},[]);const _=async()=>{n(!0);try{await At.addPaymentMethod({type:"credit_card",isDefault:t.length===0,cardDetails:{number:b.cardNumber,expMonth:Number(b.expiryMonth),expYear:Number(b.expiryYear),cvc:b.cvv,cardholderName:b.cardholderName},billingAddress:{}}),await K(),x(!1),C({cardNumber:"",expiryMonth:"",expiryYear:"",cardholderName:"",cvv:""})}catch(z){c(z.message||"Failed to add card")}finally{n(!1)}},O=async()=>{n(!0);try{await At.addPaymentMethod({type:"mobile_money",isDefault:t.length===0,mobileDetails:{provider:A.provider,phoneNumber:A.phoneNumber,name:A.name},billingAddress:{}}),await K(),u(!1),w({provider:"MTN",phoneNumber:"",name:""})}catch(z){c(z.message||"Failed to add mobile money")}finally{n(!1)}},T=async()=>{n(!0);try{await At.addPaymentMethod({type:"bank_account",isDefault:t.length===0,bankDetails:{bankName:p.bankName,accountNumber:p.accountNumber,accountName:p.accountName,branchCode:p.branchCode},billingAddress:{}}),await K(),y(!1),k({bankName:"",accountNumber:"",accountName:"",branchCode:""})}catch(z){c(z.message||"Failed to add bank account")}finally{n(!1)}},H=async z=>{n(!0);try{await At.setDefaultPaymentMethod(z),await K()}catch(J){c(J.message||"Failed to set default payment method")}finally{n(!1)}},F=z=>{W(z),j(!0)},V=async()=>{n(!0);try{await At.deletePaymentMethod(U),j(!1),W(null),await K()}catch(z){c(z.message||"Failed to delete payment method")}finally{n(!1)}},re=z=>{switch(z.icon){case"credit":return e.jsx(Pr,{sx:{fontSize:40,color:R.palette.info.main}});case"mobile":return e.jsx(ia,{sx:{fontSize:40,color:R.palette.warning.main}});case"bank":return e.jsx(ws,{sx:{fontSize:40,color:R.palette.success.main}});default:return e.jsx(Pr,{sx:{fontSize:40,color:R.palette.info.main}})}};return e.jsxs(ye,{maxWidth:"lg",sx:{py:4},children:[e.jsxs(o,{sx:{mb:4,display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsx(a,{variant:"h4",sx:{color:"secondary.main"},children:"Methods"}),e.jsxs(o,{children:[e.jsx(xe,{title:"Add credit card",children:e.jsx(ne,{color:"secondary",sx:{boxShadow:"0 2px 8px rgba(255,215,0,0.4)"},onClick:()=>x(!0),children:e.jsx(Dt,{})})}),e.jsx(xe,{title:"Add mobile money",children:e.jsx(ne,{color:"secondary",sx:{boxShadow:"0 2px 8px rgba(255,215,0,0.4)"},onClick:()=>u(!0),children:e.jsx(ia,{})})}),e.jsx(xe,{title:"Add bank account",children:e.jsx(ne,{color:"secondary",sx:{boxShadow:"0 2px 8px rgba(255,215,0,0.4)"},onClick:()=>y(!0),children:e.jsx(ws,{})})})]})]}),e.jsx(me,{sx:{mb:4,border:"2px solid",borderColor:"secondary.main",boxShadow:"0 2px 8px rgba(255,215,0,0.3)"},children:e.jsxs(ce,{children:[e.jsx(a,{variant:"h6",gutterBottom:!0,sx:{color:"secondary.main"},children:"Manage Your Payment Methods"}),e.jsx(a,{variant:"body2",color:"text.secondary",children:"Add and manage your payment methods to easily fund your wallet, pay for services, or receive payments. We support credit/debit cards, mobile money services, and bank accounts."}),e.jsxs(o,{sx:{display:"flex",flexWrap:"wrap",gap:2,mt:2},children:[e.jsxs(o,{sx:{display:"flex",alignItems:"center",bgcolor:R.palette.info.light,p:1,borderRadius:1},children:[e.jsx(Pr,{sx:{mr:1,color:R.palette.info.main}}),e.jsx(a,{variant:"body2",children:"Credit/Debit Cards"})]}),e.jsxs(o,{sx:{display:"flex",alignItems:"center",bgcolor:R.palette.warning.light,p:1,borderRadius:1},children:[e.jsx(ia,{sx:{mr:1,color:R.palette.warning.main}}),e.jsx(a,{variant:"body2",children:"Mobile Money (MTN, Vodafone, AirtelTigo)"})]}),e.jsxs(o,{sx:{display:"flex",alignItems:"center",bgcolor:R.palette.success.light,p:1,borderRadius:1},children:[e.jsx(ws,{sx:{mr:1,color:R.palette.success.main}}),e.jsx(a,{variant:"body2",children:"Bank Accounts"})]})]})]})}),i&&e.jsx(be,{severity:"error",sx:{mb:3},onClose:()=>c(null),children:i}),s?e.jsx(o,{sx:{display:"flex",justifyContent:"center",my:8},children:e.jsx(Ae,{})}):t.length===0?e.jsxs(se,{sx:z=>({p:4,textAlign:"center",border:"2px solid",borderColor:"secondary.main",borderRadius:2,background:`linear-gradient(to right, #28313b, #485461, ${z.palette.secondary.main})`,color:"white"}),children:[e.jsx(Pr,{sx:{fontSize:60,color:"secondary.main",mb:2}}),e.jsx(a,{variant:"h6",color:"secondary.main",gutterBottom:!0,children:"No Payment Methods Added"}),e.jsx(a,{variant:"body2",color:"text.secondary",paragraph:!0,children:"Add a payment method to get started with transactions"}),e.jsx(P,{variant:"contained",color:"secondary",sx:{boxShadow:"0 2px 8px rgba(255,215,0,0.4)"},startIcon:e.jsx(Dt,{}),onClick:()=>x(!0),children:"Add Payment Method"})]}):e.jsx(h,{container:!0,spacing:3,children:t.map(z=>e.jsx(h,{item:!0,xs:12,sm:6,md:4,children:e.jsx(se,{elevation:1,sx:{p:3,borderRadius:2,borderLeft:z.isDefault?`4px solid ${R.palette.secondary.main}`:"none"},children:e.jsxs(o,{sx:{display:"flex",justifyContent:"space-between"},children:[e.jsxs(o,{sx:{display:"flex",alignItems:"center"},children:[re(z),e.jsxs(o,{sx:{ml:2},children:[e.jsx(a,{variant:"h6",children:z.name}),z.cardNumber&&e.jsx(a,{variant:"body2",color:"text.secondary",children:z.cardNumber}),z.phoneNumber&&e.jsx(a,{variant:"body2",color:"text.secondary",children:z.phoneNumber}),z.accountNumber&&e.jsxs(a,{variant:"body2",color:"text.secondary",children:["Account: ",z.accountNumber]}),z.expiryDate&&e.jsxs(a,{variant:"body2",color:"text.secondary",children:["Expires: ",z.expiryDate]})]})]}),e.jsxs(o,{sx:{display:"flex",gap:1,alignItems:"center"},children:[z.isDefault?e.jsx(xe,{title:"Default method",children:e.jsx(ee,{icon:e.jsx(Ve,{}),label:"Default",color:"primary",size:"small"})}):e.jsx(xe,{title:"Set as default",children:e.jsx(ne,{size:"small",onClick:()=>H(z.id),children:e.jsx(Ve,{color:"action"})})}),e.jsx(xe,{title:"Delete method",children:e.jsx(ne,{size:"small",color:"error",onClick:()=>F(z.id),children:e.jsx(Ct,{})})})]})]})})},z.id))}),e.jsxs(Ee,{open:d,onClose:()=>x(!1),maxWidth:"sm",fullWidth:!0,PaperProps:{sx:{border:"2px solid",borderColor:"secondary.main",boxShadow:"0 0 16px rgba(255,215,0,0.5)"}},children:[e.jsxs(Me,{sx:{display:"flex",alignItems:"center",gap:1},children:[e.jsx(Pr,{sx:{color:"secondary.main",fontSize:28}})," Card"]}),e.jsx(ze,{children:e.jsxs(o,{sx:{pt:2},children:[e.jsx(xe,{title:"16-digit card number",children:e.jsx(Q,{fullWidth:!0,label:"Number",value:b.cardNumber,onChange:z=>C({...b,cardNumber:z.target.value}),sx:{mb:2},placeholder:"1234 5678 9012 3456"})}),e.jsx(xe,{title:"Name on card",children:e.jsx(Q,{fullWidth:!0,label:"Name",value:b.cardholderName,onChange:z=>C({...b,cardholderName:z.target.value}),sx:{mb:2}})}),e.jsxs(h,{container:!0,spacing:2,sx:{mb:2},children:[e.jsx(h,{item:!0,xs:6,children:e.jsx(xe,{title:"MM",children:e.jsx(Q,{fullWidth:!0,label:"MM",value:b.expiryMonth,onChange:z=>C({...b,expiryMonth:z.target.value}),placeholder:"MM"})})}),e.jsx(h,{item:!0,xs:6,children:e.jsx(xe,{title:"YYYY",children:e.jsx(Q,{fullWidth:!0,label:"YYYY",value:b.expiryYear,onChange:z=>C({...b,expiryYear:z.target.value}),placeholder:"YYYY"})})})]}),e.jsx(xe,{title:"3-digit code on back",children:e.jsx(Q,{fullWidth:!0,label:"CVV",value:b.cvv,onChange:z=>C({...b,cvv:z.target.value}),type:"password",placeholder:"123"})})]})}),e.jsxs(Le,{children:[e.jsx(P,{onClick:()=>x(!1),variant:"outlined",color:"secondary",sx:{borderWidth:2},children:"Cancel"}),e.jsx(P,{variant:"contained",color:"secondary",startIcon:e.jsx(Dt,{}),onClick:_,disabled:!b.cardNumber||!b.expiryMonth||!b.expiryYear||!b.cvv,sx:{boxShadow:"0 2px 8px rgba(255,215,0,0.4)"},children:"Add Card"})]})]}),e.jsxs(Ee,{open:m,onClose:()=>u(!1),maxWidth:"sm",fullWidth:!0,PaperProps:{sx:{border:"2px solid",borderColor:"secondary.main",boxShadow:"0 0 16px rgba(255,215,0,0.5)"}},BackdropProps:{sx:{backdropFilter:"blur(8px)",backgroundColor:"rgba(0,0,0,0.5)"}},children:[e.jsxs(Me,{sx:{display:"flex",alignItems:"center",gap:1},children:[e.jsx(ia,{sx:{color:"secondary.main",fontSize:28}})," Add Mobile Money"]}),e.jsx(ze,{children:e.jsxs(o,{sx:{pt:2},children:[e.jsxs(Q,{select:!0,fullWidth:!0,label:"Provider",value:A.provider,onChange:z=>w({...A,provider:z.target.value}),sx:{mb:2},SelectProps:{native:!0},children:[e.jsx("option",{value:"MTN",children:"MTN Mobile Money"}),e.jsx("option",{value:"Vodafone",children:"Vodafone Cash"}),e.jsx("option",{value:"AirtelTigo",children:"AirtelTigo Money"})]}),e.jsx(Q,{fullWidth:!0,label:"Phone Number",value:A.phoneNumber,onChange:z=>w({...A,phoneNumber:z.target.value}),sx:{mb:2},placeholder:"0XX XXX XXXX"}),e.jsx(Q,{fullWidth:!0,label:"Account Name",value:A.name,onChange:z=>w({...A,name:z.target.value})})]})}),e.jsxs(Le,{children:[e.jsx(P,{onClick:()=>u(!1),children:"Cancel"}),e.jsx(P,{variant:"contained",onClick:O,disabled:!A.phoneNumber,children:"Add Mobile Money"})]})]}),e.jsxs(Ee,{open:v,onClose:()=>y(!1),maxWidth:"sm",fullWidth:!0,PaperProps:{sx:{border:"2px solid",borderColor:"secondary.main",boxShadow:"0 0 16px rgba(255,215,0,0.5)"}},BackdropProps:{sx:{backdropFilter:"blur(8px)",backgroundColor:"rgba(0,0,0,0.5)"}},children:[e.jsxs(Me,{sx:{display:"flex",alignItems:"center",gap:1},children:[e.jsx(ws,{sx:{color:"secondary.main",fontSize:28}})," Add Bank Account"]}),e.jsx(ze,{children:e.jsxs(o,{sx:{pt:2},children:[e.jsxs(Q,{select:!0,fullWidth:!0,label:"Bank",value:p.bankName,onChange:z=>k({...p,bankName:z.target.value}),sx:{mb:2},SelectProps:{native:!0},children:[e.jsx("option",{value:"",children:"Select a bank"}),e.jsx("option",{value:"Ghana Commercial Bank",children:"Ghana Commercial Bank"}),e.jsx("option",{value:"Ecobank Ghana",children:"Ecobank Ghana"}),e.jsx("option",{value:"Zenith Bank",children:"Zenith Bank"}),e.jsx("option",{value:"Standard Chartered",children:"Standard Chartered"}),e.jsx("option",{value:"Access Bank",children:"Access Bank"})]}),e.jsx(Q,{fullWidth:!0,label:"Account Number",value:p.accountNumber,onChange:z=>k({...p,accountNumber:z.target.value}),sx:{mb:2}}),e.jsx(Q,{fullWidth:!0,label:"Account Name",value:p.accountName,onChange:z=>k({...p,accountName:z.target.value}),sx:{mb:2}}),e.jsx(Q,{fullWidth:!0,label:"Branch Code (Optional)",value:p.branchCode,onChange:z=>k({...p,branchCode:z.target.value})})]})}),e.jsxs(Le,{children:[e.jsx(P,{onClick:()=>y(!1),children:"Cancel"}),e.jsx(P,{variant:"contained",onClick:T,disabled:!p.bankName||!p.accountNumber||!p.accountName,children:"Add Bank Account"})]})]}),e.jsxs(Ee,{open:g,onClose:()=>j(!1),PaperProps:{sx:{border:"2px solid",borderColor:"secondary.main",boxShadow:"0 0 16px rgba(255,215,0,0.5)"}},BackdropProps:{sx:{backdropFilter:"blur(8px)",backgroundColor:"rgba(0,0,0,0.5)"}},children:[e.jsxs(Me,{sx:{display:"flex",alignItems:"center",gap:1},children:[e.jsx(Ct,{sx:{color:"error.main",fontSize:28}})," Remove Payment Method"]}),e.jsx(ze,{children:e.jsx(a,{children:"Are you sure you want to remove this payment method? This action cannot be undone."})}),e.jsxs(Le,{children:[e.jsx(P,{onClick:()=>j(!1),children:"Cancel"}),e.jsx(P,{color:"error",onClick:V,children:"Remove"})]})]})]})},yp=new Intl.NumberFormat("en-GH",{style:"currency",currency:"GHS"}),jl=()=>{const{loading:t,error:r,walletBalance:s,transactions:n,fetchTransactions:i}=Ka(),[c,d]=l.useState(""),[x,m]=l.useState(""),[u,v]=l.useState("all"),[y,g]=l.useState(1),j=5,b=Math.ceil(n.length/j),C=n.slice((y-1)*j,y*j),A=()=>{const p={};c&&(p.startDate=c),x&&(p.endDate=x),u!=="all"&&(p.type=u),i(p),g(1)},w=()=>{d(""),m(""),v("all"),i({}),g(1)};return t?e.jsx(ye,{sx:{py:4},children:e.jsx(ie,{variant:"rectangular",height:300})}):r?e.jsx(ye,{sx:{py:4},children:e.jsx(be,{severity:"error",children:r})}):e.jsxs(ye,{maxWidth:"md",sx:{py:4},children:[e.jsxs(se,{elevation:4,sx:p=>({p:3,mb:4,borderRadius:2,background:`linear-gradient(to right, #28313b, #485461, ${p.palette.secondary.main})`,color:"white",border:"2px solid",borderColor:"secondary.main"}),children:[e.jsx(a,{variant:"h6",sx:{opacity:.8,color:"secondary.main"},children:"Wallet Balance"}),e.jsx(a,{variant:"h3",fontWeight:"bold",sx:{my:1,color:"secondary.main"},children:yp.format(s)})]}),e.jsxs(o,{sx:{mb:3,display:"flex",gap:2,alignItems:"center"},children:[e.jsx(Q,{label:"Start Date",type:"date",value:c,onChange:p=>d(p.target.value),InputLabelProps:{shrink:!0}}),e.jsx(Q,{label:"End Date",type:"date",value:x,onChange:p=>m(p.target.value),InputLabelProps:{shrink:!0}}),e.jsxs(Ne,{sx:{minWidth:140},children:[e.jsx(Ye,{children:"Type"}),e.jsxs(Ge,{value:u,label:"Type",onChange:p=>v(p.target.value),children:[e.jsx(Z,{value:"all",children:"All"}),e.jsx(Z,{value:"deposit",children:"Deposit"}),e.jsx(Z,{value:"withdrawal",children:"Withdrawal"})]})]}),e.jsx(P,{variant:"outlined",color:"secondary",sx:{borderWidth:2},onClick:A,children:"Filter"}),e.jsx(P,{variant:"outlined",color:"secondary",sx:{borderWidth:2},onClick:w,children:"Clear"})]}),n.length>0&&e.jsxs(a,{variant:"body2",color:"text.secondary",sx:{mb:2},children:["Showing ",(y-1)*j+1," -"," ",Math.min(n.length,y*j)," of"," ",n.length," transactions"]}),e.jsx(gl,{transactions:C,loading:t}),b>1&&e.jsx(o,{sx:{mt:2,display:"flex",justifyContent:"center"},children:e.jsx(Gt,{count:b,page:y,onChange:(p,k)=>g(k),color:"secondary"})})]})},rr=Xe.create({baseURL:yt.USER_SERVICE,timeout:3e4,headers:{"Content-Type":"application/json"}});rr.interceptors.request.use(t=>{const r=localStorage.getItem("kelmah_auth_token");return r&&(t.headers.Authorization=`Bearer ${r}`),t},t=>Promise.reject(t));const $r=[{id:"apt-1",title:"Kitchen Cabinet Installation Meeting",description:"Initial consultation for custom kitchen cabinet project",jobId:"job-1",jobTitle:"Kitchen Renovation - Custom Cabinets",hirerId:"client-1",hirerName:"Sarah Mitchell",workerId:"7a1f417c-e2e2-4210-9824-08d5fac336ac",workerName:"Tony Gate",startTime:new Date(Date.now()+1e3*60*60*24*2),endTime:new Date(Date.now()+1e3*60*60*24*2+1e3*60*90),location:"Mitchell Residence, Accra",type:"consultation",status:"confirmed",meetingType:"in-person",notes:"Bring measuring tools and sample materials",createdAt:new Date(Date.now()-1e3*60*60*24),updatedAt:new Date(Date.now()-1e3*60*60*12)},{id:"apt-2",title:"Plumbing Assessment",description:"Emergency bathroom plumbing inspection and quote",jobId:"job-2",jobTitle:"Emergency Bathroom Plumbing Repair",hirerId:"client-2",hirerName:"David Chen",workerId:"worker-2",workerName:"Emmanuel Asante",startTime:new Date(Date.now()+1e3*60*60*6),endTime:new Date(Date.now()+1e3*60*60*6+1e3*60*60),location:"Chen Family Home, Kumasi",type:"assessment",status:"pending",meetingType:"in-person",notes:"Urgent - water damage possible",createdAt:new Date(Date.now()-1e3*60*60*2),updatedAt:new Date(Date.now()-1e3*60*60)},{id:"apt-3",title:"Project Progress Review",description:"Weekly progress check for electrical rewiring project",jobId:"job-3",jobTitle:"Complete House Rewiring Project",hirerId:"client-3",hirerName:"Lisa Thompson",workerId:"worker-3",workerName:"Kwame Osei",startTime:new Date(Date.now()+1e3*60*60*24*5),endTime:new Date(Date.now()+1e3*60*60*24*5+1e3*60*45),location:"Thompson Residence, Takoradi",type:"progress-review",status:"confirmed",meetingType:"in-person",notes:"Review completed rooms and plan next phase",createdAt:new Date(Date.now()-1e3*60*60*24*3),updatedAt:new Date(Date.now()-1e3*60*60*24*2)},{id:"apt-4",title:"Virtual Consultation",description:"Online discussion about painting requirements and color selection",jobId:"job-4",jobTitle:"Interior House Painting",hirerId:"client-4",hirerName:"Robert Johnson",workerId:"7a1f417c-e2e2-4210-9824-08d5fac336ac",workerName:"Tony Gate",startTime:new Date(Date.now()+1e3*60*60*24),endTime:new Date(Date.now()+1e3*60*60*24+1e3*60*30),location:"Online Meeting",type:"consultation",status:"confirmed",meetingType:"virtual",meetingLink:"https://meet.google.com/abc-defg-hij",notes:"Prepare color samples and room photos",createdAt:new Date(Date.now()-1e3*60*60*8),updatedAt:new Date(Date.now()-1e3*60*60*4)}];class vp{async getAppointments(r={}){try{const s=await rr.get("/api/appointments",{params:r});return s.data.data||s.data}catch(s){console.warn("Scheduling service unavailable, using mock appointments:",s.message);let n=[...$r];return r.status&&(n=n.filter(i=>i.status===r.status)),r.type&&(n=n.filter(i=>i.type===r.type)),r.workerId&&(n=n.filter(i=>i.workerId===r.workerId)),n}}async getAppointmentsByJob(r,s={}){try{const n=await rr.get(`/api/appointments/job/${r}`,{params:s});return n.data.data||n.data}catch(n){return console.warn(`Scheduling service unavailable for job ${r}, using mock data:`,n.message),$r.filter(i=>i.jobId===r)}}async getAppointmentsByUser(r,s=null,n={}){try{const i={...n};s&&(i.role=s);const c=await rr.get(`/api/appointments/user/${r}`,{params:i});return c.data.data||c.data}catch(i){return console.warn(`Scheduling service unavailable for user ${r}, using mock data:`,i.message),$r.filter(c=>s==="hirer"?c.hirerId===r:s==="worker"?c.workerId===r:c.hirerId===r||c.workerId===r)}}async createAppointment(r){try{const s=await rr.post("/api/appointments",r);return s.data.data||s.data}catch(s){return console.warn("Scheduling service unavailable, simulating appointment creation:",s.message),{id:`apt-${Date.now()}`,...r,status:"pending",createdAt:new Date,updatedAt:new Date}}}async updateAppointment(r,s){try{const n=await rr.put(`/api/appointments/${r}`,s);return n.data.data||n.data}catch(n){return console.warn("Scheduling service unavailable, simulating appointment update:",n.message),{...$r.find(c=>c.id===r),...s,updatedAt:new Date}}}async deleteAppointment(r){try{return(await rr.delete(`/api/appointments/${r}`)).data}catch(s){return console.warn("Scheduling service unavailable, simulating appointment deletion:",s.message),{success:!0,message:"Appointment deleted successfully (mock)"}}}async getAppointmentById(r){try{const s=await rr.get(`/api/appointments/${r}`);return s.data.data||s.data}catch(s){return console.warn("Scheduling service unavailable, using mock appointment:",s.message),$r.find(n=>n.id===r)||null}}async updateAppointmentStatus(r,s){try{const n=await rr.patch(`/api/appointments/${r}/status`,{status:s});return n.data.data||n.data}catch(n){return console.warn("Scheduling service unavailable, simulating status update:",n.message),{...$r.find(c=>c.id===r),status:s,updatedAt:new Date}}}async getAvailableTimeSlots(r,s,n=60){try{const i=await rr.get(`/api/appointments/availability/${r}`,{params:{date:s,duration:n}});return i.data.data||i.data}catch(i){console.warn("Scheduling service unavailable, using mock availability:",i.message);const c=new Date(s),d=[];for(let x=8;x<=17;x++)for(let m=0;m<60;m+=30){const u=new Date(c);if(u.setHours(x,m,0,0),u<=new Date)continue;$r.some(y=>{const g=new Date(y.startTime),j=new Date(y.endTime),b=new Date(u.getTime()+n*6e4);return y.workerId===r&&y.status!=="cancelled"&&(u>=g&&u<j||b>g&&b<=j)})||d.push({startTime:u,endTime:new Date(u.getTime()+n*6e4),available:!0})}return d.slice(0,10)}}}const ma=new vp,fl=({appointments:t,selectedDate:r,onDateChange:s,highlightToday:n=!0,showAppointmentCount:i=!0})=>{const c=ve(),d=t.reduce((m,u)=>{const v=wt(new Date(u.date),"yyyy-MM-dd");return m[v]=m[v]||[],m[v].push(u),m},{}),x=(m,u,v)=>{const y=wt(m,"yyyy-MM-dd"),g=Object.keys(d).includes(y),j=g?d[y].length:0,b=En(m,new Date),C=En(m,r);return e.jsx(o,{sx:{position:"relative",display:"flex",justifyContent:"center"},children:e.jsx(xe,{title:g?`${j} appointment${j>1?"s":""}`:"",children:e.jsx(mt,{overlap:"circular",variant:i&&j>0?"standard":"dot",badgeContent:i&&j>0?j:null,color:"secondary",invisible:!g,anchorOrigin:{vertical:"bottom",horizontal:"right"},sx:{"& .MuiBadge-badge":{fontSize:"0.7rem",height:"18px",minWidth:"18px",padding:"0 4px",fontWeight:"bold"}},children:e.jsx(Id,{...v,selected:C,sx:{...b&&n&&{border:`2px solid ${c.palette.primary.main}`},...g&&{fontWeight:"bold"}}})})})},y)};return e.jsxs(se,{elevation:0,sx:{p:2,borderRadius:2,border:`1px solid ${c.palette.divider}`,backgroundColor:c.palette.background.paper},children:[e.jsx(a,{variant:"h6",fontWeight:"bold",sx:{mb:2},children:"Appointment Calendar"}),e.jsx($a,{dateAdapter:Ba,children:e.jsx(Dd,{value:r,onChange:s,renderDay:x,sx:{width:"100%","& .MuiPickersCalendarHeader-root":{paddingLeft:2,paddingRight:2},"& .MuiDayCalendar-header":{justifyContent:"space-around"},"& .MuiDayCalendar-weekContainer":{justifyContent:"space-around"}}})})]})};fl.propTypes={appointments:Y.array.isRequired,selectedDate:Y.instanceOf(Date).isRequired,onDateChange:Y.func.isRequired,highlightToday:Y.bool,showAppointmentCount:Y.bool};const yl=({formData:t,setFormData:r,onSubmit:s,onCancel:n,jobs:i=[],users:c=[],loadingJobs:d=!1,loadingUsers:x=!1,mode:m="create"})=>{const[u,v]=l.useState({}),y=()=>{const w={};return!t.jobId&&!t.jobTitle&&(w.job="Job is required"),!t.hirerId&&!t.hirer&&(w.hirer="Hirer is required"),t.date||(w.date="Date and time are required"),t.appointmentType==="in-person"&&!t.location&&(w.location="Location is required for in-person appointments"),t.appointmentType==="virtual"&&!t.meetingLink&&(w.meetingLink="Meeting link is required for virtual appointments"),v(w),Object.keys(w).length===0},g=w=>{const{name:p,value:k}=w.target;r(U=>({...U,[p]:k})),u[p]&&v(U=>({...U,[p]:null}))},j=(w,p)=>{p?(r(k=>({...k,jobId:p.id,jobTitle:p.title})),u.job&&v(k=>({...k,job:null}))):r(k=>({...k,jobId:"",jobTitle:""}))},b=(w,p)=>{p?(r(k=>({...k,hirerId:p.id,hirer:p.name})),u.hirer&&v(k=>({...k,hirer:null}))):r(k=>({...k,hirerId:"",hirer:""}))},C=w=>{r(p=>({...p,date:w})),u.date&&v(p=>({...p,date:null}))},A=w=>{w.preventDefault(),y()&&s()};return e.jsxs("form",{onSubmit:A,children:[e.jsxs(h,{container:!0,spacing:2,children:[e.jsx(h,{item:!0,xs:12,children:e.jsx(Os,{options:i,getOptionLabel:w=>w.title||"",loading:d,onChange:j,value:i.find(w=>w.id===t.jobId)||null,renderInput:w=>e.jsx(Q,{...w,label:"Select Job",fullWidth:!0,error:!!u.job,helperText:u.job,InputProps:{...w.InputProps,endAdornment:e.jsxs(e.Fragment,{children:[d?e.jsx(Ae,{color:"inherit",size:20}):null,w.InputProps.endAdornment]})}})})}),e.jsx(h,{item:!0,xs:12,children:e.jsx(Os,{options:c,getOptionLabel:w=>w.name||"",loading:x,onChange:b,value:c.find(w=>w.id===t.hirerId)||null,renderInput:w=>e.jsx(Q,{...w,label:"Select Hirer",fullWidth:!0,error:!!u.hirer,helperText:u.hirer,InputProps:{...w.InputProps,endAdornment:e.jsxs(e.Fragment,{children:[x?e.jsx(Ae,{color:"inherit",size:20}):null,w.InputProps.endAdornment]})}})})}),e.jsx(h,{item:!0,xs:12,children:e.jsx($a,{dateAdapter:Ba,children:e.jsx(Rd,{label:"Date & Time",value:t.date,onChange:C,slotProps:{textField:{fullWidth:!0,error:!!u.date,helperText:u.date}}})})}),e.jsx(h,{item:!0,xs:12,sm:6,children:e.jsxs(Ne,{fullWidth:!0,children:[e.jsx(Ye,{children:"Status"}),e.jsxs(Ge,{name:"status",value:t.status,label:"Status",onChange:g,children:[e.jsx(Z,{value:"pending",children:"Pending"}),e.jsx(Z,{value:"confirmed",children:"Confirmed"}),e.jsx(Z,{value:"completed",children:"Completed"}),e.jsx(Z,{value:"cancelled",children:"Cancelled"})]})]})}),e.jsx(h,{item:!0,xs:12,sm:6,children:e.jsxs(Ne,{fullWidth:!0,children:[e.jsx(Ye,{children:"Appointment Type"}),e.jsxs(Ge,{name:"appointmentType",value:t.appointmentType,label:"Appointment Type",onChange:g,children:[e.jsx(Z,{value:"in-person",children:"In-Person"}),e.jsx(Z,{value:"virtual",children:"Virtual"})]})]})}),e.jsx(h,{item:!0,xs:12,children:t.appointmentType==="in-person"?e.jsx(Q,{name:"location",label:"Location",value:t.location,onChange:g,fullWidth:!0,error:!!u.location,helperText:u.location}):e.jsx(Q,{name:"meetingLink",label:"Meeting Link",value:t.meetingLink,onChange:g,fullWidth:!0,error:!!u.meetingLink,helperText:u.meetingLink})}),e.jsx(h,{item:!0,xs:12,children:e.jsx(Q,{name:"notes",label:"Notes",value:t.notes,onChange:g,fullWidth:!0,multiline:!0,rows:3})}),e.jsxs(h,{item:!0,xs:12,children:[e.jsx(fe,{sx:{my:2}}),e.jsx(a,{variant:"h6",sx:{mb:2},children:"Appointment Preview"}),e.jsx(o,{sx:w=>({p:2,border:`1px solid ${w.palette.divider}`,borderRadius:1,bgcolor:"background.paper"}),children:e.jsxs(h,{container:!0,spacing:2,children:[e.jsxs(h,{item:!0,xs:12,sm:6,children:[e.jsx(a,{variant:"body2",color:"text.secondary",children:"Job:"}),e.jsx(a,{variant:"body1",fontWeight:"medium",children:t.jobTitle||"Not selected"})]}),e.jsxs(h,{item:!0,xs:12,sm:6,children:[e.jsx(a,{variant:"body2",color:"text.secondary",children:"Hirer:"}),e.jsx(a,{variant:"body1",fontWeight:"medium",children:t.hirer||"Not selected"})]}),e.jsxs(h,{item:!0,xs:12,sm:6,children:[e.jsx(a,{variant:"body2",color:"text.secondary",children:"Date & Time:"}),e.jsx(a,{variant:"body1",fontWeight:"medium",children:t.date?wt(new Date(t.date),"PPp"):"Not selected"})]}),e.jsxs(h,{item:!0,xs:12,sm:6,children:[e.jsx(a,{variant:"body2",color:"text.secondary",children:"Status:"}),e.jsx(a,{variant:"body1",fontWeight:"medium",sx:{textTransform:"capitalize"},children:t.status})]}),e.jsxs(h,{item:!0,xs:12,children:[e.jsx(a,{variant:"body2",color:"text.secondary",children:"Type:"}),e.jsx(a,{variant:"body1",fontWeight:"medium",sx:{textTransform:"capitalize"},children:t.appointmentType==="in-person"?`In-person at ${t.location||"No location specified"}`:`Virtual meeting at ${t.meetingLink||"No link provided"}`})]}),t.notes&&e.jsxs(h,{item:!0,xs:12,children:[e.jsx(a,{variant:"body2",color:"text.secondary",children:"Notes:"}),e.jsx(a,{variant:"body1",children:t.notes})]})]})})]})]}),e.jsxs(o,{sx:{display:"flex",justifyContent:"flex-end",mt:3,gap:2},children:[e.jsx(P,{onClick:n,children:"Cancel"}),e.jsx(P,{type:"submit",variant:"contained",color:"primary",children:m==="create"?"Create Appointment":"Update Appointment"})]})]})};yl.propTypes={formData:Y.shape({jobId:Y.string,jobTitle:Y.string,hirerId:Y.string,hirer:Y.string,date:Y.instanceOf(Date),status:Y.string,appointmentType:Y.string,location:Y.string,meetingLink:Y.string,notes:Y.string}).isRequired,setFormData:Y.func.isRequired,onSubmit:Y.func.isRequired,onCancel:Y.func.isRequired,jobs:Y.array,users:Y.array,loadingJobs:Y.bool,loadingUsers:Y.bool,mode:Y.oneOf(["create","edit"])};const wp=t=>{const s={confirmed:{icon:e.jsx(Ve,{}),label:"Confirmed",color:"success"},pending:{icon:e.jsx(Ks,{}),label:"Pending",color:"warning"},completed:{icon:e.jsx(Pi,{}),label:"Completed",color:"info"},cancelled:{icon:e.jsx(Pi,{}),label:"Cancelled",color:"error"}}[t]||{label:"Unknown"};return e.jsx(ee,{icon:s.icon,label:s.label,color:s.color,size:"small",sx:{fontWeight:"bold"}})},Rn=({appointment:t,onEdit:r,onDelete:s})=>{const n=Oe(),i=t.appointmentType==="virtual",c=()=>{n(`/jobs/${t.jobId}`)},d=x=>{x.stopPropagation(),n(`/profile/${t.hirerId}`)};return e.jsxs(se,{elevation:2,sx:{borderRadius:2,p:2,mb:2,transition:"transform 0.2s","&:hover":{transform:"translateY(-4px)"},cursor:"pointer",position:"relative"},onClick:c,children:[e.jsxs(h,{container:!0,spacing:2,alignItems:"center",children:[e.jsxs(h,{item:!0,xs:3,sm:2,textAlign:"center",children:[e.jsx(a,{variant:"h5",fontWeight:"bold",color:"primary",children:wt(new Date(t.date),"dd")}),e.jsx(a,{variant:"body2",color:"text.secondary",children:wt(new Date(t.date),"MMM")}),e.jsx(a,{variant:"body2",color:"text.secondary",children:wt(new Date(t.date),"p")})]}),e.jsxs(h,{item:!0,xs:9,sm:7,children:[e.jsx(a,{variant:"h6",fontWeight:"bold",children:t.jobTitle}),e.jsxs(o,{sx:{display:"flex",alignItems:"center",mt:.5},children:[e.jsx(we,{src:t.hirerAvatar,alt:t.hirer,sx:{width:24,height:24,mr:1}}),e.jsx(et,{component:"button",variant:"body2",color:"text.secondary",onClick:d,underline:"hover",children:t.hirer})]}),e.jsxs(o,{sx:{display:"flex",alignItems:"center",mt:1},children:[i?e.jsx(Bn,{fontSize:"small",sx:{mr:.5,color:"text.secondary"}}):e.jsx(nt,{fontSize:"small",sx:{mr:.5,color:"text.secondary"}}),e.jsx(a,{variant:"body2",color:"text.secondary",children:i?"Virtual Meeting":t.location||"In-person"})]}),e.jsxs(o,{sx:{mt:1,display:"flex",gap:1},children:[i&&t.meetingLink&&e.jsx(P,{variant:"outlined",size:"small",color:"secondary",startIcon:e.jsx(Bn,{}),sx:{borderWidth:2,boxShadow:"0 2px 8px rgba(255,215,0,0.4)"},onClick:x=>{x.stopPropagation(),window.open(t.meetingLink,"_blank")},children:"Join Meeting"}),!i&&t.location&&e.jsx(P,{variant:"outlined",size:"small",color:"secondary",startIcon:e.jsx(nt,{}),sx:{borderWidth:2,boxShadow:"0 2px 8px rgba(255,215,0,0.4)"},onClick:x=>{x.stopPropagation(),window.open(`https://www.google.com/maps/search/?api=1&query=${encodeURIComponent(t.location)}`,"_blank")},children:"View on Map"})]})]}),e.jsx(h,{item:!0,xs:12,sm:3,textAlign:{xs:"left",sm:"right"},sx:{mt:{xs:1,sm:0}},children:wp(t.status)})]}),e.jsxs(o,{sx:{position:"absolute",top:8,right:8,display:"flex",gap:1},children:[e.jsx(ne,{size:"small",onClick:x=>{x.stopPropagation(),r(t)},children:e.jsx(ur,{fontSize:"small"})}),e.jsx(ne,{size:"small",onClick:x=>{x.stopPropagation(),s(t.id)},children:e.jsx(Ct,{fontSize:"small"})})]})]})},Fn=()=>e.jsx(se,{elevation:2,sx:{borderRadius:2,p:2,mb:2},children:e.jsxs(h,{container:!0,spacing:2,children:[e.jsxs(h,{item:!0,xs:3,sm:2,textAlign:"center",children:[e.jsx(ie,{variant:"text",width:40,height:32,sx:{mx:"auto"}}),e.jsx(ie,{variant:"text",width:30,height:20,sx:{mx:"auto"}})]}),e.jsxs(h,{item:!0,xs:9,sm:7,children:[e.jsx(ie,{variant:"text",width:"80%",height:28,sx:{mb:1}}),e.jsx(ie,{variant:"text",width:"50%",height:20,sx:{mb:1}}),e.jsx(ie,{variant:"text",width:"60%",height:20})]}),e.jsx(h,{item:!0,xs:12,sm:3,textAlign:{xs:"left",sm:"right"},children:e.jsx(ie,{variant:"rounded",width:80,height:24,sx:{ml:{xs:0,sm:"auto"}}})})]})}),Cp=()=>{const[t,r]=l.useState([]),[s,n]=l.useState(!0),[i,c]=l.useState(null),[d,x]=l.useState(new Date),[m,u]=l.useState("calendar"),[v,y]=l.useState("all"),[g,j]=l.useState(""),[b,C]=l.useState([]),[A,w]=l.useState([]),[p,k]=l.useState(!1),[U,W]=l.useState(!1),[R,K]=l.useState(!1),[_,O]=l.useState("create"),[T,H]=l.useState(null),[F,V]=l.useState({jobId:"",jobTitle:"",hirerId:"",hirer:"",date:new Date,status:"pending",appointmentType:"in-person",location:"",meetingLink:"",notes:""});Oe();const{enqueueSnackbar:re}=Gl();t.map($=>{const de=$.startTime||$.date;if(!de)return null;try{return wt(new Date(de),"yyyy-MM-dd")}catch{return console.warn("Invalid appointment date:",de),null}}).filter($=>$!==null);const z=async()=>{n(!0);try{const $=await ma.getAppointments();r($)}catch($){console.error("Error loading appointments:",$),c("Failed to load appointments"),re("Failed to load appointments",{variant:"error"})}finally{n(!1)}},J=async()=>{k(!0);try{const $=await Qt.getJobs({limit:100});C($)}catch($){console.error("Error loading jobs:",$)}finally{k(!1)}},f=async()=>{W(!0);try{const $=await rl.searchWorkers({limit:100}),Pe=($.data||$).workers||[];w(Pe)}catch($){console.error("Error loading users:",$),w([])}finally{W(!1)}};l.useEffect(()=>{z(),J(),f()},[]);const M=()=>{O("create"),V({jobId:"",jobTitle:"",hirerId:"",hirer:"",date:d,status:"pending",appointmentType:"in-person",location:"",meetingLink:"",notes:""}),K(!0)},G=$=>{O("edit"),H($),V({jobId:$.jobId||"",jobTitle:$.jobTitle||"",hirerId:$.hirerId||"",hirer:$.hirer||"",date:new Date($.date),status:$.status||"pending",appointmentType:$.appointmentType||"in-person",location:$.location||"",meetingLink:$.meetingLink||"",notes:$.notes||""}),K(!0)},I=()=>{K(!1),H(null)},L=async()=>{try{_==="create"?(await ma.createAppointment(F),re("Appointment created successfully",{variant:"success"})):(await ma.updateAppointment(T.id,F),re("Appointment updated successfully",{variant:"success"})),I(),z()}catch($){console.error("Error saving appointment:",$),re("Error saving appointment",{variant:"error"})}},S=async $=>{if(window.confirm("Delete this appointment?"))try{await ma.deleteAppointment($),re("Appointment deleted successfully",{variant:"success"}),z()}catch(de){console.error("Error deleting appointment:",de),re("Error deleting appointment",{variant:"error"})}},B=t.filter($=>{const de=v==="all"||$.status===v,Pe=!g||$.jobTitle.toLowerCase().includes(g.toLowerCase())||$.hirer.toLowerCase().includes(g.toLowerCase());return de&&Pe}),D=B.filter($=>En(new Date($.date),d)),N=B.reduce(($,de)=>{const Pe=wt(new Date(de.date),"yyyy-MM-dd");return $[Pe]=$[Pe]||[],$[Pe].push(de),$},{}),q=B.filter($=>Vl(new Date($.date),new Date)&&ql(new Date($.date),Yl(new Date,7))).sort(($,de)=>new Date($.date)-new Date(de.date));return e.jsxs(ye,{maxWidth:"md",sx:{py:4},children:[e.jsxs(o,{sx:{display:"flex",alignItems:"center",justifyContent:"space-between",mb:4},children:[e.jsxs(o,{sx:{display:"flex",alignItems:"center"},children:[e.jsx(Kn,{sx:{fontSize:36,mr:1.5,color:"primary.main"}}),e.jsx(a,{variant:"h4",fontWeight:"bold",children:"My Schedule"})]}),e.jsx(P,{variant:"contained",onClick:M,sx:{backgroundColor:"primary.main","&:hover":{backgroundColor:"primary.dark"},fontWeight:"bold"},children:"New Appointment"})]}),i&&e.jsx(be,{severity:"error",sx:{mb:3},children:i}),e.jsx(se,{sx:{p:2,mb:3,borderRadius:2},children:e.jsxs(h,{container:!0,spacing:2,alignItems:"center",children:[e.jsx(h,{item:!0,xs:12,sm:6,md:4,children:e.jsx(Q,{fullWidth:!0,size:"small",placeholder:"Search appointments...",value:g,onChange:$=>j($.target.value),InputProps:{startAdornment:e.jsx(dt,{color:"action",sx:{mr:1}})}})}),e.jsx(h,{item:!0,xs:12,sm:6,md:4,children:e.jsxs(Ne,{fullWidth:!0,size:"small",children:[e.jsx(Ye,{id:"status-filter-label",children:"Status"}),e.jsxs(Ge,{labelId:"status-filter-label",value:v,label:"Status",onChange:$=>y($.target.value),startAdornment:e.jsx(Ha,{color:"action",sx:{mr:1}}),children:[e.jsx(Z,{value:"all",children:"All Statuses"}),e.jsx(Z,{value:"pending",children:"Pending"}),e.jsx(Z,{value:"confirmed",children:"Confirmed"}),e.jsx(Z,{value:"completed",children:"Completed"}),e.jsx(Z,{value:"cancelled",children:"Cancelled"})]})]})}),e.jsx(h,{item:!0,xs:12,sm:12,md:4,children:e.jsxs(si,{value:m,exclusive:!0,onChange:($,de)=>de&&u(de),size:"small",fullWidth:!0,children:[e.jsx(Dr,{value:"calendar",children:"Calendar"}),e.jsx(Dr,{value:"agenda",children:"Agenda"}),e.jsx(Dr,{value:"upcoming",children:"Upcoming"}),e.jsx(Dr,{value:"map",children:"Map"})]})})]})}),m==="calendar"&&e.jsxs(e.Fragment,{children:[e.jsx(fl,{appointments:B,selectedDate:d,onDateChange:$=>x($)}),e.jsxs(o,{sx:{mb:4},children:[e.jsxs(a,{variant:"h5",fontWeight:600,sx:{mb:2},children:["Appointments for ",wt(d,"PPP")]}),s?Array.from(new Array(3)).map(($,de)=>e.jsx(Fn,{},de)):D.length>0?D.map($=>e.jsx(Rn,{appointment:$,onEdit:G,onDelete:S},$.id)):e.jsx(se,{sx:{p:4,textAlign:"center",backgroundColor:"background.default"},elevation:0,children:e.jsx(a,{children:"No appointments for this date."})})]})]}),m==="agenda"&&e.jsx(o,{sx:{mb:4},children:s?Array.from(new Array(3)).map(($,de)=>e.jsx(Fn,{},de)):Object.keys(N).length>0?Object.keys(N).sort(($,de)=>new Date($)-new Date(de)).map($=>e.jsxs(o,{sx:{mb:4},children:[e.jsx(a,{variant:"h6",fontWeight:"bold",sx:{mb:2},children:wt(Kl($),"PPP")}),N[$].map(de=>e.jsx(Rn,{appointment:de,onEdit:G,onDelete:S},de.id))]},$)):e.jsx(se,{sx:{p:4,textAlign:"center",backgroundColor:"background.default"},elevation:0,children:e.jsx(a,{children:"No appointments found matching your criteria."})})}),m==="upcoming"&&e.jsxs(o,{sx:{mb:4},children:[e.jsx(a,{variant:"h5",fontWeight:600,sx:{mb:2},children:"Upcoming Appointments (Next 7 Days)"}),s?Array.from(new Array(3)).map(($,de)=>e.jsx(Fn,{},de)):q.length>0?q.map($=>e.jsx(Rn,{appointment:$,onEdit:G,onDelete:S},$.id)):e.jsx(se,{sx:{p:4,textAlign:"center",backgroundColor:"background.default"},elevation:0,children:e.jsx(a,{children:"No upcoming appointments in the next 7 days."})})]}),m==="map"&&e.jsx(o,{sx:{height:500,mb:4},children:e.jsxs(Zi,{center:[0,0],zoom:2,style:{height:"100%",width:"100%"},children:[e.jsx(eo,{url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png"}),t.filter($=>$.coordinates).map($=>e.jsx(Wn,{position:[$.coordinates.lat,$.coordinates.lng],children:e.jsxs(Tn,{children:[e.jsx(a,{variant:"subtitle2",fontWeight:"bold",children:$.jobTitle}),e.jsx(a,{variant:"body2",children:wt(new Date($.date),"PPP p")}),e.jsx(a,{variant:"body2",children:$.location})]})},$.id))]})}),e.jsxs(Ee,{open:R,onClose:I,fullWidth:!0,maxWidth:"sm",children:[e.jsx(Me,{children:_==="create"?"New Appointment":"Edit Appointment"}),e.jsx(ze,{children:e.jsx(yl,{formData:F,setFormData:V,onSubmit:L,onCancel:I,jobs:b,users:A,loadingJobs:p,loadingUsers:U,mode:_})})]})]})};class kp{async getSettings(){return(await He.get("/settings")).data.data}async updateSettings(r){return(await He.put("/settings",r)).data.data}async updateNotificationPreferences(r){return(await He.put("/settings/notifications",r)).data.data}async updatePrivacySettings(r){return(await He.put("/settings/privacy",r)).data.data}async updateLanguage(r){return(await He.put("/settings/language",{language:r})).data.data}async updateTheme(r){return(await He.put("/settings/theme",{theme:r})).data.data}async getLanguages(){return(await He.get("/settings/languages")).data.data}async getThemes(){return(await He.get("/settings/themes")).data.data}async resetSettings(){return(await He.post("/settings/reset")).data.data}}const jr=new kp,pi=()=>{const t=ot(),r=je(qu),s=je(Yu),n=je(Ku),{isAuthenticated:i}=Qs(),[c,d]=l.useState([]),[x,m]=l.useState([]),u=l.useCallback(async()=>{try{t(Mt(!0));const p=await jr.getSettings();return t(Er(p)),p}catch(p){throw t(Tr(p.message)),p}finally{t(Mt(!1))}},[t]),v=l.useCallback(async p=>{try{t(Mt(!0));const k=await jr.updateSettings(p);return t(Er(k)),k}catch(k){throw t(Tr(k.message)),k}finally{t(Mt(!1))}},[t]),y=l.useCallback(async p=>{try{t(Mt(!0));const k=await jr.updateNotificationPreferences(p);return t(Er(k)),k}catch(k){throw t(Tr(k.message)),k}finally{t(Mt(!1))}},[t]),g=l.useCallback(async p=>{try{t(Mt(!0));const k=await jr.updatePrivacySettings(p);return t(Er(k)),k}catch(k){throw t(Tr(k.message)),k}finally{t(Mt(!1))}},[t]),j=l.useCallback(async p=>{try{t(Mt(!0));const k=await jr.updateLanguage(p);return t(Er(k)),k}catch(k){throw t(Tr(k.message)),k}finally{t(Mt(!1))}},[t]),b=l.useCallback(async p=>{try{t(Mt(!0));const k=await jr.updateTheme(p);return t(Er(k)),k}catch(k){throw t(Tr(k.message)),k}finally{t(Mt(!1))}},[t]),C=l.useCallback(async()=>{try{const p=await jr.getLanguages();return d(p),p}catch(p){throw console.error("Error loading languages:",p),p}},[]),A=l.useCallback(async()=>{try{const p=await jr.getThemes();return m(p),p}catch(p){throw console.error("Error loading themes:",p),p}},[]),w=l.useCallback(async()=>{try{t(Mt(!0));const p=await jr.resetSettings();return t(Er(p)),p}catch(p){throw t(Tr(p.message)),p}finally{t(Mt(!1))}},[t]);return l.useEffect(()=>{i&&(u(),C(),A())},[i,u,C,A]),{settings:r,loading:s,error:n,languages:c,themes:x,loadSettings:u,updateSettings:v,updateNotificationPreferences:y,updatePrivacySettings:g,updateLanguage:j,updateTheme:b,loadLanguages:C,loadThemes:A,resetSettings:w}},Sp=()=>{const{settings:t,loading:r,updateNotificationPreferences:s}=pi(),[n,i]=l.useState({email:!1,realtime:!1}),[c,d]=l.useState({open:!1,message:"",severity:"success"});l.useEffect(()=>{t!=null&&t.notifications&&i(t.notifications)},[t]);const x=v=>{const{name:y,checked:g}=v.target;i(j=>({...j,[y]:g}))},m=async()=>{try{await s(n),d({open:!0,message:"Settings saved successfully!",severity:"success"})}catch{d({open:!0,message:"Error saving settings",severity:"error"})}},u=()=>{d(v=>({...v,open:!1}))};return e.jsxs(se,{sx:{p:3},children:[e.jsx(a,{variant:"h5",gutterBottom:!0,children:"Notification Settings"}),e.jsx(a,{variant:"body2",color:"text.secondary",sx:{mb:2},children:"Manage how you receive notifications from Kelmah."}),e.jsx(fe,{sx:{mb:3}}),e.jsxs(Fd,{children:[e.jsx(ft,{control:e.jsx(ss,{checked:n.email,onChange:x,name:"email"}),label:"Email Notifications"}),e.jsx(ft,{control:e.jsx(ss,{checked:n.realtime,onChange:x,name:"realtime"}),label:"Push Notifications"})]}),e.jsx(o,{sx:{mt:3,display:"flex",justifyContent:"flex-end"},children:e.jsx(P,{variant:"contained",onClick:m,disabled:r,children:r?e.jsx(Ae,{size:24}):"Save Changes"})}),e.jsx(Wt,{open:c.open,autoHideDuration:6e3,onClose:u,children:e.jsx(be,{onClose:u,severity:c.severity,sx:{width:"100%"},children:c.message})})]})},Ap=()=>{ot();const t=je(ul),r=je(xl),s=je(hl),{updateProfile:n}=ui(),[i,c]=l.useState({firstName:(t==null?void 0:t.firstName)||"",lastName:(t==null?void 0:t.lastName)||"",email:(t==null?void 0:t.email)||"",phone:(t==null?void 0:t.phone)||""}),[d,x]=l.useState({open:!1,message:"",severity:"success"});l.useEffect(()=>{c({firstName:(t==null?void 0:t.firstName)||"",lastName:(t==null?void 0:t.lastName)||"",email:(t==null?void 0:t.email)||"",phone:(t==null?void 0:t.phone)||""})},[t]);const m=y=>{const{name:g,value:j}=y.target;c(b=>({...b,[g]:j}))},u=async()=>{try{await n(i),x({open:!0,message:"Account settings updated!",severity:"success"})}catch(y){x({open:!0,message:y.message||"Error updating settings",severity:"error"})}},v=()=>{x(y=>({...y,open:!1}))};return e.jsxs(o,{sx:{p:3},children:[e.jsx(a,{variant:"h5",gutterBottom:!0,children:"Account Settings"}),s&&e.jsx(be,{severity:"error",sx:{mb:2},children:s}),e.jsxs(o,{component:"form",sx:{display:"flex",flexDirection:"column",gap:2},children:[e.jsx(Q,{label:"First Name",name:"firstName",value:i.firstName,onChange:m,fullWidth:!0}),e.jsx(Q,{label:"Last Name",name:"lastName",value:i.lastName,onChange:m,fullWidth:!0}),e.jsx(Q,{label:"Email",name:"email",type:"email",value:i.email,onChange:m,fullWidth:!0}),e.jsx(Q,{label:"Phone",name:"phone",value:i.phone,onChange:m,fullWidth:!0}),e.jsx(o,{sx:{display:"flex",gap:2,justifyContent:"flex-end"},children:e.jsx(P,{variant:"contained",onClick:u,disabled:r,children:r?e.jsx(Ae,{size:24}):"Save Changes"})})]}),e.jsx(Wt,{open:d.open,autoHideDuration:6e3,onClose:v,children:e.jsx(be,{onClose:v,severity:d.severity,sx:{width:"100%"},children:d.message})})]})},Pp=()=>{const{user:t,disableMfa:r}=ut(),[s,n]=l.useState({currentPassword:"",newPassword:"",confirmPassword:""}),[i,c]=l.useState(!1),[d,x]=l.useState({open:!1,message:"",severity:"success"}),[m,u]=l.useState(!1),[v,y]=l.useState({password:"",token:""}),[g,j]=l.useState(!1),[b,C]=l.useState({open:!1,message:"",severity:"success"}),A=R=>{const{name:K,value:_}=R.target;n(O=>({...O,[K]:_}))},w=R=>{const{name:K,value:_}=R.target;y(O=>({...O,[K]:_}))},p=async R=>{var K,_;R.preventDefault(),j(!0);try{await r(v.password,v.token),C({open:!0,message:"Two-factor authentication disabled.",severity:"success"}),u(!1)}catch(O){C({open:!0,message:((_=(K=O.response)==null?void 0:K.data)==null?void 0:_.message)||O.message,severity:"error"})}finally{j(!1)}},k=()=>C(R=>({...R,open:!1})),U=async()=>{var R,K;if(s.newPassword!==s.confirmPassword){x({open:!0,message:"New passwords do not match",severity:"error"});return}c(!0);try{await Us.changePassword({currentPassword:s.currentPassword,newPassword:s.newPassword}),x({open:!0,message:"Password changed successfully",severity:"success"}),n({currentPassword:"",newPassword:"",confirmPassword:""})}catch(_){const O=((K=(R=_.response)==null?void 0:R.data)==null?void 0:K.message)||_.message;x({open:!0,message:O,severity:"error"})}finally{c(!1)}},W=()=>x(R=>({...R,open:!1}));return e.jsxs(o,{p:3,sx:{display:"flex",flexDirection:"column",gap:2},children:[e.jsx(a,{variant:"h5",gutterBottom:!0,children:"Change Password"}),e.jsx(Q,{label:"Current Password",name:"currentPassword",type:"password",value:s.currentPassword,onChange:A,fullWidth:!0}),e.jsx(Q,{label:"New Password",name:"newPassword",type:"password",value:s.newPassword,onChange:A,fullWidth:!0}),e.jsx(Q,{label:"Confirm New Password",name:"confirmPassword",type:"password",value:s.confirmPassword,onChange:A,fullWidth:!0}),e.jsx(o,{sx:{display:"flex",justifyContent:"flex-end"},children:e.jsx(P,{variant:"contained",onClick:U,disabled:i,children:i?e.jsx(Ae,{size:24}):"Update Password"})}),e.jsx(Wt,{open:d.open,autoHideDuration:6e3,onClose:W,children:e.jsx(be,{onClose:W,severity:d.severity,sx:{width:"100%"},children:d.message})}),e.jsxs(o,{p:3,sx:{mt:4,borderTop:"1px solid",borderColor:"divider"},children:[e.jsx(a,{variant:"h5",gutterBottom:!0,children:"Two-Factor Authentication"}),t!=null&&t.isTwoFactorEnabled?e.jsxs(e.Fragment,{children:[e.jsxs(a,{children:["Two-factor authentication is currently ",e.jsx("strong",{children:"enabled"}),"."]}),!m&&e.jsx(P,{variant:"outlined",onClick:()=>u(!0),sx:{mt:1},children:"Disable Two-Factor Authentication"}),m&&e.jsxs(o,{component:"form",onSubmit:p,sx:{mt:2,display:"flex",flexDirection:"column",gap:2},children:[e.jsx(Q,{label:"Current Password",name:"password",type:"password",value:v.password,onChange:w,fullWidth:!0,required:!0}),e.jsx(Q,{label:"Authentication Code",name:"token",value:v.token,onChange:w,fullWidth:!0,required:!0}),e.jsx(P,{type:"submit",variant:"contained",disabled:g,children:g?e.jsx(Ae,{size:24}):"Confirm Disable"}),e.jsx(P,{variant:"text",onClick:()=>u(!1),children:"Cancel"})]})]}):e.jsxs(e.Fragment,{children:[e.jsxs(a,{children:["Two-factor authentication is currently ",e.jsx("strong",{children:"disabled"}),"."]}),e.jsx(P,{variant:"contained",component:Fe,to:"/mfa/setup",sx:{mt:1},children:"Enable Two-Factor Authentication"})]}),e.jsx(Wt,{open:b.open,autoHideDuration:6e3,onClose:k,children:e.jsx(be,{onClose:k,severity:b.severity,sx:{width:"100%"},children:b.message})})]})]})},Dp=()=>{const{settings:t,loading:r,updatePrivacySettings:s}=pi(),[n,i]=l.useState({profileVisibility:"public",searchVisibility:!0,dataSharing:!1}),[c,d]=l.useState(!1),[x,m]=l.useState({open:!1,message:"",severity:"success"});l.useEffect(()=>{t!=null&&t.privacy&&i(t.privacy)},[t]);const u=g=>j=>{i(b=>({...b,[g]:j.target.checked}))},v=async()=>{var g,j;d(!0);try{await s(n),m({open:!0,message:"Privacy settings updated",severity:"success"})}catch(b){const C=((j=(g=b.response)==null?void 0:g.data)==null?void 0:j.message)||b.message;m({open:!0,message:C,severity:"error"})}finally{d(!1)}},y=()=>m(g=>({...g,open:!1}));return e.jsxs(o,{p:3,sx:{display:"flex",flexDirection:"column",gap:2},children:[e.jsx(a,{variant:"h5",gutterBottom:!0,children:"Privacy Settings"}),e.jsx(ft,{control:e.jsx(ss,{checked:n.searchVisibility,onChange:u("searchVisibility"),color:"primary"}),label:"Appear in search results"}),e.jsx(ft,{control:e.jsx(ss,{checked:n.dataSharing,onChange:u("dataSharing"),color:"primary"}),label:"Allow data sharing with trusted partners"}),e.jsx(ft,{control:e.jsx(ss,{checked:n.profileVisibility==="public",onChange:()=>i(g=>({...g,profileVisibility:g.profileVisibility==="public"?"private":"public"})),color:"primary"}),label:`Profile visibility: ${n.profileVisibility==="public"?"Public":"Private"}`}),e.jsx(o,{sx:{display:"flex",justifyContent:"flex-end"},children:e.jsx(P,{variant:"contained",onClick:v,disabled:c||r,children:c?e.jsx(Ae,{size:24}):"Save Changes"})}),e.jsx(Wt,{open:x.open,autoHideDuration:6e3,onClose:y,children:e.jsx(be,{onClose:y,severity:x.severity,sx:{width:"100%"},children:x.message})})]})},Ip=()=>{const{settings:t,loading:r,error:s,updateNotificationPreferences:n}=pi(),[i,c]=l.useState(0),d=(m,u)=>{c(u)},x=[{component:e.jsx(Sp,{settings:t,loading:r,error:s,updateNotificationPreferences:n}),label:"Notifications",icon:e.jsx(yr,{})},{component:e.jsx(Ap,{}),label:"Account",icon:e.jsx(Ja,{})},{component:e.jsx(Pp,{}),label:"Security & Password",icon:e.jsx(Wd,{})},{component:e.jsx(Dp,{}),label:"Privacy",icon:e.jsx(Td,{})}];return e.jsxs(ye,{maxWidth:"lg",sx:{py:4,color:"text.primary"},children:[e.jsxs(o,{sx:{display:"flex",alignItems:"center",mb:4},children:[e.jsx(uo,{sx:{fontSize:36,mr:1.5,color:"primary.main"}}),e.jsx(a,{variant:"h4",fontWeight:"bold",children:"Settings"})]}),e.jsxs(h,{container:!0,spacing:4,children:[e.jsx(h,{item:!0,xs:12,md:3,children:e.jsx(se,{elevation:2,sx:{p:1,backgroundColor:m=>E(m.palette.background.paper,.7),backdropFilter:"blur(10px)",borderRadius:2},children:e.jsx($t,{orientation:"vertical",variant:"scrollable",value:i,onChange:d,"aria-label":"Vertical settings tabs",sx:{borderRight:1,borderColor:"divider","& .MuiTab-root":{justifyContent:"flex-start",fontWeight:"600",textTransform:"none"},"& .Mui-selected":{color:"primary.main"}},children:x.map((m,u)=>e.jsx(Ce,{label:m.label,icon:m.icon,iconPosition:"start"},m.label))})})}),e.jsx(h,{item:!0,xs:12,md:9,children:e.jsx(o,{children:x[i].component})})]})]})},Rp=he(se)(({theme:t})=>({padding:t.spacing(3),borderRadius:t.spacing(2),backgroundColor:E(t.palette.primary.main,.7),backdropFilter:"blur(10px)",border:`2px solid ${t.palette.secondary.main}`,boxShadow:"inset 0 0 8px rgba(255, 215, 0, 0.5)",transition:"box-shadow 0.3s ease-in-out, border-color 0.3s ease-in-out","&:hover":{boxShadow:"0 0 12px rgba(255, 215, 0, 0.3), inset 0 0 8px rgba(255, 215, 0, 0.5)",borderColor:t.palette.secondary.light}})),vl=({review:t})=>{const{author:r,rating:s,content:n,date:i,jobTitle:c}=t;return e.jsx(Rp,{children:e.jsxs(te,{spacing:2,height:"100%",children:[e.jsxs(te,{direction:"row",spacing:2,alignItems:"center",children:[e.jsx(we,{src:r.avatar,alt:r.name,sx:{width:48,height:48}}),e.jsxs(o,{children:[e.jsx(a,{variant:"subtitle1",fontWeight:"bold",children:r.name}),e.jsxs(a,{variant:"body2",color:"text.secondary",children:['Review for "',c,'"']})]})]}),e.jsx(fe,{}),e.jsxs(te,{direction:"row",alignItems:"center",spacing:1,children:[e.jsx(Qe,{value:s,precision:.5,readOnly:!0}),e.jsxs(a,{variant:"body2",fontWeight:"bold",children:["(",s.toFixed(1),")"]})]}),e.jsxs(a,{variant:"body1",sx:{flexGrow:1,fontStyle:"italic",color:"text.secondary"},children:['"',n,'"']}),e.jsx(a,{variant:"caption",color:"text.secondary",alignSelf:"flex-end",children:Hs(new Date(i),{addSuffix:!0})})]})})};vl.propTypes={review:Y.shape({id:Y.any.isRequired,author:Y.shape({name:Y.string.isRequired,avatar:Y.string}).isRequired,rating:Y.number.isRequired,content:Y.string.isRequired,date:Y.string.isRequired,jobTitle:Y.string.isRequired}).isRequired};class Fp{async getUserReviews(r,s=1,n=10){var i;try{const d=(await pe.get(`/api/reviews/worker/${r}`,{params:{page:s,limit:n}})).data,x=d.data||[],m=((i=d.meta)==null?void 0:i.pagination)||{};return{reviews:x,pagination:m}}catch(c){throw console.error("Error fetching user reviews:",c),c}}async getJobReviews(r,s=1,n=10){var i;try{const d=(await pe.get(`/api/reviews/job/${r}`,{params:{page:s,limit:n}})).data,x=d.data||[],m=((i=d.meta)==null?void 0:i.pagination)||{};return{reviews:x,pagination:m}}catch(c){throw console.error("Error fetching job reviews:",c),c}}async createReview(r){try{return(await pe.post("/reviews",r)).data.data}catch(s){throw console.error("Error creating review:",s),s}}async updateReview(r,s){try{return(await pe.put(`/api/reviews/${r}`,s)).data.data}catch(n){throw console.error("Error updating review:",n),n}}async deleteReview(r){try{return await pe.delete(`/api/reviews/${r}`),!0}catch(s){throw console.error("Error deleting review:",s),s}}}const Wp=new Fp,Tp=({distribution:t,totalReviews:r})=>e.jsx(o,{children:t.map(s=>e.jsxs(te,{direction:"row",alignItems:"center",spacing:1,mb:.5,children:[e.jsxs(a,{variant:"caption",sx:{width:"60px"},children:[s.stars," stars"]}),e.jsx(o,{sx:{flexGrow:1,mr:1},children:e.jsx(lr,{variant:"determinate",value:s.count/r*100,sx:{height:8,borderRadius:2}})}),e.jsx(a,{variant:"caption",sx:{width:"30px"},children:s.count})]},s.stars))}),Ep=()=>{const{user:t}=Qs(),[r,s]=l.useState(!0),[n,i]=l.useState([]),[c,d]=l.useState(1),x=10,[m,u]=l.useState({page:1,limit:x,total:0,pageCount:1});l.useEffect(()=>{t!=null&&t.id&&(s(!0),Wp.getUserReviews(t.id,c,x).then(({reviews:b,pagination:C})=>{i(b),u(C)}).catch(console.error).finally(()=>s(!1)))},[t,c]);const v=(b,C)=>{d(C)};if(r)return e.jsxs(ye,{maxWidth:"lg",sx:{py:4},children:[e.jsxs(te,{direction:"row",spacing:2,alignItems:"center",mb:4,children:[e.jsx(ie,{variant:"circular",width:64,height:64}),e.jsxs(o,{sx:{flexGrow:1},children:[e.jsx(ie,{variant:"text",width:"40%"}),e.jsx(ie,{variant:"text",width:"30%"})]})]}),e.jsxs(h,{container:!0,spacing:4,children:[e.jsx(h,{item:!0,xs:12,md:4,children:e.jsx(ie,{variant:"rectangular",height:200,sx:{borderRadius:2}})}),e.jsx(h,{item:!0,xs:12,md:8,children:Array.from(new Array(3)).map((b,C)=>e.jsx(ie,{variant:"rectangular",height:150,sx:{mb:2,borderRadius:2}},C))})]})]});const y=n.length,g=y?n.reduce((b,C)=>b+C.rating,0)/y:0,j=[5,4,3,2,1].map(b=>({stars:b,count:n.filter(C=>C.rating===b).length}));return e.jsxs(ye,{maxWidth:"lg",sx:{py:4},children:[e.jsx(te,{direction:"row",spacing:2,alignItems:"center",mb:4,children:e.jsxs(o,{children:[e.jsx(a,{variant:"h4",fontWeight:"bold",children:"My Reviews"}),e.jsxs(a,{variant:"subtitle1",color:"text.secondary",children:["Average rating: ",g.toFixed(1)," (",y," reviews)"]})]})}),e.jsxs(h,{container:!0,spacing:4,children:[e.jsx(h,{item:!0,xs:12,md:4,children:e.jsxs(se,{sx:b=>({p:3,borderRadius:b.spacing(2),backgroundColor:E(b.palette.primary.main,.7),backdropFilter:"blur(10px)",border:`2px solid ${b.palette.secondary.main}`,boxShadow:"inset 0 0 8px rgba(255, 215, 0, 0.5)",transition:"box-shadow 0.3s ease-in-out, border-color 0.3s ease-in-out","&:hover":{boxShadow:"0 0 12px rgba(255, 215, 0, 0.3), inset 0 0 8px rgba(255, 215, 0, 0.5)",borderColor:b.palette.secondary.light}}),children:[e.jsx(a,{variant:"h5",fontWeight:"600",mb:2,children:"Rating Summary"}),e.jsxs(te,{direction:"row",alignItems:"center",spacing:1,mb:2,children:[e.jsx(rt,{color:"secondary",sx:{fontSize:32}}),e.jsx(a,{variant:"h4",fontWeight:"bold",children:g.toFixed(1)}),e.jsxs(a,{variant:"body1",color:"text.secondary",children:["(",y," reviews)"]})]}),e.jsx(fe,{sx:{my:2}}),e.jsx(Tp,{distribution:j,totalReviews:y})]})}),e.jsx(h,{item:!0,xs:12,md:8,children:e.jsx(h,{container:!0,spacing:2,children:n.map(b=>e.jsx(h,{item:!0,xs:12,children:e.jsx(vl,{review:{id:b._id,author:{name:`${b.reviewer.firstName} ${b.reviewer.lastName}`,avatar:b.reviewer.profilePicture},rating:b.rating,content:b.comment,date:b.createdAt,jobTitle:`Job ${b.job}`}})},b._id))})})]}),e.jsx(o,{display:"flex",justifyContent:"center",mt:4,children:e.jsx(Gt,{count:m.pageCount,page:c,onChange:v,color:"secondary"})})]})},Mp=[{title:"Basic",price:"0",description:"For individuals and small teams trying out Kelmah.",features:["5 Job Posts per Month","Basic Worker Search","Standard Support","Access to Basic Analytics"],buttonText:"Current Plan",buttonVariant:"outlined"},{title:"Pro",price:"49",description:"For growing businesses that need more power and support.",features:["Unlimited Job Posts","Advanced Worker Search","Priority Support","Advanced Analytics","Featured Job Listings"],buttonText:"Upgrade to Pro",buttonVariant:"contained"},{title:"Enterprise",price:"Custom",description:"For large organizations with custom needs.",features:["All Pro Features","Dedicated Account Manager","Custom Integrations","On-premises Deployment Options","Personalized Onboarding"],buttonText:"Contact Us",buttonVariant:"outlined"}],zp=()=>{const t=ve();return e.jsxs(ye,{maxWidth:"lg",sx:{py:5},children:[e.jsxs(se,{sx:{p:4,textAlign:"center",mb:5},children:[e.jsx(ee,{icon:e.jsx(rt,{}),label:"Premium",color:"secondary",sx:{mb:2}}),e.jsx(a,{variant:"h3",component:"h1",fontWeight:"bold",children:"Unlock Your Potential"}),e.jsx(a,{variant:"h6",color:"text.secondary",sx:{mt:1},children:"Choose a plan that's right for you and your business."})]}),e.jsx(h,{container:!0,spacing:4,alignItems:"stretch",children:Mp.map(r=>e.jsx(h,{item:!0,xs:12,md:4,children:e.jsxs(me,{sx:{height:"100%",display:"flex",flexDirection:"column",border:r.title==="Pro"?`2px solid ${t.palette.secondary.main}`:`1px solid ${t.palette.divider}`},children:[e.jsxs(ce,{sx:{flexGrow:1},children:[e.jsx(a,{variant:"h5",component:"h2",gutterBottom:!0,children:r.title}),e.jsxs(o,{sx:{display:"flex",alignItems:"baseline",my:2},children:[e.jsxs(a,{variant:"h4",component:"h2",children:["$",r.price]}),e.jsx(a,{variant:"h6",color:"text.secondary",children:r.price!=="Custom"&&"/mo"})]}),e.jsx(a,{variant:"subtitle1",color:"text.secondary",paragraph:!0,children:r.description}),e.jsx(Ke,{children:r.features.map(s=>e.jsxs(Be,{disableGutters:!0,children:[e.jsx(Ze,{sx:{minWidth:"auto",mr:1,color:"success.main"},children:e.jsx(Ve,{fontSize:"small"})}),e.jsx(Ie,{primary:s})]},s))})]}),e.jsx(wr,{sx:{p:2},children:e.jsx(P,{fullWidth:!0,variant:r.buttonVariant,color:"primary",size:"large",children:r.buttonText})})]})},r.title))})]})},Xi=new Intl.NumberFormat("en-GH",{style:"currency",currency:"GHS"}),Lp=()=>{const{escrowId:t}=Cr(),{escrows:r,paymentMethods:s,refresh:n}=Ka(),{showToast:i}=Kr(),c=r.find(v=>v.id===t),[d,x]=l.useState(!1),[m,u]=l.useState("");return l.useEffect(()=>{s&&s.length>0&&u(s[0].id)},[s]),c?e.jsxs(ye,{maxWidth:"md",sx:{py:4},children:[e.jsx(o,{sx:{mb:4,display:"flex",justifyContent:"flex-start"},children:e.jsx(a,{variant:"h4",sx:{color:"secondary.main"},children:"Escrow Details"})}),e.jsxs(se,{elevation:3,sx:{p:4,borderRadius:2,background:"linear-gradient(to right, #28313b, #485461, #ffd700)",color:"white",border:"2px solid",borderColor:"secondary.main",boxShadow:"0 2px 8px rgba(255,215,0,0.4)"},children:[e.jsx(a,{variant:"h4",fontWeight:"bold",sx:{mb:2,color:"secondary.main"},children:c.title}),e.jsx(fe,{sx:{mb:2}}),e.jsxs(o,{sx:{mb:2},children:[e.jsx(a,{variant:"subtitle1",fontWeight:"bold",children:"Other Party:"}),e.jsx(a,{variant:"body1",children:c.otherParty})]}),e.jsxs(o,{sx:{mb:2},children:[e.jsx(a,{variant:"subtitle1",fontWeight:"bold",children:"Amount:"}),e.jsx(a,{variant:"body1",children:Xi.format(c.amount)})]}),e.jsxs(o,{sx:{mb:4},children:[e.jsx(a,{variant:"subtitle1",fontWeight:"bold",children:"Status:"}),e.jsx(a,{variant:"body1",children:c.status})]}),e.jsxs(o,{sx:{display:"flex",gap:2,mb:2},children:[e.jsx(P,{variant:"contained",color:"secondary",sx:{boxShadow:"0 2px 8px rgba(255,215,0,0.4)"},onClick:()=>x(!0),children:"Release Funds"}),e.jsx(P,{variant:"outlined",color:"secondary",sx:{borderWidth:2,borderColor:"secondary.main",boxShadow:"0 2px 8px rgba(255,215,0,0.4)"},component:Fe,to:"/worker/payment",children:"Back to Payment Center"})]})]}),e.jsxs(Ee,{open:d,onClose:()=>x(!1),fullWidth:!0,maxWidth:"sm",BackdropProps:{sx:{backgroundColor:"rgba(0, 0, 0, 0.85)",backdropFilter:"blur(4px)"}},PaperProps:{sx:{bgcolor:"grey.900",color:"text.primary",borderRadius:2,border:"2px solid",borderColor:"secondary.main",boxShadow:"0 0 16px rgba(255,215,0,0.5)"}},children:[e.jsxs(Me,{sx:{display:"flex",alignItems:"center",gap:1},children:[e.jsx(Ms,{sx:{color:"secondary.main",fontSize:28}}),e.jsxs(a,{variant:"h6",sx:{color:"secondary.main",fontWeight:"bold"},children:["Release Funds to ",c.otherParty]})]}),e.jsx(fe,{sx:{borderColor:"secondary.main",my:1,height:2}}),e.jsxs(ze,{children:[e.jsxs(a,{gutterBottom:!0,children:["Amount: ",Xi.format(c.amount)]}),e.jsxs(Ne,{fullWidth:!0,margin:"dense",children:[e.jsx(Ye,{sx:{color:"secondary.main"},children:"Payment Method"}),e.jsx(Ge,{variant:"filled",value:m,onChange:v=>u(v.target.value),inputProps:{disableUnderline:!0},sx:{bgcolor:"grey.800",borderRadius:1,p:"8px 12px",color:"text.primary",border:"1px solid",borderColor:"secondary.main",boxShadow:"inset 0 0 8px rgba(255,215,0,0.3)"},children:s.map(v=>e.jsx(Z,{value:v.id,children:v.name||v.type},v.id))})]})]}),e.jsxs(Le,{children:[e.jsx(P,{onClick:()=>x(!1),variant:"outlined",color:"secondary",sx:{borderWidth:2,borderColor:"secondary.main",boxShadow:"0 2px 8px rgba(255,215,0,0.4)"},children:"Cancel"}),e.jsx(P,{onClick:async()=>{try{await At.releaseEscrow(c.id,{paymentMethodId:m}),i("Funds released successfully.","success"),await n()}catch(v){console.error("Release failed:",v),i("Failed to release funds.","error")}finally{x(!1)}},variant:"contained",color:"secondary",sx:{boxShadow:"0 2px 8px rgba(255,215,0,0.4)"},children:"Confirm Release"})]})]})]}):e.jsx(ye,{sx:{py:4},children:e.jsx(a,{variant:"h6",children:"Escrow not found."})})},$p=[{id:"sample-1",name:"Sarah Johnson",title:"Expert Plumber & Home Renovation Specialist",avatar:"https://images.unsplash.com/photo-1494790108755-2616b612b786?w=400",rating:4.9,reviewCount:127,skills:["Plumbing","Pipe Repair","Water Heater Installation","Emergency Repairs"],location:"San Francisco, CA",hourlyRate:85,completedJobs:156,responseTime:"< 2 hours",verified:!0,description:"Licensed plumber with 8+ years experience. Specialized in emergency repairs and kitchen/bathroom renovations.",availability:"Available",specialties:["Emergency Repairs","Bathroom Renovation"],certifications:["Licensed Plumber","EPA Certified"],portfolioImages:3,languages:["English","Spanish"]},{id:"sample-2",name:"Marcus Thompson",title:"Licensed Electrician & Smart Home Expert",avatar:"https://images.unsplash.com/photo-1472099645785-5658abf4ff4e?w=400",rating:4.8,reviewCount:93,skills:["Electrical Wiring","Home Automation","Circuit Breakers","Smart Systems"],location:"Austin, TX",hourlyRate:90,completedJobs:89,responseTime:"< 1 hour",verified:!0,description:"Master electrician specializing in residential and commercial electrical systems. Tesla Powerwall certified installer.",availability:"Available",specialties:["Smart Home Integration","Solar Installation"],certifications:["Master Electrician","Tesla Certified"],portfolioImages:8,languages:["English"]},{id:"sample-3",name:"Elena Rodriguez",title:"Professional Carpenter & Custom Furniture Maker",avatar:"https://images.unsplash.com/photo-1438761681033-6461ffad8d80?w=400",rating:4.9,reviewCount:201,skills:["Carpentry","Custom Furniture","Kitchen Cabinets","Woodworking"],location:"Denver, CO",hourlyRate:75,completedJobs:234,responseTime:"< 30 min",verified:!0,description:"Award-winning carpenter with expertise in custom woodwork and furniture design. Featured in Home & Garden Magazine.",availability:"Busy until Feb 15",specialties:["Custom Cabinetry","Hardwood Flooring"],certifications:["Master Carpenter","OSHA Certified"],portfolioImages:15,languages:["English","Spanish"]},{id:"sample-4",name:"David Chen",title:"Interior Designer & Paint Specialist",avatar:"https://images.unsplash.com/photo-1507003211169-0a1dd7228f2d?w=400",rating:4.7,reviewCount:78,skills:["Interior Design","Painting","Color Consultation","Space Planning"],location:"Seattle, WA",hourlyRate:65,completedJobs:145,responseTime:"< 3 hours",verified:!0,description:"Creative interior designer with a focus on modern and sustainable design solutions. Color theory expert.",availability:"Available",specialties:["Modern Design","Eco-Friendly Solutions"],certifications:["Interior Design Degree","LEED Certified"],portfolioImages:12,languages:["English","Mandarin"]}],Bp=[{icon:e.jsx(zs,{}),value:"50,000+",label:"Verified Professionals"},{icon:e.jsx(Ve,{}),value:"98%",label:"Project Success Rate"},{icon:e.jsx(cr,{}),value:"24/7",label:"Customer Support"},{icon:e.jsx(Ps,{}),value:"4.9/5",label:"Average Rating"}],wl=({worker:t,isSaved:r,onToggleSave:s,isDemo:n=!1})=>{var x;const i=ve(),c=Oe(),d=m=>m==="Available"?"success":m.includes("Busy")?"warning":"default";return e.jsxs(me,{sx:{height:"100%",position:"relative",transition:"all 0.4s cubic-bezier(0.4, 0, 0.2, 1)",background:i.palette.background.paper,border:`2px solid ${E(i.palette.secondary.main,.2)}`,borderRadius:3,overflow:"hidden","&:hover":{transform:"translateY(-8px) scale(1.02)",boxShadow:`0 20px 40px ${E(i.palette.secondary.main,.4)}`,borderColor:i.palette.secondary.main}},children:[t.verified&&e.jsx(ee,{icon:e.jsx(xr,{}),label:"VERIFIED PRO",size:"small",sx:{position:"absolute",top:12,left:12,zIndex:2,backgroundColor:i.palette.secondary.main,color:i.palette.secondary.contrastText,fontWeight:"bold",fontSize:"0.75rem"}}),e.jsx(ne,{onClick:()=>!n&&s(t.id||t._id),sx:{position:"absolute",top:12,right:12,zIndex:2,backgroundColor:E(i.palette.background.default,.9),color:r?i.palette.secondary.main:i.palette.text.secondary,"&:hover":{backgroundColor:E(i.palette.secondary.main,.1),color:i.palette.secondary.main}},disabled:n,children:r?e.jsx(Ed,{}):e.jsx(Md,{})}),e.jsxs(ce,{sx:{p:3},children:[e.jsxs(o,{sx:{textAlign:"center",mb:3},children:[e.jsx(we,{src:t.avatar,sx:{width:100,height:100,mb:2,mx:"auto",border:`4px solid ${i.palette.secondary.main}`,boxShadow:`0 8px 20px ${E(i.palette.secondary.main,.3)}`}}),e.jsx(a,{variant:"h6",fontWeight:"bold",sx:{color:i.palette.text.primary,fontSize:"1.25rem",lineHeight:1.3,mb:1},children:t.name}),e.jsx(a,{variant:"body2",sx:{color:i.palette.text.secondary,fontSize:"0.95rem",lineHeight:1.4,fontWeight:500,mb:2},children:t.title}),e.jsx(ee,{label:t.availability,color:d(t.availability),size:"small",sx:{mb:2,fontWeight:"bold"}})]}),e.jsxs(o,{sx:{mb:3},children:[e.jsxs(te,{direction:"row",justifyContent:"center",alignItems:"center",spacing:1,sx:{mb:1},children:[e.jsx(Qe,{value:t.rating,precision:.1,readOnly:!0,size:"small",sx:{"& .MuiRating-iconFilled":{color:i.palette.secondary.main}}}),e.jsxs(a,{variant:"body2",sx:{color:i.palette.text.primary,fontWeight:"bold"},children:[t.rating," (",t.reviewCount,")"]})]}),e.jsxs(te,{direction:"row",spacing:1,alignItems:"center",justifyContent:"center",sx:{mb:2},children:[e.jsx(nt,{fontSize:"small",sx:{color:i.palette.secondary.main}}),e.jsx(a,{variant:"body2",sx:{color:i.palette.text.primary,fontWeight:500},children:t.location})]}),e.jsxs(h,{container:!0,spacing:2,sx:{mb:3},children:[e.jsx(h,{item:!0,xs:6,children:e.jsxs(o,{sx:{textAlign:"center",p:2,borderRadius:2,backgroundColor:E(i.palette.secondary.main,.1),border:`1px solid ${E(i.palette.secondary.main,.3)}`},children:[e.jsxs(a,{variant:"h6",sx:{color:i.palette.secondary.main,fontWeight:"bold"},children:["$",t.hourlyRate]}),e.jsx(a,{variant:"caption",sx:{color:i.palette.text.secondary,fontWeight:600},children:"per hour"})]})}),e.jsx(h,{item:!0,xs:6,children:e.jsxs(o,{sx:{textAlign:"center",p:2,borderRadius:2,backgroundColor:E(i.palette.secondary.main,.1),border:`1px solid ${E(i.palette.secondary.main,.3)}`},children:[e.jsx(a,{variant:"h6",sx:{color:i.palette.secondary.main,fontWeight:"bold"},children:t.completedJobs}),e.jsx(a,{variant:"caption",sx:{color:i.palette.text.secondary,fontWeight:600},children:"jobs done"})]})})]})]}),e.jsxs(o,{sx:{mb:3},children:[e.jsx(a,{variant:"subtitle2",sx:{color:i.palette.text.primary,fontWeight:"bold",mb:1},children:"Top Skills"}),e.jsx(o,{sx:{display:"flex",flexWrap:"wrap",gap:.5},children:(t.skills||[]).slice(0,4).map(m=>e.jsx(ee,{label:m,size:"small",sx:{fontSize:"0.7rem",fontWeight:"bold",backgroundColor:E(i.palette.secondary.main,.2),color:i.palette.text.primary,border:`1px solid ${E(i.palette.secondary.main,.5)}`}},m))})]}),e.jsxs(te,{spacing:2,children:[e.jsxs(o,{sx:{display:"flex",alignItems:"center",p:1.5,borderRadius:2,backgroundColor:E(i.palette.secondary.main,.05),border:`1px solid ${E(i.palette.secondary.main,.2)}`},children:[e.jsx(Tt,{fontSize:"small",sx:{color:i.palette.secondary.main,mr:1}}),e.jsxs(a,{variant:"body2",sx:{color:i.palette.text.primary,fontWeight:"bold"},children:["Responds ",t.responseTime]})]}),e.jsxs(te,{direction:"row",spacing:1,justifyContent:"center",children:[e.jsx(xe,{title:"Portfolio Items",children:e.jsx(ee,{icon:e.jsx(tt,{}),label:t.portfolioImages,size:"small",variant:"outlined"})}),e.jsx(xe,{title:"Certifications",children:e.jsx(ee,{icon:e.jsx(za,{}),label:((x=t.certifications)==null?void 0:x.length)||0,size:"small",variant:"outlined"})})]})]})]}),e.jsxs(wr,{sx:{p:3,pt:0,display:"flex",flexDirection:"column",gap:2},children:[e.jsx(P,{fullWidth:!0,variant:"contained",onClick:()=>!n&&c(`/profiles/user/${t.id||t._id}`),disabled:n,sx:{py:1.5,fontSize:"1rem",fontWeight:"bold",backgroundColor:i.palette.secondary.main,color:i.palette.secondary.contrastText,borderRadius:2,"&:hover":{backgroundColor:i.palette.secondary.dark,transform:"translateY(-2px)",boxShadow:`0 8px 20px ${E(i.palette.secondary.main,.4)}`}},children:n?"View Profile (Demo)":"View Profile"}),e.jsx(P,{fullWidth:!0,variant:"outlined",startIcon:e.jsx(zd,{}),onClick:()=>!n&&c("/messages?participantId="+(t.id||t._id)),disabled:n,sx:{py:1.5,fontSize:"1rem",fontWeight:"bold",borderColor:i.palette.secondary.main,color:i.palette.secondary.main,borderWidth:2,borderRadius:2,"&:hover":{borderColor:i.palette.secondary.light,backgroundColor:E(i.palette.secondary.main,.1),transform:"translateY(-2px)"}},children:n?"Message (Demo)":"Contact"})]})]})},_p=({searchParams:t,setSearchParams:r,skillOptions:s,onSearch:n,onClearFilters:i})=>{const c=ve(),[d,x]=l.useState(!1),m=u=>{u.preventDefault(),n()};return e.jsxs(se,{sx:{p:3,mb:4,borderRadius:3,border:`1px solid ${E(c.palette.secondary.main,.3)}`,backgroundColor:c.palette.background.paper,boxShadow:`0 8px 32px ${E(c.palette.common.black,.2)}`,position:"sticky",top:c.spacing(2),zIndex:1100},children:[e.jsx("form",{onSubmit:m,children:e.jsxs(te,{direction:{xs:"column",md:"row"},spacing:2,alignItems:"center",children:[e.jsx(o,{sx:{flexGrow:1,width:"100%"},children:e.jsx(Q,{fullWidth:!0,placeholder:"Search by name, skills, or specialization...",value:t.searchTerm,onChange:u=>r(v=>({...v,searchTerm:u.target.value})),sx:{"& .MuiOutlinedInput-root":{borderRadius:2,backgroundColor:E(c.palette.background.default,.3),"& fieldset":{borderColor:c.palette.secondary.main,borderWidth:1}}},InputProps:{startAdornment:e.jsx(dt,{sx:{color:c.palette.secondary.main,mr:1}})}})}),e.jsxs(te,{direction:"row",spacing:1,sx:{width:{xs:"100%",md:"auto"}},children:[e.jsx(P,{type:"submit",variant:"contained",sx:{backgroundColor:c.palette.secondary.main,color:c.palette.secondary.contrastText,height:"56px",px:3,flexShrink:0},children:"Search"}),e.jsx(P,{variant:"outlined",startIcon:e.jsx(Ns,{}),endIcon:d?e.jsx(qs,{}):e.jsx(nr,{}),onClick:()=>x(!d),sx:{borderColor:c.palette.secondary.main,color:c.palette.secondary.main,borderWidth:2,height:"56px",flexShrink:0},children:"Filters"})]})]})}),e.jsxs(Gs,{in:d,sx:{mt:2},children:[e.jsx(fe,{sx:{my:2}}),e.jsxs(h,{container:!0,spacing:3,children:[e.jsx(h,{item:!0,xs:12,sm:6,md:4,children:e.jsx(Q,{fullWidth:!0,label:"Location",value:t.location,onChange:u=>r(v=>({...v,location:u.target.value})),sx:{"& .MuiOutlinedInput-root":{borderRadius:2}}})}),e.jsx(h,{item:!0,xs:12,sm:6,md:4,children:e.jsxs(o,{children:[e.jsxs(a,{gutterBottom:!0,fontWeight:"medium",sx:{color:c.palette.text.primary},children:["Minimum Rating: ",t.minRating,"⭐"]}),e.jsx(Yr,{value:t.minRating,onChange:(u,v)=>r(y=>({...y,minRating:v})),step:.5,marks:!0,min:0,max:5,valueLabelDisplay:"auto",sx:{"& .MuiSlider-thumb":{backgroundColor:c.palette.secondary.main},"& .MuiSlider-track":{backgroundColor:c.palette.secondary.main}}})]})}),e.jsx(h,{item:!0,xs:12,sm:6,md:4,children:e.jsxs(Ne,{fullWidth:!0,children:[e.jsx(Ye,{children:"Work Mode"}),e.jsxs(Ge,{value:t.workMode,label:"Work Mode",onChange:u=>r(v=>({...v,workMode:u.target.value})),sx:{borderRadius:2},children:[e.jsx(Z,{value:"",children:"All"}),e.jsx(Z,{value:"remote",children:"Remote"}),e.jsx(Z,{value:"onsite",children:"On-site"}),e.jsx(Z,{value:"hybrid",children:"Hybrid"})]})]})}),e.jsx(h,{item:!0,xs:12,children:e.jsx(Os,{multiple:!0,options:s,value:t.skills,onChange:(u,v)=>r(y=>({...y,skills:v})),renderInput:u=>e.jsx(Q,{...u,label:"Required Skills",placeholder:"Select skills",fullWidth:!0,sx:{"& .MuiOutlinedInput-root":{borderRadius:2}}})})}),e.jsx(h,{item:!0,xs:12,children:e.jsxs(te,{direction:"row",spacing:2,justifyContent:"flex-end",children:[e.jsx(P,{variant:"text",startIcon:e.jsx(Nr,{}),onClick:i,sx:{color:c.palette.text.secondary},children:"Clear All Filters"}),e.jsx(P,{variant:"contained",onClick:n,sx:{backgroundColor:c.palette.secondary.main,color:c.palette.secondary.contrastText},children:"Apply Filters"})]})})]})]})]})},Np=()=>{const t=ve(),r=Oe();return e.jsxs(o,{sx:{textAlign:"center",py:8},children:[e.jsxs(o,{sx:{background:`linear-gradient(135deg, ${E(t.palette.secondary.main,.15)} 0%, ${E(t.palette.secondary.main,.05)} 100%)`,borderRadius:4,p:{xs:4,sm:6,md:8},mb:6,border:`2px solid ${E(t.palette.secondary.main,.3)}`,position:"relative",overflow:"hidden"},children:[e.jsx(a,{variant:"h2",component:"h2",gutterBottom:!0,fontWeight:"bold",sx:{fontSize:{xs:"2rem",sm:"2.5rem",md:"3rem"},color:t.palette.secondary.main,textShadow:`0 2px 4px ${E(t.palette.common.black,.3)}`},children:"🔍 Discover Amazing Talent"}),e.jsx(a,{variant:"h6",sx:{mb:4,maxWidth:700,mx:"auto",color:t.palette.text.primary,fontSize:{xs:"1rem",sm:"1.1rem",md:"1.25rem"},lineHeight:1.6,fontWeight:500},children:"Connect with thousands of verified professionals ready to bring your projects to life. From home repairs to custom installations, find the perfect match for any job."}),e.jsx(h,{container:!0,spacing:3,sx:{mb:6},children:Bp.map((s,n)=>e.jsx(h,{item:!0,xs:6,md:3,children:e.jsxs(o,{sx:{display:"flex",flexDirection:"column",alignItems:"center",p:3,borderRadius:3,backgroundColor:E(t.palette.background.paper,.8),border:`1px solid ${E(t.palette.secondary.main,.3)}`,transition:"all 0.3s ease","&:hover":{transform:"translateY(-4px)",backgroundColor:E(t.palette.background.paper,.9),borderColor:t.palette.secondary.main,boxShadow:`0 8px 25px ${E(t.palette.secondary.main,.3)}`}},children:[e.jsx(o,{sx:{color:t.palette.secondary.main,mb:2,fontSize:48},children:s.icon}),e.jsx(a,{variant:"h4",fontWeight:"bold",sx:{color:t.palette.secondary.main,fontSize:{xs:"1.5rem",sm:"2rem"}},children:s.value}),e.jsx(a,{variant:"body1",sx:{color:t.palette.text.primary,fontWeight:600,textAlign:"center",fontSize:{xs:"0.9rem",sm:"1rem"}},children:s.label})]})},n))}),e.jsxs(te,{direction:{xs:"column",sm:"row"},spacing:3,justifyContent:"center",children:[e.jsx(P,{variant:"contained",size:"large",onClick:()=>r("/register"),sx:{px:4,py:2,fontSize:"1.1rem",fontWeight:"bold",backgroundColor:t.palette.secondary.main,color:t.palette.secondary.contrastText,borderRadius:3,"&:hover":{backgroundColor:t.palette.secondary.dark,transform:"translateY(-3px)",boxShadow:`0 8px 25px ${E(t.palette.secondary.main,.5)}`}},children:"Join as Client"}),e.jsx(P,{variant:"outlined",size:"large",onClick:()=>r("/register?type=worker"),sx:{px:4,py:2,fontSize:"1.1rem",fontWeight:"bold",borderColor:t.palette.secondary.main,color:t.palette.secondary.main,borderWidth:2,borderRadius:3,"&:hover":{borderColor:t.palette.secondary.light,backgroundColor:E(t.palette.secondary.main,.1),transform:"translateY(-3px)"}},children:"Join as Professional"})]})]}),e.jsxs(o,{sx:{mb:8},children:[e.jsx(a,{variant:"h3",gutterBottom:!0,fontWeight:"bold",sx:{color:t.palette.secondary.main,fontSize:{xs:"1.75rem",sm:"2.25rem",md:"2.75rem"},mb:2},children:"Meet Our Top Professionals"}),e.jsx(a,{variant:"h6",sx:{mb:6,color:t.palette.text.primary,fontSize:{xs:"1rem",sm:"1.1rem",md:"1.25rem"},fontWeight:500,maxWidth:600,mx:"auto"},children:"Here's a preview of the quality talent you'll find on our platform"}),e.jsx(h,{container:!0,spacing:4,children:$p.map((s,n)=>e.jsx(h,{item:!0,xs:12,sm:6,lg:3,children:e.jsx(Ga,{in:!0,timeout:500+n*200,children:e.jsx("div",{children:e.jsx(wl,{worker:s,isDemo:!0})})})},s.id))})]}),e.jsxs(o,{sx:{p:{xs:4,sm:6},mb:6,borderRadius:4,background:`linear-gradient(135deg, ${E(t.palette.secondary.main,.1)} 0%, ${E(t.palette.secondary.main,.05)} 100%)`,border:`2px solid ${E(t.palette.secondary.main,.2)}`},children:[e.jsx(a,{variant:"h4",gutterBottom:!0,fontWeight:"bold",sx:{color:t.palette.secondary.main,mb:4,fontSize:{xs:"1.5rem",sm:"2rem"}},children:"💬 What Our Clients Say"}),e.jsx(h,{container:!0,spacing:4,children:[{rating:5,text:"Found the perfect electrician for my smart home project. Professional, fast, and great quality work!",author:"Jennifer M., Homeowner"},{rating:5,text:"Kelmah made it so easy to find qualified contractors. Saved me weeks of searching!",author:"Robert K., Business Owner"},{rating:5,text:"The verification process gives me confidence. All workers are truly skilled professionals.",author:"Maria S., Property Manager"}].map((s,n)=>e.jsx(h,{item:!0,xs:12,md:4,children:e.jsxs(o,{sx:{p:4,height:"100%",borderRadius:3,backgroundColor:t.palette.background.paper,border:`2px solid ${E(t.palette.secondary.main,.3)}`,transition:"all 0.3s ease","&:hover":{transform:"translateY(-4px)",borderColor:t.palette.secondary.main,boxShadow:`0 8px 25px ${E(t.palette.secondary.main,.3)}`}},children:[e.jsx(Qe,{value:s.rating,readOnly:!0,size:"medium",sx:{mb:3,"& .MuiRating-iconFilled":{color:t.palette.secondary.main}}}),e.jsxs(a,{variant:"body1",sx:{mb:3,fontStyle:"italic",color:t.palette.text.primary,fontSize:"1.1rem",lineHeight:1.6},children:['"',s.text,'"']}),e.jsxs(a,{variant:"subtitle1",sx:{color:t.palette.secondary.main,fontWeight:"bold"},children:["- ",s.author]})]})},n))})]}),e.jsxs(o,{sx:{textAlign:"center"},children:[e.jsx(a,{variant:"h4",gutterBottom:!0,sx:{color:t.palette.secondary.main,fontWeight:"bold",fontSize:{xs:"1.5rem",sm:"2rem"}},children:"Ready to find your perfect professional?"}),e.jsx(a,{variant:"h6",sx:{mb:4,color:t.palette.text.primary,fontSize:{xs:"1rem",sm:"1.1rem"},fontWeight:500},children:"Start by adjusting your search filters above or browse our categories"}),e.jsx(P,{variant:"contained",size:"large",startIcon:e.jsx(dt,{}),onClick:()=>window.scrollTo({top:0,behavior:"smooth"}),sx:{px:5,py:2.5,fontSize:"1.2rem",fontWeight:"bold",backgroundColor:t.palette.secondary.main,color:t.palette.secondary.contrastText,borderRadius:3,"&:hover":{backgroundColor:t.palette.secondary.dark,transform:"translateY(-3px)",boxShadow:`0 12px 30px ${E(t.palette.secondary.main,.5)}`}},children:"Start Your Search"})]})]})},Cl=()=>{const t=ve(),r=Oe(),s=Te(t.breakpoints.down("sm")),n=["Pipe Repair","Water Heater Installation","Drainage Systems","Wiring","Circuit Breakers","Lighting","Home Automation","Audio Systems","Cabinetry","Furniture Making","Framing","Interior Painting","Exterior Painting","Wallpaper","AC Installation","Heating Systems","Ventilation"],[i,c]=l.useState({searchTerm:"",skills:[],minRating:0,location:"",workMode:""}),[d,x]=l.useState([]),[m,u]=l.useState({workers:[],pagination:{}}),[v,y]=l.useState(!1),[g,j]=l.useState(!0),b=async w=>{if(d.includes(w))try{await Es.unsaveWorker(w),x(p=>p.filter(k=>k!==w))}catch(p){console.error("Error unsaving worker:",p)}else try{await Es.saveWorker(w),x(p=>[...p,w])}catch(p){console.error("Error saving worker:",p)}},C=async(w=1)=>{y(!0),j(!1);try{const p={page:w,...i},k=await Lh.searchWorkers(p),U=k.results||k.workers||k,W=k.meta&&k.meta.pagination||k.pagination||{};u({workers:U,pagination:W})}catch(p){console.error("Error searching workers:",p),u({workers:[],pagination:{}})}finally{y(!1),window.scrollTo(0,0)}},A=()=>{c({searchTerm:"",skills:[],minRating:0,location:"",workMode:""}),j(!0),u({workers:[],pagination:{}})};return l.useEffect(()=>{(async()=>{try{const w=await Es.getSavedWorkers();x(w.map(p=>p.id||p._id))}catch{}})()},[]),e.jsx(o,{sx:{minHeight:"100vh",backgroundColor:t.palette.background.default},children:e.jsxs(ye,{maxWidth:"xl",sx:{py:4},children:[e.jsxs(Ys,{"aria-label":"breadcrumb",sx:{mb:3},children:[e.jsx(et,{component:Fe,to:"/hirer/dashboard",underline:"hover",sx:{color:t.palette.text.secondary,"&:hover":{color:t.palette.secondary.main}},children:"Dashboard"}),e.jsx(a,{sx:{color:t.palette.secondary.main,fontWeight:"bold"},children:"Find Talent"})]}),e.jsxs(o,{sx:{mb:4,textAlign:"center"},children:[e.jsx(a,{variant:"h2",component:"h1",gutterBottom:!0,fontWeight:"bold",sx:{color:t.palette.secondary.main,fontSize:{xs:"2rem",sm:"2.5rem",md:"3rem"},textShadow:`0 2px 4px ${E(t.palette.common.black,.3)}`,mb:2},children:"🎯 Find Your Perfect Professional"}),e.jsx(a,{variant:"h5",sx:{color:t.palette.text.primary,fontSize:{xs:"1.1rem",sm:"1.25rem",md:"1.5rem"},fontWeight:500,maxWidth:900,mx:"auto"},children:"Search through thousands of verified professionals and find the perfect match for your project"})]}),e.jsx(_p,{searchParams:i,setSearchParams:c,skillOptions:n,onSearch:C,onClearFilters:A}),v?e.jsx(h,{container:!0,spacing:4,children:Array.from(new Array(8)).map((w,p)=>e.jsx(h,{item:!0,xs:12,sm:6,md:4,lg:3,children:e.jsxs(me,{sx:{borderRadius:3},children:[e.jsxs(ce,{children:[e.jsx(ie,{variant:"circular",width:80,height:80,sx:{mx:"auto",mb:1}}),e.jsx(ie,{width:"60%",height:24,sx:{mx:"auto",mb:1}}),e.jsx(ie,{width:"40%",height:20,sx:{mx:"auto",mb:2}}),e.jsx(ie,{variant:"rectangular",height:118,sx:{borderRadius:1}})]}),e.jsx(wr,{children:e.jsx(ie,{variant:"rectangular",width:"80%",height:36,sx:{mx:"auto",mb:1,borderRadius:1}})})]})},p))}):g||m.workers.length===0?e.jsx(Np,{}):e.jsxs(e.Fragment,{children:[e.jsxs(o,{sx:{mb:4,p:3,display:"flex",flexDirection:{xs:"column",sm:"row"},justifyContent:"space-between",alignItems:"center",background:`linear-gradient(135deg, ${E(t.palette.secondary.main,.1)} 0%, ${E(t.palette.secondary.main,.05)} 100%)`,borderRadius:2,border:`1px solid ${E(t.palette.secondary.main,.3)}`},children:[e.jsxs(a,{variant:"h6",fontWeight:"bold",sx:{color:t.palette.text.primary,mb:{xs:1,sm:0}},children:["👥 Found"," ",m.pagination.totalItems||m.workers.length," ","professional",m.workers.length!==1?"s":""]}),e.jsxs(a,{variant:"body2",sx:{color:t.palette.text.secondary},children:["Page ",m.pagination.currentPage||1," of"," ",m.pagination.totalPages||1]})]}),e.jsx(h,{container:!0,spacing:4,children:m.workers.map((w,p)=>e.jsx(h,{item:!0,xs:12,sm:6,md:4,lg:3,children:e.jsx(Ga,{in:!0,timeout:300+p*100,children:e.jsx("div",{children:e.jsx(wl,{worker:w,isSaved:d.includes(w.id||w._id),onToggleSave:b})})})},w.id||w._id))})]}),!v&&!g&&m.pagination.totalPages>1&&e.jsx(o,{sx:{display:"flex",justifyContent:"center",mt:6},children:e.jsx(Gt,{count:m.pagination.totalPages||1,page:m.pagination.currentPage||1,onChange:(w,p)=>C(p),color:"primary",size:s?"small":"large",sx:{"& .MuiPaginationItem-root":{borderRadius:2,fontWeight:"bold"},"& .MuiPaginationItem-page.Mui-selected":{backgroundColor:t.palette.secondary.main,color:t.palette.secondary.contrastText}}})}),e.jsx(as,{color:"primary","aria-label":"post job",onClick:()=>r("/jobs/post"),sx:{position:"fixed",bottom:90,right:20,backgroundColor:t.palette.secondary.main,color:t.palette.secondary.contrastText,display:{xs:"flex",md:"none"},"&:hover":{backgroundColor:t.palette.secondary.dark}},children:e.jsx(rt,{})})]})})},Op=[{id:"sample-job-1",title:"Complete Bathroom Renovation",description:"Need a full bathroom renovation including new tiles, toilet, sink, and shower installation. Looking for experienced professionals with plumbing and electrical skills.",budget:{min:3500,max:5e3,currency:"USD"},location:"Accra, Ghana",jobType:"contract",experience:"mid",skills:["Plumbing","Tiling","Electrical"],urgency:"high",postedDate:"2024-01-15",applicants:12,client:{name:"Johnson Family",avatar:"https://images.unsplash.com/photo-1507003211169-0a1dd7228f2d?w=400",rating:4.8,jobsPosted:8,verified:!0},featured:!0,estimatedDuration:"2-3 weeks",saved:!1,views:245},{id:"sample-job-2",title:"Kitchen Cabinet Installation",description:"Install new kitchen cabinets and countertops. All materials provided. Need skilled carpenter with experience in kitchen installations.",budget:{min:2e3,max:3e3,currency:"USD"},location:"Kumasi, Ghana",jobType:"freelance",experience:"senior",skills:["Carpentry","Installation"],urgency:"medium",postedDate:"2024-01-14",applicants:8,client:{name:"Sarah Mitchell",avatar:"https://images.unsplash.com/photo-1494790108755-2616b612b786?w=400",rating:4.9,jobsPosted:15,verified:!0},featured:!1,estimatedDuration:"1-2 weeks",saved:!0,views:189},{id:"sample-job-3",title:"Office Interior Painting",description:"Paint interior walls of a modern office space. 2000 sq ft area. Premium paint will be provided. Looking for professional painters.",budget:{min:1500,max:2500,currency:"USD"},location:"Tema, Ghana",jobType:"contract",experience:"entry",skills:["Painting","Interior Design"],urgency:"low",postedDate:"2024-01-13",applicants:15,client:{name:"TechCorp Ltd",avatar:"https://images.unsplash.com/photo-1560250097-0b93528c311a?w=400",rating:4.7,jobsPosted:25,verified:!0},featured:!1,estimatedDuration:"1 week",saved:!1,views:324},{id:"sample-job-4",title:"Smart Home Electrical Setup",description:"Install smart home electrical systems including automated lighting, security cameras, and smart switches throughout the house.",budget:{min:4e3,max:6e3,currency:"USD"},location:"Cape Coast, Ghana",jobType:"full-time",experience:"senior",skills:["Electrical","Home Automation","Security Systems"],urgency:"high",postedDate:"2024-01-12",applicants:6,client:{name:"Dr. Kwame Asante",avatar:"https://images.unsplash.com/photo-1472099645785-5658abf4ff4e?w=400",rating:5,jobsPosted:3,verified:!0},featured:!0,estimatedDuration:"3-4 weeks",saved:!1,views:412}],Jp=[{icon:e.jsx(ri,{}),value:"10,000+",label:"Active Jobs"},{icon:e.jsx(Ve,{}),value:"95%",label:"Completion Rate"},{icon:e.jsx(zs,{}),value:"25,000+",label:"Happy Clients"},{icon:e.jsx(rt,{}),value:"4.8/5",label:"Average Rating"}],kl=({job:t,onViewDetails:r,onToggleSave:s,isDemo:n=!1})=>{var x,m,u,v,y,g,j,b,C,A;const i=ve(),c=w=>{switch(w){case"high":return"error";case"medium":return"warning";case"low":return"success";default:return"default"}},d=w=>{switch(w){case"high":return"Urgent";case"medium":return"Normal";case"low":return"Flexible";default:return"Normal"}};return e.jsxs(me,{sx:{mb:3,transition:"all 0.3s ease",background:t.featured?`linear-gradient(135deg, ${E(i.palette.secondary.main,.08)} 0%, ${E(i.palette.secondary.main,.03)} 100%)`:i.palette.background.paper,border:t.featured?`2px solid ${E(i.palette.secondary.main,.4)}`:`1px solid ${E(i.palette.divider,.12)}`,borderRadius:3,overflow:"hidden","&:hover":{transform:"translateY(-4px)",boxShadow:`0 12px 30px ${E(i.palette.secondary.main,.2)}`,borderColor:i.palette.secondary.main}},children:[t.featured&&e.jsx(o,{sx:{background:`linear-gradient(90deg, ${i.palette.secondary.main} 0%, ${i.palette.secondary.light} 100%)`,color:i.palette.secondary.contrastText,px:2,py:.5,fontSize:"0.75rem",fontWeight:"bold",textAlign:"center"},children:"✨ FEATURED OPPORTUNITY"}),e.jsxs(ce,{sx:{p:3},children:[e.jsxs(h,{container:!0,spacing:3,children:[e.jsx(h,{item:!0,xs:12,md:8,children:e.jsxs(te,{direction:"row",spacing:2,alignItems:"flex-start",sx:{mb:2},children:[e.jsx(we,{src:(x=t.client)==null?void 0:x.avatar,sx:{width:50,height:50,border:`2px solid ${i.palette.secondary.main}`}}),e.jsxs(o,{sx:{flexGrow:1},children:[e.jsxs(te,{direction:"row",alignItems:"center",spacing:1,sx:{mb:1},children:[e.jsx(a,{variant:"h6",fontWeight:"bold",sx:{color:i.palette.text.primary},children:t.title}),((m=t.client)==null?void 0:m.verified)&&e.jsx(xr,{sx:{color:i.palette.secondary.main,fontSize:20}}),e.jsx(ee,{label:d(t.urgency),color:c(t.urgency),size:"small"})]}),e.jsxs(te,{direction:"row",spacing:1,alignItems:"center",sx:{mb:2},children:[e.jsxs(a,{variant:"body2",sx:{color:i.palette.text.secondary},children:["by ",(u=t.client)==null?void 0:u.name]}),e.jsx(Qe,{value:((v=t.client)==null?void 0:v.rating)||5,precision:.1,size:"small",readOnly:!0}),e.jsxs(a,{variant:"body2",sx:{color:i.palette.text.secondary},children:["(",(y=t.client)==null?void 0:y.jobsPosted," jobs posted)"]})]}),e.jsx(a,{variant:"body2",sx:{color:i.palette.text.primary,lineHeight:1.6,mb:2,display:"-webkit-box",WebkitLineClamp:2,WebkitBoxOrient:"vertical",overflow:"hidden"},children:t.description}),e.jsx(te,{direction:"row",spacing:1,sx:{mb:2,flexWrap:"wrap",gap:1},children:(g=t.skills)==null?void 0:g.map((w,p)=>e.jsx(ee,{label:w,size:"small",variant:"outlined",sx:{backgroundColor:E(i.palette.secondary.main,.1),borderColor:E(i.palette.secondary.main,.3),color:i.palette.text.primary,fontSize:"0.75rem"}},p))})]})]})}),e.jsx(h,{item:!0,xs:12,md:4,children:e.jsxs(te,{spacing:2,children:[e.jsxs(o,{sx:{p:2,borderRadius:2,backgroundColor:E(i.palette.secondary.main,.1),border:`1px solid ${E(i.palette.secondary.main,.3)}`},children:[e.jsxs(te,{direction:"row",alignItems:"center",spacing:1,sx:{mb:1},children:[e.jsx(Xn,{sx:{color:i.palette.secondary.main,fontSize:20}}),e.jsxs(a,{variant:"h6",fontWeight:"bold",sx:{color:i.palette.secondary.main},children:["$",(j=t.budget)==null?void 0:j.min," - $",(b=t.budget)==null?void 0:b.max]})]}),e.jsx(a,{variant:"caption",sx:{color:i.palette.text.secondary},children:"Project Budget"})]}),e.jsxs(te,{direction:"row",spacing:2,children:[e.jsxs(o,{sx:{textAlign:"center",flex:1},children:[e.jsx(a,{variant:"body2",fontWeight:"bold",sx:{color:i.palette.text.primary},children:t.applicants}),e.jsx(a,{variant:"caption",sx:{color:i.palette.text.secondary},children:"Applicants"})]}),e.jsxs(o,{sx:{textAlign:"center",flex:1},children:[e.jsx(a,{variant:"body2",fontWeight:"bold",sx:{color:i.palette.text.primary},children:t.views}),e.jsx(a,{variant:"caption",sx:{color:i.palette.text.secondary},children:"Views"})]})]}),e.jsxs(te,{direction:"row",spacing:1,alignItems:"center",children:[e.jsx(nt,{fontSize:"small",sx:{color:i.palette.secondary.main}}),e.jsx(a,{variant:"body2",sx:{color:i.palette.text.primary},children:t.location})]}),e.jsxs(te,{direction:"row",spacing:1,alignItems:"center",children:[e.jsx(Tt,{fontSize:"small",sx:{color:i.palette.secondary.main}}),e.jsx(a,{variant:"body2",sx:{color:i.palette.text.primary},children:t.estimatedDuration})]})]})})]}),e.jsx(fe,{sx:{my:2}}),e.jsxs(te,{direction:"row",justifyContent:"space-between",alignItems:"center",children:[e.jsxs(te,{direction:"row",spacing:1,alignItems:"center",children:[e.jsxs(a,{variant:"body2",sx:{color:i.palette.text.secondary},children:["Posted ",new Date(t.postedDate).toLocaleDateString()]}),e.jsx(ee,{label:((C=t.jobType)==null?void 0:C.charAt(0).toUpperCase())+((A=t.jobType)==null?void 0:A.slice(1)),size:"small",variant:"outlined",sx:{fontSize:"0.7rem"}})]}),e.jsxs(te,{direction:"row",spacing:1,children:[e.jsx(ne,{size:"small",onClick:()=>!n&&s(t.id),disabled:n,sx:{color:t.saved?i.palette.secondary.main:i.palette.text.secondary},children:t.saved?e.jsx(Kt,{}):e.jsx(or,{})}),e.jsx(ne,{size:"small",sx:{color:i.palette.text.secondary},children:e.jsx(ls,{})}),e.jsx(P,{variant:"contained",onClick:()=>!n&&r(t.id),disabled:n,sx:{background:t.featured?`linear-gradient(45deg, ${i.palette.secondary.main} 30%, ${i.palette.secondary.light} 90%)`:i.palette.secondary.main,color:i.palette.secondary.contrastText,fontWeight:"bold",px:3,"&:hover":{backgroundColor:i.palette.secondary.dark}},children:n?"View (Demo)":"View Details"})]})]})]})]})},Up=({filters:t,onFilterChange:r,onSearch:s,searchQuery:n,setSearchQuery:i,user:c,onLoadSaved:d,onLoadRecommended:x})=>{const m=ve(),[u,v]=l.useState(!1),y=()=>{r("job_type",""),r("experience",""),r("sort",""),i(""),s({preventDefault:()=>{}},{search:"",job_type:"",experience:"",sort:""})},g=j=>{j.preventDefault(),s()};return e.jsxs(se,{sx:{p:3,mb:4,borderRadius:3,border:`1px solid ${E(m.palette.secondary.main,.3)}`,backgroundColor:m.palette.background.paper,boxShadow:`0 8px 32px ${E(m.palette.common.black,.2)}`,position:"sticky",top:m.spacing(2),zIndex:1100},children:[e.jsx("form",{onSubmit:g,children:e.jsxs(te,{direction:{xs:"column",md:"row"},spacing:2,alignItems:"center",children:[e.jsx(o,{sx:{flexGrow:1,width:"100%"},children:e.jsx(Q,{fullWidth:!0,placeholder:"Search jobs by title, skills, or keywords...",value:n,onChange:j=>i(j.target.value),sx:{"& .MuiOutlinedInput-root":{borderRadius:2,backgroundColor:E(m.palette.background.default,.3),"& fieldset":{borderColor:m.palette.secondary.main,borderWidth:1}}},InputProps:{startAdornment:e.jsx(dt,{sx:{color:m.palette.secondary.main,mr:1}})}})}),e.jsxs(te,{direction:"row",spacing:1,sx:{width:{xs:"100%",md:"auto"}},children:[e.jsx(P,{type:"submit",variant:"contained",sx:{backgroundColor:m.palette.secondary.main,color:m.palette.secondary.contrastText,height:"56px",px:3,flexShrink:0},children:"Search"}),e.jsx(P,{variant:"outlined",startIcon:e.jsx(Ns,{}),endIcon:u?e.jsx(qs,{}):e.jsx(nr,{}),onClick:()=>v(!u),sx:{borderColor:m.palette.secondary.main,color:m.palette.secondary.main,borderWidth:2,height:"56px",flexShrink:0},children:"Filters"})]})]})}),e.jsxs(Gs,{in:u,sx:{mt:2},children:[e.jsx(fe,{sx:{my:2}}),e.jsxs(h,{container:!0,spacing:2,children:[e.jsx(h,{item:!0,xs:12,sm:6,md:3,children:e.jsxs(Ne,{fullWidth:!0,children:[e.jsx(Ye,{children:"Job Type"}),e.jsxs(Ge,{value:t.job_type||"",label:"Job Type",onChange:j=>r("job_type",j.target.value),sx:{borderRadius:2},children:[e.jsx(Z,{value:"",children:"All Types"}),e.jsx(Z,{value:"full-time",children:"Full Time"}),e.jsx(Z,{value:"part-time",children:"Part Time"}),e.jsx(Z,{value:"contract",children:"Contract"}),e.jsx(Z,{value:"freelance",children:"Freelance"})]})]})}),e.jsx(h,{item:!0,xs:12,sm:6,md:3,children:e.jsxs(Ne,{fullWidth:!0,children:[e.jsx(Ye,{children:"Experience Level"}),e.jsxs(Ge,{value:t.experience||"",label:"Experience Level",onChange:j=>r("experience",j.target.value),sx:{borderRadius:2},children:[e.jsx(Z,{value:"",children:"All Levels"}),e.jsx(Z,{value:"entry",children:"Entry Level"}),e.jsx(Z,{value:"mid",children:"Mid Level"}),e.jsx(Z,{value:"senior",children:"Senior Level"})]})]})}),e.jsx(h,{item:!0,xs:12,sm:6,md:3,children:e.jsxs(Ne,{fullWidth:!0,children:[e.jsx(Ye,{children:"Sort By"}),e.jsxs(Ge,{value:t.sort||"",label:"Sort By",onChange:j=>r("sort",j.target.value),sx:{borderRadius:2},children:[e.jsx(Z,{value:"",children:"Default"}),e.jsx(Z,{value:"date_desc",children:"Newest"}),e.jsx(Z,{value:"date_asc",children:"Oldest"}),e.jsx(Z,{value:"budget_desc",children:"Highest Budget"}),e.jsx(Z,{value:"budget_asc",children:"Lowest Budget"})]})]})}),e.jsx(h,{item:!0,xs:12,sm:6,md:3,children:e.jsx(P,{fullWidth:!0,variant:"text",startIcon:e.jsx(Nr,{}),onClick:y,sx:{height:"56px",color:m.palette.text.secondary},children:"Clear Filters"})}),c&&e.jsxs(e.Fragment,{children:[e.jsx(h,{item:!0,xs:12,md:6,children:e.jsx(P,{fullWidth:!0,variant:"outlined",onClick:d,startIcon:e.jsx(Kt,{}),sx:{borderColor:m.palette.secondary.main,color:m.palette.secondary.main,borderWidth:1,py:1.5},children:"My Saved Jobs"})}),e.jsx(h,{item:!0,xs:12,md:6,children:e.jsx(P,{fullWidth:!0,variant:"outlined",onClick:x,startIcon:e.jsx(rt,{}),sx:{borderColor:m.palette.secondary.main,color:m.palette.secondary.main,borderWidth:1,py:1.5},children:"Recommended for You"})})]})]})]})]})},Hp=()=>{const t=ve(),r=Oe();return e.jsxs(o,{sx:{textAlign:"center",py:8},children:[e.jsxs(o,{sx:{background:`linear-gradient(135deg, ${E(t.palette.secondary.main,.15)} 0%, ${E(t.palette.secondary.main,.05)} 100%)`,borderRadius:4,p:{xs:4,sm:6,md:8},mb:6,border:`2px solid ${E(t.palette.secondary.main,.3)}`,position:"relative",overflow:"hidden","&::before":{content:'""',position:"absolute",top:0,left:0,right:0,bottom:0,background:`radial-gradient(circle at 50% 50%, ${E(t.palette.secondary.main,.1)} 0%, transparent 70%)`,pointerEvents:"none"}},children:[e.jsx(a,{variant:"h2",component:"h2",gutterBottom:!0,fontWeight:"bold",sx:{fontSize:{xs:"2rem",sm:"2.5rem",md:"3rem"},color:t.palette.secondary.main,textShadow:`0 2px 4px ${E(t.palette.common.black,.3)}`,position:"relative",zIndex:1},children:"💼 Discover Amazing Opportunities"}),e.jsx(a,{variant:"h6",sx:{mb:4,maxWidth:700,mx:"auto",color:t.palette.text.primary,fontSize:{xs:"1rem",sm:"1.1rem",md:"1.25rem"},lineHeight:1.6,fontWeight:500,position:"relative",zIndex:1},children:"Connect with clients who need your skills. From quick tasks to long-term projects, find work that matches your expertise and schedule."}),e.jsx(h,{container:!0,spacing:3,sx:{mb:6},children:Jp.map((s,n)=>e.jsx(h,{item:!0,xs:6,md:3,children:e.jsxs(o,{sx:{display:"flex",flexDirection:"column",alignItems:"center",p:3,borderRadius:3,backgroundColor:E(t.palette.background.paper,.8),border:`1px solid ${E(t.palette.secondary.main,.3)}`,transition:"all 0.3s ease","&:hover":{transform:"translateY(-4px)",backgroundColor:E(t.palette.background.paper,.9),borderColor:t.palette.secondary.main,boxShadow:`0 8px 25px ${E(t.palette.secondary.main,.3)}`}},children:[e.jsx(o,{sx:{color:t.palette.secondary.main,mb:2,fontSize:48},children:s.icon}),e.jsx(a,{variant:"h4",fontWeight:"bold",sx:{color:t.palette.secondary.main,fontSize:{xs:"1.5rem",sm:"2rem"}},children:s.value}),e.jsx(a,{variant:"body1",sx:{color:t.palette.text.primary,fontWeight:600,textAlign:"center",fontSize:{xs:"0.9rem",sm:"1rem"}},children:s.label})]})},n))}),e.jsxs(te,{direction:{xs:"column",sm:"row"},spacing:3,justifyContent:"center",sx:{position:"relative",zIndex:1},children:[e.jsx(P,{variant:"contained",size:"large",onClick:()=>r("/register?type=worker"),sx:{px:4,py:2,fontSize:"1.1rem",fontWeight:"bold",backgroundColor:t.palette.secondary.main,color:t.palette.secondary.contrastText,borderRadius:3,"&:hover":{backgroundColor:t.palette.secondary.dark,transform:"translateY(-3px)",boxShadow:`0 8px 25px ${E(t.palette.secondary.main,.5)}`}},children:"Join as Professional"}),e.jsx(P,{variant:"outlined",size:"large",onClick:()=>r("/register"),sx:{px:4,py:2,fontSize:"1.1rem",fontWeight:"bold",borderColor:t.palette.secondary.main,color:t.palette.secondary.main,borderWidth:2,borderRadius:3,"&:hover":{borderColor:t.palette.secondary.light,backgroundColor:E(t.palette.secondary.main,.1),transform:"translateY(-3px)"}},children:"Post a Job"})]})]}),e.jsxs(o,{sx:{mb:8},children:[e.jsx(a,{variant:"h3",gutterBottom:!0,fontWeight:"bold",sx:{color:t.palette.secondary.main,fontSize:{xs:"1.75rem",sm:"2.25rem",md:"2.75rem"},mb:2},children:"Featured Opportunities"}),e.jsx(a,{variant:"h6",sx:{mb:6,color:t.palette.text.primary,fontSize:{xs:"1rem",sm:"1.1rem",md:"1.25rem"},fontWeight:500,maxWidth:600,mx:"auto"},children:"Here are some of the exciting projects waiting for skilled professionals"}),e.jsx(h,{container:!0,spacing:3,children:Op.map((s,n)=>e.jsx(h,{item:!0,xs:12,children:e.jsx(Ga,{in:!0,timeout:300+n*200,children:e.jsx("div",{children:e.jsx(kl,{job:s,isDemo:!0})})})},s.id))})]}),e.jsxs(o,{sx:{p:{xs:4,sm:6},mb:6,borderRadius:4,background:`linear-gradient(135deg, ${E(t.palette.secondary.main,.1)} 0%, ${E(t.palette.secondary.main,.05)} 100%)`,border:`2px solid ${E(t.palette.secondary.main,.2)}`},children:[e.jsx(a,{variant:"h4",gutterBottom:!0,fontWeight:"bold",sx:{color:t.palette.secondary.main,mb:4,fontSize:{xs:"1.5rem",sm:"2rem"}},children:"💬 Success Stories"}),e.jsx(h,{container:!0,spacing:4,children:[{rating:5,text:"Found my dream plumbing job through Kelmah. Great clients and fair pay!",author:"Michael O., Plumber"},{rating:5,text:"Consistently find quality electrical projects. Platform is easy to use!",author:"Sarah A., Electrician"},{rating:5,text:"Built my carpentry business through connections made on Kelmah!",author:"David K., Carpenter"}].map((s,n)=>e.jsx(h,{item:!0,xs:12,md:4,children:e.jsxs(o,{sx:{p:4,height:"100%",borderRadius:3,backgroundColor:t.palette.background.paper,border:`2px solid ${E(t.palette.secondary.main,.3)}`,transition:"all 0.3s ease","&:hover":{transform:"translateY(-4px)",borderColor:t.palette.secondary.main,boxShadow:`0 8px 25px ${E(t.palette.secondary.main,.3)}`}},children:[e.jsx(Qe,{value:s.rating,readOnly:!0,size:"medium",sx:{mb:3,"& .MuiRating-iconFilled":{color:t.palette.secondary.main}}}),e.jsxs(a,{variant:"body1",sx:{mb:3,fontStyle:"italic",color:t.palette.text.primary,fontSize:"1.1rem",lineHeight:1.6},children:['"',s.text,'"']}),e.jsxs(a,{variant:"subtitle1",sx:{color:t.palette.secondary.main,fontWeight:"bold"},children:["- ",s.author]})]})},n))})]}),e.jsxs(o,{sx:{textAlign:"center"},children:[e.jsx(a,{variant:"h4",gutterBottom:!0,sx:{color:t.palette.secondary.main,fontWeight:"bold",fontSize:{xs:"1.5rem",sm:"2rem"}},children:"Ready to find your next opportunity?"}),e.jsx(a,{variant:"h6",sx:{mb:4,color:t.palette.text.primary,fontSize:{xs:"1rem",sm:"1.1rem"},fontWeight:500},children:"Use the filters above to find jobs that match your skills and preferences"}),e.jsx(P,{variant:"contained",size:"large",startIcon:e.jsx(dt,{}),onClick:()=>window.scrollTo({top:0,behavior:"smooth"}),sx:{px:5,py:2.5,fontSize:"1.2rem",fontWeight:"bold",backgroundColor:t.palette.secondary.main,color:t.palette.secondary.contrastText,borderRadius:3,"&:hover":{backgroundColor:t.palette.secondary.dark,transform:"translateY(-3px)",boxShadow:`0 12px 30px ${E(t.palette.secondary.main,.5)}`}},children:"Start Your Search"})]})]})},Gp=()=>{const{user:t}=Qs(),r=Oe(),s=ot(),n=je(pu),{currentPage:i,totalPages:c}=je(mu),d=je(xu)||[],x=je(zo),m=je(Lo),[u,v]=l.useState(n.search||""),[y,g]=l.useState(!0),[j,b]=l.useState([]),C=ve(),A=Te(C.breakpoints.down("md")),w=(_,O)=>{const T={...n,page:O,search:u.trim()};s(Ii(T)),s(Fs(T)),g(!1),window.scrollTo(0,0)},p=(_={})=>{const O={...n,page:1,search:u.trim(),..._};s(Ii(O)),s(Fs(O)),g(!1)},k=()=>{p()},U=(_,O)=>{p({[_]:O})},W=()=>{p({saved:!0})},R=()=>{p({recommended:!0})},K=_=>{j.includes(_)?b(O=>O.filter(T=>T!==_)):b(O=>[...O,_])};return l.useEffect(()=>{d.length},[]),e.jsx(o,{sx:{minHeight:"100vh",backgroundColor:C.palette.background.default},children:e.jsxs(ye,{maxWidth:"xl",sx:{py:4},children:[e.jsxs(o,{sx:{mb:4,textAlign:"center"},children:[e.jsx(a,{variant:"h2",component:"h1",gutterBottom:!0,fontWeight:"bold",sx:{color:C.palette.secondary.main,fontSize:{xs:"2rem",sm:"2.5rem",md:"3rem"},textShadow:`0 2px 4px ${E(C.palette.common.black,.3)}`,mb:2},children:"🚀 Find Your Next Opportunity"}),e.jsx(a,{variant:"h5",sx:{color:C.palette.text.primary,fontSize:{xs:"1.1rem",sm:"1.25rem",md:"1.5rem"},fontWeight:500,maxWidth:800,mx:"auto"},children:"Discover jobs that match your skills and grow your career"})]}),e.jsx(Up,{filters:n,onFilterChange:U,onSearch:k,searchQuery:u,setSearchQuery:v,user:t,onLoadSaved:W,onLoadRecommended:R}),m&&e.jsx(be,{severity:"error",sx:{mb:3,borderRadius:2},children:m}),x?e.jsx(h,{container:!0,spacing:3,children:Array.from(new Array(6)).map((_,O)=>e.jsx(h,{item:!0,xs:12,children:e.jsxs(se,{sx:{p:3,borderRadius:3},elevation:2,children:[e.jsxs(te,{direction:"row",spacing:2,sx:{mb:2},children:[e.jsx(ie,{variant:"circular",width:50,height:50}),e.jsxs(o,{sx:{flexGrow:1},children:[e.jsx(ie,{variant:"text",width:"60%",height:32}),e.jsx(ie,{variant:"text",width:"40%",height:20})]})]}),e.jsx(ie,{variant:"text",width:"100%"}),e.jsx(ie,{variant:"text",width:"80%"}),e.jsx(ie,{variant:"rectangular",height:60,sx:{mt:2,borderRadius:1}})]})},O))}):y||d.length===0&&!x?e.jsx(Hp,{}):e.jsxs(e.Fragment,{children:[e.jsxs(o,{sx:{mb:3,p:3,display:"flex",flexDirection:{xs:"column",sm:"row"},justifyContent:"space-between",alignItems:"center",background:`linear-gradient(135deg, ${E(C.palette.secondary.main,.1)} 0%, ${E(C.palette.secondary.main,.05)} 100%)`,borderRadius:2,border:`1px solid ${E(C.palette.secondary.main,.3)}`},children:[e.jsxs(a,{variant:"h6",fontWeight:"bold",sx:{color:C.palette.text.primary,mb:{xs:1,sm:0}},children:["📊 Showing ",d.length," job",d.length!==1?"s":""]}),e.jsxs(a,{variant:"body2",sx:{color:C.palette.text.secondary},children:["Page ",i||1," of ",c||1]})]}),e.jsx(h,{container:!0,spacing:0,children:d.map(_=>e.jsx(h,{item:!0,xs:12,children:e.jsx(kl,{job:_,onViewDetails:O=>r(`/jobs/${O}`),onToggleSave:K})},_.id))})]}),!x&&!y&&c>1&&e.jsx(o,{sx:{display:"flex",justifyContent:"center",mt:6},children:e.jsx(Gt,{count:c,page:i||1,onChange:w,color:"primary",size:A?"small":"large",sx:{"& .MuiPaginationItem-root":{borderRadius:2,fontWeight:"bold"},"& .MuiPaginationItem-page.Mui-selected":{backgroundColor:C.palette.secondary.main,color:C.palette.secondary.contrastText}}})})]})})};he("input")({display:"none"});const Vp=he(we)(({theme:t})=>({width:200,height:200,border:`6px solid ${t.palette.background.paper}`,boxShadow:t.shadows[20],margin:"auto",backgroundColor:t.palette.primary.main,fontSize:"4rem",fontWeight:700,background:`linear-gradient(135deg, ${t.palette.primary.main}, ${t.palette.secondary.main})`})),es=he(me)(({theme:t})=>({background:E(t.palette.background.paper,.9),backdropFilter:"blur(20px)",border:`1px solid ${E(t.palette.divider,.1)}`,borderRadius:16,transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)","&:hover":{transform:"translateY(-4px)",boxShadow:t.shadows[20],background:E(t.palette.background.paper,.95)}})),qp=he(ee)(({theme:t})=>({background:`linear-gradient(135deg, ${t.palette.primary.main}, ${t.palette.secondary.main})`,color:t.palette.primary.contrastText,fontWeight:600,"&:hover":{transform:"scale(1.05)",boxShadow:t.shadows[8]},transition:"all 0.2s ease-in-out"})),ga=he(me)(({theme:t})=>({background:`linear-gradient(135deg, ${E(t.palette.primary.main,.1)}, ${E(t.palette.secondary.main,.1)})`,border:`1px solid ${E(t.palette.primary.main,.2)}`,borderRadius:16,textAlign:"center",padding:t.spacing(2),transition:"all 0.3s ease-in-out","&:hover":{transform:"translateY(-2px)",boxShadow:t.shadows[12]}})),Qi=he(P)(({theme:t})=>({borderRadius:25,padding:"12px 24px",fontWeight:600,textTransform:"none",transition:"all 0.3s ease-in-out",background:`linear-gradient(135deg, ${t.palette.primary.main}, ${t.palette.secondary.main})`,"&:hover":{transform:"translateY(-2px)",boxShadow:t.shadows[12]}}));function Yp(){var qe,at,xt,kt,er,hr;const{user:t}=ut(),{workerId:r}=Cr(),s=Oe(),n=ve(),i=Te(n.breakpoints.down("md"));Te(n.breakpoints.down("lg"));const[c,d]=l.useState(null),[x,m]=l.useState([]),[u,v]=l.useState([]),[y,g]=l.useState([]),[j,b]=l.useState([]),[C,A]=l.useState([]),[w,p]=l.useState(null),[k,U]=l.useState({}),[W,R]=l.useState(!0),[K,_]=l.useState(null),[O,T]=l.useState(0);l.useState(null);const[H,F]=l.useState(!1);l.useState(!1);const[V,re]=l.useState(!1),[z,J]=l.useState(null),f=(t==null?void 0:t.userId)===r,M=l.useCallback(async()=>{R(!0),_(null);try{const X=await Ht.getWorkerById(r);d(X.data);const[oe,le,Re,_e,it,bt,ht]=await Promise.all([Ht.getWorkerSkills(r),Ht.getWorkerPortfolio(r),Ht.getWorkerCertificates(r),Ht.getWorkerReviews(r),Ht.getWorkHistory(r),Ht.getWorkerAvailability(r),Ht.getWorkerStats(r)]);m(oe.data||[]),v(le.data||[]),g(Re.data||[]),b(_e.data||[]),A(it.data||[]),p(bt.data||null),U(ht.data||{})}catch(X){_("Failed to load profile data. The worker may not exist or there was a network error."),console.error(X)}finally{R(!1)}},[r]);l.useEffect(()=>{r&&M()},[r,M]);const G=(X,oe)=>{T(oe)},I=()=>{if(!t){s("/login");return}s(`/messages?recipient=${r}`)},L=()=>{F(!H)},S=async()=>{var X,oe;if(navigator.share)try{await navigator.share({title:`${(X=c==null?void 0:c.user)==null?void 0:X.firstName} ${(oe=c==null?void 0:c.user)==null?void 0:oe.lastName} - ${c==null?void 0:c.profession}`,text:`Check out this skilled ${c==null?void 0:c.profession} on Kelmah`,url:window.location.href})}catch(le){console.log("Error sharing:",le)}else navigator.clipboard.writeText(window.location.href)};if(W)return e.jsxs(ye,{maxWidth:"lg",sx:{py:4},children:[e.jsxs(o,{sx:{textAlign:"center",mb:4},children:[e.jsx(ie,{variant:"circular",width:200,height:200,sx:{mx:"auto",mb:2}}),e.jsx(ie,{variant:"text",width:300,height:40,sx:{mx:"auto",mb:1}}),e.jsx(ie,{variant:"text",width:200,height:30,sx:{mx:"auto",mb:2}}),e.jsx(o,{sx:{display:"flex",justifyContent:"center",gap:1,mb:3},children:[...Array(3)].map((X,oe)=>e.jsx(ie,{variant:"rectangular",width:100,height:32,sx:{borderRadius:2}},oe))})]}),e.jsx(h,{container:!0,spacing:3,children:[...Array(6)].map((X,oe)=>e.jsx(h,{item:!0,xs:12,md:4,children:e.jsx(ie,{variant:"rectangular",height:200,sx:{borderRadius:2}})},oe))})]});if(K)return e.jsx(ye,{maxWidth:"lg",sx:{py:4},children:e.jsx(be,{severity:"error",sx:{borderRadius:2},children:K})});if(!c)return e.jsx(ye,{maxWidth:"lg",sx:{py:4},children:e.jsx(be,{severity:"info",sx:{borderRadius:2},children:"Worker profile not found."})});const B=()=>{var X,oe,le,Re,_e,it,bt,ht,Ut;return e.jsx(ge.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6},children:e.jsxs(es,{sx:{mb:4,overflow:"visible",position:"relative"},children:[e.jsx(o,{sx:{background:`linear-gradient(135deg, ${n.palette.primary.main}, ${n.palette.secondary.main})`,height:200,position:"relative",borderRadius:"16px 16px 0 0"},children:e.jsxs(o,{sx:{position:"absolute",top:16,right:16,display:"flex",gap:1},children:[e.jsx(ne,{onClick:L,sx:{bgcolor:E(n.palette.background.paper,.9),"&:hover":{bgcolor:n.palette.background.paper}},children:H?e.jsx(Kt,{color:"primary"}):e.jsx(or,{})}),e.jsx(ne,{onClick:S,sx:{bgcolor:E(n.palette.background.paper,.9),"&:hover":{bgcolor:n.palette.background.paper}},children:e.jsx(ls,{})}),f&&e.jsx(ne,{onClick:()=>s("/worker/profile/edit"),sx:{bgcolor:E(n.palette.background.paper,.9),"&:hover":{bgcolor:n.palette.background.paper}},children:e.jsx(ur,{})})]})}),e.jsx(ce,{sx:{pt:0,pb:4},children:e.jsxs(o,{sx:{textAlign:"center",mt:-10},children:[e.jsx(mt,{overlap:"circular",anchorOrigin:{vertical:"bottom",horizontal:"right"},badgeContent:c.is_verified?e.jsx(xe,{title:"Verified Professional",children:e.jsx(xr,{sx:{width:40,height:40,color:n.palette.success.main,bgcolor:n.palette.background.paper,borderRadius:"50%",p:.5}})}):null,children:e.jsxs(Vp,{src:c.profile_picture,alt:`${(X=c.user)==null?void 0:X.firstName} ${(oe=c.user)==null?void 0:oe.lastName}`,children:[(Re=(le=c.user)==null?void 0:le.firstName)==null?void 0:Re.charAt(0),(it=(_e=c.user)==null?void 0:_e.lastName)==null?void 0:it.charAt(0)]})}),e.jsxs(a,{variant:"h3",fontWeight:700,sx:{mt:2,mb:1,color:n.palette.text.primary},children:[(bt=c.user)==null?void 0:bt.firstName," ",(ht=c.user)==null?void 0:ht.lastName,c.is_online&&e.jsx(ee,{label:"Online",size:"small",color:"success",sx:{ml:2,fontWeight:600}})]}),e.jsx(a,{variant:"h5",color:"primary",gutterBottom:!0,fontWeight:600,sx:{mb:2},children:c.profession}),e.jsx(te,{direction:"row",alignItems:"center",justifyContent:"center",spacing:2,sx:{mb:3},children:e.jsxs(o,{sx:{display:"flex",alignItems:"center",gap:1},children:[e.jsx(Qe,{value:c.average_rating||0,precision:.1,readOnly:!0,size:"large"}),e.jsx(a,{variant:"h6",fontWeight:600,children:((Ut=c.average_rating)==null?void 0:Ut.toFixed(1))||"0.0"}),e.jsxs(a,{variant:"body1",color:"text.secondary",children:["(",j.length," reviews)"]})]})}),e.jsx(a,{variant:"body1",color:"text.secondary",sx:{maxWidth:600,mx:"auto",mb:4,lineHeight:1.8,fontSize:"1.1rem"},children:c.bio||"Professional craftsperson dedicated to delivering quality work."}),e.jsxs(te,{direction:{xs:"column",sm:"row"},spacing:2,justifyContent:"center",sx:{mb:4},children:[e.jsx(Qi,{variant:"contained",size:"large",startIcon:e.jsx(Ot,{}),onClick:I,disabled:f,children:"Message Worker"}),!f&&e.jsx(Qi,{variant:"outlined",size:"large",startIcon:e.jsx(_s,{}),onClick:()=>s(`/contracts/create?workerId=${r}`),children:"Hire Now"})]})]})})]})})},D=()=>e.jsx(ge.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6,delay:.2},children:e.jsxs(h,{container:!0,spacing:3,sx:{mb:4},children:[e.jsx(h,{item:!0,xs:6,md:3,children:e.jsxs(ga,{children:[e.jsx(tt,{color:"primary",sx:{fontSize:40,mb:1}}),e.jsx(a,{variant:"h4",fontWeight:700,color:"primary",children:c.experience_years||0}),e.jsx(a,{variant:"body2",color:"text.secondary",children:"Years Experience"})]})}),e.jsx(h,{item:!0,xs:6,md:3,children:e.jsxs(ga,{children:[e.jsx(bo,{color:"primary",sx:{fontSize:40,mb:1}}),e.jsx(a,{variant:"h4",fontWeight:700,color:"primary",children:k.jobs_completed||0}),e.jsx(a,{variant:"body2",color:"text.secondary",children:"Jobs Completed"})]})}),e.jsx(h,{item:!0,xs:6,md:3,children:e.jsxs(ga,{children:[e.jsx(Ld,{color:"primary",sx:{fontSize:40,mb:1}}),e.jsxs(a,{variant:"h4",fontWeight:700,color:"primary",children:["$",c.hourly_rate||0]}),e.jsx(a,{variant:"body2",color:"text.secondary",children:"Per Hour"})]})}),e.jsx(h,{item:!0,xs:6,md:3,children:e.jsxs(ga,{children:[e.jsx(cr,{color:"primary",sx:{fontSize:40,mb:1}}),e.jsxs(a,{variant:"h4",fontWeight:700,color:"primary",children:[((k.jobs_completed||0)/Math.max((k.jobs_completed||0)+(k.jobs_cancelled||0),1)*100).toFixed(0),"%"]}),e.jsx(a,{variant:"body2",color:"text.secondary",children:"Success Rate"})]})})]})}),N=()=>{var X;return e.jsx(es,{sx:{mb:4},children:e.jsxs(ce,{children:[e.jsxs(a,{variant:"h5",fontWeight:700,gutterBottom:!0,sx:{display:"flex",alignItems:"center",gap:1},children:[e.jsx(Va,{color:"primary"}),"Skills & Expertise"]}),e.jsxs(h,{container:!0,spacing:3,children:[e.jsxs(h,{item:!0,xs:12,md:8,children:[e.jsx(a,{variant:"h6",gutterBottom:!0,children:"Primary Skills"}),e.jsx(o,{sx:{display:"flex",flexWrap:"wrap",gap:1,mb:3},children:x.slice(0,8).map((oe,le)=>e.jsx(qp,{label:oe.name,size:"medium"},le))}),e.jsx(a,{variant:"h6",gutterBottom:!0,children:"Specializations"}),e.jsx(o,{sx:{display:"flex",flexWrap:"wrap",gap:1},children:((X=c.specializations)==null?void 0:X.map((oe,le)=>e.jsx(ee,{label:oe,variant:"outlined",color:"primary"},le)))||[e.jsx(ee,{label:"General Construction",variant:"outlined",color:"primary"},"general"),e.jsx(ee,{label:"Residential Work",variant:"outlined",color:"primary"},"residential")]})]}),e.jsxs(h,{item:!0,xs:12,md:4,children:[e.jsx(a,{variant:"h6",gutterBottom:!0,children:"Tools & Equipment"}),e.jsx(Ke,{dense:!0,children:(c.tools||["Power Tools","Hand Tools","Safety Equipment","Measuring Tools"]).map((oe,le)=>e.jsx(Be,{children:e.jsx(Ie,{primary:oe})},le))})]})]})]})})},q=()=>e.jsx(es,{sx:{mb:4},children:e.jsxs(ce,{children:[e.jsxs(a,{variant:"h5",fontWeight:700,gutterBottom:!0,sx:{display:"flex",alignItems:"center",gap:1},children:[e.jsx(Et,{color:"primary"}),"Portfolio & Previous Work"]}),u.length>0?e.jsx(h,{container:!0,spacing:2,children:u.map((X,oe)=>e.jsx(h,{item:!0,xs:12,sm:6,md:4,children:e.jsxs(me,{sx:{cursor:"pointer",transition:"all 0.3s ease","&:hover":{transform:"translateY(-4px)",boxShadow:n.shadows[12]}},onClick:()=>{J(X),re(!0)},children:[e.jsx(CardMedia,{component:"img",height:"200",image:X.image||"/api/placeholder/400/300",alt:X.title}),e.jsxs(ce,{children:[e.jsx(a,{variant:"h6",fontWeight:600,children:X.title}),e.jsx(a,{variant:"body2",color:"text.secondary",children:X.description})]})]})},oe))}):e.jsxs(o,{sx:{textAlign:"center",py:4},children:[e.jsx(Et,{sx:{fontSize:64,color:"text.secondary",mb:2}}),e.jsx(a,{variant:"h6",color:"text.secondary",children:"No portfolio items available yet"}),e.jsx(a,{variant:"body2",color:"text.secondary",children:"Check back later to see this worker's completed projects"})]})]})}),$=()=>e.jsx(es,{sx:{mb:4},children:e.jsxs(ce,{children:[e.jsxs(a,{variant:"h5",fontWeight:700,gutterBottom:!0,sx:{display:"flex",alignItems:"center",gap:1},children:[e.jsx(rt,{color:"primary"}),"Client Reviews"]}),j.length>0?e.jsx(Ke,{children:j.slice(0,5).map((X,oe)=>{var le;return e.jsxs(Rt.Fragment,{children:[e.jsxs(Be,{alignItems:"flex-start",children:[e.jsx(Vs,{children:e.jsx(we,{children:((le=X.client_name)==null?void 0:le.charAt(0))||"C"})}),e.jsx(Ie,{primary:e.jsxs(o,{sx:{display:"flex",alignItems:"center",gap:1,mb:1},children:[e.jsx(a,{variant:"subtitle1",fontWeight:600,children:X.client_name||"Anonymous Client"}),e.jsx(Qe,{value:X.rating,size:"small",readOnly:!0})]}),secondary:e.jsxs(e.Fragment,{children:[e.jsx(a,{variant:"body2",sx:{mb:1},children:X.comment}),e.jsx(a,{variant:"caption",color:"text.secondary",children:new Date(X.created_at).toLocaleDateString()})]})})]}),oe<j.length-1&&e.jsx(fe,{variant:"inset",component:"li"})]},oe)})}):e.jsxs(o,{sx:{textAlign:"center",py:4},children:[e.jsx(rt,{sx:{fontSize:64,color:"text.secondary",mb:2}}),e.jsx(a,{variant:"h6",color:"text.secondary",children:"No reviews yet"}),e.jsx(a,{variant:"body2",color:"text.secondary",children:"Be the first to work with this professional and leave a review"})]})]})}),de=()=>e.jsx(es,{sx:{mb:4},children:e.jsxs(ce,{children:[e.jsxs(a,{variant:"h5",fontWeight:700,gutterBottom:!0,sx:{display:"flex",alignItems:"center",gap:1},children:[e.jsx(Tt,{color:"primary"}),"Availability"]}),e.jsxs(h,{container:!0,spacing:3,children:[e.jsxs(h,{item:!0,xs:12,md:6,children:[e.jsx(a,{variant:"h6",gutterBottom:!0,children:"Current Status"}),e.jsx(ee,{label:(w==null?void 0:w.status)||"Available",color:(w==null?void 0:w.status)==="Available"?"success":"warning",size:"large",sx:{mb:2}}),e.jsxs(a,{variant:"body1",gutterBottom:!0,children:[e.jsx("strong",{children:"Response Time:"})," ",(w==null?void 0:w.response_time)||"Within 2 hours"]}),e.jsxs(a,{variant:"body1",children:[e.jsx("strong",{children:"Next Available:"})," ",(w==null?void 0:w.next_available)||"Immediately"]})]}),e.jsxs(h,{item:!0,xs:12,md:6,children:[e.jsx(a,{variant:"h6",gutterBottom:!0,children:"Working Hours"}),e.jsx(Ke,{dense:!0,children:((w==null?void 0:w.working_hours)||["Monday: 8:00 AM - 6:00 PM","Tuesday: 8:00 AM - 6:00 PM","Wednesday: 8:00 AM - 6:00 PM","Thursday: 8:00 AM - 6:00 PM","Friday: 8:00 AM - 6:00 PM","Weekend: By appointment"]).map((X,oe)=>e.jsx(Be,{children:e.jsx(Ie,{primary:X})},oe))})]})]})]})}),Pe=()=>e.jsx(es,{sx:{mb:4},children:e.jsxs(ce,{children:[e.jsxs(a,{variant:"h5",fontWeight:700,gutterBottom:!0,sx:{display:"flex",alignItems:"center",gap:1},children:[e.jsx(Ls,{color:"primary"}),"Certifications & Credentials"]}),y.length>0?e.jsx(h,{container:!0,spacing:2,children:y.map((X,oe)=>e.jsx(h,{item:!0,xs:12,md:6,children:e.jsx(me,{variant:"outlined",sx:{p:2},children:e.jsxs(o,{sx:{display:"flex",alignItems:"center",gap:2},children:[e.jsx(we,{sx:{bgcolor:"primary.main"},children:e.jsx(za,{})}),e.jsxs(o,{sx:{flexGrow:1},children:[e.jsx(a,{variant:"h6",fontWeight:600,children:X.name}),e.jsx(a,{variant:"body2",color:"text.secondary",children:X.issuing_organization}),e.jsxs(a,{variant:"caption",color:"text.secondary",children:["Issued: ",new Date(X.issue_date).toLocaleDateString()]})]}),X.is_verified&&e.jsx(xr,{color:"success"})]})})},oe))}):e.jsxs(o,{sx:{textAlign:"center",py:4},children:[e.jsx(Ls,{sx:{fontSize:64,color:"text.secondary",mb:2}}),e.jsx(a,{variant:"h6",color:"text.secondary",children:"No certifications available"}),e.jsx(a,{variant:"body2",color:"text.secondary",children:"Professional may be working on obtaining certifications"})]})]})});return e.jsxs(e.Fragment,{children:[e.jsxs(Fr,{children:[e.jsx("title",{children:`${(qe=c.user)==null?void 0:qe.firstName} ${(at=c.user)==null?void 0:at.lastName} - ${c.profession} | Kelmah`}),e.jsx("meta",{name:"description",content:`Professional ${c.profession} available for hire. View portfolio, reviews, and contact ${(xt=c.user)==null?void 0:xt.firstName} for your next project.`})]}),e.jsxs(ye,{maxWidth:"lg",sx:{py:4},children:[e.jsxs(Ys,{sx:{mb:3},children:[e.jsxs(et,{color:"inherit",href:"/",onClick:()=>s("/"),children:[e.jsx(Ua,{sx:{mr:.5},fontSize:"inherit"}),"Home"]}),e.jsx(et,{color:"inherit",href:"/find-talents",onClick:()=>s("/find-talents"),children:"Find Talents"}),e.jsxs(a,{color:"text.primary",children:[(kt=c.user)==null?void 0:kt.firstName," ",(er=c.user)==null?void 0:er.lastName]})]}),B(),D(),e.jsx(o,{sx:{borderBottom:1,borderColor:"divider",mb:3},children:e.jsxs($t,{value:O,onChange:G,variant:i?"scrollable":"fullWidth",scrollButtons:"auto",children:[e.jsx(Ce,{label:"Overview"}),e.jsx(Ce,{label:"Portfolio"}),e.jsx(Ce,{label:"Reviews"}),e.jsx(Ce,{label:"Availability"}),e.jsx(Ce,{label:"Certifications"})]})}),e.jsx(Bt,{mode:"wait",children:e.jsxs(ge.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},transition:{duration:.3},children:[O===0&&e.jsxs(e.Fragment,{children:[N(),de()]}),O===1&&q(),O===2&&$(),O===3&&de(),O===4&&Pe()]},O)}),e.jsx(Dialog,{open:V,onClose:()=>re(!1),maxWidth:"md",fullWidth:!0,children:z&&e.jsxs(e.Fragment,{children:[e.jsx(DialogTitle,{children:e.jsxs(o,{sx:{display:"flex",alignItems:"center",justifyContent:"space-between"},children:[e.jsx(a,{variant:"h5",fontWeight:600,children:z.title}),e.jsx(ne,{onClick:()=>re(!1),children:e.jsx(vr,{})})]})}),e.jsxs(DialogContent,{children:[e.jsx(o,{sx:{mb:2},children:e.jsx("img",{src:z.image||"/api/placeholder/600/400",alt:z.title,style:{width:"100%",height:"auto",borderRadius:8}})}),e.jsx(a,{variant:"body1",sx:{mb:2},children:z.description}),e.jsx(o,{sx:{display:"flex",gap:1,flexWrap:"wrap"},children:(hr=z.technologies)==null?void 0:hr.map((X,oe)=>e.jsx(ee,{label:X,size:"small"},oe))})]})]})}),!f&&e.jsxs(Zn,{ariaLabel:"Worker Actions",sx:{position:"fixed",bottom:16,right:16},icon:e.jsx(ei,{}),children:[e.jsx(ir,{icon:e.jsx(Ot,{}),tooltipTitle:"Message Worker",onClick:I}),e.jsx(ir,{icon:e.jsx(_s,{}),tooltipTitle:"Hire Now",onClick:()=>s(`/contracts/create?workerId=${r}`)}),e.jsx(ir,{icon:e.jsx(ls,{}),tooltipTitle:"Share Profile",onClick:S})]})]})]})}const Kp=[e.jsx(De,{path:"/",element:e.jsx(Px,{})},"/"),e.jsx(De,{path:"/login",element:e.jsx(Eh,{})},"/login"),e.jsx(De,{path:"/register",element:e.jsx(zh,{})},"/register"),e.jsx(De,{path:"/jobs",element:e.jsx(Gp,{})},"/jobs"),e.jsx(De,{path:"/jobs/:id",element:e.jsx(Vh,{})},"/jobs/:id"),e.jsx(De,{path:"/profiles/user/:userId",element:e.jsx(qh,{})},"/profiles/user/:userId"),e.jsx(De,{path:"/find-talents",element:e.jsx(Cl,{})},"/find-talents"),e.jsx(De,{path:"/premium",element:e.jsx(zp,{})},"/premium"),e.jsx(De,{path:"/search/location",element:e.jsx(mh,{})},"/search/location"),e.jsx(De,{path:"/search",element:e.jsx(wh,{})},"/search"),e.jsx(De,{path:"/map",element:e.jsx(Dh,{})},"/map")],Xp=()=>{const{isAuthenticated:t,user:r,loading:s}=je(i=>i.auth),n=(i,c)=>(i==null?void 0:i.role)===c||(i==null?void 0:i.userType)===c||(i==null?void 0:i.userRole)===c;return e.jsxs(e.Fragment,{children:[e.jsx(De,{path:"/worker/dashboard",element:e.jsx(Ue,{isAllowed:t&&n(r,"worker"),redirectPath:"/login",loading:s,children:e.jsx(al,{})})}),e.jsx(De,{path:"/worker/skills",element:e.jsx(Ue,{isAllowed:t&&n(r,"worker"),redirectPath:"/login",loading:s,children:e.jsx(Jn,{})})}),e.jsx(De,{path:"/worker/skills/test/:testId",element:e.jsx(Ue,{isAllowed:t&&n(r,"worker"),redirectPath:"/login",loading:s,children:e.jsx(Jn,{})})}),e.jsx(De,{path:"/worker/applications",element:e.jsx(Ue,{isAllowed:t&&n(r,"worker"),redirectPath:"/login",loading:s,children:e.jsx(nh,{})})}),e.jsx(De,{path:"/worker/schedule",element:e.jsx(Ue,{isAllowed:t&&n(r,"worker"),redirectPath:"/login",loading:s,children:e.jsx(Cp,{})})}),e.jsx(De,{path:"/worker/reviews",element:e.jsx(Ue,{isAllowed:t&&n(r,"worker"),redirectPath:"/login",loading:s,children:e.jsx(Ep,{})})}),e.jsx(De,{path:"/worker/profile/edit",element:e.jsx(Ue,{isAllowed:t&&n(r,"worker"),redirectPath:"/login",loading:s,children:e.jsx(ih,{})})}),e.jsx(De,{path:"/worker/profile",element:e.jsx(Ue,{isAllowed:t&&n(r,"worker"),redirectPath:"/login",loading:s,children:e.jsx(Yp,{})})}),e.jsx(De,{path:"/worker/find-work",element:e.jsx(Ue,{isAllowed:t&&n(r,"worker"),redirectPath:"/login",loading:s,children:e.jsx(dh,{})})}),e.jsx(De,{path:"/worker/contracts",element:e.jsx(Ue,{isAllowed:t&&n(r,"worker"),redirectPath:"/login",loading:s,children:e.jsx(ml,{})})}),e.jsx(De,{path:"/worker/payment",element:e.jsx(Ue,{isAllowed:t&&n(r,"worker"),redirectPath:"/login",loading:s,children:e.jsx(bl,{})})}),e.jsx(De,{path:"/worker/wallet",element:e.jsx(Ue,{isAllowed:t&&n(r,"worker"),redirectPath:"/login",loading:s,children:e.jsx(jl,{})})})]})},Qp=()=>{const{isAuthenticated:t,user:r,loading:s}=je(i=>i.auth),n=(i,c)=>(i==null?void 0:i.role)===c||(i==null?void 0:i.userType)===c||(i==null?void 0:i.userRole)===c;return e.jsxs(e.Fragment,{children:[e.jsx(De,{path:"/hirer/dashboard",element:e.jsx(Ue,{isAllowed:t&&n(r,"hirer"),redirectPath:"/login",loading:s,children:e.jsx(ll,{})})}),e.jsx(De,{path:"/hirer/applications",element:e.jsx(Ue,{isAllowed:t&&n(r,"hirer"),redirectPath:"/login",loading:s,children:e.jsx(tp,{})})}),e.jsx(De,{path:"/hirer/jobs/post",element:e.jsx(Ue,{isAllowed:t&&n(r,"hirer"),redirectPath:"/login",loading:s,children:e.jsx(lp,{})})}),e.jsx(De,{path:"/hirer/jobs",element:e.jsx(Ue,{isAllowed:t&&n(r,"hirer"),redirectPath:"/login",loading:s,children:e.jsx(dp,{})})}),e.jsx(De,{path:"/hirer/find-talent",element:e.jsx(Ue,{isAllowed:t&&n(r,"hirer"),redirectPath:"/find-talents",loading:s,children:e.jsx(Cl,{})})})]})},Zp=()=>{const[t,r]=l.useState(""),[s,n]=l.useState(""),[i,c]=l.useState(""),d=async x=>{var m,u;x.preventDefault(),n(""),c("");try{const v=await Us.requestPasswordReset({email:t});n(v.message||"If that email exists, a reset link has been sent.")}catch(v){c(((u=(m=v.response)==null?void 0:m.data)==null?void 0:u.message)||v.message)}};return e.jsx(Xr,{children:e.jsxs(o,{component:"form",onSubmit:d,sx:{width:"100%",maxWidth:360},children:[e.jsx(a,{variant:"h5",gutterBottom:!0,children:"Forgot Password"}),s&&e.jsx(be,{severity:"success",sx:{mb:2},children:s}),i&&e.jsx(be,{severity:"error",sx:{mb:2},children:i}),e.jsx(Q,{label:"Email",type:"email",fullWidth:!0,required:!0,margin:"normal",value:t,onChange:x=>r(x.target.value)}),e.jsx(P,{type:"submit",variant:"contained",fullWidth:!0,sx:{mt:2},children:"Send Reset Link"}),e.jsx(o,{sx:{mt:2},children:e.jsxs(a,{variant:"body2",children:["Remembered your password? ",e.jsx(Fe,{to:"/login",children:"Login"})]})})]})})},em=()=>{const{token:t}=Cr(),[r,s]=l.useState(""),[n,i]=l.useState(""),[c,d]=l.useState(""),[x,m]=l.useState(""),u=async v=>{var y,g;if(v.preventDefault(),d(""),m(""),r!==n){m("Passwords do not match");return}try{const j=await Us.resetPassword({token:t,password:r});d(j.message||"Password reset successful. You can now login.")}catch(j){m(((g=(y=j.response)==null?void 0:y.data)==null?void 0:g.message)||j.message)}};return e.jsx(Xr,{children:e.jsxs(o,{component:"form",onSubmit:u,sx:{width:"100%",maxWidth:360},children:[e.jsx(a,{variant:"h5",gutterBottom:!0,children:"Reset Password"}),c&&e.jsx(be,{severity:"success",sx:{mb:2},children:c}),x&&e.jsx(be,{severity:"error",sx:{mb:2},children:x}),e.jsx(Q,{label:"New Password",type:"password",fullWidth:!0,required:!0,margin:"normal",value:r,onChange:v=>s(v.target.value)}),e.jsx(Q,{label:"Confirm Password",type:"password",fullWidth:!0,required:!0,margin:"normal",value:n,onChange:v=>i(v.target.value)}),e.jsx(P,{type:"submit",variant:"contained",fullWidth:!0,sx:{mt:2},children:"Reset Password"}),e.jsx(o,{sx:{mt:2},children:e.jsxs(a,{variant:"body2",children:["Remembered your password? ",e.jsx(Fe,{to:"/login",children:"Login"})]})})]})})},tm=()=>{const{token:t}=Cr(),[r,s]=l.useState("Verifying..."),[n,i]=l.useState(""),[c,d]=l.useState(""),[x,m]=l.useState(!1);l.useEffect(()=>{(async()=>{var y,g;try{const j=await Us.verifyEmail(t);s(j.message||"Email verified successfully. You can now login.")}catch(j){s(""),i(((g=(y=j.response)==null?void 0:y.data)==null?void 0:g.message)||j.message)}})()},[t]);const u=async v=>{var y,g;v.preventDefault();try{await Us.resendVerificationEmail({email:c}),m(!0)}catch(j){i(((g=(y=j.response)==null?void 0:y.data)==null?void 0:g.message)||j.message)}};return e.jsx(Xr,{children:e.jsxs(o,{sx:{width:"100%",maxWidth:360,textAlign:"center"},children:[r&&e.jsx(be,{severity:"success",sx:{mb:2},children:r}),n&&e.jsx(be,{severity:"error",sx:{mb:2},children:n}),n&&e.jsxs(e.Fragment,{children:[e.jsx(a,{variant:"body1",children:"Enter your email to resend verification link:"}),e.jsxs(o,{component:"form",onSubmit:u,sx:{mt:2},children:[e.jsx(Q,{label:"Email",type:"email",fullWidth:!0,required:!0,margin:"normal",value:c,onChange:v=>d(v.target.value)}),e.jsx(P,{type:"submit",variant:"contained",fullWidth:!0,sx:{mt:1},children:"Resend Link"})]}),x&&e.jsx(be,{severity:"success",sx:{mt:2},children:"Link sent! Check your email."})]}),e.jsx(o,{sx:{mt:3},children:e.jsxs(a,{variant:"body2",children:["Go to ",e.jsx(Fe,{to:"/login",children:"Login"})]})})]})})},rm=()=>{const[t,r]=l.useState(""),[s,n]=l.useState(""),[i,c]=l.useState(""),[d,x]=l.useState(""),[m,u]=l.useState(""),{mfaSetup:v,verifyTwoFactor:y}=ut();l.useEffect(()=>{(async()=>{var b,C;try{const A=await v();r(A.secret),n(A.qrCode)}catch(A){u(((C=(b=A.response)==null?void 0:b.data)==null?void 0:C.message)||A.message)}})()},[v]);const g=async j=>{var b,C;j.preventDefault(),u(""),x("");try{await y(i),x("Two-factor authentication enabled successfully.")}catch(A){u(((C=(b=A.response)==null?void 0:b.data)==null?void 0:C.message)||A.message)}};return e.jsx(Xr,{children:e.jsxs(o,{sx:{width:"100%",maxWidth:400,mx:"auto",textAlign:"center"},children:[e.jsx(a,{variant:"h5",gutterBottom:!0,children:"Setup Two-Factor Authentication"}),m&&e.jsx(be,{severity:"error",sx:{mb:2},children:m}),d&&e.jsx(be,{severity:"success",sx:{mb:2},children:d}),s?e.jsxs(e.Fragment,{children:[e.jsx(o,{component:"img",src:s,alt:"2FA QR Code",sx:{mb:2,maxWidth:"100%"}}),e.jsx(a,{variant:"body2",gutterBottom:!0,children:"Scan this QR code with your authenticator app, then enter the code below to verify."}),e.jsxs(o,{component:"form",onSubmit:g,sx:{mt:2},children:[e.jsx(Q,{label:"Authentication Code",fullWidth:!0,required:!0,value:i,onChange:j=>c(j.target.value),sx:{mb:2}}),e.jsx(P,{type:"submit",variant:"contained",children:"Enable 2FA"})]})]}):e.jsx(a,{children:"Loading two-factor setup..."})]})})};function sm(){const[t,r]=l.useState(()=>localStorage.getItem("themeMode")||"dark"),s=l.useCallback(()=>{const g=t==="dark"?"light":"dark";r(g),localStorage.setItem("themeMode",g)},[t]),n=t==="dark"?rs:px,i=ot(),c=Zt(),{isAuthenticated:d,user:x,loading:m}=je(g=>g.auth);l.useEffect(()=>{if(c.pathname==="/login"||c.pathname==="/register"){console.log("Auth check skipped on auth pages");return}(()=>{const j=localStorage.getItem(Nt);d?console.log("User already authenticated – skipping verifyAuth"):j?(console.log("Token found and no authenticated user – verifying auth state..."),i(fa())):console.log("No token found in storage")})()},[i,c.pathname]);const u=()=>x?x.role||x.userType||x.userRole||x.roles&&x.roles[0]:null,v=()=>{console.log("Dashboard route check - User:",x),console.log("Dashboard route check - Auth state:",d,m);const g=localStorage.getItem("user");if(g){const b=JSON.parse(g);console.log("User data from localStorage:",b)}if(m)return e.jsx(o,{sx:{display:"flex",justifyContent:"center",alignItems:"center",height:"80vh"},children:e.jsx(Ae,{})});if(!d)return console.log("User not authenticated, redirecting to login"),e.jsx(ts,{to:"/login"});const j=u();return console.log("Detected user role:",j),j==="worker"?(console.log("Worker role detected, redirecting to worker dashboard"),e.jsx(ts,{to:"/worker/dashboard"})):j==="hirer"?(console.log("Hirer role detected, redirecting to hirer dashboard"),e.jsx(ts,{to:"/hirer/dashboard"})):j==="admin"?(console.log("Admin role detected, redirecting to admin dashboard"),e.jsx(ts,{to:"/admin/dashboard"})):(console.log("No specific role detected, showing generic dashboard. Role:",j),x&&console.log("Available user properties:",Object.keys(x)),e.jsx(Zx,{}))},y=(g,j)=>(g==null?void 0:g.role)===j||(g==null?void 0:g.userType)===j||(g==null?void 0:g.userRole)===j;return e.jsxs(Fo,{theme:n,children:[e.jsx(Wo,{}),e.jsx(Ko,{children:e.jsx(Qo,{toggleTheme:s,mode:t,children:e.jsxs(Wl,{children:[Kp,e.jsx(De,{path:"/forgot-password",element:e.jsx(Zp,{})}),e.jsx(De,{path:"/reset-password/:token",element:e.jsx(em,{})}),e.jsx(De,{path:"/verify-email/:token",element:e.jsx(tm,{})}),e.jsx(De,{path:"/mfa/setup",element:e.jsx(Ue,{isAllowed:d,redirectPath:"/login",loading:m,children:e.jsx(rm,{})})}),e.jsx(De,{path:"/profile",element:e.jsx(Ue,{isAllowed:d,redirectPath:"/login",loading:m,children:e.jsx(Zh,{})})}),e.jsx(De,{path:"/settings",element:e.jsx(Ue,{isAllowed:d,redirectPath:"/login",loading:m,children:e.jsx(Ip,{})})}),e.jsx(De,{path:"/dashboard",element:v()}),e.jsxs(e.Fragment,{children:[Xp(),Qp()]}),e.jsx(De,{path:"/admin/skills",element:e.jsx(Ue,{isAllowed:d&&y(x,"admin"),redirectPath:"/login",loading:m,children:e.jsx(Jn,{})})}),e.jsx(De,{path:"/contracts",element:e.jsx(Ue,{isAllowed:d,redirectPath:"/login",loading:m,children:e.jsx(ml,{})})}),e.jsx(De,{path:"/contracts/create",element:e.jsx(Ue,{isAllowed:d,redirectPath:"/login",loading:m,children:e.jsx(op,{})})}),e.jsx(De,{path:"/contracts/:contractId",element:e.jsx(Ue,{isAllowed:d,redirectPath:"/login",loading:m,children:e.jsx(np,{})})}),e.jsx(De,{path:"/notifications",element:e.jsx(Ue,{isAllowed:d,redirectPath:"/login",loading:m,children:e.jsx(Rh,{})})}),e.jsx(De,{path:"/messages",element:e.jsx(Ue,{isAllowed:d,redirectPath:"/login",loading:m,children:e.jsx(Bh,{})})}),e.jsx(De,{path:"/worker/payment",element:e.jsx(Ue,{isAllowed:d&&y(x,"worker"),redirectPath:"/login",loading:m,children:e.jsx(bl,{})})}),e.jsx(De,{path:"/worker/wallet",element:e.jsx(Ue,{isAllowed:d&&y(x,"worker"),redirectPath:"/login",loading:m,children:e.jsx(jl,{})})}),e.jsx(De,{path:"/payment/methods",element:e.jsx(Ue,{isAllowed:d,redirectPath:"/login",loading:m,children:e.jsx(fp,{})})}),e.jsx(De,{path:"/escrows/:escrowId",element:e.jsx(Ue,{isAllowed:d&&y(x,"worker"),redirectPath:"/login",loading:m,children:e.jsx(Lp,{})})}),e.jsx(De,{path:"/payment/bill",element:e.jsx(Ue,{isAllowed:d,redirectPath:"/login",loading:m,children:e.jsx(jp,{})})}),e.jsx(De,{path:"*",element:e.jsx(ts,{to:"/",replace:!0})})]})})})]})}console.log("React version:",Rt.version);console.log("Store initialized:",!!di);const am=({error:t})=>e.jsxs("div",{style:{padding:24,backgroundColor:"#1A1A1A",color:"#FFD700",minHeight:"100vh"},children:[e.jsx("h2",{style:{color:"#FFD700",marginBottom:16},children:"Something went wrong."}),e.jsx("pre",{style:{color:"#FF5252",whiteSpace:"pre-wrap"},children:t.message})]}),nm=Yn({palette:{mode:"dark"}});Tl.createRoot(document.getElementById("root")).render(e.jsx(Rt.StrictMode,{children:e.jsxs(Fo,{theme:nm,children:[e.jsx(Wo,{}),e.jsx(El,{store:di,children:e.jsx(Ml,{children:e.jsx(Xl,{maxSnack:3,children:e.jsx(Jo,{children:e.jsx(Ho,{children:e.jsx(nx,{children:e.jsx(ax,{children:e.jsx(Ko,{children:e.jsx(zl,{FallbackComponent:am,children:e.jsx(sm,{})})})})})})})})})})]})}));
