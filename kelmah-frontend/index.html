<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <link rel="icon" type="image/svg+xml" href="/vite.svg" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Kelma</title>
    <link href="https://fonts.googleapis.com/css2?family=Righteous&display=swap" rel="stylesheet">
    <!-- Complete React module interception for Vercel -->
    <script>
      (function() {
        'use strict';
        
        // Create comprehensive React implementation
        const ReactImpl = {
          useState: function(initial) { 
            return [initial, function(newVal) { 
              if (typeof newVal === 'function') return newVal(initial);
              return newVal;
            }]; 
          },
          useEffect: function(effect, deps) { 
            if (typeof effect === 'function') {
              try { effect(); } catch(e) {}
            }
          },
          useContext: function(context) { return context ? context.defaultValue : null; },
          useReducer: function(reducer, initial) { 
            return [initial, function(action) { 
              try { return reducer(initial, action); } catch(e) { return initial; }
            }]; 
          },
          useCallback: function(fn, deps) { return fn; },
          useMemo: function(fn, deps) { 
            try { return fn(); } catch(e) { return null; }
          },
          useRef: function(initial) { return { current: initial }; },
          useImperativeHandle: function() {},
          useLayoutEffect: function(effect, deps) {
            if (typeof effect === 'function') {
              try { effect(); } catch(e) {}
            }
          },
          useDebugValue: function() {},
          useSyncExternalStore: function(subscribe, getSnapshot, getServerSnapshot) { 
            try {
              return getSnapshot ? getSnapshot() : (getServerSnapshot ? getServerSnapshot() : null);
            } catch(e) { return null; }
          },
          createElement: function(type, props, ...children) { 
            return { type, props: props || {}, children };
          },
          Fragment: function(props) { return props.children; },
          Component: function() {},
          PureComponent: function() {},
          memo: function(component) { return component; },
          forwardRef: function(render) { return render; },
          createContext: function(defaultValue) { 
            return { 
              Provider: function(props) { return props.children; },
              Consumer: function(props) { return props.children(defaultValue); },
              defaultValue: defaultValue
            };
          },
          lazy: function(fn) { return fn; },
          Suspense: function(props) { return props.children; },
          version: '18.3.1-vercel-fix'
        };

        // Set in all global scopes
        if (typeof window !== 'undefined') {
          window.React = ReactImpl;
          window.__REACT_DEVTOOLS_GLOBAL_HOOK__ = { isDisabled: true };
        }
        
        if (typeof global !== 'undefined') {
          global.React = ReactImpl;
        }
        
        if (typeof globalThis !== 'undefined') {
          globalThis.React = ReactImpl;
        }

        // Intercept dynamic imports
        const originalImport = window.__vitePreload || window.import;
        if (originalImport) {
          window.__vitePreload = function(...args) {
            const result = originalImport.apply(this, args);
            if (result && result.then) {
              return result.then(module => {
                if (module && !module.default && !module.React) {
                  module.React = ReactImpl;
                  module.default = ReactImpl;
                }
                return module;
              });
            }
            return result;
          };
        }

        // Create module cache
        window.__modules = window.__modules || {};
        window.__modules['react'] = ReactImpl;
        window.__modules['react/'] = ReactImpl;

        // Override any existing React
        Object.defineProperty(window, 'React', {
          value: ReactImpl,
          writable: false,
          configurable: false
        });

        console.log('Complete React implementation loaded for Vercel');
        console.log('React.useState available:', typeof ReactImpl.useState);
      })();
    </script>
  </head>
  <body>
    <div id="root"></div>
    <script type="module" src="/src/main.jsx"></script>
  </body>
</html>
